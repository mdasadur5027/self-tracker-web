(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Kc={exports:{}},ri={},Jc={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zn=Symbol.for("react.element"),Qh=Symbol.for("react.portal"),Kh=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),Yh=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Zh=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),tf=Symbol.for("react.suspense"),rf=Symbol.for("react.memo"),sf=Symbol.for("react.lazy"),pd=Symbol.iterator;function nf(e){return e===null||typeof e!="object"?null:(e=pd&&e[pd]||e["@@iterator"],typeof e=="function"?e:null)}var Yc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xc=Object.assign,Zc={};function Fs(e,t,r){this.props=e,this.context=t,this.refs=Zc,this.updater=r||Yc}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eu(){}eu.prototype=Fs.prototype;function fo(e,t,r){this.props=e,this.context=t,this.refs=Zc,this.updater=r||Yc}var go=fo.prototype=new eu;go.constructor=fo;Xc(go,Fs.prototype);go.isPureReactComponent=!0;var yd=Array.isArray,tu=Object.prototype.hasOwnProperty,mo={current:null},ru={key:!0,ref:!0,__self:!0,__source:!0};function su(e,t,r){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)tu.call(t,n)&&!ru.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];a.children=d}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:zn,type:e,key:i,ref:l,props:a,_owner:mo.current}}function af(e,t){return{$$typeof:zn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xo(e){return typeof e=="object"&&e!==null&&e.$$typeof===zn}function lf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vd=/\/+/g;function Ei(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lf(""+e.key):t.toString(36)}function xa(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case zn:case Qh:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+Ei(l,0):n,yd(a)?(r="",e!=null&&(r=e.replace(vd,"$&/")+"/"),xa(a,t,r,"",function(c){return c})):a!=null&&(xo(a)&&(a=af(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(vd,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",yd(e))for(var o=0;o<e.length;o++){i=e[o];var d=n+Ei(i,o);l+=xa(i,t,r,d,a)}else if(d=nf(e),typeof d=="function")for(e=d.call(e),o=0;!(i=e.next()).done;)i=i.value,d=n+Ei(i,o++),l+=xa(i,t,r,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Vn(e,t,r){if(e==null)return e;var n=[],a=0;return xa(e,n,"","",function(i){return t.call(r,i,a++)}),n}function of(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},pa={transition:null},df={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:pa,ReactCurrentOwner:mo};function nu(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Vn,forEach:function(e,t,r){Vn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Vn(e,function(){t++}),t},toArray:function(e){return Vn(e,function(t){return t})||[]},only:function(e){if(!xo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=Fs;me.Fragment=Kh;me.Profiler=Yh;me.PureComponent=fo;me.StrictMode=Jh;me.Suspense=tf;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=df;me.act=nu;me.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Xc({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=mo.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)tu.call(t,d)&&!ru.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&o!==void 0?o[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:zn,type:e.type,key:a,ref:i,props:n,_owner:l}};me.createContext=function(e){return e={$$typeof:Zh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Xh,_context:e},e.Consumer=e};me.createElement=su;me.createFactory=function(e){var t=su.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:ef,render:e}};me.isValidElement=xo;me.lazy=function(e){return{$$typeof:sf,_payload:{_status:-1,_result:e},_init:of}};me.memo=function(e,t){return{$$typeof:rf,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=pa.transition;pa.transition={};try{e()}finally{pa.transition=t}};me.unstable_act=nu;me.useCallback=function(e,t){return rt.current.useCallback(e,t)};me.useContext=function(e){return rt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};me.useEffect=function(e,t){return rt.current.useEffect(e,t)};me.useId=function(){return rt.current.useId()};me.useImperativeHandle=function(e,t,r){return rt.current.useImperativeHandle(e,t,r)};me.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return rt.current.useMemo(e,t)};me.useReducer=function(e,t,r){return rt.current.useReducer(e,t,r)};me.useRef=function(e){return rt.current.useRef(e)};me.useState=function(e){return rt.current.useState(e)};me.useSyncExternalStore=function(e,t,r){return rt.current.useSyncExternalStore(e,t,r)};me.useTransition=function(){return rt.current.useTransition()};me.version="18.3.1";Jc.exports=me;var S=Jc.exports;const po=Wh(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cf=S,uf=Symbol.for("react.element"),hf=Symbol.for("react.fragment"),ff=Object.prototype.hasOwnProperty,gf=cf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mf={key:!0,ref:!0,__self:!0,__source:!0};function au(e,t,r){var n,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)ff.call(t,n)&&!mf.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:uf,type:e,key:i,ref:l,props:a,_owner:gf.current}}ri.Fragment=hf;ri.jsx=au;ri.jsxs=au;Kc.exports=ri;var s=Kc.exports,ol={},iu={exports:{}},vt={},lu={exports:{}},ou={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(v,I){var F=v.length;v.push(I);e:for(;0<F;){var Y=F-1>>>1,J=v[Y];if(0<a(J,I))v[Y]=I,v[F]=J,F=Y;else break e}}function r(v){return v.length===0?null:v[0]}function n(v){if(v.length===0)return null;var I=v[0],F=v.pop();if(F!==I){v[0]=F;e:for(var Y=0,J=v.length,se=J>>>1;Y<se;){var z=2*(Y+1)-1,ue=v[z],P=z+1,X=v[P];if(0>a(ue,F))P<J&&0>a(X,ue)?(v[Y]=X,v[P]=F,Y=P):(v[Y]=ue,v[z]=F,Y=z);else if(P<J&&0>a(X,F))v[Y]=X,v[P]=F,Y=P;else break e}}return I}function a(v,I){var F=v.sortIndex-I.sortIndex;return F!==0?F:v.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],c=[],u=1,h=null,p=3,x=!1,k=!1,m=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(v){for(var I=r(c);I!==null;){if(I.callback===null)n(c);else if(I.startTime<=v)n(c),I.sortIndex=I.expirationTime,t(d,I);else break;I=r(c)}}function b(v){if(m=!1,f(v),!k)if(r(d)!==null)k=!0,N(T);else{var I=r(c);I!==null&&$(b,I.startTime-v)}}function T(v,I){k=!1,m&&(m=!1,y(L),L=-1),x=!0;var F=p;try{for(f(I),h=r(d);h!==null&&(!(h.expirationTime>I)||v&&!V());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var J=Y(h.expirationTime<=I);I=e.unstable_now(),typeof J=="function"?h.callback=J:h===r(d)&&n(d),f(I)}else n(d);h=r(d)}if(h!==null)var se=!0;else{var z=r(c);z!==null&&$(b,z.startTime-I),se=!1}return se}finally{h=null,p=F,x=!1}}var w=!1,C=null,L=-1,Q=5,O=-1;function V(){return!(e.unstable_now()-O<Q)}function ee(){if(C!==null){var v=e.unstable_now();O=v;var I=!0;try{I=C(!0,v)}finally{I?A():(w=!1,C=null)}}else w=!1}var A;if(typeof g=="function")A=function(){g(ee)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,G=K.port2;K.port1.onmessage=ee,A=function(){G.postMessage(null)}}else A=function(){E(ee,0)};function N(v){C=v,w||(w=!0,A())}function $(v,I){L=E(function(){v(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(v){v.callback=null},e.unstable_continueExecution=function(){k||x||(k=!0,N(T))},e.unstable_forceFrameRate=function(v){0>v||125<v?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<v?Math.floor(1e3/v):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(v){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var F=p;p=I;try{return v()}finally{p=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(v,I){switch(v){case 1:case 2:case 3:case 4:case 5:break;default:v=3}var F=p;p=v;try{return I()}finally{p=F}},e.unstable_scheduleCallback=function(v,I,F){var Y=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,v){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=F+J,v={id:u++,callback:I,priorityLevel:v,startTime:F,expirationTime:J,sortIndex:-1},F>Y?(v.sortIndex=F,t(c,v),r(d)===null&&v===r(c)&&(m?(y(L),L=-1):m=!0,$(b,F-Y))):(v.sortIndex=J,t(d,v),k||x||(k=!0,N(T))),v},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(v){var I=p;return function(){var F=p;p=I;try{return v.apply(this,arguments)}finally{p=F}}}})(ou);lu.exports=ou;var xf=lu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf=S,yt=xf;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var du=new Set,bn={};function es(e,t){As(e,t),As(e+"Capture",t)}function As(e,t){for(bn[e]=t,e=0;e<t.length;e++)du.add(t[e])}var Xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dl=Object.prototype.hasOwnProperty,yf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wd={},bd={};function vf(e){return dl.call(bd,e)?!0:dl.call(wd,e)?!1:yf.test(e)?bd[e]=!0:(wd[e]=!0,!1)}function wf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bf(e,t,r,n){if(t===null||typeof t>"u"||wf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function st(e,t,r,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ve[e]=new st(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ve[t]=new st(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ve[e]=new st(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ve[e]=new st(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ve[e]=new st(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ve[e]=new st(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ve[e]=new st(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ve[e]=new st(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ve[e]=new st(e,5,!1,e.toLowerCase(),null,!1,!1)});var yo=/[\-:]([a-z])/g;function vo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yo,vo);Ve[t]=new st(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yo,vo);Ve[t]=new st(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yo,vo);Ve[t]=new st(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ve[e]=new st(e,1,!1,e.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ve[e]=new st(e,1,!1,e.toLowerCase(),null,!0,!0)});function wo(e,t,r,n){var a=Ve.hasOwnProperty(t)?Ve[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bf(t,r,a,n)&&(r=null),n||a===null?vf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var rr=pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qn=Symbol.for("react.element"),hs=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),bo=Symbol.for("react.strict_mode"),cl=Symbol.for("react.profiler"),cu=Symbol.for("react.provider"),uu=Symbol.for("react.context"),ko=Symbol.for("react.forward_ref"),ul=Symbol.for("react.suspense"),hl=Symbol.for("react.suspense_list"),jo=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),hu=Symbol.for("react.offscreen"),kd=Symbol.iterator;function Ws(e){return e===null||typeof e!="object"?null:(e=kd&&e[kd]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,Ti;function rn(e){if(Ti===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ti=t&&t[1]||""}return`
`+Ti+e}var Pi=!1;function Di(e,t){if(!e||Pi)return"";Pi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=o);break}}}finally{Pi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?rn(e):""}function kf(e){switch(e.tag){case 5:return rn(e.type);case 16:return rn("Lazy");case 13:return rn("Suspense");case 19:return rn("SuspenseList");case 0:case 2:case 15:return e=Di(e.type,!1),e;case 11:return e=Di(e.type.render,!1),e;case 1:return e=Di(e.type,!0),e;default:return""}}function fl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fs:return"Fragment";case hs:return"Portal";case cl:return"Profiler";case bo:return"StrictMode";case ul:return"Suspense";case hl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uu:return(e.displayName||"Context")+".Consumer";case cu:return(e._context.displayName||"Context")+".Provider";case ko:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jo:return t=e.displayName||null,t!==null?t:fl(e.type)||"Memo";case dr:t=e._payload,e=e._init;try{return fl(e(t))}catch{}}return null}function jf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fl(t);case 8:return t===bo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nf(e){var t=fu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kn(e){e._valueTracker||(e._valueTracker=Nf(e))}function gu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=fu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ea(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gl(e,t){var r=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function jd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Sr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mu(e,t){t=t.checked,t!=null&&wo(e,"checked",t,!1)}function ml(e,t){mu(e,t);var r=Sr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xl(e,t.type,r):t.hasOwnProperty("defaultValue")&&xl(e,t.type,Sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xl(e,t,r){(t!=="number"||Ea(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var sn=Array.isArray;function _s(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Sr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function pl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _d(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(B(92));if(sn(r)){if(1<r.length)throw Error(B(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Sr(r)}}function xu(e,t){var r=Sr(t.value),n=Sr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Sd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jn,yu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jn=Jn||document.createElement("div"),Jn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function kn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var on={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_f=["Webkit","ms","Moz","O"];Object.keys(on).forEach(function(e){_f.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),on[t]=on[e]})});function vu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||on.hasOwnProperty(e)&&on[e]?(""+t).trim():t+"px"}function wu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=vu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Sf=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vl(e,t){if(t){if(Sf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function wl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bl=null;function No(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kl=null,Ss=null,Cs=null;function Cd(e){if(e=qn(e)){if(typeof kl!="function")throw Error(B(280));var t=e.stateNode;t&&(t=li(t),kl(e.stateNode,e.type,t))}}function bu(e){Ss?Cs?Cs.push(e):Cs=[e]:Ss=e}function ku(){if(Ss){var e=Ss,t=Cs;if(Cs=Ss=null,Cd(e),t)for(e=0;e<t.length;e++)Cd(t[e])}}function ju(e,t){return e(t)}function Nu(){}var Ai=!1;function _u(e,t,r){if(Ai)return e(t,r);Ai=!0;try{return ju(e,t,r)}finally{Ai=!1,(Ss!==null||Cs!==null)&&(Nu(),ku())}}function jn(e,t){var r=e.stateNode;if(r===null)return null;var n=li(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(B(231,t,typeof r));return r}var jl=!1;if(Xt)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){jl=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{jl=!1}function Cf(e,t,r,n,a,i,l,o,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var dn=!1,Ta=null,Pa=!1,Nl=null,Ef={onError:function(e){dn=!0,Ta=e}};function Tf(e,t,r,n,a,i,l,o,d){dn=!1,Ta=null,Cf.apply(Ef,arguments)}function Pf(e,t,r,n,a,i,l,o,d){if(Tf.apply(this,arguments),dn){if(dn){var c=Ta;dn=!1,Ta=null}else throw Error(B(198));Pa||(Pa=!0,Nl=c)}}function ts(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Su(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ed(e){if(ts(e)!==e)throw Error(B(188))}function Df(e){var t=e.alternate;if(!t){if(t=ts(e),t===null)throw Error(B(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Ed(a),e;if(i===n)return Ed(a),t;i=i.sibling}throw Error(B(188))}if(r.return!==n.return)r=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l)throw Error(B(189))}}if(r.alternate!==n)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?e:t}function Cu(e){return e=Df(e),e!==null?Eu(e):null}function Eu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Eu(e);if(t!==null)return t;e=e.sibling}return null}var Tu=yt.unstable_scheduleCallback,Td=yt.unstable_cancelCallback,Af=yt.unstable_shouldYield,Of=yt.unstable_requestPaint,Ie=yt.unstable_now,Mf=yt.unstable_getCurrentPriorityLevel,_o=yt.unstable_ImmediatePriority,Pu=yt.unstable_UserBlockingPriority,Da=yt.unstable_NormalPriority,Rf=yt.unstable_LowPriority,Du=yt.unstable_IdlePriority,si=null,Ft=null;function If(e){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(si,e,void 0,(e.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:zf,$f=Math.log,Lf=Math.LN2;function zf(e){return e>>>=0,e===0?32:31-($f(e)/Lf|0)|0}var Yn=64,Xn=4194304;function nn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Aa(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?n=nn(o):(i&=l,i!==0&&(n=nn(i)))}else l=r&~a,l!==0?n=nn(l):i!==0&&(n=nn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Rt(t),a=1<<r,n|=e[r],t&=~a;return n}function Uf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ff(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Rt(i),o=1<<l,d=a[l];d===-1?(!(o&r)||o&n)&&(a[l]=Uf(o,t)):d<=t&&(e.expiredLanes|=o),i&=~o}}function _l(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Au(){var e=Yn;return Yn<<=1,!(Yn&4194240)&&(Yn=64),e}function Oi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Un(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rt(t),e[t]=r}function qf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Rt(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function So(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Rt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ve=0;function Ou(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mu,Co,Ru,Iu,$u,Sl=!1,Zn=[],pr=null,yr=null,vr=null,Nn=new Map,_n=new Map,hr=[],Bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pd(e,t){switch(e){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Nn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(t.pointerId)}}function Qs(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=qn(t),t!==null&&Co(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Hf(e,t,r,n,a){switch(t){case"focusin":return pr=Qs(pr,e,t,r,n,a),!0;case"dragenter":return yr=Qs(yr,e,t,r,n,a),!0;case"mouseover":return vr=Qs(vr,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Nn.set(i,Qs(Nn.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,_n.set(i,Qs(_n.get(i)||null,e,t,r,n,a)),!0}return!1}function Lu(e){var t=Ur(e.target);if(t!==null){var r=ts(t);if(r!==null){if(t=r.tag,t===13){if(t=Su(r),t!==null){e.blockedOn=t,$u(e.priority,function(){Ru(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Cl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);bl=n,r.target.dispatchEvent(n),bl=null}else return t=qn(r),t!==null&&Co(t),e.blockedOn=r,!1;t.shift()}return!0}function Dd(e,t,r){ya(e)&&r.delete(t)}function Gf(){Sl=!1,pr!==null&&ya(pr)&&(pr=null),yr!==null&&ya(yr)&&(yr=null),vr!==null&&ya(vr)&&(vr=null),Nn.forEach(Dd),_n.forEach(Dd)}function Ks(e,t){e.blockedOn===t&&(e.blockedOn=null,Sl||(Sl=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,Gf)))}function Sn(e){function t(a){return Ks(a,e)}if(0<Zn.length){Ks(Zn[0],e);for(var r=1;r<Zn.length;r++){var n=Zn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(pr!==null&&Ks(pr,e),yr!==null&&Ks(yr,e),vr!==null&&Ks(vr,e),Nn.forEach(t),_n.forEach(t),r=0;r<hr.length;r++)n=hr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<hr.length&&(r=hr[0],r.blockedOn===null);)Lu(r),r.blockedOn===null&&hr.shift()}var Es=rr.ReactCurrentBatchConfig,Oa=!0;function Wf(e,t,r,n){var a=ve,i=Es.transition;Es.transition=null;try{ve=1,Eo(e,t,r,n)}finally{ve=a,Es.transition=i}}function Vf(e,t,r,n){var a=ve,i=Es.transition;Es.transition=null;try{ve=4,Eo(e,t,r,n)}finally{ve=a,Es.transition=i}}function Eo(e,t,r,n){if(Oa){var a=Cl(e,t,r,n);if(a===null)Bi(e,t,n,Ma,r),Pd(e,n);else if(Hf(a,e,t,r,n))n.stopPropagation();else if(Pd(e,n),t&4&&-1<Bf.indexOf(e)){for(;a!==null;){var i=qn(a);if(i!==null&&Mu(i),i=Cl(e,t,r,n),i===null&&Bi(e,t,n,Ma,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Bi(e,t,n,null,r)}}var Ma=null;function Cl(e,t,r,n){if(Ma=null,e=No(n),e=Ur(e),e!==null)if(t=ts(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Su(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ma=e,null}function zu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mf()){case _o:return 1;case Pu:return 4;case Da:case Rf:return 16;case Du:return 536870912;default:return 16}default:return 16}}var mr=null,To=null,va=null;function Uu(){if(va)return va;var e,t=To,r=t.length,n,a="value"in mr?mr.value:mr.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===a[i-n];n++);return va=a.slice(e,1<n?1-n:void 0)}function wa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ea(){return!0}function Ad(){return!1}function wt(e){function t(r,n,a,i,l){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ea:Ad,this.isPropagationStopped=Ad,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),t}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=wt(qs),Fn=Oe({},qs,{view:0,detail:0}),Qf=wt(Fn),Mi,Ri,Js,ni=Oe({},Fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Do,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Js&&(Js&&e.type==="mousemove"?(Mi=e.screenX-Js.screenX,Ri=e.screenY-Js.screenY):Ri=Mi=0,Js=e),Mi)},movementY:function(e){return"movementY"in e?e.movementY:Ri}}),Od=wt(ni),Kf=Oe({},ni,{dataTransfer:0}),Jf=wt(Kf),Yf=Oe({},Fn,{relatedTarget:0}),Ii=wt(Yf),Xf=Oe({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Zf=wt(Xf),eg=Oe({},qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tg=wt(eg),rg=Oe({},qs,{data:0}),Md=wt(rg),sg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ng={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ig(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ag[e])?!!t[e]:!1}function Do(){return ig}var lg=Oe({},Fn,{key:function(e){if(e.key){var t=sg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ng[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Do,charCode:function(e){return e.type==="keypress"?wa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),og=wt(lg),dg=Oe({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rd=wt(dg),cg=Oe({},Fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Do}),ug=wt(cg),hg=Oe({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),fg=wt(hg),gg=Oe({},ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mg=wt(gg),xg=[9,13,27,32],Ao=Xt&&"CompositionEvent"in window,cn=null;Xt&&"documentMode"in document&&(cn=document.documentMode);var pg=Xt&&"TextEvent"in window&&!cn,Fu=Xt&&(!Ao||cn&&8<cn&&11>=cn),Id=" ",$d=!1;function qu(e,t){switch(e){case"keyup":return xg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gs=!1;function yg(e,t){switch(e){case"compositionend":return Bu(t);case"keypress":return t.which!==32?null:($d=!0,Id);case"textInput":return e=t.data,e===Id&&$d?null:e;default:return null}}function vg(e,t){if(gs)return e==="compositionend"||!Ao&&qu(e,t)?(e=Uu(),va=To=mr=null,gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fu&&t.locale!=="ko"?null:t.data;default:return null}}var wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wg[e.type]:t==="textarea"}function Hu(e,t,r,n){bu(n),t=Ra(t,"onChange"),0<t.length&&(r=new Po("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var un=null,Cn=null;function bg(e){t0(e,0)}function ai(e){var t=ps(e);if(gu(t))return e}function kg(e,t){if(e==="change")return t}var Gu=!1;if(Xt){var $i;if(Xt){var Li="oninput"in document;if(!Li){var zd=document.createElement("div");zd.setAttribute("oninput","return;"),Li=typeof zd.oninput=="function"}$i=Li}else $i=!1;Gu=$i&&(!document.documentMode||9<document.documentMode)}function Ud(){un&&(un.detachEvent("onpropertychange",Wu),Cn=un=null)}function Wu(e){if(e.propertyName==="value"&&ai(Cn)){var t=[];Hu(t,Cn,e,No(e)),_u(bg,t)}}function jg(e,t,r){e==="focusin"?(Ud(),un=t,Cn=r,un.attachEvent("onpropertychange",Wu)):e==="focusout"&&Ud()}function Ng(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ai(Cn)}function _g(e,t){if(e==="click")return ai(t)}function Sg(e,t){if(e==="input"||e==="change")return ai(t)}function Cg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:Cg;function En(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!dl.call(t,a)||!$t(e[a],t[a]))return!1}return!0}function Fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qd(e,t){var r=Fd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fd(r)}}function Vu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qu(){for(var e=window,t=Ea();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ea(e.document)}return t}function Oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Eg(e){var t=Qu(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Vu(r.ownerDocument.documentElement,r)){if(n!==null&&Oo(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=qd(r,i);var l=qd(r,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Tg=Xt&&"documentMode"in document&&11>=document.documentMode,ms=null,El=null,hn=null,Tl=!1;function Bd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Tl||ms==null||ms!==Ea(n)||(n=ms,"selectionStart"in n&&Oo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hn&&En(hn,n)||(hn=n,n=Ra(El,"onSelect"),0<n.length&&(t=new Po("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ms)))}function ta(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xs={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionend:ta("Transition","TransitionEnd")},zi={},Ku={};Xt&&(Ku=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function ii(e){if(zi[e])return zi[e];if(!xs[e])return e;var t=xs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ku)return zi[e]=t[r];return e}var Ju=ii("animationend"),Yu=ii("animationiteration"),Xu=ii("animationstart"),Zu=ii("transitionend"),e0=new Map,Hd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){e0.set(e,t),es(t,[e])}for(var Ui=0;Ui<Hd.length;Ui++){var Fi=Hd[Ui],Pg=Fi.toLowerCase(),Dg=Fi[0].toUpperCase()+Fi.slice(1);Er(Pg,"on"+Dg)}Er(Ju,"onAnimationEnd");Er(Yu,"onAnimationIteration");Er(Xu,"onAnimationStart");Er("dblclick","onDoubleClick");Er("focusin","onFocus");Er("focusout","onBlur");Er(Zu,"onTransitionEnd");As("onMouseEnter",["mouseout","mouseover"]);As("onMouseLeave",["mouseout","mouseover"]);As("onPointerEnter",["pointerout","pointerover"]);As("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var an="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ag=new Set("cancel close invalid load scroll toggle".split(" ").concat(an));function Gd(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Pf(n,t,void 0,e),e.currentTarget=null}function t0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],d=o.instance,c=o.currentTarget;if(o=o.listener,d!==i&&a.isPropagationStopped())break e;Gd(a,o,c),i=d}else for(l=0;l<n.length;l++){if(o=n[l],d=o.instance,c=o.currentTarget,o=o.listener,d!==i&&a.isPropagationStopped())break e;Gd(a,o,c),i=d}}}if(Pa)throw e=Nl,Pa=!1,Nl=null,e}function Se(e,t){var r=t[Ml];r===void 0&&(r=t[Ml]=new Set);var n=e+"__bubble";r.has(n)||(r0(t,e,2,!1),r.add(n))}function qi(e,t,r){var n=0;t&&(n|=4),r0(r,e,n,t)}var ra="_reactListening"+Math.random().toString(36).slice(2);function Tn(e){if(!e[ra]){e[ra]=!0,du.forEach(function(r){r!=="selectionchange"&&(Ag.has(r)||qi(r,!1,e),qi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ra]||(t[ra]=!0,qi("selectionchange",!1,t))}}function r0(e,t,r,n){switch(zu(t)){case 1:var a=Wf;break;case 4:a=Vf;break;default:a=Eo}r=a.bind(null,t,r,e),a=void 0,!jl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Bi(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Ur(o),l===null)return;if(d=l.tag,d===5||d===6){n=i=l;continue e}o=o.parentNode}}n=n.return}_u(function(){var c=i,u=No(r),h=[];e:{var p=e0.get(e);if(p!==void 0){var x=Po,k=e;switch(e){case"keypress":if(wa(r)===0)break e;case"keydown":case"keyup":x=og;break;case"focusin":k="focus",x=Ii;break;case"focusout":k="blur",x=Ii;break;case"beforeblur":case"afterblur":x=Ii;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=ug;break;case Ju:case Yu:case Xu:x=Zf;break;case Zu:x=fg;break;case"scroll":x=Qf;break;case"wheel":x=mg;break;case"copy":case"cut":case"paste":x=tg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Rd}var m=(t&4)!==0,E=!m&&e==="scroll",y=m?p!==null?p+"Capture":null:p;m=[];for(var g=c,f;g!==null;){f=g;var b=f.stateNode;if(f.tag===5&&b!==null&&(f=b,y!==null&&(b=jn(g,y),b!=null&&m.push(Pn(g,b,f)))),E)break;g=g.return}0<m.length&&(p=new x(p,k,null,r,u),h.push({event:p,listeners:m}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",p&&r!==bl&&(k=r.relatedTarget||r.fromElement)&&(Ur(k)||k[Zt]))break e;if((x||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,x?(k=r.relatedTarget||r.toElement,x=c,k=k?Ur(k):null,k!==null&&(E=ts(k),k!==E||k.tag!==5&&k.tag!==6)&&(k=null)):(x=null,k=c),x!==k)){if(m=Od,b="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=Rd,b="onPointerLeave",y="onPointerEnter",g="pointer"),E=x==null?p:ps(x),f=k==null?p:ps(k),p=new m(b,g+"leave",x,r,u),p.target=E,p.relatedTarget=f,b=null,Ur(u)===c&&(m=new m(y,g+"enter",k,r,u),m.target=f,m.relatedTarget=E,b=m),E=b,x&&k)t:{for(m=x,y=k,g=0,f=m;f;f=is(f))g++;for(f=0,b=y;b;b=is(b))f++;for(;0<g-f;)m=is(m),g--;for(;0<f-g;)y=is(y),f--;for(;g--;){if(m===y||y!==null&&m===y.alternate)break t;m=is(m),y=is(y)}m=null}else m=null;x!==null&&Wd(h,p,x,m,!1),k!==null&&E!==null&&Wd(h,E,k,m,!0)}}e:{if(p=c?ps(c):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var T=kg;else if(Ld(p))if(Gu)T=Sg;else{T=Ng;var w=jg}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=_g);if(T&&(T=T(e,c))){Hu(h,T,r,u);break e}w&&w(e,p,c),e==="focusout"&&(w=p._wrapperState)&&w.controlled&&p.type==="number"&&xl(p,"number",p.value)}switch(w=c?ps(c):window,e){case"focusin":(Ld(w)||w.contentEditable==="true")&&(ms=w,El=c,hn=null);break;case"focusout":hn=El=ms=null;break;case"mousedown":Tl=!0;break;case"contextmenu":case"mouseup":case"dragend":Tl=!1,Bd(h,r,u);break;case"selectionchange":if(Tg)break;case"keydown":case"keyup":Bd(h,r,u)}var C;if(Ao)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else gs?qu(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(Fu&&r.locale!=="ko"&&(gs||L!=="onCompositionStart"?L==="onCompositionEnd"&&gs&&(C=Uu()):(mr=u,To="value"in mr?mr.value:mr.textContent,gs=!0)),w=Ra(c,L),0<w.length&&(L=new Md(L,e,null,r,u),h.push({event:L,listeners:w}),C?L.data=C:(C=Bu(r),C!==null&&(L.data=C)))),(C=pg?yg(e,r):vg(e,r))&&(c=Ra(c,"onBeforeInput"),0<c.length&&(u=new Md("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=C))}t0(h,t)})}function Pn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ra(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=jn(e,r),i!=null&&n.unshift(Pn(e,i,a)),i=jn(e,t),i!=null&&n.push(Pn(e,i,a))),e=e.return}return n}function is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wd(e,t,r,n,a){for(var i=t._reactName,l=[];r!==null&&r!==n;){var o=r,d=o.alternate,c=o.stateNode;if(d!==null&&d===n)break;o.tag===5&&c!==null&&(o=c,a?(d=jn(r,i),d!=null&&l.unshift(Pn(r,d,o))):a||(d=jn(r,i),d!=null&&l.push(Pn(r,d,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Og=/\r\n?/g,Mg=/\u0000|\uFFFD/g;function Vd(e){return(typeof e=="string"?e:""+e).replace(Og,`
`).replace(Mg,"")}function sa(e,t,r){if(t=Vd(t),Vd(e)!==t&&r)throw Error(B(425))}function Ia(){}var Pl=null,Dl=null;function Al(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ol=typeof setTimeout=="function"?setTimeout:void 0,Rg=typeof clearTimeout=="function"?clearTimeout:void 0,Qd=typeof Promise=="function"?Promise:void 0,Ig=typeof queueMicrotask=="function"?queueMicrotask:typeof Qd<"u"?function(e){return Qd.resolve(null).then(e).catch($g)}:Ol;function $g(e){setTimeout(function(){throw e})}function Hi(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Sn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Sn(t)}function wr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Bs,Dn="__reactProps$"+Bs,Zt="__reactContainer$"+Bs,Ml="__reactEvents$"+Bs,Lg="__reactListeners$"+Bs,zg="__reactHandles$"+Bs;function Ur(e){var t=e[Ut];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Zt]||r[Ut]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Kd(e);e!==null;){if(r=e[Ut])return r;e=Kd(e)}return t}e=r,r=e.parentNode}return null}function qn(e){return e=e[Ut]||e[Zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ps(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function li(e){return e[Dn]||null}var Rl=[],ys=-1;function Tr(e){return{current:e}}function Ce(e){0>ys||(e.current=Rl[ys],Rl[ys]=null,ys--)}function Ne(e,t){ys++,Rl[ys]=e.current,e.current=t}var Cr={},Xe=Tr(Cr),ut=Tr(!1),Gr=Cr;function Os(e,t){var r=e.type.contextTypes;if(!r)return Cr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ht(e){return e=e.childContextTypes,e!=null}function $a(){Ce(ut),Ce(Xe)}function Jd(e,t,r){if(Xe.current!==Cr)throw Error(B(168));Ne(Xe,t),Ne(ut,r)}function s0(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(B(108,jf(e)||"Unknown",a));return Oe({},r,n)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Gr=Xe.current,Ne(Xe,e),Ne(ut,ut.current),!0}function Yd(e,t,r){var n=e.stateNode;if(!n)throw Error(B(169));r?(e=s0(e,t,Gr),n.__reactInternalMemoizedMergedChildContext=e,Ce(ut),Ce(Xe),Ne(Xe,e)):Ce(ut),Ne(ut,r)}var Qt=null,oi=!1,Gi=!1;function n0(e){Qt===null?Qt=[e]:Qt.push(e)}function Ug(e){oi=!0,n0(e)}function Pr(){if(!Gi&&Qt!==null){Gi=!0;var e=0,t=ve;try{var r=Qt;for(ve=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Qt=null,oi=!1}catch(a){throw Qt!==null&&(Qt=Qt.slice(e+1)),Tu(_o,Pr),a}finally{ve=t,Gi=!1}}return null}var vs=[],ws=0,za=null,Ua=0,kt=[],jt=0,Wr=null,Kt=1,Jt="";function Ir(e,t){vs[ws++]=Ua,vs[ws++]=za,za=e,Ua=t}function a0(e,t,r){kt[jt++]=Kt,kt[jt++]=Jt,kt[jt++]=Wr,Wr=e;var n=Kt;e=Jt;var a=32-Rt(n)-1;n&=~(1<<a),r+=1;var i=32-Rt(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Kt=1<<32-Rt(t)+a|r<<a|n,Jt=i+e}else Kt=1<<i|r<<a|n,Jt=e}function Mo(e){e.return!==null&&(Ir(e,1),a0(e,1,0))}function Ro(e){for(;e===za;)za=vs[--ws],vs[ws]=null,Ua=vs[--ws],vs[ws]=null;for(;e===Wr;)Wr=kt[--jt],kt[jt]=null,Jt=kt[--jt],kt[jt]=null,Kt=kt[--jt],kt[jt]=null}var xt=null,mt=null,Te=!1,Mt=null;function i0(e,t){var r=Nt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Xd(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,mt=wr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Wr!==null?{id:Kt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Nt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,xt=e,mt=null,!0):!1;default:return!1}}function Il(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $l(e){if(Te){var t=mt;if(t){var r=t;if(!Xd(e,t)){if(Il(e))throw Error(B(418));t=wr(r.nextSibling);var n=xt;t&&Xd(e,t)?i0(n,r):(e.flags=e.flags&-4097|2,Te=!1,xt=e)}}else{if(Il(e))throw Error(B(418));e.flags=e.flags&-4097|2,Te=!1,xt=e}}}function Zd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function na(e){if(e!==xt)return!1;if(!Te)return Zd(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Al(e.type,e.memoizedProps)),t&&(t=mt)){if(Il(e))throw l0(),Error(B(418));for(;t;)i0(e,t),t=wr(t.nextSibling)}if(Zd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){mt=wr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=xt?wr(e.stateNode.nextSibling):null;return!0}function l0(){for(var e=mt;e;)e=wr(e.nextSibling)}function Ms(){mt=xt=null,Te=!1}function Io(e){Mt===null?Mt=[e]:Mt.push(e)}var Fg=rr.ReactCurrentBatchConfig;function Ys(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var n=r.stateNode}if(!n)throw Error(B(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,e))}return e}function aa(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ec(e){var t=e._init;return t(e._payload)}function o0(e){function t(y,g){if(e){var f=y.deletions;f===null?(y.deletions=[g],y.flags|=16):f.push(g)}}function r(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function a(y,g){return y=Nr(y,g),y.index=0,y.sibling=null,y}function i(y,g,f){return y.index=f,e?(f=y.alternate,f!==null?(f=f.index,f<g?(y.flags|=2,g):f):(y.flags|=2,g)):(y.flags|=1048576,g)}function l(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,g,f,b){return g===null||g.tag!==6?(g=Xi(f,y.mode,b),g.return=y,g):(g=a(g,f),g.return=y,g)}function d(y,g,f,b){var T=f.type;return T===fs?u(y,g,f.props.children,b,f.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===dr&&ec(T)===g.type)?(b=a(g,f.props),b.ref=Ys(y,g,f),b.return=y,b):(b=Ca(f.type,f.key,f.props,null,y.mode,b),b.ref=Ys(y,g,f),b.return=y,b)}function c(y,g,f,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==f.containerInfo||g.stateNode.implementation!==f.implementation?(g=Zi(f,y.mode,b),g.return=y,g):(g=a(g,f.children||[]),g.return=y,g)}function u(y,g,f,b,T){return g===null||g.tag!==7?(g=Hr(f,y.mode,b,T),g.return=y,g):(g=a(g,f),g.return=y,g)}function h(y,g,f){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Xi(""+g,y.mode,f),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Qn:return f=Ca(g.type,g.key,g.props,null,y.mode,f),f.ref=Ys(y,null,g),f.return=y,f;case hs:return g=Zi(g,y.mode,f),g.return=y,g;case dr:var b=g._init;return h(y,b(g._payload),f)}if(sn(g)||Ws(g))return g=Hr(g,y.mode,f,null),g.return=y,g;aa(y,g)}return null}function p(y,g,f,b){var T=g!==null?g.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return T!==null?null:o(y,g,""+f,b);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Qn:return f.key===T?d(y,g,f,b):null;case hs:return f.key===T?c(y,g,f,b):null;case dr:return T=f._init,p(y,g,T(f._payload),b)}if(sn(f)||Ws(f))return T!==null?null:u(y,g,f,b,null);aa(y,f)}return null}function x(y,g,f,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(f)||null,o(g,y,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qn:return y=y.get(b.key===null?f:b.key)||null,d(g,y,b,T);case hs:return y=y.get(b.key===null?f:b.key)||null,c(g,y,b,T);case dr:var w=b._init;return x(y,g,f,w(b._payload),T)}if(sn(b)||Ws(b))return y=y.get(f)||null,u(g,y,b,T,null);aa(g,b)}return null}function k(y,g,f,b){for(var T=null,w=null,C=g,L=g=0,Q=null;C!==null&&L<f.length;L++){C.index>L?(Q=C,C=null):Q=C.sibling;var O=p(y,C,f[L],b);if(O===null){C===null&&(C=Q);break}e&&C&&O.alternate===null&&t(y,C),g=i(O,g,L),w===null?T=O:w.sibling=O,w=O,C=Q}if(L===f.length)return r(y,C),Te&&Ir(y,L),T;if(C===null){for(;L<f.length;L++)C=h(y,f[L],b),C!==null&&(g=i(C,g,L),w===null?T=C:w.sibling=C,w=C);return Te&&Ir(y,L),T}for(C=n(y,C);L<f.length;L++)Q=x(C,y,L,f[L],b),Q!==null&&(e&&Q.alternate!==null&&C.delete(Q.key===null?L:Q.key),g=i(Q,g,L),w===null?T=Q:w.sibling=Q,w=Q);return e&&C.forEach(function(V){return t(y,V)}),Te&&Ir(y,L),T}function m(y,g,f,b){var T=Ws(f);if(typeof T!="function")throw Error(B(150));if(f=T.call(f),f==null)throw Error(B(151));for(var w=T=null,C=g,L=g=0,Q=null,O=f.next();C!==null&&!O.done;L++,O=f.next()){C.index>L?(Q=C,C=null):Q=C.sibling;var V=p(y,C,O.value,b);if(V===null){C===null&&(C=Q);break}e&&C&&V.alternate===null&&t(y,C),g=i(V,g,L),w===null?T=V:w.sibling=V,w=V,C=Q}if(O.done)return r(y,C),Te&&Ir(y,L),T;if(C===null){for(;!O.done;L++,O=f.next())O=h(y,O.value,b),O!==null&&(g=i(O,g,L),w===null?T=O:w.sibling=O,w=O);return Te&&Ir(y,L),T}for(C=n(y,C);!O.done;L++,O=f.next())O=x(C,y,L,O.value,b),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?L:O.key),g=i(O,g,L),w===null?T=O:w.sibling=O,w=O);return e&&C.forEach(function(ee){return t(y,ee)}),Te&&Ir(y,L),T}function E(y,g,f,b){if(typeof f=="object"&&f!==null&&f.type===fs&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Qn:e:{for(var T=f.key,w=g;w!==null;){if(w.key===T){if(T=f.type,T===fs){if(w.tag===7){r(y,w.sibling),g=a(w,f.props.children),g.return=y,y=g;break e}}else if(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===dr&&ec(T)===w.type){r(y,w.sibling),g=a(w,f.props),g.ref=Ys(y,w,f),g.return=y,y=g;break e}r(y,w);break}else t(y,w);w=w.sibling}f.type===fs?(g=Hr(f.props.children,y.mode,b,f.key),g.return=y,y=g):(b=Ca(f.type,f.key,f.props,null,y.mode,b),b.ref=Ys(y,g,f),b.return=y,y=b)}return l(y);case hs:e:{for(w=f.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===f.containerInfo&&g.stateNode.implementation===f.implementation){r(y,g.sibling),g=a(g,f.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else t(y,g);g=g.sibling}g=Zi(f,y.mode,b),g.return=y,y=g}return l(y);case dr:return w=f._init,E(y,g,w(f._payload),b)}if(sn(f))return k(y,g,f,b);if(Ws(f))return m(y,g,f,b);aa(y,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,g!==null&&g.tag===6?(r(y,g.sibling),g=a(g,f),g.return=y,y=g):(r(y,g),g=Xi(f,y.mode,b),g.return=y,y=g),l(y)):r(y,g)}return E}var Rs=o0(!0),d0=o0(!1),Fa=Tr(null),qa=null,bs=null,$o=null;function Lo(){$o=bs=qa=null}function zo(e){var t=Fa.current;Ce(Fa),e._currentValue=t}function Ll(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ts(e,t){qa=e,$o=bs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dt=!0),e.firstContext=null)}function Ct(e){var t=e._currentValue;if($o!==e)if(e={context:e,memoizedValue:t,next:null},bs===null){if(qa===null)throw Error(B(308));bs=e,qa.dependencies={lanes:0,firstContext:e}}else bs=bs.next=e;return t}var Fr=null;function Uo(e){Fr===null?Fr=[e]:Fr.push(e)}function c0(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Uo(t)):(r.next=a.next,a.next=r),t.interleaved=r,er(e,n)}function er(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var cr=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function br(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pe&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,er(e,r)}return a=n.interleaved,a===null?(t.next=t,Uo(n)):(t.next=a.next,a.next=t),n.interleaved=t,er(e,r)}function ba(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,So(e,r)}}function tc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ba(e,t,r,n){var a=e.updateQueue;cr=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var d=o,c=d.next;d.next=null,l===null?i=c:l.next=c,l=d;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=d))}if(i!==null){var h=a.baseState;l=0,u=c=d=null,o=i;do{var p=o.lane,x=o.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var k=e,m=o;switch(p=t,x=r,m.tag){case 1:if(k=m.payload,typeof k=="function"){h=k.call(x,h,p);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=m.payload,p=typeof k=="function"?k.call(x,h,p):k,p==null)break e;h=Oe({},h,p);break e;case 2:cr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[o]:p.push(o))}else x={eventTime:x,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=x,d=h):u=u.next=x,l|=p;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;p=o,o=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(d=h),a.baseState=d,a.firstBaseUpdate=c,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Qr|=l,e.lanes=l,e.memoizedState=h}}function rc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(B(191,a));a.call(n)}}}var Bn={},qt=Tr(Bn),An=Tr(Bn),On=Tr(Bn);function qr(e){if(e===Bn)throw Error(B(174));return e}function qo(e,t){switch(Ne(On,t),Ne(An,e),Ne(qt,Bn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yl(t,e)}Ce(qt),Ne(qt,t)}function Is(){Ce(qt),Ce(An),Ce(On)}function h0(e){qr(On.current);var t=qr(qt.current),r=yl(t,e.type);t!==r&&(Ne(An,e),Ne(qt,r))}function Bo(e){An.current===e&&(Ce(qt),Ce(An))}var De=Tr(0);function Ha(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wi=[];function Ho(){for(var e=0;e<Wi.length;e++)Wi[e]._workInProgressVersionPrimary=null;Wi.length=0}var ka=rr.ReactCurrentDispatcher,Vi=rr.ReactCurrentBatchConfig,Vr=0,Ae=null,ze=null,qe=null,Ga=!1,fn=!1,Mn=0,qg=0;function Qe(){throw Error(B(321))}function Go(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$t(e[r],t[r]))return!1;return!0}function Wo(e,t,r,n,a,i){if(Vr=i,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ka.current=e===null||e.memoizedState===null?Wg:Vg,e=r(n,a),fn){i=0;do{if(fn=!1,Mn=0,25<=i)throw Error(B(301));i+=1,qe=ze=null,t.updateQueue=null,ka.current=Qg,e=r(n,a)}while(fn)}if(ka.current=Wa,t=ze!==null&&ze.next!==null,Vr=0,qe=ze=Ae=null,Ga=!1,t)throw Error(B(300));return e}function Vo(){var e=Mn!==0;return Mn=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ae.memoizedState=qe=e:qe=qe.next=e,qe}function Et(){if(ze===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=qe===null?Ae.memoizedState:qe.next;if(t!==null)qe=t,ze=e;else{if(e===null)throw Error(B(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},qe===null?Ae.memoizedState=qe=e:qe=qe.next=e}return qe}function Rn(e,t){return typeof t=="function"?t(e):t}function Qi(e){var t=Et(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=ze,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,d=null,c=i;do{var u=c.lane;if((Vr&u)===u)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(o=d=h,l=n):d=d.next=h,Ae.lanes|=u,Qr|=u}c=c.next}while(c!==null&&c!==i);d===null?l=n:d.next=o,$t(n,t.memoizedState)||(dt=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ae.lanes|=i,Qr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ki(e){var t=Et(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);$t(i,t.memoizedState)||(dt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function f0(){}function g0(e,t){var r=Ae,n=Et(),a=t(),i=!$t(n.memoizedState,a);if(i&&(n.memoizedState=a,dt=!0),n=n.queue,Qo(p0.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||qe!==null&&qe.memoizedState.tag&1){if(r.flags|=2048,In(9,x0.bind(null,r,n,a,t),void 0,null),Be===null)throw Error(B(349));Vr&30||m0(r,t,a)}return a}function m0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function x0(e,t,r,n){t.value=r,t.getSnapshot=n,y0(t)&&v0(e)}function p0(e,t,r){return r(function(){y0(t)&&v0(e)})}function y0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$t(e,r)}catch{return!0}}function v0(e){var t=er(e,1);t!==null&&It(t,e,1,-1)}function sc(e){var t=zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:e},t.queue=e,e=e.dispatch=Gg.bind(null,Ae,e),[t.memoizedState,e]}function In(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function w0(){return Et().memoizedState}function ja(e,t,r,n){var a=zt();Ae.flags|=e,a.memoizedState=In(1|t,r,void 0,n===void 0?null:n)}function di(e,t,r,n){var a=Et();n=n===void 0?null:n;var i=void 0;if(ze!==null){var l=ze.memoizedState;if(i=l.destroy,n!==null&&Go(n,l.deps)){a.memoizedState=In(t,r,i,n);return}}Ae.flags|=e,a.memoizedState=In(1|t,r,i,n)}function nc(e,t){return ja(8390656,8,e,t)}function Qo(e,t){return di(2048,8,e,t)}function b0(e,t){return di(4,2,e,t)}function k0(e,t){return di(4,4,e,t)}function j0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function N0(e,t,r){return r=r!=null?r.concat([e]):null,di(4,4,j0.bind(null,t,e),r)}function Ko(){}function _0(e,t){var r=Et();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Go(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function S0(e,t){var r=Et();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Go(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function C0(e,t,r){return Vr&21?($t(r,t)||(r=Au(),Ae.lanes|=r,Qr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=r)}function Bg(e,t){var r=ve;ve=r!==0&&4>r?r:4,e(!0);var n=Vi.transition;Vi.transition={};try{e(!1),t()}finally{ve=r,Vi.transition=n}}function E0(){return Et().memoizedState}function Hg(e,t,r){var n=jr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},T0(e))P0(t,r);else if(r=c0(e,t,r,n),r!==null){var a=tt();It(r,e,n,a),D0(r,t,n)}}function Gg(e,t,r){var n=jr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(T0(e))P0(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,$t(o,l)){var d=t.interleaved;d===null?(a.next=a,Uo(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}r=c0(e,t,a,n),r!==null&&(a=tt(),It(r,e,n,a),D0(r,t,n))}}function T0(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function P0(e,t){fn=Ga=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function D0(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,So(e,r)}}var Wa={readContext:Ct,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},Wg={readContext:Ct,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:Ct,useEffect:nc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ja(4194308,4,j0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var r=zt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=zt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Hg.bind(null,Ae,e),[n.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:sc,useDebugValue:Ko,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=sc(!1),t=e[0];return e=Bg.bind(null,e[1]),zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ae,a=zt();if(Te){if(r===void 0)throw Error(B(407));r=r()}else{if(r=t(),Be===null)throw Error(B(349));Vr&30||m0(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,nc(p0.bind(null,n,i,e),[e]),n.flags|=2048,In(9,x0.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=zt(),t=Be.identifierPrefix;if(Te){var r=Jt,n=Kt;r=(n&~(1<<32-Rt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Mn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=qg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vg={readContext:Ct,useCallback:_0,useContext:Ct,useEffect:Qo,useImperativeHandle:N0,useInsertionEffect:b0,useLayoutEffect:k0,useMemo:S0,useReducer:Qi,useRef:w0,useState:function(){return Qi(Rn)},useDebugValue:Ko,useDeferredValue:function(e){var t=Et();return C0(t,ze.memoizedState,e)},useTransition:function(){var e=Qi(Rn)[0],t=Et().memoizedState;return[e,t]},useMutableSource:f0,useSyncExternalStore:g0,useId:E0,unstable_isNewReconciler:!1},Qg={readContext:Ct,useCallback:_0,useContext:Ct,useEffect:Qo,useImperativeHandle:N0,useInsertionEffect:b0,useLayoutEffect:k0,useMemo:S0,useReducer:Ki,useRef:w0,useState:function(){return Ki(Rn)},useDebugValue:Ko,useDeferredValue:function(e){var t=Et();return ze===null?t.memoizedState=e:C0(t,ze.memoizedState,e)},useTransition:function(){var e=Ki(Rn)[0],t=Et().memoizedState;return[e,t]},useMutableSource:f0,useSyncExternalStore:g0,useId:E0,unstable_isNewReconciler:!1};function Dt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function zl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Oe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ci={isMounted:function(e){return(e=e._reactInternals)?ts(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tt(),a=jr(e),i=Yt(n,a);i.payload=t,r!=null&&(i.callback=r),t=br(e,i,a),t!==null&&(It(t,e,a,n),ba(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tt(),a=jr(e),i=Yt(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=br(e,i,a),t!==null&&(It(t,e,a,n),ba(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tt(),n=jr(e),a=Yt(r,n);a.tag=2,t!=null&&(a.callback=t),t=br(e,a,n),t!==null&&(It(t,e,n,r),ba(t,e,n))}};function ac(e,t,r,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!En(r,n)||!En(a,i):!0}function A0(e,t,r){var n=!1,a=Cr,i=t.contextType;return typeof i=="object"&&i!==null?i=Ct(i):(a=ht(t)?Gr:Xe.current,n=t.contextTypes,i=(n=n!=null)?Os(e,a):Cr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ci,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function ic(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ci.enqueueReplaceState(t,t.state,null)}function Ul(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Fo(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ct(i):(i=ht(t)?Gr:Xe.current,a.context=Os(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(zl(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ci.enqueueReplaceState(a,a.state,null),Ba(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function $s(e,t){try{var r="",n=t;do r+=kf(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Ji(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Fl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Kg=typeof WeakMap=="function"?WeakMap:Map;function O0(e,t,r){r=Yt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Qa||(Qa=!0,Yl=n),Fl(e,t)},r}function M0(e,t,r){r=Yt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Fl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Fl(e,t),typeof n!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function lc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Kg;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=dm.bind(null,e,t,r),t.then(e,e))}function oc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dc(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Yt(-1,1),t.tag=2,br(r,t,1))),r.lanes|=1),e)}var Jg=rr.ReactCurrentOwner,dt=!1;function et(e,t,r,n){t.child=e===null?d0(t,null,r,n):Rs(t,e.child,r,n)}function cc(e,t,r,n,a){r=r.render;var i=t.ref;return Ts(t,a),n=Wo(e,t,r,n,i,a),r=Vo(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,tr(e,t,a)):(Te&&r&&Mo(t),t.flags|=1,et(e,t,n,a),t.child)}function uc(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!sd(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,R0(e,t,i,n,a)):(e=Ca(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:En,r(l,n)&&e.ref===t.ref)return tr(e,t,a)}return t.flags|=1,e=Nr(i,n),e.ref=t.ref,e.return=t,t.child=e}function R0(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(En(i,n)&&e.ref===t.ref)if(dt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,tr(e,t,a)}return ql(e,t,r,n,a)}function I0(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(js,gt),gt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(js,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ne(js,gt),gt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ne(js,gt),gt|=n;return et(e,t,a,r),t.child}function $0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ql(e,t,r,n,a){var i=ht(r)?Gr:Xe.current;return i=Os(t,i),Ts(t,a),r=Wo(e,t,r,n,i,a),n=Vo(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,tr(e,t,a)):(Te&&n&&Mo(t),t.flags|=1,et(e,t,r,a),t.child)}function hc(e,t,r,n,a){if(ht(r)){var i=!0;La(t)}else i=!1;if(Ts(t,a),t.stateNode===null)Na(e,t),A0(t,r,n),Ul(t,r,n,a),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var d=l.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ct(c):(c=ht(r)?Gr:Xe.current,c=Os(t,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||d!==c)&&ic(t,l,n,c),cr=!1;var p=t.memoizedState;l.state=p,Ba(t,n,l,a),d=t.memoizedState,o!==n||p!==d||ut.current||cr?(typeof u=="function"&&(zl(t,r,u,n),d=t.memoizedState),(o=cr||ac(t,r,o,n,p,d,c))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),l.props=n,l.state=d,l.context=c,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,u0(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Dt(t.type,o),l.props=c,h=t.pendingProps,p=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=Ct(d):(d=ht(r)?Gr:Xe.current,d=Os(t,d));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||p!==d)&&ic(t,l,n,d),cr=!1,p=t.memoizedState,l.state=p,Ba(t,n,l,a);var k=t.memoizedState;o!==h||p!==k||ut.current||cr?(typeof x=="function"&&(zl(t,r,x,n),k=t.memoizedState),(c=cr||ac(t,r,c,n,p,k,d)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,k,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,k,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=k),l.props=n,l.state=k,l.context=d,n=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Bl(e,t,r,n,i,a)}function Bl(e,t,r,n,a,i){$0(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&Yd(t,r,!1),tr(e,t,i);n=t.stateNode,Jg.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=Rs(t,e.child,null,i),t.child=Rs(t,null,o,i)):et(e,t,o,i),t.memoizedState=n.state,a&&Yd(t,r,!0),t.child}function L0(e){var t=e.stateNode;t.pendingContext?Jd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jd(e,t.context,!1),qo(e,t.containerInfo)}function fc(e,t,r,n,a){return Ms(),Io(a),t.flags|=256,et(e,t,r,n),t.child}var Hl={dehydrated:null,treeContext:null,retryLane:0};function Gl(e){return{baseLanes:e,cachePool:null,transitions:null}}function z0(e,t,r){var n=t.pendingProps,a=De.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ne(De,a&1),e===null)return $l(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=fi(l,n,0,null),e=Hr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Gl(r),t.memoizedState=Hl,e):Jo(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Yg(e,t,l,n,o,a,r);if(i){i=n.fallback,l=t.mode,a=e.child,o=a.sibling;var d={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=Nr(a,d),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Nr(o,i):(i=Hr(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?Gl(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Hl,n}return i=e.child,e=i.sibling,n=Nr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Jo(e,t){return t=fi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ia(e,t,r,n){return n!==null&&Io(n),Rs(t,e.child,null,r),e=Jo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Yg(e,t,r,n,a,i,l){if(r)return t.flags&256?(t.flags&=-257,n=Ji(Error(B(422))),ia(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=fi({mode:"visible",children:n.children},a,0,null),i=Hr(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Rs(t,e.child,null,l),t.child.memoizedState=Gl(l),t.memoizedState=Hl,i);if(!(t.mode&1))return ia(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(B(419)),n=Ji(i,n,void 0),ia(e,t,l,n)}if(o=(l&e.childLanes)!==0,dt||o){if(n=Be,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,er(e,a),It(n,e,a,-1))}return rd(),n=Ji(Error(B(421))),ia(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=cm.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,mt=wr(a.nextSibling),xt=t,Te=!0,Mt=null,e!==null&&(kt[jt++]=Kt,kt[jt++]=Jt,kt[jt++]=Wr,Kt=e.id,Jt=e.overflow,Wr=t),t=Jo(t,n.children),t.flags|=4096,t)}function gc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ll(e.return,t,r)}function Yi(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function U0(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(et(e,t,n.children,r),n=De.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gc(e,r,t);else if(e.tag===19)gc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ne(De,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ha(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Yi(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ha(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Yi(t,!0,r,null,i);break;case"together":Yi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Na(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Qr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,r=Nr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Nr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Xg(e,t,r){switch(t.tag){case 3:L0(t),Ms();break;case 5:h0(t);break;case 1:ht(t.type)&&La(t);break;case 4:qo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ne(Fa,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ne(De,De.current&1),t.flags|=128,null):r&t.child.childLanes?z0(e,t,r):(Ne(De,De.current&1),e=tr(e,t,r),e!==null?e.sibling:null);Ne(De,De.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return U0(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ne(De,De.current),n)break;return null;case 22:case 23:return t.lanes=0,I0(e,t,r)}return tr(e,t,r)}var F0,Wl,q0,B0;F0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wl=function(){};q0=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,qr(qt.current);var i=null;switch(r){case"input":a=gl(e,a),n=gl(e,n),i=[];break;case"select":a=Oe({},a,{value:void 0}),n=Oe({},n,{value:void 0}),i=[];break;case"textarea":a=pl(e,a),n=pl(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ia)}vl(r,n);var l;r=null;for(c in a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var o=a[c];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bn.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var d=n[c];if(o=a!=null?a[c]:void 0,n.hasOwnProperty(c)&&d!==o&&(d!=null||o!=null))if(c==="style")if(o){for(l in o)!o.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&o[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(i||(i=[]),i.push(c,r)),r=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bn.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&Se("scroll",e),i||o===d||(i=[])):(i=i||[]).push(c,d))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};B0=function(e,t,r,n){r!==n&&(t.flags|=4)};function Xs(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Zg(e,t,r){var n=t.pendingProps;switch(Ro(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return ht(t.type)&&$a(),Ke(t),null;case 3:return n=t.stateNode,Is(),Ce(ut),Ce(Xe),Ho(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(na(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mt!==null&&(eo(Mt),Mt=null))),Wl(e,t),Ke(t),null;case 5:Bo(t);var a=qr(On.current);if(r=t.type,e!==null&&t.stateNode!=null)q0(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(B(166));return Ke(t),null}if(e=qr(qt.current),na(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ut]=t,n[Dn]=i,e=(t.mode&1)!==0,r){case"dialog":Se("cancel",n),Se("close",n);break;case"iframe":case"object":case"embed":Se("load",n);break;case"video":case"audio":for(a=0;a<an.length;a++)Se(an[a],n);break;case"source":Se("error",n);break;case"img":case"image":case"link":Se("error",n),Se("load",n);break;case"details":Se("toggle",n);break;case"input":jd(n,i),Se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Se("invalid",n);break;case"textarea":_d(n,i),Se("invalid",n)}vl(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&sa(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&sa(n.textContent,o,e),a=["children",""+o]):bn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Se("scroll",n)}switch(r){case"input":Kn(n),Nd(n,i,!0);break;case"textarea":Kn(n),Sd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ia)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Ut]=t,e[Dn]=n,F0(e,t,!1,!1),t.stateNode=e;e:{switch(l=wl(r,n),r){case"dialog":Se("cancel",e),Se("close",e),a=n;break;case"iframe":case"object":case"embed":Se("load",e),a=n;break;case"video":case"audio":for(a=0;a<an.length;a++)Se(an[a],e);a=n;break;case"source":Se("error",e),a=n;break;case"img":case"image":case"link":Se("error",e),Se("load",e),a=n;break;case"details":Se("toggle",e),a=n;break;case"input":jd(e,n),a=gl(e,n),Se("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Oe({},n,{value:void 0}),Se("invalid",e);break;case"textarea":_d(e,n),a=pl(e,n),Se("invalid",e);break;default:a=n}vl(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var d=o[i];i==="style"?wu(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&yu(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&kn(e,d):typeof d=="number"&&kn(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bn.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Se("scroll",e):d!=null&&wo(e,i,d,l))}switch(r){case"input":Kn(e),Nd(e,n,!1);break;case"textarea":Kn(e),Sd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Sr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?_s(e,!!n.multiple,i,!1):n.defaultValue!=null&&_s(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ia)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)B0(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(B(166));if(r=qr(On.current),qr(qt.current),na(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ut]=t,(i=n.nodeValue!==r)&&(e=xt,e!==null))switch(e.tag){case 3:sa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sa(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ut]=t,t.stateNode=n}return Ke(t),null;case 13:if(Ce(De),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&mt!==null&&t.mode&1&&!(t.flags&128))l0(),Ms(),t.flags|=98560,i=!1;else if(i=na(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(B(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Ut]=t}else Ms(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),i=!1}else Mt!==null&&(eo(Mt),Mt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?Ue===0&&(Ue=3):rd())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return Is(),Wl(e,t),e===null&&Tn(t.stateNode.containerInfo),Ke(t),null;case 10:return zo(t.type._context),Ke(t),null;case 17:return ht(t.type)&&$a(),Ke(t),null;case 19:if(Ce(De),i=t.memoizedState,i===null)return Ke(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Xs(i,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ha(e),l!==null){for(t.flags|=128,Xs(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ne(De,De.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ie()>Ls&&(t.flags|=128,n=!0,Xs(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ha(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Xs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Te)return Ke(t),null}else 2*Ie()-i.renderingStartTime>Ls&&r!==1073741824&&(t.flags|=128,n=!0,Xs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ie(),t.sibling=null,r=De.current,Ne(De,n?r&1|2:r&1),t):(Ke(t),null);case 22:case 23:return td(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?gt&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function em(e,t){switch(Ro(t),t.tag){case 1:return ht(t.type)&&$a(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Is(),Ce(ut),Ce(Xe),Ho(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Bo(t),null;case 13:if(Ce(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(De),null;case 4:return Is(),null;case 10:return zo(t.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var la=!1,Ye=!1,tm=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ks(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Me(e,t,n)}else r.current=null}function Vl(e,t,r){try{r()}catch(n){Me(e,t,n)}}var mc=!1;function rm(e,t){if(Pl=Oa,e=Qu(),Oo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,d=-1,c=0,u=0,h=e,p=null;t:for(;;){for(var x;h!==r||a!==0&&h.nodeType!==3||(o=l+a),h!==i||n!==0&&h.nodeType!==3||(d=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(x=h.firstChild)!==null;)p=h,h=x;for(;;){if(h===e)break t;if(p===r&&++c===a&&(o=l),p===i&&++u===n&&(d=l),(x=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=x}r=o===-1||d===-1?null:{start:o,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Dl={focusedElem:e,selectionRange:r},Oa=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var m=k.memoizedProps,E=k.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Dt(t.type,m),E);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(b){Me(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return k=mc,mc=!1,k}function gn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Vl(t,r,i)}a=a.next}while(a!==n)}}function ui(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ql(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function H0(e){var t=e.alternate;t!==null&&(e.alternate=null,H0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[Dn],delete t[Ml],delete t[Lg],delete t[zg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function G0(e){return e.tag===5||e.tag===3||e.tag===4}function xc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||G0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ia));else if(n!==4&&(e=e.child,e!==null))for(Kl(e,t,r),e=e.sibling;e!==null;)Kl(e,t,r),e=e.sibling}function Jl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Jl(e,t,r),e=e.sibling;e!==null;)Jl(e,t,r),e=e.sibling}var Ge=null,At=!1;function lr(e,t,r){for(r=r.child;r!==null;)W0(e,t,r),r=r.sibling}function W0(e,t,r){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(si,r)}catch{}switch(r.tag){case 5:Ye||ks(r,t);case 6:var n=Ge,a=At;Ge=null,lr(e,t,r),Ge=n,At=a,Ge!==null&&(At?(e=Ge,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ge.removeChild(r.stateNode));break;case 18:Ge!==null&&(At?(e=Ge,r=r.stateNode,e.nodeType===8?Hi(e.parentNode,r):e.nodeType===1&&Hi(e,r),Sn(e)):Hi(Ge,r.stateNode));break;case 4:n=Ge,a=At,Ge=r.stateNode.containerInfo,At=!0,lr(e,t,r),Ge=n,At=a;break;case 0:case 11:case 14:case 15:if(!Ye&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Vl(r,t,l),a=a.next}while(a!==n)}lr(e,t,r);break;case 1:if(!Ye&&(ks(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Me(r,t,o)}lr(e,t,r);break;case 21:lr(e,t,r);break;case 22:r.mode&1?(Ye=(n=Ye)||r.memoizedState!==null,lr(e,t,r),Ye=n):lr(e,t,r);break;default:lr(e,t,r)}}function pc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new tm),t.forEach(function(n){var a=um.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Tt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ge=o.stateNode,At=!1;break e;case 3:Ge=o.stateNode.containerInfo,At=!0;break e;case 4:Ge=o.stateNode.containerInfo,At=!0;break e}o=o.return}if(Ge===null)throw Error(B(160));W0(i,l,a),Ge=null,At=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(c){Me(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)V0(t,e),t=t.sibling}function V0(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),Lt(e),n&4){try{gn(3,e,e.return),ui(3,e)}catch(m){Me(e,e.return,m)}try{gn(5,e,e.return)}catch(m){Me(e,e.return,m)}}break;case 1:Tt(t,e),Lt(e),n&512&&r!==null&&ks(r,r.return);break;case 5:if(Tt(t,e),Lt(e),n&512&&r!==null&&ks(r,r.return),e.flags&32){var a=e.stateNode;try{kn(a,"")}catch(m){Me(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&mu(a,i),wl(o,l);var c=wl(o,i);for(l=0;l<d.length;l+=2){var u=d[l],h=d[l+1];u==="style"?wu(a,h):u==="dangerouslySetInnerHTML"?yu(a,h):u==="children"?kn(a,h):wo(a,u,h,c)}switch(o){case"input":ml(a,i);break;case"textarea":xu(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?_s(a,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?_s(a,!!i.multiple,i.defaultValue,!0):_s(a,!!i.multiple,i.multiple?[]:"",!1))}a[Dn]=i}catch(m){Me(e,e.return,m)}}break;case 6:if(Tt(t,e),Lt(e),n&4){if(e.stateNode===null)throw Error(B(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){Me(e,e.return,m)}}break;case 3:if(Tt(t,e),Lt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Sn(t.containerInfo)}catch(m){Me(e,e.return,m)}break;case 4:Tt(t,e),Lt(e);break;case 13:Tt(t,e),Lt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Zo=Ie())),n&4&&pc(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ye=(c=Ye)||u,Tt(t,e),Ye=c):Tt(t,e),Lt(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Z=e,u=e.child;u!==null;){for(h=Z=u;Z!==null;){switch(p=Z,x=p.child,p.tag){case 0:case 11:case 14:case 15:gn(4,p,p.return);break;case 1:ks(p,p.return);var k=p.stateNode;if(typeof k.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(m){Me(n,r,m)}}break;case 5:ks(p,p.return);break;case 22:if(p.memoizedState!==null){vc(h);continue}}x!==null?(x.return=p,Z=x):vc(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,d=h.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=vu("display",l))}catch(m){Me(e,e.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Me(e,e.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Tt(t,e),Lt(e),n&4&&pc(e);break;case 21:break;default:Tt(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(G0(r)){var n=r;break e}r=r.return}throw Error(B(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(kn(a,""),n.flags&=-33);var i=xc(e);Jl(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=xc(e);Kl(e,o,l);break;default:throw Error(B(161))}}catch(d){Me(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sm(e,t,r){Z=e,Q0(e)}function Q0(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var a=Z,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||la;if(!l){var o=a.alternate,d=o!==null&&o.memoizedState!==null||Ye;o=la;var c=Ye;if(la=l,(Ye=d)&&!c)for(Z=a;Z!==null;)l=Z,d=l.child,l.tag===22&&l.memoizedState!==null?wc(a):d!==null?(d.return=l,Z=d):wc(a);for(;i!==null;)Z=i,Q0(i),i=i.sibling;Z=a,la=o,Ye=c}yc(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Z=i):yc(e)}}function yc(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ye||ui(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ye)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Dt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&rc(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}rc(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Sn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ye||t.flags&512&&Ql(t)}catch(p){Me(t,t.return,p)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function vc(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function wc(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ui(4,t)}catch(d){Me(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(d){Me(t,a,d)}}var i=t.return;try{Ql(t)}catch(d){Me(t,i,d)}break;case 5:var l=t.return;try{Ql(t)}catch(d){Me(t,l,d)}}}catch(d){Me(t,t.return,d)}if(t===e){Z=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Z=o;break}Z=t.return}}var nm=Math.ceil,Va=rr.ReactCurrentDispatcher,Yo=rr.ReactCurrentOwner,_t=rr.ReactCurrentBatchConfig,pe=0,Be=null,Le=null,We=0,gt=0,js=Tr(0),Ue=0,$n=null,Qr=0,hi=0,Xo=0,mn=null,it=null,Zo=0,Ls=1/0,Wt=null,Qa=!1,Yl=null,kr=null,oa=!1,xr=null,Ka=0,xn=0,Xl=null,_a=-1,Sa=0;function tt(){return pe&6?Ie():_a!==-1?_a:_a=Ie()}function jr(e){return e.mode&1?pe&2&&We!==0?We&-We:Fg.transition!==null?(Sa===0&&(Sa=Au()),Sa):(e=ve,e!==0||(e=window.event,e=e===void 0?16:zu(e.type)),e):1}function It(e,t,r,n){if(50<xn)throw xn=0,Xl=null,Error(B(185));Un(e,r,n),(!(pe&2)||e!==Be)&&(e===Be&&(!(pe&2)&&(hi|=r),Ue===4&&fr(e,We)),ft(e,n),r===1&&pe===0&&!(t.mode&1)&&(Ls=Ie()+500,oi&&Pr()))}function ft(e,t){var r=e.callbackNode;Ff(e,t);var n=Aa(e,e===Be?We:0);if(n===0)r!==null&&Td(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Td(r),t===1)e.tag===0?Ug(bc.bind(null,e)):n0(bc.bind(null,e)),Ig(function(){!(pe&6)&&Pr()}),r=null;else{switch(Ou(n)){case 1:r=_o;break;case 4:r=Pu;break;case 16:r=Da;break;case 536870912:r=Du;break;default:r=Da}r=rh(r,K0.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function K0(e,t){if(_a=-1,Sa=0,pe&6)throw Error(B(327));var r=e.callbackNode;if(Ps()&&e.callbackNode!==r)return null;var n=Aa(e,e===Be?We:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ja(e,n);else{t=n;var a=pe;pe|=2;var i=Y0();(Be!==e||We!==t)&&(Wt=null,Ls=Ie()+500,Br(e,t));do try{lm();break}catch(o){J0(e,o)}while(!0);Lo(),Va.current=i,pe=a,Le!==null?t=0:(Be=null,We=0,t=Ue)}if(t!==0){if(t===2&&(a=_l(e),a!==0&&(n=a,t=Zl(e,a))),t===1)throw r=$n,Br(e,0),fr(e,n),ft(e,Ie()),r;if(t===6)fr(e,n);else{if(a=e.current.alternate,!(n&30)&&!am(a)&&(t=Ja(e,n),t===2&&(i=_l(e),i!==0&&(n=i,t=Zl(e,i))),t===1))throw r=$n,Br(e,0),fr(e,n),ft(e,Ie()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(B(345));case 2:$r(e,it,Wt);break;case 3:if(fr(e,n),(n&130023424)===n&&(t=Zo+500-Ie(),10<t)){if(Aa(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){tt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ol($r.bind(null,e,it,Wt),t);break}$r(e,it,Wt);break;case 4:if(fr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-Rt(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=Ie()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*nm(n/1960))-n,10<n){e.timeoutHandle=Ol($r.bind(null,e,it,Wt),n);break}$r(e,it,Wt);break;case 5:$r(e,it,Wt);break;default:throw Error(B(329))}}}return ft(e,Ie()),e.callbackNode===r?K0.bind(null,e):null}function Zl(e,t){var r=mn;return e.current.memoizedState.isDehydrated&&(Br(e,t).flags|=256),e=Ja(e,t),e!==2&&(t=it,it=r,t!==null&&eo(t)),e}function eo(e){it===null?it=e:it.push.apply(it,e)}function am(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!$t(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fr(e,t){for(t&=~Xo,t&=~hi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Rt(t),n=1<<r;e[r]=-1,t&=~n}}function bc(e){if(pe&6)throw Error(B(327));Ps();var t=Aa(e,0);if(!(t&1))return ft(e,Ie()),null;var r=Ja(e,t);if(e.tag!==0&&r===2){var n=_l(e);n!==0&&(t=n,r=Zl(e,n))}if(r===1)throw r=$n,Br(e,0),fr(e,t),ft(e,Ie()),r;if(r===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,it,Wt),ft(e,Ie()),null}function ed(e,t){var r=pe;pe|=1;try{return e(t)}finally{pe=r,pe===0&&(Ls=Ie()+500,oi&&Pr())}}function Kr(e){xr!==null&&xr.tag===0&&!(pe&6)&&Ps();var t=pe;pe|=1;var r=_t.transition,n=ve;try{if(_t.transition=null,ve=1,e)return e()}finally{ve=n,_t.transition=r,pe=t,!(pe&6)&&Pr()}}function td(){gt=js.current,Ce(js)}function Br(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Rg(r)),Le!==null)for(r=Le.return;r!==null;){var n=r;switch(Ro(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$a();break;case 3:Is(),Ce(ut),Ce(Xe),Ho();break;case 5:Bo(n);break;case 4:Is();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:zo(n.type._context);break;case 22:case 23:td()}r=r.return}if(Be=e,Le=e=Nr(e.current,null),We=gt=t,Ue=0,$n=null,Xo=hi=Qr=0,it=mn=null,Fr!==null){for(t=0;t<Fr.length;t++)if(r=Fr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}r.pending=n}Fr=null}return e}function J0(e,t){do{var r=Le;try{if(Lo(),ka.current=Wa,Ga){for(var n=Ae.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ga=!1}if(Vr=0,qe=ze=Ae=null,fn=!1,Mn=0,Yo.current=null,r===null||r.return===null){Ue=1,$n=t,Le=null;break}e:{var i=e,l=r.return,o=r,d=t;if(t=We,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=oc(l);if(x!==null){x.flags&=-257,dc(x,l,o,i,t),x.mode&1&&lc(i,c,t),t=x,d=c;var k=t.updateQueue;if(k===null){var m=new Set;m.add(d),t.updateQueue=m}else k.add(d);break e}else{if(!(t&1)){lc(i,c,t),rd();break e}d=Error(B(426))}}else if(Te&&o.mode&1){var E=oc(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),dc(E,l,o,i,t),Io($s(d,o));break e}}i=d=$s(d,o),Ue!==4&&(Ue=2),mn===null?mn=[i]:mn.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=O0(i,d,t);tc(i,y);break e;case 1:o=d;var g=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(kr===null||!kr.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=M0(i,o,t);tc(i,b);break e}}i=i.return}while(i!==null)}Z0(r)}catch(T){t=T,Le===r&&r!==null&&(Le=r=r.return);continue}break}while(!0)}function Y0(){var e=Va.current;return Va.current=Wa,e===null?Wa:e}function rd(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Be===null||!(Qr&268435455)&&!(hi&268435455)||fr(Be,We)}function Ja(e,t){var r=pe;pe|=2;var n=Y0();(Be!==e||We!==t)&&(Wt=null,Br(e,t));do try{im();break}catch(a){J0(e,a)}while(!0);if(Lo(),pe=r,Va.current=n,Le!==null)throw Error(B(261));return Be=null,We=0,Ue}function im(){for(;Le!==null;)X0(Le)}function lm(){for(;Le!==null&&!Af();)X0(Le)}function X0(e){var t=th(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?Z0(e):Le=t,Yo.current=null}function Z0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=em(r,t),r!==null){r.flags&=32767,Le=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Le=null;return}}else if(r=Zg(r,t,gt),r!==null){Le=r;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Ue===0&&(Ue=5)}function $r(e,t,r){var n=ve,a=_t.transition;try{_t.transition=null,ve=1,om(e,t,r,n)}finally{_t.transition=a,ve=n}return null}function om(e,t,r,n){do Ps();while(xr!==null);if(pe&6)throw Error(B(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(qf(e,i),e===Be&&(Le=Be=null,We=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oa||(oa=!0,rh(Da,function(){return Ps(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=_t.transition,_t.transition=null;var l=ve;ve=1;var o=pe;pe|=4,Yo.current=null,rm(e,r),V0(r,e),Eg(Dl),Oa=!!Pl,Dl=Pl=null,e.current=r,sm(r),Of(),pe=o,ve=l,_t.transition=i}else e.current=r;if(oa&&(oa=!1,xr=e,Ka=a),i=e.pendingLanes,i===0&&(kr=null),If(r.stateNode),ft(e,Ie()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Qa)throw Qa=!1,e=Yl,Yl=null,e;return Ka&1&&e.tag!==0&&Ps(),i=e.pendingLanes,i&1?e===Xl?xn++:(xn=0,Xl=e):xn=0,Pr(),null}function Ps(){if(xr!==null){var e=Ou(Ka),t=_t.transition,r=ve;try{if(_t.transition=null,ve=16>e?16:e,xr===null)var n=!1;else{if(e=xr,xr=null,Ka=0,pe&6)throw Error(B(331));var a=pe;for(pe|=4,Z=e.current;Z!==null;){var i=Z,l=i.child;if(Z.flags&16){var o=i.deletions;if(o!==null){for(var d=0;d<o.length;d++){var c=o[d];for(Z=c;Z!==null;){var u=Z;switch(u.tag){case 0:case 11:case 15:gn(8,u,i)}var h=u.child;if(h!==null)h.return=u,Z=h;else for(;Z!==null;){u=Z;var p=u.sibling,x=u.return;if(H0(u),u===c){Z=null;break}if(p!==null){p.return=x,Z=p;break}Z=x}}}var k=i.alternate;if(k!==null){var m=k.child;if(m!==null){k.child=null;do{var E=m.sibling;m.sibling=null,m=E}while(m!==null)}}Z=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Z=l;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gn(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Z=y;break e}Z=i.return}}var g=e.current;for(Z=g;Z!==null;){l=Z;var f=l.child;if(l.subtreeFlags&2064&&f!==null)f.return=l,Z=f;else e:for(l=g;Z!==null;){if(o=Z,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ui(9,o)}}catch(T){Me(o,o.return,T)}if(o===l){Z=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,Z=b;break e}Z=o.return}}if(pe=a,Pr(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(si,e)}catch{}n=!0}return n}finally{ve=r,_t.transition=t}}return!1}function kc(e,t,r){t=$s(r,t),t=O0(e,t,1),e=br(e,t,1),t=tt(),e!==null&&(Un(e,1,t),ft(e,t))}function Me(e,t,r){if(e.tag===3)kc(e,e,r);else for(;t!==null;){if(t.tag===3){kc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(kr===null||!kr.has(n))){e=$s(r,e),e=M0(t,e,1),t=br(t,e,1),e=tt(),t!==null&&(Un(t,1,e),ft(t,e));break}}t=t.return}}function dm(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&r,Be===e&&(We&r)===r&&(Ue===4||Ue===3&&(We&130023424)===We&&500>Ie()-Zo?Br(e,0):Xo|=r),ft(e,t)}function eh(e,t){t===0&&(e.mode&1?(t=Xn,Xn<<=1,!(Xn&130023424)&&(Xn=4194304)):t=1);var r=tt();e=er(e,t),e!==null&&(Un(e,t,r),ft(e,r))}function cm(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),eh(e,r)}function um(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(t),eh(e,r)}var th;th=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ut.current)dt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return dt=!1,Xg(e,t,r);dt=!!(e.flags&131072)}else dt=!1,Te&&t.flags&1048576&&a0(t,Ua,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Na(e,t),e=t.pendingProps;var a=Os(t,Xe.current);Ts(t,r),a=Wo(null,t,n,e,a,r);var i=Vo();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(n)?(i=!0,La(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Fo(t),a.updater=ci,t.stateNode=a,a._reactInternals=t,Ul(t,n,e,r),t=Bl(null,t,n,!0,i,r)):(t.tag=0,Te&&i&&Mo(t),et(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Na(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=fm(n),e=Dt(n,e),a){case 0:t=ql(null,t,n,e,r);break e;case 1:t=hc(null,t,n,e,r);break e;case 11:t=cc(null,t,n,e,r);break e;case 14:t=uc(null,t,n,Dt(n.type,e),r);break e}throw Error(B(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Dt(n,a),ql(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Dt(n,a),hc(e,t,n,a,r);case 3:e:{if(L0(t),e===null)throw Error(B(387));n=t.pendingProps,i=t.memoizedState,a=i.element,u0(e,t),Ba(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=$s(Error(B(423)),t),t=fc(e,t,n,r,a);break e}else if(n!==a){a=$s(Error(B(424)),t),t=fc(e,t,n,r,a);break e}else for(mt=wr(t.stateNode.containerInfo.firstChild),xt=t,Te=!0,Mt=null,r=d0(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ms(),n===a){t=tr(e,t,r);break e}et(e,t,n,r)}t=t.child}return t;case 5:return h0(t),e===null&&$l(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Al(n,a)?l=null:i!==null&&Al(n,i)&&(t.flags|=32),$0(e,t),et(e,t,l,r),t.child;case 6:return e===null&&$l(t),null;case 13:return z0(e,t,r);case 4:return qo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Rs(t,null,n,r):et(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Dt(n,a),cc(e,t,n,a,r);case 7:return et(e,t,t.pendingProps,r),t.child;case 8:return et(e,t,t.pendingProps.children,r),t.child;case 12:return et(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Ne(Fa,n._currentValue),n._currentValue=l,i!==null)if($t(i.value,l)){if(i.children===a.children&&!ut.current){t=tr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var d=o.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=Yt(-1,r&-r),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Ll(i.return,r,t),o.lanes|=r;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(B(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Ll(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}et(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ts(t,r),a=Ct(a),n=n(a),t.flags|=1,et(e,t,n,r),t.child;case 14:return n=t.type,a=Dt(n,t.pendingProps),a=Dt(n.type,a),uc(e,t,n,a,r);case 15:return R0(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Dt(n,a),Na(e,t),t.tag=1,ht(n)?(e=!0,La(t)):e=!1,Ts(t,r),A0(t,n,a),Ul(t,n,a,r),Bl(null,t,n,!0,e,r);case 19:return U0(e,t,r);case 22:return I0(e,t,r)}throw Error(B(156,t.tag))};function rh(e,t){return Tu(e,t)}function hm(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,r,n){return new hm(e,t,r,n)}function sd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fm(e){if(typeof e=="function")return sd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ko)return 11;if(e===jo)return 14}return 2}function Nr(e,t){var r=e.alternate;return r===null?(r=Nt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ca(e,t,r,n,a,i){var l=2;if(n=e,typeof e=="function")sd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case fs:return Hr(r.children,a,i,t);case bo:l=8,a|=8;break;case cl:return e=Nt(12,r,t,a|2),e.elementType=cl,e.lanes=i,e;case ul:return e=Nt(13,r,t,a),e.elementType=ul,e.lanes=i,e;case hl:return e=Nt(19,r,t,a),e.elementType=hl,e.lanes=i,e;case hu:return fi(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cu:l=10;break e;case uu:l=9;break e;case ko:l=11;break e;case jo:l=14;break e;case dr:l=16,n=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=Nt(l,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Hr(e,t,r,n){return e=Nt(7,e,n,t),e.lanes=r,e}function fi(e,t,r,n){return e=Nt(22,e,n,t),e.elementType=hu,e.lanes=r,e.stateNode={isHidden:!1},e}function Xi(e,t,r){return e=Nt(6,e,null,t),e.lanes=r,e}function Zi(e,t,r){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gm(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oi(0),this.expirationTimes=Oi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oi(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function nd(e,t,r,n,a,i,l,o,d){return e=new gm(e,t,r,o,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Nt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(i),e}function mm(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function sh(e){if(!e)return Cr;e=e._reactInternals;e:{if(ts(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var r=e.type;if(ht(r))return s0(e,r,t)}return t}function nh(e,t,r,n,a,i,l,o,d){return e=nd(r,n,!0,e,a,i,l,o,d),e.context=sh(null),r=e.current,n=tt(),a=jr(r),i=Yt(n,a),i.callback=t??null,br(r,i,a),e.current.lanes=a,Un(e,a,n),ft(e,n),e}function gi(e,t,r,n){var a=t.current,i=tt(),l=jr(a);return r=sh(r),t.context===null?t.context=r:t.pendingContext=r,t=Yt(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=br(a,t,l),e!==null&&(It(e,a,l,i),ba(e,a,l)),l}function Ya(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ad(e,t){jc(e,t),(e=e.alternate)&&jc(e,t)}function xm(){return null}var ah=typeof reportError=="function"?reportError:function(e){console.error(e)};function id(e){this._internalRoot=e}mi.prototype.render=id.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));gi(e,t,null,null)};mi.prototype.unmount=id.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kr(function(){gi(null,e,null,null)}),t[Zt]=null}};function mi(e){this._internalRoot=e}mi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Iu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<hr.length&&t!==0&&t<hr[r].priority;r++);hr.splice(r,0,e),r===0&&Lu(e)}};function ld(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nc(){}function pm(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var c=Ya(l);i.call(c)}}var l=nh(t,n,e,0,null,!1,!1,"",Nc);return e._reactRootContainer=l,e[Zt]=l.current,Tn(e.nodeType===8?e.parentNode:e),Kr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var c=Ya(d);o.call(c)}}var d=nd(e,0,!1,null,null,!1,!1,"",Nc);return e._reactRootContainer=d,e[Zt]=d.current,Tn(e.nodeType===8?e.parentNode:e),Kr(function(){gi(t,d,r,n)}),d}function pi(e,t,r,n,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var d=Ya(l);o.call(d)}}gi(t,l,e,a)}else l=pm(r,t,e,a,n);return Ya(l)}Mu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=nn(t.pendingLanes);r!==0&&(So(t,r|1),ft(t,Ie()),!(pe&6)&&(Ls=Ie()+500,Pr()))}break;case 13:Kr(function(){var n=er(e,1);if(n!==null){var a=tt();It(n,e,1,a)}}),ad(e,1)}};Co=function(e){if(e.tag===13){var t=er(e,134217728);if(t!==null){var r=tt();It(t,e,134217728,r)}ad(e,134217728)}};Ru=function(e){if(e.tag===13){var t=jr(e),r=er(e,t);if(r!==null){var n=tt();It(r,e,t,n)}ad(e,t)}};Iu=function(){return ve};$u=function(e,t){var r=ve;try{return ve=e,t()}finally{ve=r}};kl=function(e,t,r){switch(t){case"input":if(ml(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=li(n);if(!a)throw Error(B(90));gu(n),ml(n,a)}}}break;case"textarea":xu(e,r);break;case"select":t=r.value,t!=null&&_s(e,!!r.multiple,t,!1)}};ju=ed;Nu=Kr;var ym={usingClientEntryPoint:!1,Events:[qn,ps,li,bu,ku,ed]},Zs={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vm={bundleType:Zs.bundleType,version:Zs.version,rendererPackageName:Zs.rendererPackageName,rendererConfig:Zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Cu(e),e===null?null:e.stateNode},findFiberByHostInstance:Zs.findFiberByHostInstance||xm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{si=da.inject(vm),Ft=da}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ym;vt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ld(t))throw Error(B(200));return mm(e,t,null,r)};vt.createRoot=function(e,t){if(!ld(e))throw Error(B(299));var r=!1,n="",a=ah;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=nd(e,1,!1,null,null,r,!1,n,a),e[Zt]=t.current,Tn(e.nodeType===8?e.parentNode:e),new id(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=Cu(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return Kr(e)};vt.hydrate=function(e,t,r){if(!xi(t))throw Error(B(200));return pi(null,e,t,!0,r)};vt.hydrateRoot=function(e,t,r){if(!ld(e))throw Error(B(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",l=ah;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=nh(t,null,e,1,r??null,a,!1,i,l),e[Zt]=t.current,Tn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new mi(t)};vt.render=function(e,t,r){if(!xi(t))throw Error(B(200));return pi(null,e,t,!1,r)};vt.unmountComponentAtNode=function(e){if(!xi(e))throw Error(B(40));return e._reactRootContainer?(Kr(function(){pi(null,null,e,!1,function(){e._reactRootContainer=null,e[Zt]=null})}),!0):!1};vt.unstable_batchedUpdates=ed;vt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!xi(r))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return pi(e,t,r,!1,n)};vt.version="18.3.1-next-f1338f8080-20240426";function ih(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ih)}catch(e){console.error(e)}}ih(),iu.exports=vt;var wm=iu.exports,_c=wm;ol.createRoot=_c.createRoot,ol.hydrateRoot=_c.hydrateRoot;const bm="modulepreload",km=function(e,t){return new URL(e,t).href},Sc={},Hn=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){const l=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),d=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=km(c,n),c in Sc)return;Sc[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!n)for(let k=l.length-1;k>=0;k--){const m=l[k];if(m.href===c&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const x=document.createElement("link");if(x.rel=u?"stylesheet":bm,u||(x.as="script"),x.crossOrigin="",x.href=c,d&&x.setAttribute("nonce",d),document.head.appendChild(x),u)return new Promise((k,m)=>{x.addEventListener("load",k),x.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},jm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hn(async()=>{const{default:n}=await Promise.resolve().then(()=>Hs);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class od extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Nm extends od{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Cc extends od{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ec extends od{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var to;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(to||(to={}));var _m=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(n.next(u))}catch(h){l(h)}}function d(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};class Sm{constructor(t,{headers:r={},customFetch:n,region:a=to.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=jm(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return _m(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=r;let o={},{region:d}=r;d||(d=this.region);const c=new URL(`${this.url}/${t}`);d&&d!=="any"&&(o["x-region"]=d,c.searchParams.set("forceFunctionRegion",d));let u;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:u}).catch(m=>{throw new Nm(m)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new Cc(h);if(!h.ok)throw new Ec(h);let x=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),k;return x==="application/json"?k=yield h.json():x==="application/octet-stream"?k=yield h.blob():x==="text/event-stream"?k=h:x==="multipart/form-data"?k=yield h.formData():k=yield h.text(),{data:k,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof Ec||a instanceof Cc?a.context:void 0}}})}}var lt={},dd={},yi={},Gn={},vi={},wi={},Cm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zs=Cm();const Em=zs.fetch,lh=zs.fetch.bind(zs),oh=zs.Headers,Tm=zs.Request,Pm=zs.Response,Hs=Object.freeze(Object.defineProperty({__proto__:null,Headers:oh,Request:Tm,Response:Pm,default:lh,fetch:Em},Symbol.toStringTag,{value:"Module"})),Dm=Vh(Hs);var bi={};Object.defineProperty(bi,"__esModule",{value:!0});let Am=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};bi.default=Am;var dh=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wi,"__esModule",{value:!0});const Om=dh(Dm),Mm=dh(bi);let Rm=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Om.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,d;let c=null,u=null,h=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const m=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),E=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&E&&E.length>1&&(h=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,p=406,x="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await i.text();try{c=JSON.parse(m),Array.isArray(c)&&i.status===404&&(u=[],c=null,p=200,x="OK")}catch{i.status===404&&m===""?(p=204,x="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,p=200,x="OK"),c&&this.shouldThrowOnError)throw new Mm.default(c)}return{error:c,data:u,count:h,status:p,statusText:x}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,d;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};wi.default=Rm;var Im=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vi,"__esModule",{value:!0});const $m=Im(wi);let Lm=class extends $m.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const d=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${c}"; options=${d};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};vi.default=Lm;var zm=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gn,"__esModule",{value:!0});const Um=zm(vi);let Fm=class extends Um.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Gn.default=Fm;var qm=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yi,"__esModule",{value:!0});const en=qm(Gn);let Bm=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new en.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((o,d)=>o.concat(Object.keys(d)),[]);if(l.length>0){const o=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",o.join(","))}}return new en.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const l="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const d=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new en.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new en.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new en.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};yi.default=Bm;var ki={},ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.version=void 0;ji.version="0.0.0-automated";Object.defineProperty(ki,"__esModule",{value:!0});ki.DEFAULT_HEADERS=void 0;const Hm=ji;ki.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Hm.version}`};var ch=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dd,"__esModule",{value:!0});const Gm=ch(yi),Wm=ch(Gn),Vm=ki;let Qm=class uh{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},Vm.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new Gm.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new uh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{o.searchParams.append(u,h)})):(l="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Wm.default({method:l,url:o,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};dd.default=Qm;var Gs=St&&St.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lt,"__esModule",{value:!0});lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const hh=Gs(dd);lt.PostgrestClient=hh.default;const fh=Gs(yi);lt.PostgrestQueryBuilder=fh.default;const gh=Gs(Gn);lt.PostgrestFilterBuilder=gh.default;const mh=Gs(vi);lt.PostgrestTransformBuilder=mh.default;const xh=Gs(wi);lt.PostgrestBuilder=xh.default;const ph=Gs(bi);lt.PostgrestError=ph.default;var Km=lt.default={PostgrestClient:hh.default,PostgrestQueryBuilder:fh.default,PostgrestFilterBuilder:gh.default,PostgrestTransformBuilder:mh.default,PostgrestBuilder:xh.default,PostgrestError:ph.default};const{PostgrestClient:Jm,PostgrestQueryBuilder:Py,PostgrestFilterBuilder:Dy,PostgrestTransformBuilder:Ay,PostgrestBuilder:Oy,PostgrestError:My}=Km;function Ym(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Xm=Ym(),Zm="2.11.15",ex=`realtime-js/${Zm}`,tx="1.0.0",yh=1e4,rx=1e3;var pn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(pn||(pn={}));var Je;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Je||(Je={}));var Ot;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ot||(Ot={}));var ro;(function(e){e.websocket="websocket"})(ro||(ro={}));var zr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(zr||(zr={}));class sx{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+a));l=l+a;const d=n.decode(t.slice(l,l+i));l=l+i;const c=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:d,payload:c}}}class vh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var je;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(je||(je={}));const Tc=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,l)=>(i[l]=nx(l,e,t,a),i),{})},nx=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,l=r[e];return i&&!n.includes(i)?wh(i,l):so(l)},wh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ox(t,r)}switch(e){case je.bool:return ax(t);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return ix(t);case je.json:case je.jsonb:return lx(t);case je.timestamp:return dx(t);case je.abstime:case je.date:case je.daterange:case je.int4range:case je.int8range:case je.money:case je.reltime:case je.text:case je.time:case je.timestamptz:case je.timetz:case je.tsrange:case je.tstzrange:return so(t);default:return so(t)}},so=e=>e,ax=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ix=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},lx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ox=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>wh(t,o))}return e},dx=e=>typeof e=="string"?e.replace(" ","T"):e,bh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class el{constructor(t,r,n={},a=yh){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Pc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Pc||(Pc={}));class yn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yn.syncState(this.state,a,i,l),this.pendingDiffs.forEach(d=>{this.state=yn.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=yn.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),l=this.transformState(r),o={},d={};return this.map(i,(c,u)=>{l[c]||(d[c]=u)}),this.map(l,(c,u)=>{const h=i[c];if(h){const p=u.map(E=>E.presence_ref),x=h.map(E=>E.presence_ref),k=u.filter(E=>x.indexOf(E.presence_ref)<0),m=h.filter(E=>p.indexOf(E.presence_ref)<0);k.length>0&&(o[c]=k),m.length>0&&(d[c]=m)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:d},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,d)=>{var c;const u=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(d),u.length>0){const h=t[o].map(x=>x.presence_ref),p=u.filter(x=>h.indexOf(x.presence_ref)<0);t[o].unshift(...p)}n(o,u,d)}),this.map(l,(o,d)=>{let c=t[o];if(!c)return;const u=d.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[o]=c,a(o,c,d),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Dc||(Dc={}));var Ac;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ac||(Ac={}));var Vt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Vt||(Vt={}));class cd{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new el(this,Ot.join,this.params,this.timeout),this.rejoinTimer=new vh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Je.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ot.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new yn(this),this.broadcastEndpointURL=bh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Je.closed){const{config:{broadcast:i,presence:l,private:o}}=this.params;this._onError(u=>t==null?void 0:t(Vt.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(Vt.CLOSED));const d={},c={broadcast:i,presence:l,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(Vt.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,x=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,k=[];for(let m=0;m<x;m++){const E=p[m],{filter:{event:y,schema:g,table:f,filter:b}}=E,T=u&&u[m];if(T&&T.event===y&&T.schema===g&&T.table===f&&T.filter===b)k.push(Object.assign(Object.assign({},E),{id:T.id}));else{this.unsubscribe(),this.state=Je.errored,t==null||t(Vt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(Vt.SUBSCRIBED);return}}).receive("error",u=>{this.state=Je.errored,t==null||t(Vt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Vt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Je.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ot.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new el(this,Ot.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new el(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const l=t.toLocaleLowerCase(),{close:o,error:d,leave:c,join:u}=Ot;if(n&&[o,d,c,u].indexOf(l)>=0&&n!==this._joinRef())return;let p=this._onMessage(l,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var k,m,E;return((k=x.filter)===null||k===void 0?void 0:k.event)==="*"||((E=(m=x.filter)===null||m===void 0?void 0:m.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(x=>x.callback(p,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var k,m,E,y,g,f;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const b=x.id,T=(k=x.filter)===null||k===void 0?void 0:k.event;return b&&((m=r.ids)===null||m===void 0?void 0:m.includes(b))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const b=(g=(y=x==null?void 0:x.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return b==="*"||b===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof p=="object"&&"ids"in p){const k=p.data,{schema:m,table:E,commit_timestamp:y,type:g,errors:f}=k;p=Object.assign(Object.assign({},{schema:m,table:E,commit_timestamp:y,eventType:g,new:{},old:{},errors:f}),this._getPayloadRecords(k))}x.callback(p,n)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&cd.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ot.close,{},t)}_onError(t){this._on(Ot.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Tc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Tc(t.columns,t.old_record)),r}}const Oc=()=>{},cx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ux{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oc,this.ref=0,this.logger=Oc,this.conn=null,this.sendBuffer=[],this.serializer=new sx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...o)=>Hn(async()=>{const{default:d}=await Promise.resolve().then(()=>Hs);return{default:d}},void 0,import.meta.url).then(({default:d})=>d(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${ro.websocket}`,this.httpEndpoint=bh(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new vh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Xm),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:tx}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case pn.connecting:return zr.Connecting;case pn.open:return zr.Open;case pn.closing:return zr.Closing;default:return zr.Closed}}isConnected(){return this.connectionState()===zr.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new cd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,l=()=>{this.encode(t,o=>{var d;(d=this.conn)===null||d===void 0||d.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:ex};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Ot.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(rx,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:l}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${l&&"("+l+")"||""}`,i),Array.from(this.channels).filter(o=>o._isMember(n)).forEach(o=>o._trigger(a,i,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ot.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([cx],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class ud extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Fe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class hx extends ud{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class no extends ud{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var fx=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(n.next(u))}catch(h){l(h)}}function d(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};const kh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hn(async()=>{const{default:n}=await Promise.resolve().then(()=>Hs);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},gx=()=>fx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hn(()=>Promise.resolve().then(()=>Hs),void 0,import.meta.url)).Response:Response}),ao=e=>{if(Array.isArray(e))return e.map(r=>ao(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=ao(n)}),t};var rs=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(n.next(u))}catch(h){l(h)}}function d(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};const tl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mx=(e,t,r)=>rs(void 0,void 0,void 0,function*(){const n=yield gx();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new hx(tl(a),e.status||500))}).catch(a=>{t(new no(tl(a),a))}):t(new no(tl(e),e))}),xx=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Wn(e,t,r,n,a,i){return rs(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,xx(t,n,a,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>mx(d,o,n))})})}function Xa(e,t,r,n){return rs(this,void 0,void 0,function*(){return Wn(e,"GET",t,r,n)})}function ur(e,t,r,n,a){return rs(this,void 0,void 0,function*(){return Wn(e,"POST",t,n,a,r)})}function px(e,t,r,n,a){return rs(this,void 0,void 0,function*(){return Wn(e,"PUT",t,n,a,r)})}function yx(e,t,r,n){return rs(this,void 0,void 0,function*(){return Wn(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function jh(e,t,r,n,a){return rs(this,void 0,void 0,function*(){return Wn(e,"DELETE",t,n,a,r)})}var at=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(n.next(u))}catch(h){l(h)}}function d(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};const vx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wx{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=kh(a)}uploadOrUpdate(t,r,n,a){return at(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Mc),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,d&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),p=yield h.json();return h.ok?{data:{path:c,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(Fe(i))return{data:null,error:i};throw i}})}upload(t,r,n){return at(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return at(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:Mc.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",c.cacheControl)):(d=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:d,headers:u}),p=yield h.json();return h.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(d){if(Fe(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return at(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield ur(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new ud("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}update(t,r,n){return at(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return at(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}copy(t,r,n){return at(this,void 0,void 0,function*(){try{return{data:{path:(yield ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return at(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ur(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return at(this,void 0,void 0,function*(){try{const a=yield ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}download(t,r){return at(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Xa(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Fe(o))return{data:null,error:o};throw o}})}info(t){return at(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Xa(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ao(n),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}exists(t){return at(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield yx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Fe(n)&&n instanceof no){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&a.push(d);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(t){return at(this,void 0,void 0,function*(){try{return{data:yield jh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}list(t,r,n){return at(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},vx),r),{prefix:t||""});return{data:yield ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const bx="2.7.1",kx={"X-Client-Info":`storage-js/${bx}`};var ls=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(n.next(u))}catch(h){l(h)}}function d(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};class jx{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},kx),r),this.fetch=kh(n)}listBuckets(){return ls(this,void 0,void 0,function*(){try{return{data:yield Xa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}getBucket(t){return ls(this,void 0,void 0,function*(){try{return{data:yield Xa(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ls(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ls(this,void 0,void 0,function*(){try{return{data:yield px(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ls(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ls(this,void 0,void 0,function*(){try{return{data:yield jh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}}class Nx extends jx{constructor(t,r={},n){super(t,r,n)}from(t){return new wx(this.url,this.headers,t,this.fetch)}}const _x="2.50.5";let ln="";typeof Deno<"u"?ln="deno":typeof document<"u"?ln="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ln="react-native":ln="node";const Sx={"X-Client-Info":`supabase-js-${ln}/${_x}`},Cx={headers:Sx},Ex={schema:"public"},Tx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Px={};var Dx=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(n.next(u))}catch(h){l(h)}}function d(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};const Ax=e=>{let t;return e?t=e:typeof fetch>"u"?t=lh:t=fetch,(...r)=>t(...r)},Ox=()=>typeof Headers>"u"?oh:Headers,Mx=(e,t,r)=>{const n=Ax(r),a=Ox();return(i,l)=>Dx(void 0,void 0,void 0,function*(){var o;const d=(o=yield t())!==null&&o!==void 0?o:e;let c=new a(l==null?void 0:l.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:c}))})};var Rx=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(n.next(u))}catch(h){l(h)}}function d(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};function Ix(e){return e.endsWith("/")?e:e+"/"}function $x(e,t){var r,n;const{db:a,auth:i,realtime:l,global:o}=e,{db:d,auth:c,realtime:u,global:h}=t,p={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),l),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Rx(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const Nh="2.70.0",us=30*1e3,io=3,rl=io*us,Lx="http://localhost:9999",zx="supabase.auth.token",Ux={"X-Client-Info":`gotrue-js/${Nh}`},lo="X-Supabase-Api-Version",_h={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Fx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qx=6e5;class hd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Bx extends hd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Hx(e){return ce(e)&&e.name==="AuthApiError"}class Sh extends hd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Dr extends hd{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class or extends Dr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gx(e){return ce(e)&&e.name==="AuthSessionMissingError"}class ca extends Dr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ua extends Dr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ha extends Dr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wx(e){return ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class Rc extends Dr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oo extends Dr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function sl(e){return ce(e)&&e.name==="AuthRetryableFetchError"}class Ic extends Dr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class vn extends Dr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Za="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$c=` 	
\r=`.split(""),Vx=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$c.length;t+=1)e[$c[t].charCodeAt(0)]=-2;for(let t=0;t<Za.length;t+=1)e[Za[t].charCodeAt(0)]=t;return e})();function Lc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Za[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Za[n]),t.queuedBits-=6}}function Ch(e,t,r){const n=Vx[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function zc(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{Jx(l,n,r)};for(let l=0;l<e.length;l+=1)Ch(e.charCodeAt(l),a,i);return t.join("")}function Qx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Kx(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Qx(n,t)}}function Jx(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Yx(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Ch(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Xx(e){const t=[];return Kx(e,r=>t.push(r)),new Uint8Array(t)}function Zx(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Lc(a,r,n)),Lc(null,r,n),t.join("")}function ep(e){return Math.round(Date.now()/1e3)+e}function tp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Pt=()=>typeof window<"u"&&typeof document<"u",Rr={tested:!1,writable:!1},wn=()=>{if(!Pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rr.tested)return Rr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rr.tested=!0,Rr.writable=!0}catch{Rr.tested=!0,Rr.writable=!1}return Rr.writable};function rp(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const Eh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hn(async()=>{const{default:n}=await Promise.resolve().then(()=>Hs);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},sp=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Th=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},fa=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ga=async(e,t)=>{await e.removeItem(t)};class Ni{constructor(){this.promise=new Ni.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ni.promiseConstructor=Promise;function nl(e){const t=e.split(".");if(t.length!==3)throw new vn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Fx.test(t[n]))throw new vn("JWT not in base64url format");return{header:JSON.parse(zc(t[0])),payload:JSON.parse(zc(t[1])),signature:Yx(t[2]),raw:{header:t[0],payload:t[1]}}}async function np(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ap(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function ip(e){return("0"+e.toString(16)).substr(-2)}function lp(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,ip).join("")}async function op(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function dp(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await op(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function os(e,t,r=!1){const n=lp();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Th(e,`${t}-code-verifier`,a);const i=await dp(n);return[i,n===i?"plain":"s256"]}const cp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function up(e){const t=e.headers.get(lo);if(!t||!t.match(cp))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function hp(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function fp(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ds(e){if(!gp.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var mp=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Lr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xp=[502,503,504];async function Uc(e){var t;if(!sp(e))throw new oo(Lr(e),0);if(xp.includes(e.status))throw new oo(Lr(e),e.status);let r;try{r=await e.json()}catch(i){throw new Sh(Lr(i),i)}let n;const a=up(e);if(a&&a.getTime()>=_h["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ic(Lr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new or}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Ic(Lr(r),e.status,r.weak_password.reasons);throw new Bx(Lr(r),e.status||500,n)}const pp=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function ge(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[lo]||(i[lo]=_h["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await yp(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function yp(e,t,r,n,a,i){const l=pp(t,n,a,i);let o;try{o=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new oo(Lr(d),0)}if(o.ok||await Uc(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(d){await Uc(d)}}function Gt(e){var t;let r=null;kp(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=ep(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Fc(e){const t=Gt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function gr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function vp(e){return{data:e,error:null}}function wp(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,l=mp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},d=Object.assign({},l);return{data:{properties:o,user:d},error:null}}function bp(e){return e}function kp(e){return e.access_token&&e.refresh_token&&e.expires_in}const al=["global","local","others"];var jp=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class Np{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Eh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=al[0]){if(al.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${al.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:gr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=jp(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:wp,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:gr})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,l,o,d;try{const c={nextPage:null,lastPage:0,total:0},u=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:bp});if(u.error)throw u.error;const h=await u.json(),p=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(k=>{const m=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(k.split(";")[1].split("=")[1]);c[`${E}Page`]=m}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ce(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){ds(t);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:gr})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ds(t);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:gr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ds(t);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:gr})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ds(t.userId);try{const{data:r,error:n}=await ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ds(t.userId),ds(t.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}}const _p={getItem:e=>wn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{wn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{wn()&&globalThis.localStorage.removeItem(e)}};function qc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Sp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cs={debug:!!(globalThis&&wn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ph extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Cp extends Ph{}async function Ep(e,t,r){cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),cs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Cp(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(cs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Sp();const Tp={url:Lx,storageKey:zx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ux,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Bc(e,t,r){return await r()}class Ln{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ln.nextInstanceID,Ln.nextInstanceID+=1,this.instanceID>0&&Pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Tp),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Np({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Eh(a.fetch),this.lock=a.lock||Bc,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Pt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ep:this.lock=Bc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:wn()?this.storage=_p:(this.memoryStorage={},this.storage=qc(this.memoryStorage)):(this.memoryStorage={},this.storage=qc(this.memoryStorage)),Pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Nh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=rp(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Pt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Wx(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ce(r)?{error:r}:{error:new Sh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Gt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:h,options:p}=t;let x=null,k=null;this.flowType==="pkce"&&([x,k]=await os(this.storage,this.storageKey)),i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:k},xform:Gt})}else if("phone"in t){const{phone:u,password:h,options:p}=t;i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Gt})}else throw new ua("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fc})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fc})}else throw new ua("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ca}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,l,o,d,c,u,h,p,x;let k,m;if("message"in t)k=t.message,m=t.signature;else{const{chain:E,wallet:y,statement:g,options:f}=t;let b;if(Pt())if(typeof y=="object")b=y;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))b=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const T=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const w=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),g?{statement:g}:null));let C;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")C=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)C=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)k=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),m=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${T.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(a=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(u=f==null?void 0:f.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const w=await b.signMessage(new TextEncoder().encode(k),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=w}}try{const{data:E,error:y}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Zx(m)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Gt});if(y)throw y;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new ca}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:y})}catch(E){if(ce(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const r=await fa(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:l}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Gt});if(await ga(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ca}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(ce(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:l}=t,o=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Gt}),{data:d,error:c}=o;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new ca}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,l;try{if("email"in t){const{email:o,options:d}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await os(this.storage,this.storageKey));const{error:h}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:d}=t,{data:c,error:u}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ua("You must provide either an email or phone number.")}catch(o){if(ce(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Gt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,c=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(ce(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await os(this.storage,this.storageKey)),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:vp})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new or;const{error:a}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:l}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:l,error:o}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new ua("You must provide either an email or phone number and a type")}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await fa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<rl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,c,u)=>(!l&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:gr}):await this._useSession(async r=>{var n,a,i;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new or}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:gr})})}catch(r){if(ce(r))return Gx(r)&&(await this._removeSession(),await ga(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new or;const l=a.session;let o=null,d=null;this.flowType==="pkce"&&t.email!=null&&([o,d]=await os(this.storage,this.storageKey));const{data:c,error:u}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:d}),jwt:l.access_token,xform:gr});if(u)throw u;return l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new or;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:l}=nl(t.access_token);if(l.exp&&(n=l.exp,a=n<=r),a){const{session:o,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ce(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new or;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Pt())throw new ha("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ha(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ha("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Rc("No code detected.");const{data:g,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:d,token_type:c}=t;if(!i||!o||!l||!c)throw new ha("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let p=u+h;d&&(p=parseInt(d));const x=p-u;x*1e3<=us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const k=p-h;u-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,p,u):u-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,p,u);const{data:m,error:E}=await this._getUser(i);if(E)throw E;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:p,refresh_token:l,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await fa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(Hx(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await ga(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=tp(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await os(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var l,o,d,c,u;const{data:h,error:p}=i;if(p)throw p;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Pt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ce(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:l}=r;if(l)throw l;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ap(async a=>(a>0&&await np(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Gt})),(a,i)=>{const l=200*Math.pow(2,a);return i&&sl(i)&&Date.now()+l-n<us})}catch(n){if(this._debug(r,"error",n),ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Pt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await fa(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<rl;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${rl}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),sl(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ni;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new or;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),ce(i)){const l={session:null,error:i};return sl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Th(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ga(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),us);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${us}ms, refresh threshold is ${io} ticks`),a<=io&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ph)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await os(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:c}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=nl(a.access_token);let o=null;l.aal&&(o=l.aal);let d=o;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n||(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+qx>Date.now()))return n;const{data:a,error:i}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new vn("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(l=>l.kid===t),!n)throw new vn("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:x,error:k}=await this.getSession();if(k||!x.session)return{data:null,error:k};n=x.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:d}}=nl(n);if(hp(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:a,signature:l},error:null}}const c=fp(a.alg),u=await this.fetchJwk(a.kid,r),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,l,Xx(`${o}.${d}`)))throw new vn("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}}Ln.nextInstanceID=0;const Pp=Ln;class Dp extends Pp{constructor(t){super(t)}}var Ap=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(n.next(u))}catch(h){l(h)}}function d(u){try{c(n.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((n=n.apply(e,t||[])).next())})};class Op{constructor(t,r,n){var a,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=Ix(t),d=new URL(o);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Ex,realtime:Px,auth:Object.assign(Object.assign({},Tx),{storageKey:c}),global:Cx},h=$x(n??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=Mx(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Jm(new URL("rest/v1",d).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Sm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Nx(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Ap(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:l,lock:o,debug:d},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dp({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:l,lock:o,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new ux(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Mp=(e,t,r)=>new Op(e,t,r),Rp="https://gfxphdzbawtuincogots.supabase.co",Ip="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmeHBoZHpiYXd0dWluY29nb3RzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxNTY5MTYsImV4cCI6MjA2NzczMjkxNn0.UO0Z-zPjyf0wzXW7XEjVHFygXVfg7o15-1RJaBhIJV4",R=Mp(Rp,Ip),Dh=S.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),bt=()=>{const e=S.useContext(Dh);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},$p=({children:e})=>{const[t,r]=S.useState(null),[n,a]=S.useState(null),[i,l]=S.useState(!0);S.useEffect(()=>{R.auth.getSession().then(({data:{session:c}})=>{a(c),r((c==null?void 0:c.user)??null),l(!1)});const{data:{subscription:d}}=R.auth.onAuthStateChange(async(c,u)=>{a(u),r((u==null?void 0:u.user)??null),l(!1)});return()=>d.unsubscribe()},[]);const o=async()=>{await R.auth.signOut()};return s.jsx(Dh.Provider,{value:{user:t,session:n,loading:i,signOut:o},children:e})},Ah=S.createContext({isDark:!0,toggleTheme:()=>{}}),Oh=()=>{const e=S.useContext(Ah);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Lp=({children:e})=>{const[t,r]=S.useState(!0);S.useEffect(()=>{const a=localStorage.getItem("theme");r(a?a==="dark":!0)},[]),S.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const n=()=>{r(!t)};return s.jsx(Ah.Provider,{value:{isDark:t,toggleTheme:n},children:e})},Mh=S.createContext(void 0),tn="study_timer_state",zp=({children:e})=>{const[t,r]=S.useState(!1),[n,a]=S.useState(0),[i,l]=S.useState(""),[o,d]=S.useState(!1),[c,u]=S.useState(null),[h,p]=S.useState(null),[x,k]=S.useState(0),m=S.useRef(null);S.useEffect(()=>{const T=localStorage.getItem(tn);if(T)try{const w=JSON.parse(T);if(w.isActive){const C=Date.now(),L=Math.floor((C-w.startTime)/1e3),Q=w.totalElapsed+L;r(!0),a(Q),l(w.subject),d(!0),u(w.timerId),p(w.startTime),k(w.totalElapsed)}}catch(w){console.error("Error loading timer state:",w),localStorage.removeItem(tn)}},[]);const E=S.useCallback(()=>{if(o&&h){const T={timerId:c||"",startTime:h,totalElapsed:x,isActive:t,subject:i,userId:""};localStorage.setItem(tn,JSON.stringify(T))}else localStorage.removeItem(tn)},[o,h,c,x,t,i]);S.useEffect(()=>(t&&h?m.current=setInterval(()=>{const T=Date.now(),w=Math.floor((T-h)/1e3),C=x+w;a(C)},1e3):m.current&&(clearInterval(m.current),m.current=null),()=>{m.current&&clearInterval(m.current)}),[t,h,x]),S.useEffect(()=>{if(t){const T=setInterval(E,5e3),w=()=>{E()};return window.addEventListener("beforeunload",w),()=>{clearInterval(T),window.removeEventListener("beforeunload",w)}}},[t,E]);const y=S.useCallback((T,w)=>{const C=Date.now(),L=`timer_${C}`;r(!0),l(T),d(!0),u(L),p(C),k(0),a(0),console.log("Timer started for:",T)},[]),g=S.useCallback(()=>{if(t&&h){const T=Date.now(),w=Math.floor((T-h)/1e3),C=x+w;r(!1),k(C),a(C),p(null),console.log("Timer paused at:",C,"seconds")}},[t,h,x]),f=S.useCallback(()=>{r(!1),a(0),l(""),d(!1),u(null),p(null),k(0),localStorage.removeItem(tn),console.log("Timer stopped")},[]),b={isRunning:t,elapsedTime:n,startTimer:y,pauseTimer:g,stopTimer:f,currentSubject:i,hasActiveTimer:o};return s.jsx(Mh.Provider,{value:b,children:e})},Rh=()=>{const e=S.useContext(Mh);if(e===void 0)throw new Error("useTimer must be used within a TimerProvider");return e},Ih=()=>{const[e,t]=S.useState(navigator.onLine),[r,n]=S.useState([]);return S.useEffect(()=>{const c=()=>t(!0),u=()=>t(!1);return window.addEventListener("online",c),window.addEventListener("offline",u),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",u)}},[]),{isOnline:e,saveOfflineData:(c,u)=>{try{const h=localStorage.getItem("offline_data"),p=h?JSON.parse(h):{};p[c]=u,localStorage.setItem("offline_data",JSON.stringify(p))}catch(h){console.error("Error saving offline data:",h)}},getOfflineData:c=>{try{const u=localStorage.getItem("offline_data");return(u?JSON.parse(u):{})[c]||null}catch(u){return console.error("Error getting offline data:",u),null}},addToPendingSync:c=>{const u=JSON.parse(localStorage.getItem("pending_sync")||"[]");u.push({...c,timestamp:Date.now()}),localStorage.setItem("pending_sync",JSON.stringify(u)),n(u)},clearPendingSync:()=>{localStorage.removeItem("pending_sync"),n([])},getPendingSync:()=>JSON.parse(localStorage.getItem("pending_sync")||"[]"),pendingSync:r}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Up={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(e,t)=>{const r=S.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:d,...c},u)=>S.createElement("svg",{ref:u,...Up,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Fp(e)}`,o].join(" "),...c},[...t.map(([h,p])=>S.createElement(h,p)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=ne("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ne("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ne("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=ne("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=ne("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=ne("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=ne("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=ne("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=ne("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=ne("FolderSync",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=ne("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=ne("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=ne("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=ne("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=ne("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=ne("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=ne("Sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=ne("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=ne("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=ne("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ly=()=>{const{isOnline:e,pendingSync:t}=Ih();return e&&t.length===0?null:s.jsx("div",{className:`fixed top-4 left-4 lg:top-4 lg:left-80 z-40 px-3 py-2 rounded-lg shadow-lg transition-all duration-300 ${e?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:s.jsx("div",{className:"flex items-center space-x-2",children:e?s.jsxs(s.Fragment,{children:[s.jsx(iy,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Online"}),t.length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Kp,{className:"w-3 h-3 animate-spin"}),s.jsxs("span",{className:"text-xs",children:["(",t.length,")"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(ay,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Offline"}),t.length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Bp,{className:"w-3 h-3"}),s.jsxs("span",{className:"text-xs",children:["(",t.length,")"]})]})]})})})},Vc=[{id:"dashboard",label:"Dashboard",icon:Lh},{id:"study",label:"Study",icon:$e},{id:"prayer",label:"Prayer",icon:Bt},{id:"quran",label:"Quran",icon:Yr},{id:"habits",label:"Habits",icon:pt},{id:"exam",label:"Exams",icon:Xr},{id:"routine",label:"Classes",icon:ct},{id:"sleep",label:"Sleep",icon:ot},{id:"academic",label:"Analysis",icon:ei},{id:"achievements",label:"Awards",icon:Jr},{id:"profile",label:"Profile",icon:Ht}],oy=({activeTab:e,setActiveTab:t,isOpen:r,setIsOpen:n})=>{const a=i=>{t(i),n(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 z-40 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:s.jsx($e,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),s.jsx("button",{onClick:()=>n(!r),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r?s.jsx(Pe,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"}):s.jsx(ey,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})})]})}),r&&s.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>n(!1)}),s.jsx("div",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-40 transform transition-transform duration-300 ${r?"translate-x-0":"-translate-x-full"}`,children:s.jsx("div",{className:"p-6 pt-20",children:s.jsx("nav",{className:"space-y-2",children:Vc.map(i=>{const l=i.icon;return s.jsxs("button",{onClick:()=>a(i.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===i.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(l,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:i.label})]},i.id)})})})}),s.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:s.jsx("div",{className:"grid grid-cols-5 gap-1 p-2",children:Vc.slice(0,5).map(i=>{const l=i.icon;return s.jsxs("button",{onClick:()=>a(i.id),className:`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-colors ${e===i.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-300"}`,children:[s.jsx(l,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-medium truncate",children:i.label})]},i.id)})})})]})},dy=({isRunning:e,elapsedTime:t,subject:r})=>{if(!e)return null;const n=a=>{const i=Math.floor(a/3600),l=Math.floor(a%3600/60),o=Math.floor(a%60);return`${i.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-pulse",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(zh,{className:"w-4 h-4"}),s.jsx(ct,{className:"w-4 h-4"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:r}),s.jsx("div",{className:"text-xs opacity-90",children:n(Math.floor(t))})]})]}),s.jsx("div",{className:"text-xs mt-1 opacity-75",children:"Timer running in background"})]})},cy=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(""),[a,i]=S.useState(""),[l,o]=S.useState(""),[d,c]=S.useState(!1),[u,h]=S.useState(!1),[p,x]=S.useState(""),k=async m=>{m.preventDefault(),c(!0),x("");try{if(e){const{data:E,error:y}=await R.auth.signUp({email:r,password:a,options:{data:{full_name:l}}});if(y)throw y;if(E.user&&!E.session)try{const{error:g}=await R.from("profiles").insert({user_id:E.user.id,email:E.user.email,full_name:l});g&&console.warn("Profile creation failed:",g)}catch(g){console.warn("Profile creation error:",g)}x("Check your email for the confirmation link!")}else{const{error:E}=await R.auth.signInWithPassword({email:r,password:a});if(E)throw E}}catch(E){console.error("Auth error:",E),x(E.message)}finally{c(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center p-4",children:[s.jsx("div",{className:`absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.05"%3E%3Cpath d="M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-20`}),s.jsx("div",{className:"relative w-full max-w-md",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx($h,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Life Tracker"}),s.jsx("p",{className:"text-emerald-100 text-sm",children:e?"Create your account":"Welcome back"})]}),s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:"text",value:l,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your full name",required:e})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:"email",value:r,onChange:m=>n(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:u?"text":"password",value:a,onChange:m=>i(m.target.value),className:"w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your password",required:!0}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-emerald-300 hover:text-emerald-200",children:u?s.jsx(Vp,{className:"w-5 h-5"}):s.jsx(Qp,{className:"w-5 h-5"})})]})]}),p&&s.jsx("div",{className:`p-3 rounded-lg text-sm ${p.includes("Check your email")?"bg-emerald-500/20 text-emerald-100 border border-emerald-400/30":"bg-red-500/20 text-red-100 border border-red-400/30"}`,children:p}),s.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Loading...":e?"Create Account":"Sign In"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>t(!e),className:"text-emerald-200 hover:text-emerald-100 text-sm transition-colors",children:e?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})]})},Qc=({setActiveTab:e})=>{var u;const{user:t}=bt(),{isDark:r}=Oh(),[n,a]=S.useState({studyHoursToday:0,prayersCompleted:0,totalPrayers:5,habitStreak:0,nextExamDays:0,quranReadToday:0,quranDailyGoal:2}),[i,l]=S.useState([]),o=new Date().toLocaleDateString("en-US",{weekday:"long"}),d=["Saturday","Sunday","Monday","Tuesday","Wednesday"].includes(o);S.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(!t)return;const h=new Date().toISOString().split("T")[0],p=new Date().toLocaleDateString("en-US",{weekday:"long"});try{const{data:x}=await R.from("study_sessions").select("duration").eq("user_id",t.id).eq("date",h),k=(x==null?void 0:x.reduce((L,Q)=>L+Q.duration,0))||0,{data:m}=await R.from("prayer_records").select("*").eq("user_id",t.id).eq("date",h),E=(m==null?void 0:m.length)||0,{data:y}=await R.from("habits").select("streak").eq("user_id",t.id).eq("type","good"),g=y&&y.length>0?Math.max(...y.map(L=>L.streak)):0,{data:f}=await R.from("exams").select("date").eq("user_id",t.id).gte("date",h).order("date",{ascending:!0}).limit(1);let b=0;if(f&&f.length>0){const L=new Date(f[0].date),Q=new Date,O=L.getTime()-Q.getTime();b=Math.ceil(O/(1e3*60*60*24))}const{data:T}=await R.from("class_schedules").select("*").eq("user_id",t.id).eq("day",p).order("time"),{data:w}=await R.from("quran_readings").select("pages").eq("user_id",t.id).eq("date",h),C=(w==null?void 0:w.reduce((L,Q)=>L+Q.pages,0))||0;a({studyHoursToday:Math.round(k*10)/10,prayersCompleted:E,totalPrayers:5,habitStreak:g,nextExamDays:b,quranReadToday:C,quranDailyGoal:2}),l(T||[])}catch(x){console.error("Error loading dashboard data:",x)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:["Welcome back, ",((u=t==null?void 0:t.user_metadata)==null?void 0:u.full_name)||"User"]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Let's make today productive and meaningful"})]}),s.jsx("div",{className:"hidden sm:block text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100",children:"Study Hours Today"}),s.jsxs("p",{className:"text-2xl font-bold",children:[n.studyHoursToday.toFixed(1),"h"]})]}),s.jsx($e,{className:"w-8 h-8 text-emerald-200"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${Math.min(n.studyHoursToday/6*100,100)}%`}})}),s.jsxs("p",{className:"text-xs text-emerald-100 mt-1",children:[Math.round(n.studyHoursToday/6*100),"% of daily goal"]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-teal-100",children:"Prayers Completed"}),s.jsxs("p",{className:"text-2xl font-bold",children:[n.prayersCompleted,"/",n.totalPrayers]})]}),s.jsx(Bt,{className:"w-8 h-8 text-teal-200"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"bg-teal-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${n.prayersCompleted/n.totalPrayers*100}%`}})}),s.jsx("p",{className:"text-xs text-teal-100 mt-1",children:n.prayersCompleted===5?"All completed!":"Keep going!"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-amber-100",children:"Habit Streak"}),s.jsx("p",{className:"text-2xl font-bold",children:n.habitStreak})]}),s.jsx(fd,{className:"w-8 h-8 text-amber-200"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-xs text-amber-100",children:"Days consistent"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-rose-500 to-pink-500 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-rose-100",children:"Exam in"}),s.jsx("p",{className:"text-2xl font-bold",children:n.nextExamDays||"None"})]}),s.jsx(Xr,{className:"w-8 h-8 text-rose-200"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-xs text-rose-100",children:n.nextExamDays>0?"Days remaining":"No upcoming exams"})})]})]}),d&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Today's Classes"}),s.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:o})]})]}),s.jsx("div",{className:"space-y-3",children:i.length>0?i.map((h,p)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:h.subject}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[h.instructor,"  ",h.location]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:h.time})})]},p)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ct,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No classes scheduled for today"}),s.jsx("p",{className:"text-sm mt-1",children:"Add your class schedule to see it here"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Today's Progress"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx($e,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Study Session"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${Math.min(n.studyHoursToday/6*100,100)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(n.studyHoursToday/6*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center",children:s.jsx(Bt,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Daily Prayers"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-teal-600 h-2 rounded-full",style:{width:`${n.prayersCompleted/n.totalPrayers*100}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(n.prayersCompleted/n.totalPrayers*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-amber-100 dark:bg-amber-900 rounded-full flex items-center justify-center",children:s.jsx(Yr,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Quran Reading"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:`${Math.min(n.quranReadToday/n.quranDailyGoal*100,100)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(n.quranReadToday/n.quranDailyGoal*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center",children:s.jsx(ot,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Sleep Goal"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full w-0"})}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"0%"})]})]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>e("study"),className:"w-full bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx($e,{className:"w-4 h-4"}),s.jsx("span",{children:"Start Study Session"})]}),s.jsxs("button",{onClick:()=>e("prayer"),className:"w-full bg-teal-50 dark:bg-teal-900/20 hover:bg-teal-100 dark:hover:bg-teal-900/30 text-teal-700 dark:text-teal-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx(Bt,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Prayer"})]}),s.jsxs("button",{onClick:()=>e("habits"),className:"w-full bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-700 dark:text-amber-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx(pt,{className:"w-4 h-4"}),s.jsx("span",{children:"Update Habits"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Achievements"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[s.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center",children:s.jsx(_r,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"Getting Started"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Welcome to Life Tracker!"})]})]}),s.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx($e,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"First Steps"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Start tracking to unlock achievements"})]})]})]})]})]})]})]})},uy=[{id:"dashboard",label:"Dashboard",icon:Lh},{id:"study",label:"Study Tracker",icon:$e},{id:"prayer",label:"Prayer Tracker",icon:Bt},{id:"quran",label:"Quran Tracker",icon:Yr},{id:"habits",label:"Habit Tracker",icon:pt},{id:"exam",label:"Exam Countdown",icon:Xr},{id:"routine",label:"Classes",icon:ct},{id:"sleep",label:"Sleep Tracker",icon:ot},{id:"academic",label:"Academic",icon:ei},{id:"achievements",label:"Achievements",icon:Jr},{id:"profile",label:"Profile",icon:Ht}],hy=({activeTab:e,setActiveTab:t})=>{var o;const{signOut:r,user:n}=bt(),{isDark:a,toggleTheme:i}=Oh(),l=async()=>{await r()};return s.jsxs("div",{className:"fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-10 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[s.jsxs("div",{className:"flex-1 flex flex-col p-6 min-h-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-8",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:s.jsx($h,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),s.jsx("nav",{className:`space-y-2 overflow-y-auto flex-1 min-h-0 sidebar-scrollbar${a?" dark":""}`,children:uy.map(d=>{const c=d.icon;return s.jsxs("button",{onClick:()=>t(d.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===d.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-r-2 border-emerald-600 dark:border-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(c,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:d.label})]},d.id)})})]}),s.jsx("div",{className:"px-6 pb-6 space-y-4",children:s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx(Ht,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white truncate",children:((o=n==null?void 0:n.user_metadata)==null?void 0:o.full_name)||"User"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:n==null?void 0:n.email})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[a?s.jsx(gd,{className:"w-4 h-4"}):s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:a?"Light":"Dark"})]}),s.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[s.jsx(Yp,{className:"w-4 h-4"}),s.jsx("span",{children:"Sign Out"})]})]})]})})]})},fy=()=>{const{user:e}=bt(),{isOnline:t,saveOfflineData:r,getOfflineData:n,addToPendingSync:a}=Ih(),{isRunning:i,elapsedTime:l,startTimer:o,pauseTimer:d,stopTimer:c,currentSubject:u,hasActiveTimer:h}=Rh(),[p,x]=S.useState(""),[k,m]=S.useState(6),[E,y]=S.useState(0),[g,f]=S.useState([]),[b,T]=S.useState([]),[w,C]=S.useState(!1),[L,Q]=S.useState("");S.useEffect(()=>{e&&O()},[e]),S.useEffect(()=>{h&&u&&x(u)},[h,u]);const O=async()=>{if(!e)return;const $=new Date().toISOString().split("T")[0],{data:v}=await R.from("study_sessions").select("duration").eq("user_id",e.id).eq("date",$);if(v){const J=v.reduce((se,z)=>se+z.duration,0);y(Math.round(J*10)/10)}const I=new Date;I.setDate(I.getDate()-I.getDay());const{data:F}=await R.from("study_sessions").select("date, duration").eq("user_id",e.id).gte("date",I.toISOString().split("T")[0]);if(F){const J=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],se=J.map(z=>({day:z,hours:Math.round(F.filter(ue=>new Date(ue.date).getDay()===J.indexOf(z)).reduce((ue,P)=>ue+P.duration,0)*10)/10}));T(se)}const{data:Y}=await R.from("study_sessions").select("subject, duration").eq("user_id",e.id).gte("date",I.toISOString().split("T")[0]);if(Y){const J=new Map;Y.forEach(ue=>{const P=J.get(ue.subject)||0;J.set(ue.subject,P+ue.duration)});const se=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"],z=Array.from(J.entries()).map(([ue,P],X)=>({name:ue,hours:Math.round(Number(P)*10)/10,color:se[X%se.length]}));f(z)}},V=()=>{if(!p.trim()){alert("Please select or enter a subject first");return}e&&o(p,e.id)},ee=()=>{d()},A=async()=>{if(!e||l===0)return;const $=new Date().toISOString().split("T")[0],v=l/3600,I={user_id:e.id,subject:p,duration:v,date:$,notes:`${Math.floor(l/3600)}h ${Math.floor(l%3600/60)}m session`};if(t){const{error:F}=await R.from("study_sessions").insert(I);F||(c(),x(""),O())}else{a({table:"study_sessions",operation:"insert",data:I}),c(),x("");const F=n("study_sessions")||[];F.push({...I,id:Date.now().toString()}),r("study_sessions",F),O()}},K=()=>{L.trim()&&!g.find($=>$.name===L)&&(f($=>[...$,{name:L,hours:0,color:["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"][$.length%5]}]),Q(""),C(!1))},G=()=>l,N=$=>{const v=Math.floor($/3600),I=Math.floor($%3600/60),F=Math.floor($%60);return`${v.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Study Tracker"}),s.jsxs("button",{onClick:()=>C(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Subject"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Current Session"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsx("span",{children:i?"Active":"Paused"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),s.jsxs("select",{value:p,onChange:$=>x($.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",disabled:i,children:[s.jsx("option",{value:"",children:"Select a subject"}),g.map($=>s.jsx("option",{value:$.name,children:$.name},$.name))]})]}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-6xl font-bold text-gray-800 dark:text-white mb-2",children:N(Math.floor(G()))}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:p||"Select a subject to start"}),i&&s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"Session in progress..."})]}),s.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[i?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:ee,className:"px-8 py-3 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[s.jsx(ty,{className:"w-5 h-5"}),s.jsx("span",{children:"Pause"})]}),s.jsx("button",{onClick:A,className:"px-8 py-3 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg font-medium transition-colors",children:"End Session"})]}):s.jsxs("button",{onClick:V,disabled:!p,className:"px-8 py-3 bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[s.jsx(zh,{className:"w-5 h-5"}),s.jsx("span",{children:"Start"})]}),s.jsx("button",{onClick:()=>{c(),x("")},className:"px-8 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Reset"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[E.toFixed(1),"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today's Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[k,"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily Goal"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(E/k*100),"%"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Progress"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("span",{children:"Progress towards daily goal"}),s.jsxs("span",{children:[E.toFixed(1),"/",k.toFixed(1)," hours"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(E/k*100,100)}%`}})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Subject Breakdown"}),s.jsx("div",{className:"space-y-4",children:g.length>0?g.map($=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${$.color}`}),s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:$.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[$.hours.toFixed(1),"h"]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"this week"})]})]},$.name)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx($e,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No subjects added yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add subjects to track your study progress"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Weekly Overview"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(_r,{className:"w-4 h-4"}),s.jsxs("span",{children:[b.reduce(($,v)=>$+v.hours,0).toFixed(1),"h total"]})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:b.map($=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:$.day}),s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[$.hours.toFixed(1),"h"]})})]},$.day))})]}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Subject"}),s.jsx("button",{onClick:()=>C(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:L,onChange:$=>Q($.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics, Physics, etc."})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>C(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:K,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Subject"})]})]})]})})]})},gy=()=>{const{user:e}=bt(),t=[{name:"Fajr",time:"05:00",completed:!1,type:null,icon:Uh},{name:"Dhuhr",time:"12:00",completed:!1,type:null,icon:gd},{name:"Asr",time:"16:00",completed:!1,type:null,icon:Hp},{name:"Maghrib",time:"18:00",completed:!1,type:null,icon:Fh},{name:"Isha",time:"20:00",completed:!1,type:null,icon:ot}],[r,n]=S.useState(t),[a,i]=S.useState(!1),[l,o]=S.useState(null),[d,c]=S.useState(""),[u,h]=S.useState(0),[p,x]=S.useState(0),[k,m]=S.useState(null),[E,y]=S.useState({totalPrayers:0,totalPossible:35,withJamat:0,consistency:0,bestStreak:0,personalBest:0}),[g,f]=S.useState([]),[b,T]=S.useState(!1);S.useEffect(()=>{e&&(n(t),L(),w())},[e]);const w=async()=>{if(!e)return;console.log("Testing database connection...");const{data:P,error:X}=await R.from("missed_prayers").select("count").eq("user_id",e.id).limit(1);console.log("Database connection test:",{data:P,error:X})},C=async()=>{if(!e)return;const P=new Date().toISOString().split("T")[0];console.log("Clearing all prayers for today:",P);try{const{error:X}=await R.from("prayer_records").delete().eq("user_id",e.id).eq("date",P);console.log("Clear regular prayers result:",{error:X});const{error:ie}=await R.from("missed_prayers").delete().eq("user_id",e.id).eq("missed_date",P);console.log("Clear kaza prayers result:",{error:ie}),await L()}catch(X){console.error("Error clearing prayers:",X)}},L=async()=>{if(e)try{const[P,X,ie,oe,le]=await Promise.all([ee(),A(),K(),G(),N()]);if(P){const he=t.map(ae=>{const de=P.find(sr=>sr.prayer_name===ae.name);let _e=null;if(le)switch(ae.name){case"Fajr":_e=le.fajr_time;break;case"Dhuhr":_e=le.dhuhr_time;break;case"Asr":_e=le.asr_time;break;case"Maghrib":_e=le.maghrib_time;break;case"Isha":_e=le.isha_time;break}return{...ae,time:_e||ae.time,completed:!!de,type:(de==null?void 0:de.prayer_type)||null}});n(he)}await $()}catch(P){console.error("Error loading prayer data:",P)}},Q=(P,X)=>{o(P),c(X)},O=async P=>{if(e)try{const ie={Fajr:"fajr_time",Dhuhr:"dhuhr_time",Asr:"asr_time",Maghrib:"maghrib_time",Isha:"isha_time"}[P];if(!ie){console.error("Invalid prayer name:",P);return}const{error:oe}=await R.from("user_settings").upsert({user_id:e.id,[ie]:d},{onConflict:"user_id"});if(oe){console.error("Error saving prayer time:",oe);return}n(le=>le.map(he=>he.name===P?{...he,time:d}:he)),o(null),c(""),console.log("Prayer time saved successfully:",P,d)}catch(X){console.error("Error saving prayer time:",X)}},V=()=>{o(null),c("")},ee=async()=>{if(!e)return null;const P=new Date().toISOString().split("T")[0];console.log("Loading today's prayers for date:",P);const{data:X,error:ie}=await R.from("prayer_records").select("*").eq("user_id",e.id).eq("date",P);console.log("Regular prayers loaded:",X,"Error:",ie);const{data:oe,error:le}=await R.from("missed_prayers").select("*").eq("user_id",e.id).eq("missed_date",P);console.log("Kaza prayers loaded:",oe,"Error:",le);const he=new Map;X&&X.forEach(de=>{he.set(de.prayer_name,{...de,prayer_type:de.prayer_type,date:de.date,time:de.time,completed:!0})}),oe&&oe.forEach(de=>{he.has(de.prayer_name)||he.set(de.prayer_name,{...de,prayer_type:"kaza",date:de.missed_date,time:de.completed_time||de.prayer_time,completed:de.is_completed})});const ae=Array.from(he.values());return console.log("Combined prayers for today:",ae),ae},A=async()=>{if(!e)return;const P=new Date;P.setDate(P.getDate()-P.getDay());const X=P.toISOString().split("T")[0],ie=new Date(P);ie.setDate(ie.getDate()+6);const oe=ie.toISOString().split("T")[0],{data:le,error:he}=await R.from("prayer_records").select("*").eq("user_id",e.id).gte("date",X).lte("date",oe);if(le){const ae=le.filter(He=>He.prayer_type!=="kaza"),de=ae.length,_e=35,sr=ae.filter(He=>He.prayer_type==="jamat").length,Ar=Math.round(de/_e*100);y({totalPrayers:de,totalPossible:_e,withJamat:sr,consistency:Ar,bestStreak:0,personalBest:0})}},K=async()=>{if(!e)return;const P=new Date;let X=0,ie=new Date(P);for(;;){const ae=ie.toISOString().split("T")[0],{data:de}=await R.from("prayer_records").select("*").eq("user_id",e.id).eq("date",ae);if(de&&de.length>=5)X++,ie.setDate(ie.getDate()-1);else break}h(X);const oe=new Date;oe.setDate(1);const le=oe.toISOString().split("T")[0],{data:he}=await R.from("prayer_records").select("*").eq("user_id",e.id).gte("date",le);if(he){const de=new Date().getDate()*5,_e=Math.round(he.length/de*100);x(_e)}},G=async()=>{if(!e)return;const P=new Date;P.setDate(P.getDate()-30);const X=P.toISOString().split("T")[0],ie=new Date().toISOString().split("T")[0];console.log("Loading kaza prayers from:",X,"to:",ie);const{data:oe,error:le}=await R.from("missed_prayers").select("*").eq("user_id",e.id).gte("missed_date",X).lte("missed_date",ie).order("missed_date",{ascending:!1});if(console.log("Missed prayers data:",oe,"Error:",le),oe){const he=oe.map(ae=>({id:ae.id,prayer_name:ae.prayer_name,date:ae.missed_date,completed:ae.is_completed,completed_date:ae.completed_date,prayer_time:ae.prayer_time}));console.log("Processed kaza prayers list:",he),f(he)}else f([])},N=async()=>{if(!e)return null;try{const{data:P,error:X}=await R.from("user_settings").select("fajr_time, dhuhr_time, asr_time, maghrib_time, isha_time").eq("user_id",e.id).single();return X?(console.error("Error loading prayer times:",X),null):P}catch(P){return console.error("Error loading prayer times:",P),null}},$=async()=>{},v=async(P,X)=>{var le;if(!e)return;const ie=new Date().toISOString().split("T")[0],oe=new Date().toTimeString().slice(0,5);console.log("Logging prayer:",{prayerName:P,type:X,today:ie,now:oe});try{if(X==="kaza"){const{data:he,error:ae}=await R.from("missed_prayers").upsert({user_id:e.id,prayer_name:P,missed_date:ie,prayer_time:((le=r.find(de=>de.name===P))==null?void 0:le.time)||"00:00",is_completed:!1,completed_date:null,completed_time:null},{onConflict:"user_id,prayer_name,missed_date"}).select();if(console.log("Kaza prayer insert result:",{data:he,error:ae}),ae){console.error("Error adding kaza prayer:",ae);return}n(de=>de.map(_e=>_e.name===P?{..._e,completed:!0,type:X}:_e)),m(null),await G()}else{const{data:he,error:ae}=await R.from("prayer_records").upsert({user_id:e.id,prayer_name:P,prayer_type:X,date:ie,time:oe},{onConflict:"user_id,prayer_name,date"}).select();if(console.log("Regular prayer insert result:",{data:he,error:ae}),ae){console.error("Error adding regular prayer:",ae);return}await R.from("missed_prayers").delete().eq("user_id",e.id).eq("prayer_name",P).eq("missed_date",ie),n(de=>de.map(_e=>_e.name===P?{..._e,completed:!0,type:X}:_e)),m(null),await Promise.all([A(),K(),G()])}}catch(he){console.error("Unexpected error logging prayer:",he)}},I=async P=>{if(!e)return;const X=new Date().toISOString().split("T")[0],ie=r.find(oe=>oe.name===P);console.log("Removing prayer:",{prayerName:P,type:ie==null?void 0:ie.type,today:X});try{if((ie==null?void 0:ie.type)==="kaza"){const{data:oe,error:le}=await R.from("missed_prayers").delete().eq("user_id",e.id).eq("prayer_name",P).eq("missed_date",X);if(console.log("Kaza prayer delete result:",{data:oe,error:le}),le){console.error("Error deleting kaza prayer:",le);return}n(he=>he.map(ae=>ae.name===P?{...ae,completed:!1,type:null}:ae)),await G()}else{const{data:oe,error:le}=await R.from("prayer_records").delete().eq("user_id",e.id).eq("prayer_name",P).eq("date",X);if(console.log("Regular prayer delete result:",{data:oe,error:le}),le){console.error("Error deleting regular prayer:",le);return}n(he=>he.map(ae=>ae.name===P?{...ae,completed:!1,type:null}:ae)),await Promise.all([A(),K()])}}catch(oe){console.error("Unexpected error removing prayer:",oe)}},F=r.filter(P=>P.completed&&P.type!=="kaza").length,Y=F/r.length*100,J=P=>{switch(P){case"jamat":return s.jsx(Gc,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"});case"individual":return s.jsx(Ht,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"kaza":return s.jsx(ma,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});default:return null}},se=P=>{switch(P){case"jamat":return"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800";case"individual":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case"kaza":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";default:return"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}},z=async P=>{if(!e)return;const X=new Date().toISOString().split("T")[0],ie=new Date().toTimeString().slice(0,5),{data:oe,error:le}=await R.from("missed_prayers").update({is_completed:!0,completed_date:X,completed_time:ie,updated_at:new Date().toISOString()}).eq("id",P.id).select();!le&&oe&&(f(he=>he.map(ae=>ae.id===P.id?{...ae,completed:!0,completed_date:X}:ae)),await Promise.all([A(),K(),G()]))},ue=async P=>{if(!e)return;const{error:X}=await R.from("missed_prayers").update({is_completed:!1,completed_date:null,completed_time:null,updated_at:new Date().toISOString()}).eq("id",P.id);X||(f(ie=>ie.map(oe=>oe.id===P.id?{...oe,completed:!1,completed_date:void 0}:oe)),await Promise.all([A(),K(),G()]))};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Prayer Tracker"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:C,className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"Clear Today"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bt,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-medium",children:[F,"/5"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Daily prayers completed"}),s.jsxs("span",{children:[Math.round(Y),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${Y}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:u}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[p,"%"]}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Monthly Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Prayers"}),s.jsx("div",{className:"space-y-4",children:r.map(P=>{const X=P.icon;return s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${P.completed?se(P.type):"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${P.completed?"bg-emerald-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:s.jsx(X,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:P.name}),P.type&&J(P.type)]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(ct,{className:"w-4 h-4"}),l===P.name?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"time",value:d,onChange:ie=>c(ie.target.value),className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md px-2 py-1 text-sm"}),s.jsx("button",{onClick:()=>O(P.name),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",children:s.jsx(ti,{className:"w-4 h-4"})}),s.jsx("button",{onClick:V,className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:s.jsx(Pe,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:P.time}),s.jsx("button",{onClick:()=>Q(P.name,P.time),className:"w-4 h-4 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",children:s.jsx(ry,{className:"w-3 h-3"})})]}),P.type&&s.jsxs("span",{className:"capitalize",children:[" ",P.type==="jamat"?"With Jamat":P.type==="individual"?"Individual":"Kaza/Missed"]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:P.completed?s.jsx("button",{onClick:()=>I(P.name),className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:""}):s.jsx("button",{onClick:()=>m(P.name),className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400 flex items-center justify-center transition-colors",children:s.jsx(uo,{className:"w-4 h-4 text-gray-400"})})})]},P.name)})})]}),k&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:["Log ",k," Prayer"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>v(k,"jamat"),className:"w-full flex items-center space-x-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors",children:[s.jsx(Gc,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"With Jamat"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed in congregation"})]})]}),s.jsxs("button",{onClick:()=>v(k,"individual"),className:"w-full flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:[s.jsx(Ht,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Individual"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed alone"})]})]}),s.jsxs("button",{onClick:()=>v(k,"kaza"),className:"w-full flex items-center space-x-3 p-3 bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors",children:[s.jsx(ma,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Mark as Missed"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add to kaza list for later completion"})]})]})]}),s.jsx("button",{onClick:()=>m(null),className:"w-full mt-4 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total prayers"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[E.totalPrayers,"/",E.totalPossible]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"With Jamat"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[E.withJamat,"/",E.totalPossible]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Consistency"}),s.jsxs("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:[E.consistency,"%"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Best Streak"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2",children:u}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Days of consistent prayers"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Current streak"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Kaza Prayers (Last 30 Days)"}),s.jsx("button",{onClick:()=>T(!b),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:b?"Hide Details":"Show Details"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("span",{children:"Missed prayers"}),s.jsxs("span",{children:[g.filter(P=>!P.completed).length," remaining"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${g.filter(P=>P.completed).length/Math.max(g.length,1)*100}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[g.filter(P=>P.completed).length," of ",g.length," completed"]})]}),b&&s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:g.length>0?g.map(P=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${P.completed?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${P.completed?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:s.jsx(ma,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:P.prayer_name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Missed on ",new Date(P.date).toLocaleDateString(),P.completed&&s.jsxs("span",{className:"ml-2 text-green-600 dark:text-green-400",children:[" Completed on ",new Date(P.completed_date).toLocaleDateString()]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:P.completed?s.jsx("button",{onClick:()=>ue(P),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Mark as incomplete",children:""}):s.jsx("button",{onClick:()=>z(P),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",title:"Mark as completed",children:""})})]},P.id)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ma,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No missed prayers in the last 30 days"}),s.jsx("p",{className:"text-sm mt-1",children:"Great job keeping up with your prayers!"})]})})]})]})})},my=()=>{const{user:e}=bt(),[t,r]=S.useState(2),[n,a]=S.useState(0),[i,l]=S.useState(""),[o,d]=S.useState(0),[c,u]=S.useState(0),[h,p]=S.useState(0),[x,k]=S.useState([]),[m,E]=S.useState([]),[y,g]=S.useState({totalPages:0,totalSessions:0,averagePerDay:0,consistency:0}),[f,b]=S.useState(!1),[T,w]=S.useState(!1),[C,L]=S.useState(!1),[Q,O]=S.useState(!1),[V,ee]=S.useState({pages:1,surah:"",verses:"",notes:""}),[A,K]=S.useState({surah:"",verse:"",page:"",notes:""});po.useEffect(()=>{e&&(G(),N(),$(),se())},[e]);const G=async()=>{if(!e)return;const z=new Date().toISOString().split("T")[0],{data:ue}=await R.from("quran_readings").select("pages").eq("user_id",e.id).eq("date",z);if(ue){const oe=ue.reduce((le,he)=>le+he.pages,0);a(oe)}const{data:P}=await R.from("quran_readings").select("*").eq("user_id",e.id).order("date",{ascending:!1});if(P&&(k(P),P.length>0)){l(P[0].surah);const oe=P.reduce((le,he)=>le+he.pages,0);u(oe)}const X=new Date;X.setDate(1);const{data:ie}=await R.from("quran_readings").select("pages, date").eq("user_id",e.id).gte("date",X.toISOString().split("T")[0]);if(ie){const oe=ie.reduce((de,_e)=>de+_e.pages,0),le=ie.length,he=new Date().getDate(),ae=oe/he;g({totalPages:oe,totalSessions:le,averagePerDay:Math.round(ae*10)/10,consistency:Math.round(le/he*100)})}},N=async()=>{if(!e)return;const z=new Date;let ue=0,P=new Date(z);for(;;){const X=P.toISOString().split("T")[0],{data:ie}=await R.from("quran_readings").select("*").eq("user_id",e.id).eq("date",X);if(ie&&ie.length>0)ue++,P.setDate(P.getDate()-1);else break}p(ue)},$=async()=>{if(!e)return;const{data:z}=await R.from("quran_bookmarks").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});z&&E(z)},v=async()=>{if(!e||V.pages<=0)return;const z=new Date().toISOString().split("T")[0];new Date().toTimeString().slice(0,5);const{error:ue}=await R.from("quran_readings").insert({user_id:e.id,pages:V.pages,surah:V.surah,verses:V.verses,date:z,notes:V.notes});ue||(b(!1),ee({pages:1,surah:"",verses:"",notes:""}),await G(),await N())},I=async()=>{if(!e||!A.surah)return;const{error:z}=await R.from("quran_bookmarks").upsert({user_id:e.id,surah:A.surah,verse:A.verse,page:A.page,notes:A.notes,created_at:new Date().toISOString()},{onConflict:"user_id,surah"});z||(w(!1),K({surah:"",verse:"",page:"",notes:""}),await $())},F=async z=>{if(!e)return;const{error:ue}=await R.from("quran_readings").delete().eq("id",z).eq("user_id",e.id);ue||(await G(),await N())},Y=async z=>{if(!e)return;const{error:ue}=await R.from("quran_bookmarks").delete().eq("id",z).eq("user_id",e.id);ue||await $()},J=async z=>{if(!e)return;const{error:ue}=await R.from("user_settings").upsert({user_id:e.id,quran_daily_goal:z},{onConflict:"user_id"});ue||(r(z),O(!1))},se=async()=>{if(!e)return;const{data:z}=await R.from("user_settings").select("quran_daily_goal").eq("user_id",e.id).single();z&&z.quran_daily_goal&&r(z.quran_daily_goal)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Quran Tracker"}),s.jsxs("button",{onClick:()=>b(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx($e,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Reading"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Reading"}),s.jsx("button",{onClick:()=>O(!0),className:"text-sm bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg transition-colors",children:"Set Goal"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Daily goal progress"}),s.jsxs("span",{children:[Math.round(n/t*100),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${Math.min(n/t*100,100)}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:h}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold",children:i||"Not started"}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Current Surah"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:c}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Pages Read"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Reading Goal"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("input",{type:"number",value:t,onChange:z=>r(Number(z.target.value)),className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"pages per day"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complete Quran in"}),s.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[Math.ceil((604-y.totalPages*2)/t)," days"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"At current pace"})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(y.totalPages/604*100),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(y.totalPages/604*100,100)}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[y.totalPages," of 604 pages completed"]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>b(!0),className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors border border-emerald-200 dark:border-emerald-800",children:[s.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:"Log Reading Session"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Record pages read"})]}),s.jsxs("button",{onClick:()=>w(!0),className:"p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Set Bookmark"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Save current position"})]}),s.jsxs("button",{onClick:()=>L(!0),className:"p-4 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors border border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"View Progress"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Detailed analytics"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Readings"}),s.jsxs("div",{className:"space-y-3",children:[x.map((z,ue)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900/20 rounded-full flex items-center justify-center",children:s.jsx(Yr,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:z.surah}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",z.verses]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[z.pages," pages"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:z.date})]}),s.jsx("button",{onClick:()=>F(z.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete reading",children:s.jsx(Pe,{className:"w-3 h-3"})})]})]},ue)),x.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Yr,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No readings recorded yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Start your Quran reading journey today!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bookmarks"}),s.jsxs("div",{className:"space-y-3",children:[m.map((z,ue)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(Hc,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:z.surah}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",z.verse]}),s.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:z.page?`Page ${z.page}`:""})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:z.notes}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:z.created_at})]}),s.jsx("button",{onClick:()=>Y(z.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete bookmark",children:s.jsx(Pe,{className:"w-3 h-3"})})]})]},ue)),m.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Hc,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No bookmarks saved yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Bookmark your favorite verses!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Monthly Statistics"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(_r,{className:"w-4 h-4"}),s.jsx("span",{children:"This month"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:y.totalPages}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y.totalSessions}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Reading Sessions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:y.averagePerDay}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Pages/Day"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[y.consistency,"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Reading Session"}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pages Read"}),s.jsx("input",{type:"number",value:V.pages,onChange:z=>ee({...V,pages:Number(z.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),s.jsx("input",{type:"text",value:V.surah,onChange:z=>ee({...V,surah:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Fatiha"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verses"}),s.jsx("input",{type:"text",value:V.verses,onChange:z=>ee({...V,verses:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 1-7"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:V.notes,onChange:z=>ee({...V,notes:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any reflections or notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:v,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),s.jsx("button",{onClick:()=>b(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),T&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Bookmark"}),s.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),s.jsx("input",{type:"text",value:A.surah,onChange:z=>K({...A,surah:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Baqarah"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verse"}),s.jsx("input",{type:"text",value:A.verse,onChange:z=>K({...A,verse:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 255"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Page (Optional)"}),s.jsx("input",{type:"text",value:A.page,onChange:z=>K({...A,page:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 42"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:A.notes,onChange:z=>K({...A,notes:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Why this bookmark is important..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:I,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Set Bookmark"}),s.jsx("button",{onClick:()=>w(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Detailed Progress"}),s.jsx("button",{onClick:()=>L(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:y.totalPages}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y.totalSessions}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sessions"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:y.averagePerDay}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg/Day"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[y.consistency,"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Quran Completion Progress"}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:s.jsx("div",{className:"bg-emerald-500 h-4 rounded-full transition-all duration-300",style:{width:`${Math.min(y.totalPages/604*100,100)}%`}})}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[y.totalPages," of 604 pages completed (",Math.round(y.totalPages/604*100),"%)"]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>L(!1),className:"w-full bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Close"})})]})}),Q&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Daily Goal"}),s.jsx("button",{onClick:()=>O(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),s.jsx("input",{type:"number",value:t,onChange:z=>r(Number(z.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1",max:"50"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 1-5 pages per day for consistent progress"})]}),s.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:s.jsxs("div",{className:"text-sm text-emerald-800 dark:text-emerald-200",children:[s.jsx("strong",{children:"At this pace:"})," You'll complete the Quran in approximately"," ",s.jsxs("span",{className:"font-bold",children:[Math.ceil(604/t)," days"]})]})})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>J(t),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Save Goal"}),s.jsx("button",{onClick:()=>O(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},xy=()=>{const{user:e}=bt(),[t,r]=S.useState([]),[n,a]=S.useState(!1),[i,l]=S.useState({name:"",type:"good",category:"health"});S.useEffect(()=>{e&&o()},[e]);const o=async()=>{if(!e)return;const{data:f,error:b}=await R.from("habits").select("*").eq("user_id",e.id);if(f){const T=f.map(w=>({...w,completedToday:d(w.last_completed),badHabitFreeFor:w.type==="bad"?c(w.last_completed):void 0,color:u(w.category)}));r(T)}},d=f=>{if(!f)return!1;const b=new Date().toISOString().split("T")[0];return f===b},c=f=>{if(!f)return 0;const b=new Date(f),w=new Date().getTime()-b.getTime(),C=Math.floor(w/(1e3*60*60*24));return Math.max(0,C)},u=f=>{switch(f){case"health":return"bg-blue-500";case"spiritual":return"bg-emerald-500";case"productivity":return"bg-purple-500";case"learning":return"bg-orange-500";default:return"bg-gray-500"}},h=async(f,b)=>{if(!e)return;const T=new Date().toISOString().split("T")[0],w=t.find(O=>O.id===f);if(!w)return;let C=w.streak,L=T;b==="good"?w.completedToday?(C=Math.max(0,w.streak-1),L=w.lastCompleted||""):C=w.streak+1:w.completedToday||(C=0);const{error:Q}=await R.from("habits").update({streak:C,last_completed:L}).eq("id",f);Q||r(O=>O.map(V=>V.id===f?{...V,completedToday:!V.completedToday,streak:C,lastCompleted:L,badHabitFreeFor:b==="bad"?c(L):V.badHabitFreeFor}:V))},p=async()=>{if(!e||!i.name.trim())return;const{data:f,error:b}=await R.from("habits").insert({user_id:e.id,name:i.name,type:i.type,category:i.category,streak:0,last_completed:null}).select().single();f&&!b&&(r(T=>[...T,{...f,completedToday:!1,color:u(f.category),badHabitFreeFor:i.type==="bad"?0:void 0}]),l({name:"",type:"good",category:"health"}),a(!1))},x=t.filter(f=>f.type==="good"),k=t.filter(f=>f.type==="bad"),m=x.filter(f=>f.completedToday).length,E=x.length,y=E>0?m/E*100:0,g={health:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",spiritual:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300",productivity:"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300",learning:"bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-300"};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Habit Tracker"}),s.jsxs("button",{onClick:()=>a(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Habit"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-medium",children:[m,"/",E]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Good habits completed"}),s.jsxs("span",{children:[Math.round(y),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${y}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:x.length>0?Math.max(...x.map(f=>f.streak)):0}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Best Streak"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(f=>f.streak>0).length}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Active Habits"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:k.length}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Bad Habits"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Good Habits"}),s.jsx("div",{className:"space-y-3",children:x.map(f=>s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${f.completedToday?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${f.completedToday?"bg-emerald-500 text-white":`${f.color} text-white`}`,children:f.completedToday?s.jsx(uo,{className:"w-5 h-5"}):s.jsx(pt,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:f.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g[f.category]}`,children:f.category})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(fd,{className:"w-4 h-4"}),s.jsxs("span",{children:[f.streak," day streak"]})]})]})]}),s.jsx("button",{onClick:()=>h(f.id,"good"),className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${f.completedToday?"bg-emerald-500 text-white":"border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400"}`,children:f.completedToday&&s.jsx(uo,{className:"w-4 h-4"})})]},f.id))})]}),k.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bad Habits to Overcome"}),s.jsx("div",{className:"space-y-3",children:k.map(f=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:s.jsx(co,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:f.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g[f.category]}`,children:f.category})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Xr,{className:"w-4 h-4"}),s.jsxs("span",{children:[f.badHabitFreeFor||0," days free from this habit"]})]})]})]}),s.jsx("button",{onClick:()=>h(f.id,"bad"),className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Did it today"})]},f.id))})]}),n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Habit"}),s.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Name"}),s.jsx("input",{type:"text",value:i.name,onChange:f=>l({...i,name:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Meditate for 10 minutes"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Type"}),s.jsxs("select",{value:i.type,onChange:f=>l({...i,type:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"good",children:"Good Habit (to build)"}),s.jsx("option",{value:"bad",children:"Bad Habit (to overcome)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),s.jsxs("select",{value:i.category,onChange:f=>l({...i,category:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"health",children:"Health"}),s.jsx("option",{value:"spiritual",children:"Spiritual"}),s.jsx("option",{value:"productivity",children:"Productivity"}),s.jsx("option",{value:"learning",children:"Learning"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Add Habit"})]})]})]})})]})},py=()=>{const{user:e}=bt(),[t,r]=S.useState([]),[n,a]=S.useState(!1),[i,l]=S.useState(!1),[o,d]=S.useState(!1),[c,u]=S.useState(null),[h,p]=S.useState(!1),[x,k]=S.useState(!1),[m,E]=S.useState({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),[y,g]=S.useState({hours:1,notes:""});po.useEffect(()=>{e&&f()},[e]);const f=async()=>{if(!e)return;const{data:N}=await R.from("exams").select("*").eq("user_id",e.id).order("date",{ascending:!0});N&&r(N)},b=async()=>{if(!e||!m.subject||!m.date||h){console.log("Validation failed or already adding:",{user:!!e,subject:m.subject,date:m.date,isAdding:h});return}p(!0);try{const N={user_id:e.id,subject:m.subject,date:m.date,time:m.time||null,location:m.location||null,type:m.type,target_hours:m.targetHours,study_hours:0};m.notes&&m.notes.trim()&&(N.notes=m.notes.trim()),console.log("Adding exam:",N);const{data:$,error:v}=await R.from("exams").insert(N).select();if(v){console.error("Error adding exam:",v),alert("Failed to add exam: "+v.message);return}console.log("Exam added successfully:",$),a(!1),E({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await f()}catch(N){console.error("Unexpected error:",N),alert("An unexpected error occurred while adding the exam.")}finally{p(!1)}},T=async()=>{if(!(!e||!c||!m.subject||!m.date||x)){k(!0);try{const N={subject:m.subject,date:m.date,time:m.time||null,location:m.location||null,type:m.type,target_hours:m.targetHours};m.notes&&m.notes.trim()&&(N.notes=m.notes.trim());const{error:$}=await R.from("exams").update(N).eq("id",c.id).eq("user_id",e.id);if($){console.error("Error updating exam:",$),alert("Failed to update exam: "+$.message);return}l(!1),u(null),E({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await f()}catch(N){console.error("Unexpected error:",N),alert("An unexpected error occurred while updating the exam.")}finally{k(!1)}}},w=async N=>{if(!e)return;const{error:$}=await R.from("exams").delete().eq("id",N).eq("user_id",e.id);$||await f()},C=async()=>{if(!e||!c||y.hours<=0)return;const N=c.study_hours+y.hours,{error:$}=await R.from("exams").update({study_hours:N}).eq("id",c.id).eq("user_id",e.id);$||(d(!1),u(null),g({hours:1,notes:""}),await f())},L=N=>{u(N),E({subject:N.subject,date:N.date,time:N.time,location:N.location,type:N.type,targetHours:N.target_hours,notes:N.notes||""}),l(!0)},Q=N=>{u(N),d(!0)},O=N=>{const $=new Date(N),v=new Date,I=$.getTime()-v.getTime(),F=Math.ceil(I/(1e3*60*60*24));return Math.max(0,F)},V=N=>{switch(N){case"final":return"bg-red-100 text-red-800";case"class_test":return"bg-orange-100 text-orange-800";case"quiz":return"bg-blue-100 text-blue-800";case"assignment":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ee=N=>{switch(N){case"final":return"Final";case"class_test":return"Class Test";case"quiz":return"Quiz";case"assignment":return"Assignment";default:return N}},A=N=>N<=3?"text-red-600 dark:text-red-400":N<=7?"text-orange-600 dark:text-orange-400":N<=14?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",K=t.sort((N,$)=>new Date(N.date).getTime()-new Date($.date).getTime())[0],G=K?O(K.date):0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Exam Countdown"}),s.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Exam"})]})]}),K&&s.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Next Exam"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xr,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:K.subject})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold",children:G}),s.jsx("div",{className:"text-red-100 text-sm",children:"Days Left"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold",children:[K.study_hours,"h"]}),s.jsx("div",{className:"text-red-100 text-sm",children:"Hours Studied"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold",children:[Math.round(K.study_hours/K.target_hours*100),"%"]}),s.jsx("div",{className:"text-red-100 text-sm",children:"Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upcoming Exams"}),s.jsxs("div",{className:"space-y-4",children:[t.map(N=>{const $=O(N.date),v=N.study_hours/N.target_hours*100;return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx($e,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:N.subject}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsxs("span",{children:[N.time,"  ",N.location]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-2xl font-bold ${A($)}`,children:$}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"days left"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${V(N.type)}`,children:ee(N.type)}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[N.date,"  ",N.time]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-1",children:[s.jsx("span",{children:"Study Progress"}),s.jsxs("span",{children:[N.study_hours.toFixed(1),"h / ",N.target_hours,"h"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v>=100?"bg-green-500":v>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(v,100)}%`}})})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[Math.round(v),"% complete"]}),s.jsxs("span",{children:[Math.max(0,N.target_hours-N.study_hours).toFixed(1),"h remaining"]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("button",{onClick:()=>Q(N),className:"px-3 py-1 bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm hover:bg-emerald-200 dark:hover:bg-emerald-900/30 transition-colors",children:"Log Study"}),s.jsx("button",{onClick:()=>L(N),className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-sm hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:s.jsx(Ns,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>w(N.id),className:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:s.jsx(Ds,{className:"w-3 h-3"})})]})]},N.id)}),t.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx($e,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No exams scheduled yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add your first exam to get started!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recommended Study Schedule"}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,3).map(N=>{const $=O(N.date),v=N.target_hours-N.study_hours,I=$>0?Math.ceil(v/$):0;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(pt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:N.subject}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:v>0?`${v}h remaining`:"Study complete!"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:I>0?`${I.toFixed(1)}h/day`:"Complete!"}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[$," days left"]})]})]},N.id)}),t.length===0&&s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:s.jsx("p",{className:"text-sm",children:"No study schedule available"})})]})]}),t.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Exam Statistics"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Exams"})]}),s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t.filter(N=>O(N.date)<=7).length}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:Math.round(t.reduce((N,$)=>N+$.study_hours/$.target_hours*100,0)/t.length)}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Progress"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.reduce((N,$)=>N+$.study_hours,0).toFixed(1)}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Hours Studied"})]})]})]}),n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Exam"}),s.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:m.subject,onChange:N=>E({...m,subject:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:m.date,onChange:N=>E({...m,date:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),s.jsx("input",{type:"time",value:m.time,onChange:N=>E({...m,time:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),s.jsx("input",{type:"text",value:m.location,onChange:N=>E({...m,location:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),s.jsxs("select",{value:m.type,onChange:N=>E({...m,type:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"class_test",children:"Class Test"}),s.jsx("option",{value:"final",children:"Final"}),s.jsx("option",{value:"quiz",children:"Quiz"}),s.jsx("option",{value:"assignment",children:"Assignment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),s.jsx("input",{type:"number",value:m.targetHours,onChange:N=>E({...m,targetHours:Number(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:m.notes,onChange:N=>E({...m,notes:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:b,disabled:h,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${h?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:h?"Adding...":"Add Exam"}),s.jsx("button",{onClick:()=>a(!1),disabled:h,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${h?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200"}`,children:"Cancel"})]})]})}),i&&c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Exam"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:m.subject,onChange:N=>E({...m,subject:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:m.date,onChange:N=>E({...m,date:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),s.jsx("input",{type:"time",value:m.time,onChange:N=>E({...m,time:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),s.jsx("input",{type:"text",value:m.location,onChange:N=>E({...m,location:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),s.jsxs("select",{value:m.type,onChange:N=>E({...m,type:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"class_test",children:"Class Test"}),s.jsx("option",{value:"final",children:"Final"}),s.jsx("option",{value:"quiz",children:"Quiz"}),s.jsx("option",{value:"assignment",children:"Assignment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),s.jsx("input",{type:"number",value:m.targetHours,onChange:N=>E({...m,targetHours:Number(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:m.notes,onChange:N=>E({...m,notes:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:T,disabled:x,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:x?"Updating...":"Update Exam"}),s.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),o&&c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Study Session"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:c.subject}),s.jsx("br",{}),"Current progress: ",c.study_hours,"h / ",c.target_hours,"h"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours Studied"}),s.jsx("input",{type:"number",value:y.hours,onChange:N=>g({...y,hours:Number(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"0.5",step:"0.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:y.notes,onChange:N=>g({...y,notes:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"What did you study today?"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:C,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),s.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},yy=()=>{const{user:e}=bt(),[t,r]=S.useState([]),[n,a]=S.useState([]),[i,l]=S.useState(!0),[o,d]=S.useState(!1),[c,u]=S.useState(!1),[h,p]=S.useState(null),[x,k]=S.useState({subject:"",time:"",end_time:"",location:"",instructor:"",day:"Monday",color:"#3B82F6"}),m=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],E=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"];S.useEffect(()=>{e&&y()},[e]);const y=async()=>{try{const[O,V]=await Promise.all([R.from("attendance_records").select("*").eq("user_id",e==null?void 0:e.id).order("date",{ascending:!1}),R.from("class_schedules").select("*").eq("user_id",e==null?void 0:e.id).order("day",{ascending:!0})]);O.data&&r(O.data),V.data&&a(V.data)}catch(O){console.error("Error fetching data:",O)}finally{l(!1)}},g=async()=>{if(!(!e||!x.subject||!x.time))try{const{data:O,error:V}=await R.from("class_schedules").insert([{...x,user_id:e.id}]).select().single();if(V)throw V;O&&(a([...n,O]),k({subject:"",time:"",end_time:"",location:"",instructor:"",day:"Monday",color:"#3B82F6"}),d(!1))}catch(O){console.error("Error adding class:",O)}},f=async O=>{if(!e||!h)return;const V=new Date().toISOString().split("T")[0];try{const{data:ee}=await R.from("attendance_records").select("id").eq("user_id",e.id).eq("subject",h.subject).eq("date",V).single();if(ee){const{error:A}=await R.from("attendance_records").update({status:O}).eq("id",ee.id);if(A)throw A}else{const{data:A,error:K}=await R.from("attendance_records").insert([{user_id:e.id,subject:h.subject,date:V,status:O}]).select().single();if(K)throw K;A&&r([A,...t])}y(),u(!1),p(null)}catch(ee){console.error("Error marking attendance:",ee)}},b=async O=>{try{const{error:V}=await R.from("class_schedules").delete().eq("id",O);if(V)throw V;a(n.filter(ee=>ee.id!==O))}catch(V){console.error("Error deleting class:",V)}},T=O=>{const V=t.filter(G=>G.subject===O),ee=V.filter(G=>G.status!=="cancelled").length,A=V.filter(G=>G.status==="present").length,K=ee>0?Math.round(A/ee*100):0;return{totalClasses:ee,presentClasses:A,percentage:K}},w=()=>{const O=new Date,V=m[O.getDay()===0?6:O.getDay()-1],ee=O.getHours()*60+O.getMinutes();return n.find(A=>{if(A.day!==V)return!1;const[K,G]=A.time.split(":").map(Number),[N,$]=A.end_time.split(":").map(Number),v=K*60+G,I=N*60+$;return ee>=v&&ee<=I})},C=()=>{const O=new Date,V=m[O.getDay()===0?6:O.getDay()-1],ee=O.getHours()*60+O.getMinutes(),A=n.filter(G=>G.day===V).filter(G=>{const[N,$]=G.time.split(":").map(Number);return N*60+$>ee}).sort((G,N)=>{const $=G.time.split(":").map(Number),v=N.time.split(":").map(Number);return $[0]*60+$[1]-(v[0]*60+v[1])});if(A.length>0)return A[0];const K=m.indexOf(V);for(let G=1;G<7;G++){const N=(K+G)%7,$=m[N],v=n.filter(I=>I.day===$).sort((I,F)=>{const Y=I.time.split(":").map(Number),J=F.time.split(":").map(Number);return Y[0]*60+Y[1]-(J[0]*60+J[1])});if(v.length>0)return v[0]}return null},L=w(),Q=C();return i?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[L&&s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white/20 rounded-full p-2",children:s.jsx($e,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Current Class"}),s.jsx("p",{className:"text-emerald-100",children:L.subject})]})]}),s.jsx("button",{onClick:()=>{p(L),u(!0)},className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:"Mark Attendance"})]}),s.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm text-emerald-100",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsxs("span",{children:[L.time," - ",L.end_time]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(il,{className:"w-4 h-4"}),s.jsx("span",{children:L.location})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ht,{className:"w-4 h-4"}),s.jsx("span",{children:L.instructor})]})]})]}),Q&&s.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white/20 rounded-full p-2",children:s.jsx(qp,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Next Class"}),s.jsx("p",{className:"text-blue-100",children:Q.subject})]})]}),s.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm text-blue-100",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Xr,{className:"w-4 h-4"}),s.jsx("span",{children:Q.day})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ct,{className:"w-4 h-4"}),s.jsxs("span",{children:[Q.time," - ",Q.end_time]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(il,{className:"w-4 h-4"}),s.jsx("span",{children:Q.location})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center space-x-2",children:[s.jsx(Xr,{className:"w-6 h-6"}),s.jsx("span",{children:"Class Schedule"})]}),s.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Class"})]})]}),n.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx($e,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No classes scheduled yet"}),s.jsx("p",{className:"text-sm",children:"Add your first class to get started"})]}):s.jsx("div",{className:"grid gap-4",children:m.map(O=>{const V=n.filter(ee=>ee.day===O);return V.length===0?null:s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 pb-2",children:O}),s.jsx("div",{className:"grid gap-3",children:V.sort((ee,A)=>ee.time.localeCompare(A.time)).map(ee=>{const A=T(ee.subject);return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-12 rounded-full",style:{backgroundColor:ee.color}}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-lg text-gray-800 dark:text-white",children:ee.subject}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:[ee.time," - ",ee.end_time]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(il,{className:"w-3 h-3"}),s.jsx("span",{children:ee.location})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ht,{className:"w-3 h-3"}),s.jsx("span",{children:ee.instructor})]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>{p(ee),f("present")},className:"bg-green-100 hover:bg-green-200 text-green-700 p-2 rounded-lg transition-colors",title:"Mark Present",children:s.jsx(Us,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{p(ee),f("absent")},className:"bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded-lg transition-colors",title:"Mark Absent",children:s.jsx(Wc,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{p(ee),f("late")},className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700 p-2 rounded-lg transition-colors",title:"Mark Late",children:s.jsx(ct,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{p(ee),f("cancelled")},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 p-2 rounded-lg transition-colors",title:"Mark Cancelled",children:s.jsx(Pe,{className:"w-4 h-4"})})]}),s.jsx("button",{onClick:()=>b(ee.id),className:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors",children:s.jsx(Ds,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Attendance: "}),s.jsxs("span",{className:`font-semibold ${A.percentage>=75?"text-green-600":A.percentage>=50?"text-yellow-600":"text-red-600"}`,children:[A.percentage,"%"]})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[A.presentClasses,"/",A.totalClasses," classes"]})]}),s.jsx("div",{className:"flex items-center space-x-1",children:s.jsx(_r,{className:`w-4 h-4 ${A.percentage>=75?"text-green-600":A.percentage>=50?"text-yellow-600":"text-red-600"}`})})]})})]},ee.id)})})]},O)})})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Class"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject"}),s.jsx("input",{type:"text",value:x.subject,onChange:O=>k({...x,subject:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter subject name"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),s.jsx("input",{type:"time",value:x.time,onChange:O=>k({...x,time:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),s.jsx("input",{type:"time",value:x.end_time,onChange:O=>k({...x,end_time:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Day"}),s.jsx("select",{value:x.day,onChange:O=>k({...x,day:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:m.map(O=>s.jsx("option",{value:O,children:O},O))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:x.location,onChange:O=>k({...x,location:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Room number or location"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Instructor"}),s.jsx("input",{type:"text",value:x.instructor,onChange:O=>k({...x,instructor:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Instructor name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),s.jsx("div",{className:"flex space-x-2",children:E.map(O=>s.jsx("button",{onClick:()=>k({...x,color:O}),className:`w-8 h-8 rounded-full border-2 ${x.color===O?"border-gray-800 dark:border-white":"border-gray-300"}`,style:{backgroundColor:O}},O))})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:g,disabled:!x.subject||!x.time,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Class"})]})]})}),c&&h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Mark Attendance"}),s.jsx("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Subject: ",s.jsx("span",{className:"font-semibold",children:h.subject})]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Date: ",s.jsx("span",{className:"font-semibold",children:new Date().toLocaleDateString()})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>f("present"),className:"flex items-center justify-center space-x-2 p-4 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg transition-colors",children:[s.jsx(Us,{className:"w-5 h-5"}),s.jsx("span",{children:"Present"})]}),s.jsxs("button",{onClick:()=>f("absent"),className:"flex items-center justify-center space-x-2 p-4 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",children:[s.jsx(Wc,{className:"w-5 h-5"}),s.jsx("span",{children:"Absent"})]}),s.jsxs("button",{onClick:()=>f("late"),className:"flex items-center justify-center space-x-2 p-4 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 rounded-lg transition-colors",children:[s.jsx(ct,{className:"w-5 h-5"}),s.jsx("span",{children:"Late"})]}),s.jsxs("button",{onClick:()=>f("cancelled"),className:"flex items-center justify-center space-x-2 p-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[s.jsx(Pe,{className:"w-5 h-5"}),s.jsx("span",{children:"Cancelled"})]})]})]})})]})},vy=()=>{var ee;const{user:e}=bt(),[t,r]=S.useState([]),[n,a]=S.useState(8),[i,l]=S.useState(!1),[o,d]=S.useState(!1),[c,u]=S.useState(!1),[h,p]=S.useState(!1),[x,k]=S.useState(null),[m,E]=S.useState({date:"",bedtime:"",wakeTime:"",quality:3,notes:""});S.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(!e)return;const{data:A}=await R.from("sleep_records").select("*").eq("user_id",e.id).order("date",{ascending:!1}).limit(30);A&&r(A);const{data:K}=await R.from("profiles").select("sleep_goal").eq("user_id",e.id).maybeSingle();K!=null&&K.sleep_goal?a(K.sleep_goal):console.log("No profile found, using default sleep goal of 8 hours")},g=async()=>{if(!e||!m.date||!m.bedtime||!m.wakeTime)return;u(!0);const A=new Date(`2000-01-01T${m.bedtime}`);let G=(new Date(`2000-01-01T${m.wakeTime}`).getTime()-A.getTime())/(1e3*60*60);G<0&&(G+=24);const{error:N}=await R.from("sleep_records").insert({user_id:e.id,date:m.date,bedtime:m.bedtime,wake_time:m.wakeTime,duration:Math.round(G*10)/10,quality:m.quality,notes:m.notes||null});N||(l(!1),E({date:"",bedtime:"",wakeTime:"",quality:3,notes:""}),await y()),u(!1)},f=(A,K)=>{k({message:A,type:K}),setTimeout(()=>k(null),3e3)},b=async A=>{var K;if(e){console.log("Saving sleep goal:",A,"for user:",e.id),console.log("User object:",e),p(!0);try{const{data:G,error:N}=await R.from("profiles").select("id, sleep_goal").eq("user_id",e.id).maybeSingle();if(console.log("Profile check result:",{existingProfile:G,checkError:N}),N){console.error("Error checking profile:",N),f(`Error checking profile: ${N.message}`,"error");return}console.log("Existing profile:",G);let $;if(G){console.log("Updating existing profile with ID:",G.id);const v={sleep_goal:A,updated_at:new Date().toISOString()};console.log("Update data:",v);const{error:I}=await R.from("profiles").update(v).eq("user_id",e.id);$=I,console.log("Update result:",{error:I})}else{console.log("Creating new profile");const v={user_id:e.id,sleep_goal:A,full_name:((K=e.user_metadata)==null?void 0:K.full_name)||"",email:e.email||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Insert data:",v);const{error:I}=await R.from("profiles").insert(v);$=I,console.log("Insert result:",{error:I})}$?(console.error("Database error details:",{message:$.message,details:$.details,hint:$.hint,code:$.code}),f(`Error updating sleep goal: ${$.message}`,"error")):(console.log("Sleep goal saved successfully"),a(A),d(!1),f("Sleep goal updated successfully!","success"))}catch(G){console.error("Catch block error:",G),f("Error updating sleep goal. Please try again.","error")}finally{p(!1)}}},T=()=>{if(console.log("getAverageStats called with:",{sleepRecordsLength:t.length,sleepGoal:n,sleepRecords:t.map(se=>({date:se.date,duration:se.duration,quality:se.quality}))}),t.length===0)return{avgDuration:0,avgQuality:0,goalAchieved:0,totalNights:0,bestNight:null,worstNight:null};const A=t.reduce((se,z)=>(se[z.date]||(se[z.date]={totalDuration:0,sessions:[],avgQuality:0}),se[z.date].totalDuration+=z.duration,se[z.date].sessions.push(z),se),{});Object.keys(A).forEach(se=>{const z=A[se].sessions,ue=z.reduce((P,X)=>P+X.quality,0);A[se].avgQuality=ue/z.length});const K=Object.values(A),G=K.reduce((se,z)=>se+z.totalDuration,0),N=Math.round(G/K.length*10)/10,$=K.reduce((se,z)=>se+z.avgQuality,0)/K.length,I=K.filter(se=>{const z=se.totalDuration>=n;return console.log(`Day total: ${se.totalDuration}h >= ${n}h = ${z}`),z}).length,F=K.reduce((se,z)=>z.avgQuality>se.avgQuality?z:se),Y=K.reduce((se,z)=>z.avgQuality<se.avgQuality?z:se),J={avgDuration:N,avgQuality:Math.round($*10)/10,goalAchieved:I,totalNights:K.length,bestNight:F,worstNight:Y};return console.log("getAverageStats result:",J),J},w=A=>A>=4?"bg-green-100 dark:bg-green-900/20":A>=3?"bg-yellow-100 dark:bg-yellow-900/20":"bg-red-100 dark:bg-red-900/20",C=()=>{if(!t[0])return null;const G=new Date().getHours();return G>=22||G<=6?{status:"sleep",message:"Sleep time"}:{status:"awake",message:"Awake time"}},L=()=>{if(console.log("getSleepTrend called with sleepRecords length:",t.length),t.length<7)return console.log("Not enough records for trend analysis (need at least 7)"),"stable";const A=t.reduce((F,Y)=>(F[Y.date]||(F[Y.date]={totalDuration:0}),F[Y.date].totalDuration+=Y.duration,F),{}),K=Object.entries(A).map(([F,Y])=>({date:F,totalDuration:Y.totalDuration})).sort((F,Y)=>new Date(Y.date).getTime()-new Date(F.date).getTime());if(console.log("Daily records sorted:",K),K.length<7)return console.log("Not enough days for trend analysis (need at least 7 days)"),"stable";const G=K.slice(0,7),N=K.slice(7,14);if(console.log("Recent 7 days:",G),console.log("Previous 7 days:",N),G.length===0||N.length===0)return console.log("Not enough data for comparison"),"stable";const $=G.reduce((F,Y)=>F+Y.totalDuration,0)/G.length,v=N.reduce((F,Y)=>F+Y.totalDuration,0)/N.length;console.log("Recent average:",$,"Previous average:",v);const I=$-v;return console.log("Difference:",I),I>.5?(console.log("Trend: Improving"),"improving"):I<-.5?(console.log("Trend: Declining"),"declining"):(console.log("Trend: Stable"),"stable")},Q=T(),O=C(),V=L();return S.useEffect(()=>{const A=new Date().toISOString().split("T")[0];E(K=>({...K,date:A}))},[]),S.useEffect(()=>{console.log("Stats updated:",{sleepGoal:n,stats:Q,sleepRecordsCount:t.length})},[n,Q,t.length]),s.jsxs("div",{className:"space-y-6",children:[x&&s.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${x.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-shrink-0",children:x.type==="success"?s.jsx(Us,{className:"w-5 h-5"}):s.jsx(Pe,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"font-medium",children:x.message})}),s.jsx("button",{onClick:()=>k(null),className:"flex-shrink-0 ml-2 hover:opacity-75",children:s.jsx(Pe,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Sleep Tracker"}),s.jsxs("button",{onClick:()=>l(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Sleep"})]})]}),O&&s.jsxs("div",{className:`rounded-xl p-6 text-white ${O.status==="sleep"?"bg-gradient-to-r from-indigo-500 to-purple-600":"bg-gradient-to-r from-orange-500 to-yellow-600"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Current Status"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[O.status==="sleep"?s.jsx(ot,{className:"w-5 h-5"}):s.jsx(gd,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:O.message})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[((ee=t[0])==null?void 0:ee.duration)||0,"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Last Night"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[n,"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Daily Goal"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[Q.avgDuration.toFixed(1),"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"7-Day Average"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[Q.avgQuality,"/5"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Avg Quality"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Goal & Trends"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Sleep Goal (hours)"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[n,"h"]}),s.jsxs("button",{onClick:()=>d(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(pt,{className:"w-4 h-4"}),s.jsx("span",{children:"Set Goal"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Goal Achievement"}),s.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[Q.totalNights>0?Math.round(Q.goalAchieved/Q.totalNights*100):0,"%"]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Q.goalAchieved," of ",Q.totalNights," nights"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Trend"}),s.jsx("div",{className:`text-2xl font-bold ${V==="improving"?"text-green-600 dark:text-green-400":V==="declining"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:V.charAt(0).toUpperCase()+V.slice(1)}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.length>=14?"Last 7 days vs previous week":t.length>=7?"Need more data for trend":"Log more sleep to see trend"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Overview"}),s.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[(()=>{const A=t.reduce((G,N)=>(G[N.date]||(G[N.date]={totalDuration:0,sessions:[],avgQuality:0}),G[N.date].totalDuration+=N.duration,G[N.date].sessions.push(N),G),{});return Object.keys(A).forEach(G=>{const N=A[G].sessions,$=N.reduce((v,I)=>v+I.quality,0);A[G].avgQuality=$/N.length}),Object.entries(A).sort((G,N)=>new Date(N[0]).getTime()-new Date(G[0]).getTime()).slice(0,7).map(([G,N])=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:new Date(G).toLocaleDateString("en-US",{weekday:"short"})}),s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[N.totalDuration.toFixed(1),"h",N.sessions.length>1&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",N.sessions.length," sessions)"]})]}),s.jsx("div",{className:"flex justify-center mt-1",children:[...Array(5)].map(($,v)=>s.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${v<Math.round(N.avgQuality)?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},v))})]})]},G))})(),t.length===0&&s.jsxs("div",{className:"col-span-7 text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ot,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No sleep records yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Average Duration"}),s.jsx(ct,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-2",children:[Q.avgDuration,"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last 7 days"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Sleep Quality"}),s.jsx(ho,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:[Q.avgQuality,"/5"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average rating"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Consistency"}),s.jsx(pt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:[Q.totalNights>0?Math.round(Q.goalAchieved/Q.totalNights*100):0,"%"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Goal achievement"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Sleep Records"}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(A=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${w(A.quality)}`,children:s.jsx(ot,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:A.date}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[A.bedtime," - ",A.wakeTime]}),A.notes&&s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:A.notes})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[A.duration.toFixed(1),"h"]}),s.jsx("div",{className:"flex justify-end",children:[...Array(5)].map((K,G)=>s.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${G<A.quality?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},G))})]})]},A.id)),t.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ot,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No sleep records yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Tips"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900/20 rounded-full flex items-center justify-center",children:s.jsx(Fh,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Consistent Schedule"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Go to bed and wake up at the same time every day"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:s.jsx(ot,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Sleep Environment"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Keep your bedroom cool, dark, and quiet"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center",children:s.jsx(Uh,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Morning Light"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get sunlight exposure in the morning"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:s.jsx(ct,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Pre-Sleep Routine"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Develop a relaxing bedtime routine"})]})]})]})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Sleep"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:m.date,onChange:A=>E({...m,date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Bedtime ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"time",value:m.bedtime,onChange:A=>E({...m,bedtime:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Wake Time ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"time",value:m.wakeTime,onChange:A=>E({...m,wakeTime:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Quality"}),s.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(A=>s.jsx("button",{onClick:()=>E({...m,quality:A}),className:`p-2 rounded-lg transition-colors ${m.quality>=A?"text-yellow-500 bg-yellow-100 dark:bg-yellow-900/20":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:s.jsx(ho,{className:"w-5 h-5"})},A))}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[m.quality===1&&"Very Poor",m.quality===2&&"Poor",m.quality===3&&"Fair",m.quality===4&&"Good",m.quality===5&&"Excellent"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:m.notes,onChange:A=>E({...m,notes:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"How did you sleep? Any factors that affected your sleep?"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:g,disabled:c||!m.date||!m.bedtime||!m.wakeTime,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:c?"Logging...":"Log Sleep"}),s.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Sleep Goal"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Set your daily sleep goal to help maintain a healthy sleep schedule and track your progress."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Goal (hours per night):"}),s.jsx("input",{type:"number",value:n,onChange:A=>a(Number(A.target.value)),min:"6",max:"12",step:"0.5",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Enter sleep goal"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 7-9 hours for adults"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:()=>b(n),disabled:h||n<6||n>12,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":"Save Goal"})]})]})})]})},wy=({preloadedData:e={}})=>{const{user:t}=bt(),[r,n]=S.useState([]),[a,i]=S.useState({}),[l,o]=S.useState(!0),[d,c]=S.useState("all"),[u,h]=S.useState(!1),p=[{id:"all",label:"All",icon:ll},{id:"study",label:"Study",icon:$e},{id:"prayer",label:"Prayer",icon:Bt},{id:"quran",label:"Quran",icon:Yr},{id:"habits",label:"Habits",icon:pt},{id:"attendance",label:"Classes",icon:ny},{id:"sleep",label:"Sleep",icon:ot},{id:"general",label:"General",icon:Jr}],x=[{id:"first-study",title:"First Steps",description:"Complete your first study session",icon:$e,category:"study",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"study-streak-7",title:"Week Warrior",description:"Study for 7 consecutive days",icon:fd,category:"study",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:50},{id:"study-100-hours",title:"Century Scholar",description:"Complete 100 hours of study",icon:Gp,category:"study",unlocked:!1,progress:0,maxProgress:100,rarity:"epic",points:200},{id:"first-prayer",title:"Spiritual Awakening",description:"Log your first prayer",icon:Bt,category:"prayer",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"prayer-streak-30",title:"Faithful Servant",description:"Pray consistently for 30 days",icon:ho,category:"prayer",unlocked:!1,progress:0,maxProgress:30,rarity:"epic",points:150},{id:"first-quran",title:"Divine Connection",description:"Read your first page of Quran",icon:Yr,category:"quran",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:15},{id:"quran-100-pages",title:"Quran Explorer",description:"Read 100 pages of Quran",icon:Zp,category:"quran",unlocked:!1,progress:0,maxProgress:100,rarity:"rare",points:100},{id:"first-login",title:"Welcome Aboard",description:"Complete your first login",icon:Us,category:"general",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:5},{id:"perfect-week",title:"Perfect Week",description:"Complete all daily goals for 7 days",icon:pt,category:"general",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:75}],k=()=>{if(!e){i({totalStudyHours:0,totalPrayersCompleted:0,totalQuranPages:0,totalHabitsCompleted:0,totalSleepHours:0,attendanceRate:0,streakDays:0});return}const{studySessions:b=[],prayerRecords:T=[],quranSessions:w=[],habitRecords:C=[],attendanceRecords:L=[],sleepRecords:Q=[]}=e,O=b.reduce((I,F)=>I+(F.duration||0),0),V=T.length,ee=w.reduce((I,F)=>I+(F.pages_read||0),0),A=C.length,K=Q.reduce((I,F)=>I+(F.duration||0),0),G=L.filter(I=>I.status==="present").length,N=L.filter(I=>I.status!=="cancelled").length,$=N>0?Math.round(G/N*100):0,v=Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24)));i({totalStudyHours:O,totalPrayersCompleted:V,totalQuranPages:ee,totalHabitsCompleted:A,totalSleepHours:K,attendanceRate:$,streakDays:v})},m=()=>{const b=x.map(T=>{let w=0,C=!1;switch(T.id){case"first-study":w=a.totalStudyHours>0?1:0,C=a.totalStudyHours>0;break;case"study-streak-7":w=Math.min(a.streakDays,7),C=a.streakDays>=7;break;case"study-100-hours":w=Math.min(a.totalStudyHours,100),C=a.totalStudyHours>=100;break;case"first-prayer":w=a.totalPrayersCompleted>0?1:0,C=a.totalPrayersCompleted>0;break;case"prayer-streak-30":w=Math.min(a.streakDays,30),C=a.streakDays>=30;break;case"first-quran":w=a.totalQuranPages>0?1:0,C=a.totalQuranPages>0;break;case"quran-100-pages":w=Math.min(a.totalQuranPages,100),C=a.totalQuranPages>=100;break;case"first-login":w=1,C=!0;break;case"perfect-week":w=Math.min(a.streakDays,7),C=a.streakDays>=7;break;default:w=0,C=!1}return{...T,progress:w,unlocked:C,unlockedDate:C&&!T.unlockedDate?new Date().toISOString():T.unlockedDate}});n(b)};S.useEffect(()=>{k()},[e]),S.useEffect(()=>{m()},[a]),S.useEffect(()=>{o(!1)},[]);const E=b=>{switch(b){case"common":return"text-gray-600 dark:text-gray-400";case"rare":return"text-blue-600 dark:text-blue-400";case"epic":return"text-purple-600 dark:text-purple-400";case"legendary":return"text-yellow-600 dark:text-yellow-400";default:return"text-gray-600 dark:text-gray-400"}},y=r.filter(b=>d==="all"?!0:b.category===d),g=r.filter(b=>b.unlocked).length,f=r.filter(b=>b.unlocked).reduce((b,T)=>b+T.points,0);return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Achievements"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ll,{className:"w-5 h-5 text-yellow-500"}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g,"/",r.length," Unlocked"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:g}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Achievements"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:f}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Points"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(g/r.length*100),"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completion"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:a.streakDays}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Day Streak"})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(b=>{const T=b.icon;return s.jsxs("button",{onClick:()=>c(b.id),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${d===b.id?"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(T,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:b.label})]},b.id)})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(b=>{const T=b.icon,w=b.progress/b.maxProgress*100;return s.jsxs("div",{className:`p-6 rounded-xl border-2 transition-all ${b.unlocked?"bg-white dark:bg-gray-800 border-emerald-200 dark:border-emerald-700 shadow-lg":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg ${b.unlocked?"bg-emerald-100 dark:bg-emerald-900/20":"bg-gray-100 dark:bg-gray-600"}`,children:s.jsx(T,{className:`w-6 h-6 ${b.unlocked?"text-emerald-600 dark:text-emerald-400":"text-gray-400 dark:text-gray-500"}`})}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-medium ${E(b.rarity)}`,children:b.rarity.toUpperCase()}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b.points," pts"]})]})]}),s.jsx("h3",{className:`font-semibold mb-2 ${b.unlocked?"text-gray-800 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:b.title}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:b.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[b.progress,"/",b.maxProgress]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${b.unlocked?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`,style:{width:`${Math.min(w,100)}%`}})})]}),b.unlocked&&b.unlockedDate&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Unlocked ",new Date(b.unlockedDate).toLocaleDateString()]})})]},b.id)})}),y.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx(ll,{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),s.jsx("p",{className:"text-lg font-medium",children:"No achievements found"}),s.jsx("p",{className:"text-sm mt-1",children:"Try selecting a different category"})]})]})},by=()=>{var $;const{user:e,signOut:t}=bt(),[r,n]=S.useState(!1),[a,i]=S.useState(!1),[l,o]=S.useState(!1),[d,c]=S.useState(!1),[u,h]=S.useState(""),[p,x]=S.useState(!1),[k,m]=S.useState(!1),[E,y]=S.useState(8),[g,f]=S.useState({totalStudyHours:0,totalPrayersCompleted:0,totalQuranPages:0,streakDays:0,achievementsUnlocked:0,attendanceRate:0,totalSleepHours:0,averageSleepQuality:0,totalHabitsCompleted:0,totalExams:0,memberSince:"",lastActive:""}),[b,T]=S.useState([]),[w,C]=S.useState({name:(($=e==null?void 0:e.user_metadata)==null?void 0:$.full_name)||"",email:(e==null?void 0:e.email)||"",joinDate:"2024-01-01",university:"",major:"",year:"1st",location:"",timezone:"UTC+2",dailyStudyGoal:6,sleepGoal:8,weeklyQuranGoal:14,phone:"",website:"",bio:""});S.useEffect(()=>{e&&(L(),Q(),O())},[e]);const L=async()=>{var I;if(!e)return;const{data:v}=await R.from("profiles").select("*").eq("user_id",e.id).maybeSingle();v&&C({name:v.full_name||"",email:v.email||"",joinDate:((I=v.created_at)==null?void 0:I.split("T")[0])||"2024-01-01",university:v.university||"",major:v.major||"",year:v.year||"Senior",location:v.location||"",timezone:v.timezone||"UTC+2",dailyStudyGoal:v.daily_study_goal||6,sleepGoal:v.sleep_goal||8,weeklyQuranGoal:v.weekly_quran_goal||14,phone:v.phone||"",website:v.website||"",bio:v.bio||""})},Q=async()=>{if(e)try{const{data:v}=await R.from("study_sessions").select("*").eq("user_id",e.id),{data:I}=await R.from("prayer_records").select("*").eq("user_id",e.id),{data:F}=await R.from("quran_sessions").select("*").eq("user_id",e.id),{data:Y}=await R.from("attendance_records").select("*").eq("user_id",e.id),{data:J}=await R.from("sleep_records").select("*").eq("user_id",e.id),{data:se}=await R.from("habit_records").select("*").eq("user_id",e.id),{data:z}=await R.from("exams").select("*").eq("user_id",e.id),ue=Math.round(((v==null?void 0:v.reduce((He,nt)=>He+(nt.duration||0),0))||0)*10)/10,P=(I==null?void 0:I.length)||0,X=(F==null?void 0:F.reduce((He,nt)=>He+(nt.pages_read||0),0))||0,ie=Math.round(((J==null?void 0:J.reduce((He,nt)=>He+(nt.duration||0),0))||0)*10)/10,oe=(J==null?void 0:J.length)>0?Math.round(J.reduce((He,nt)=>He+(nt.quality||0),0)/J.length*10)/10:0,le=(se==null?void 0:se.length)||0,he=(z==null?void 0:z.length)||0,ae=(Y==null?void 0:Y.filter(He=>He.status==="present").length)||0,de=(Y==null?void 0:Y.length)||0,_e=de>0?Math.round(ae/de*100):0,sr=Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24))),Ar=Math.min(8,Math.floor(ue/10)+Math.floor(P/10));f({totalStudyHours:ue,totalPrayersCompleted:P,totalQuranPages:X,streakDays:sr,achievementsUnlocked:Ar,attendanceRate:_e,totalSleepHours:ie,averageSleepQuality:oe,totalHabitsCompleted:le,totalExams:he,memberSince:w.joinDate,lastActive:new Date().toISOString().split("T")[0]})}catch(v){console.error("Error loading user stats:",v)}},O=async()=>{if(e)try{const v=[],{data:I}=await R.from("study_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);I==null||I.forEach(J=>{const se=J.duration?J.duration<.1?J.duration.toFixed(4):J.duration.toFixed(2):"0";v.push({id:J.id,type:"study",description:`Studied ${J.subject} for ${se}h`,time:new Date(J.created_at).toLocaleDateString(),value:`${se}h`})});const{data:F}=await R.from("prayer_records").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);F==null||F.forEach(J=>{v.push({id:J.id,type:"prayer",description:`Completed ${J.prayer_name}`,time:new Date(J.created_at).toLocaleDateString(),value:J.prayer_name})});const{data:Y}=await R.from("quran_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);Y==null||Y.forEach(J=>{v.push({id:J.id,type:"quran",description:`Read ${J.pages_read} pages of Quran`,time:new Date(J.created_at).toLocaleDateString(),value:`${J.pages_read} pages`})}),v.sort((J,se)=>new Date(se.time).getTime()-new Date(J.time).getTime()),T(v.slice(0,10))}catch(v){console.error("Error loading recent activities:",v)}},V=async()=>{if(e){m(!0);try{const{error:v}=await R.from("profiles").upsert({user_id:e.id,full_name:w.name,email:w.email,university:w.university,major:w.major,year:w.year,location:w.location,timezone:w.timezone,daily_study_goal:w.dailyStudyGoal,sleep_goal:w.sleepGoal,weekly_quran_goal:w.weeklyQuranGoal,phone:w.phone,website:w.website,bio:w.bio,updated_at:new Date().toISOString()});v||(o(!1),await L())}catch(v){console.error("Error saving profile:",v)}finally{m(!1)}}},ee=async()=>{if(!(!e||u!=="RESET")){x(!0);try{await Promise.all([R.from("study_sessions").delete().eq("user_id",e.id),R.from("prayer_records").delete().eq("user_id",e.id),R.from("quran_sessions").delete().eq("user_id",e.id),R.from("habit_records").delete().eq("user_id",e.id),R.from("class_schedules").delete().eq("user_id",e.id),R.from("attendance_records").delete().eq("user_id",e.id),R.from("sleep_records").delete().eq("user_id",e.id),R.from("exams").delete().eq("user_id",e.id)]),n(!1),h(""),await Q(),await O(),alert("All data has been reset successfully!")}catch(v){console.error("Error resetting data:",v),alert("Error resetting data. Please try again.")}finally{x(!1)}}},A=async()=>{if(!(!e||u!=="DELETE FOREVER")){x(!0);try{await Promise.all([R.from("study_sessions").delete().eq("user_id",e.id),R.from("prayer_records").delete().eq("user_id",e.id),R.from("quran_sessions").delete().eq("user_id",e.id),R.from("habit_records").delete().eq("user_id",e.id),R.from("class_schedules").delete().eq("user_id",e.id),R.from("attendance_records").delete().eq("user_id",e.id),R.from("sleep_records").delete().eq("user_id",e.id),R.from("exams").delete().eq("user_id",e.id),R.from("profiles").delete().eq("user_id",e.id)]),await t()}catch(v){console.error("Error deleting account:",v),alert("Error deleting account. Please try again.")}finally{x(!1)}}},K=async()=>{if(e)try{const v={profile:w,stats:g,activities:b,exportDate:new Date().toISOString()},I=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),F=URL.createObjectURL(I),Y=document.createElement("a");Y.href=F,Y.download=`user-data-${e.id}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(F)}catch(v){console.error("Error exporting data:",v),alert("Error exporting data. Please try again.")}},G=async()=>{if(e){m(!0);try{const{error:v}=await R.from("profiles").upsert({user_id:e.id,sleep_goal:E,updated_at:new Date().toISOString()});v?alert("Error updating sleep goal. Please try again."):(C({...w,sleepGoal:E}),c(!1),alert("Sleep goal updated successfully!"))}catch(v){console.error("Error updating sleep goal:",v),alert("Error updating sleep goal. Please try again.")}finally{m(!1)}}},N=v=>{switch(v){case"study":return s.jsx($e,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"prayer":return s.jsx(Bt,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"quran":return s.jsx($e,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"});case"habit":return s.jsx(pt,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});case"attendance":return s.jsx(Ht,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"});case"sleep":return s.jsx(ot,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"});case"achievement":return s.jsx(Jr,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"});default:return s.jsx(pt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Profile"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:K,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Wp,{className:"w-4 h-4"}),s.jsx("span",{children:"Export Data"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Ns,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit Profile"})]})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-xl p-6 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center shadow-inner",children:s.jsx(Ht,{className:"w-10 h-10"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-bold",children:w.name}),s.jsx("p",{className:"text-blue-100",children:w.email}),s.jsxs("p",{className:"text-blue-100",children:[w.major,"  ",w.year]}),s.jsx("p",{className:"text-blue-100",children:w.university}),w.bio&&s.jsxs("p",{className:"text-blue-100 mt-2 italic",children:['"',w.bio,'"']})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-blue-100",children:"Member since"}),s.jsx("div",{className:"font-medium",children:new Date(w.joinDate).toLocaleDateString()}),s.jsx("div",{className:"text-sm text-blue-100 mt-2",children:"Last active"}),s.jsx("div",{className:"font-medium",children:g.lastActive})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Study Progress"}),s.jsx(_r,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total hours"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.totalStudyHours,"h"]}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.totalStudyHours.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Daily goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.dailyStudyGoal.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Current streak"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.streakDays," days"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Spiritual Progress"}),s.jsx(Bt,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Prayers completed"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:g.totalPrayersCompleted})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Quran pages read"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:g.totalQuranPages})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Weekly Quran goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.weeklyQuranGoal," pages"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Health & Habits"}),s.jsx(pt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep hours"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.totalSleepHours.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep quality"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.averageSleepQuality.toFixed(1),"/5"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.sleepGoal,"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Habits completed"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:g.totalHabitsCompleted})]}),s.jsx("div",{className:"pt-2",children:s.jsxs("button",{onClick:()=>{y(w.sleepGoal),c(!0)},className:"w-full bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Set Sleep Goal"})]})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Achievements"}),s.jsx(Jr,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Unlocked"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.achievementsUnlocked,"/8"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Attendance rate"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.attendanceRate,"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total exams"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:g.totalExams})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Data Management"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(sy,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Reset All Data"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Clear all tracking data but keep your account"})]})]}),s.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors",children:"Reset Data"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ds,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Delete Account"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Permanently delete your account and all data"})]})]}),s.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete Account"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Activity"}),s.jsx("div",{className:"space-y-3",children:b.length>0?b.map((v,I)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white dark:bg-gray-600 rounded-full flex items-center justify-center shadow-sm",children:N(v.type)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:v.description}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.time})]})]}),v.value&&s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:v.value})]},v.id||I)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx("p",{children:"No recent activity"}),s.jsx("p",{className:"text-sm mt-1",children:"Start using the app to see your activity here"})]})})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Profile"}),s.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Full Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:w.name,onChange:v=>C({...w,name:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:w.email,onChange:v=>C({...w,email:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"University"}),s.jsx("input",{type:"text",value:w.university,onChange:v=>C({...w,university:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Major"}),s.jsx("input",{type:"text",value:w.major,onChange:v=>C({...w,major:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Academic Year"}),s.jsxs("select",{value:w.year,onChange:v=>C({...w,year:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"1st",children:"1st Year"}),s.jsx("option",{value:"2nd",children:"2nd Year"}),s.jsx("option",{value:"3rd",children:"3rd Year"}),s.jsx("option",{value:"4th",children:"4th Year"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:w.location,onChange:v=>C({...w,location:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:w.phone,onChange:v=>C({...w,phone:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Website"}),s.jsx("input",{type:"url",value:w.website,onChange:v=>C({...w,website:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Study Goal (hours)"}),s.jsx("input",{type:"number",value:w.dailyStudyGoal,onChange:v=>C({...w,dailyStudyGoal:Number(v.target.value)}),min:"1",max:"24",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sleep Goal (hours)"}),s.jsx("input",{type:"number",value:w.sleepGoal,onChange:v=>C({...w,sleepGoal:Number(v.target.value)}),min:"6",max:"12",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weekly Quran Goal (pages)"}),s.jsx("input",{type:"number",value:w.weeklyQuranGoal,onChange:v=>C({...w,weeklyQuranGoal:Number(v.target.value)}),min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),s.jsx("textarea",{value:w.bio,onChange:v=>C({...w,bio:v.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Tell us about yourself..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:V,disabled:k||!w.name||!w.email,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center space-x-2",children:k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Saving..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ti,{className:"w-4 h-4"}),s.jsx("span",{children:"Save Changes"})]})}),s.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),r&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(co,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Reset All Data"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete all your tracking data including study sessions, prayers, habits, and more. Your account will remain active."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "RESET" to confirm:'}),s.jsx("input",{type:"text",value:u,onChange:v=>h(v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type RESET"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{n(!1),h("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:ee,disabled:u!=="RESET"||p,className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Resetting...":"Reset Data"})]})]})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(co,{className:"w-6 h-6 text-red-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Delete Account"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete your account and all associated data. This action cannot be undone."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "DELETE FOREVER" to confirm:'}),s.jsx("input",{type:"text",value:u,onChange:v=>h(v.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type DELETE FOREVER"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{i(!1),h("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:A,disabled:u!=="DELETE FOREVER"||p,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Deleting...":"Delete Account"})]})]})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(ot,{className:"w-6 h-6 text-orange-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Sleep Goal"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Set your daily sleep goal to help maintain a healthy sleep schedule."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Goal (hours per night):"}),s.jsx("input",{type:"number",value:E,onChange:v=>y(Number(v.target.value)),min:"6",max:"12",step:"0.5",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Enter sleep goal"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 7-9 hours for adults"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:G,disabled:k||E<6||E>12,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving...":"Save Goal"})]})]})})]})},ky=()=>{const{user:e}=bt(),[t,r]=S.useState([]),[n,a]=S.useState(!0),[i,l]=S.useState(!1),[o,d]=S.useState(null),[c,u]=S.useState({totalCredits:0,totalGradePoints:0,cgpa:0}),[h,p]=S.useState([]),[x,k]=S.useState(null),[m,E]=S.useState({subject:"",course_code:"",credit_hours:3,course_type:"theory"}),[y,g]=S.useState(!1),[f,b]=S.useState(""),[T,w]=S.useState(null),[C,L]=S.useState(""),[Q,O]=S.useState(null),[V,ee]=S.useState(""),[A,K]=S.useState(null),[G,N]=S.useState(""),[$,v]=S.useState(null),[I,F]=S.useState(""),[Y,J]=S.useState(!1),[se,z]=S.useState(!1),[ue,P]=S.useState(new Set),[X,ie]=S.useState({});S.useEffect(()=>{e&&oe()},[e]),S.useEffect(()=>{x&&le(x.id)},[x,e]),S.useEffect(()=>{_e()},[X,h]),S.useEffect(()=>{h.length>0&&Gh()},[h,e]);const oe=async()=>{a(!0);try{let{data:_,error:M}=await R.from("semesters").select("*").eq("user_id",e==null?void 0:e.id).order("semester_number",{ascending:!0});if(M)throw M;if(!_||_.length===0){const W=Array.from({length:8},(U,te)=>({user_id:e==null?void 0:e.id,semester_number:te+1,status:te===0?"active":"locked",started_at:te===0?new Date().toISOString():null})),{data:D,error:q}=await R.from("semesters").insert(W).select("*");if(q)throw q;_=D}p(_),k(_.find(W=>W.status==="active")||null)}catch(_){console.error("Error fetching semesters:",_)}finally{a(!1)}},le=async _=>{a(!0);try{const{data:M,error:W}=await R.from("academic_marks").select("*").eq("user_id",e==null?void 0:e.id).eq("semester_id",_).order("course_code",{ascending:!0});if(W)throw W;r(M||[])}catch(M){console.error("Error fetching marks:",M)}finally{a(!1)}},he=async()=>{if(x){g(!1),b(""),a(!0);try{await R.from("semesters").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",x.id);const _=h.find(M=>M.semester_number===x.semester_number+1);_&&await R.from("semesters").update({status:"active",started_at:new Date().toISOString()}).eq("id",_.id),await oe()}catch(_){console.error("Error completing semester:",_)}finally{a(!1)}}},ae=_=>_>=80?4:_>=75&&_<80?3.75:_>=70&&_<75?3.5:_>=65&&_<70?3.25:_>=60&&_<65?3:_>=55&&_<60?2.75:_>=50&&_<55?2.5:_>=45&&_<50?2.25:_>=40&&_<45?2:(_>=0&&_<40,0),de=_=>_===4?"A+":_===3.75?"A":_===3.5?"A-":_===3.25?"B+":_===3?"B":_===2.75?"B-":_===2.5?"C+":_===2.25?"C":_===2?"D":"F",_e=()=>{let _=0,M=0;h.filter(U=>U.status==="completed").forEach(U=>{const te=X[U.id]||[];let j=0,ke=0;te.forEach(H=>{j+=H.credit_hours,H.grade_point&&(ke+=H.credit_hours*H.grade_point)});const xe=j>0?ke/j:0;_+=j,M+=xe*j});const D=_>0?M/_:0,q={totalCredits:_,totalGradePoints:M,cgpa:Math.round(D*100)/100};u(q)},sr=async _=>{if(_.preventDefault(),!x)return;const M={user_id:e==null?void 0:e.id,subject:m.subject,course_code:m.course_code,credit_hours:m.credit_hours,course_type:m.course_type,semester:ss(x.semester_number),academic_year:new Date().getFullYear().toString(),semester_id:x.id};try{if(o){const{error:W}=await R.from("academic_marks").update(M).eq("id",o);if(W)throw W}else{const{error:W}=await R.from("academic_marks").insert(M);if(W)throw W}await le(x.id),nt()}catch(W){console.error("Error saving mark:",W)}},Ar=async _=>{if(confirm("Are you sure you want to delete this record?"))try{const{error:M}=await R.from("academic_marks").delete().eq("id",_);if(M)throw M;await le((x==null?void 0:x.id)||"")}catch(M){console.error("Error deleting mark:",M)}},He=_=>{d(_.id),E({subject:_.subject,course_code:_.course_code,credit_hours:_.credit_hours,course_type:_.course_type||"theory"}),J(!0)},nt=()=>{E({subject:"",course_code:"",credit_hours:3,course_type:"theory"}),d(null),l(!1),J(!1)},qh=()=>{const _={};return t.forEach(M=>{const W=`${M.academic_year} - ${M.semester}`;_[W]||(_[W]=[]),_[W].push(M)}),_},ss=_=>{const M=Math.ceil(_/2),W=_%2===1;return`${M===1?"1st":M===2?"2nd":M===3?"3rd":`${M}th`} Semester ${W?"Odd":"Even"}`},nr=async(_,M,W)=>{w(null);try{const D=W===""?null:parseFloat(W),{data:q}=await R.from("academic_marks").select("*").eq("id",_).single();if(q){const U={...q,[M]:D},te=[U.ct1,U.ct2,U.ct3,U.ct4].filter(ye=>typeof ye=="number"&&!isNaN(ye));let j=0;if(te.length>0){const be=te.sort((Re,Ze)=>Ze-Re).slice(0,3);j=be.reduce((Re,Ze)=>(Re??0)+Ze,0)/(be.length||1)}const ke=q.attendance||0,xe=q.assignment_pres_viva||0,H=q.term_marks||0,Ee=j+ke+xe+H,fe=ae(Ee),re=de(fe),{error:we}=await R.from("academic_marks").update({[M]:D,total_marks:Ee,grade:re,grade_point:fe}).eq("id",_);if(we)throw we;if(x){const{semesterCGPA:ye,semesterTotalCredits:be}=Or(x.id);await Mr(x.id,ye,be)}}x&&await le(x.id)}catch(D){console.error("Error updating CT mark:",D)}},Or=_=>{console.log("=== SEMESTER CGPA CALCULATION DEBUG ==="),console.log("Calculating CGPA for semester ID:",_);let M=0,W=0;const D=t.filter(U=>U.semester_id===_);console.log("Semester Marks:",D),D.forEach((U,te)=>{if(console.log(`Semester Course ${te+1}:`,{subject:U.subject,course_type:U.course_type,credit_hours:U.credit_hours,grade_point:U.grade_point,grade:U.grade}),M+=U.credit_hours,console.log(`Added ${U.credit_hours} credits for ${U.subject}`),U.grade_point){const j=U.credit_hours*U.grade_point;W+=j,console.log(` Added ${j} grade points for ${U.subject} (${U.grade_point}  ${U.credit_hours})`)}else console.log(` No grade point for ${U.subject}, skipping grade point contribution`)});const q=M>0?W/M:0;return console.log("=== SEMESTER CGPA SUMMARY ==="),console.log("Semester Total Credits:",M),console.log("Semester Total Grade Points:",W),console.log("Calculated Semester CGPA:",q),console.log("Rounded Semester CGPA:",Math.round(q*100)/100),console.log("=== END SEMESTER CGPA CALCULATION ==="),{semesterCGPA:q,semesterTotalCredits:M}},Mr=async(_,M,W)=>{try{const{error:D}=await R.from("semesters").update({cgpa:M,total_credits:W}).eq("id",_);if(D)throw D}catch(D){console.error("Error updating semester CGPA:",D)}},ns=async(_,M,W)=>{O(null);try{const D=W===""?null:parseFloat(W),{data:q}=await R.from("academic_marks").select("*").eq("id",_).single();if(q){const U=[q.ct1,q.ct2,q.ct3,q.ct4].filter(we=>typeof we=="number"&&!isNaN(we));let te=0;if(U.length>0){const ye=U.sort((be,Re)=>Re-be).slice(0,3);te=ye.reduce((be,Re)=>(be??0)+Re,0)/(ye.length||1)}const j=M==="attendance"?D||0:q.attendance||0,ke=M==="assignment_pres_viva"?D||0:q.assignment_pres_viva||0,xe=M==="term_marks"?D||0:q.term_marks||0,H=te+j+ke+xe,Ee=ae(H),fe=de(Ee),{error:re}=await R.from("academic_marks").update({[M]:D,total_marks:H,grade:fe,grade_point:Ee}).eq("id",_);if(re)throw re;if(x){const{semesterCGPA:we,semesterTotalCredits:ye}=Or(x.id);await Mr(x.id,we,ye)}}x&&await le(x.id)}catch(D){console.error("Error updating assessment mark:",D)}},ar=async(_,M,W)=>{K(null);try{let D=null,q=null;if(M==="grade"){const te={"A+":4,A:3.75,"A-":3.5,"B+":3.25,B:3,"B-":2.75,"C+":2.5,C:2.25,D:2,F:0};q=W.toUpperCase(),D=te[q]||null}else{const te=W===""?null:parseFloat(W);te!==null&&!isNaN(te)&&(D=te,q=de(te))}const{error:U}=await R.from("academic_marks").update({grade:q,grade_point:D}).eq("id",_);if(U)throw U;if(x){const{semesterCGPA:te,semesterTotalCredits:j}=Or(x.id);await Mr(x.id,te,j)}x&&await le(x.id)}catch(D){console.error("Error updating grade:",D)}},Bh=async _=>{try{x&&await R.from("semesters").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",x.id),await R.from("semesters").update({status:"active",started_at:new Date().toISOString(),completed_at:null}).eq("id",_),await oe()}catch(M){console.error("Error reactivating semester:",M)}},Hh=async _=>{try{const{data:M,error:W}=await R.from("academic_marks").select("*").eq("user_id",e==null?void 0:e.id).eq("semester_id",_).order("course_code",{ascending:!0});if(W)throw W;return M||[]}catch(M){return console.error("Error fetching completed semester marks:",M),[]}},Gh=async()=>{try{const _=h.filter(W=>W.status==="completed"),M={};for(const W of _){const D=await Hh(W.id);M[W.id]=D}ie(M)}catch(_){console.error("Error loading completed semester marks:",_)}},md=async(_,M,W)=>{try{const D=W===""?null:parseFloat(W),{data:q}=await R.from("academic_marks").select("*").eq("id",_).single();if(q){const U={...q,[M]:D},te=[U.ct1,U.ct2,U.ct3,U.ct4].filter(ye=>typeof ye=="number"&&!isNaN(ye));let j=0;if(te.length>0){const be=te.sort((Re,Ze)=>Ze-Re).slice(0,3);j=be.reduce((Re,Ze)=>(Re??0)+Ze,0)/(be.length||1)}const ke=q.attendance||0,xe=q.assignment_pres_viva||0,H=q.term_marks||0,Ee=j+ke+xe+H,fe=ae(Ee),re=de(fe),{error:we}=await R.from("academic_marks").update({[M]:D,total_marks:Ee,grade:re,grade_point:fe}).eq("id",_);if(we)throw we;if(q.semester_id){const{semesterCGPA:ye,semesterTotalCredits:be}=Or(q.semester_id);await Mr(q.semester_id,ye,be)}}}catch(D){console.error("Error updating completed semester CT mark:",D)}},_i=async(_,M,W)=>{try{const D=W===""?null:parseFloat(W),{data:q}=await R.from("academic_marks").select("*").eq("id",_).single();if(q){const U=[q.ct1,q.ct2,q.ct3,q.ct4].filter(we=>typeof we=="number"&&!isNaN(we));let te=0;if(U.length>0){const ye=U.sort((be,Re)=>Re-be).slice(0,3);te=ye.reduce((be,Re)=>(be??0)+Re,0)/(ye.length||1)}const j=M==="attendance"?D||0:q.attendance||0,ke=M==="assignment_pres_viva"?D||0:q.assignment_pres_viva||0,xe=M==="term_marks"?D||0:q.term_marks||0,H=te+j+ke+xe,Ee=ae(H),fe=de(Ee),{error:re}=await R.from("academic_marks").update({[M]:D,total_marks:H,grade:fe,grade_point:Ee}).eq("id",_);if(re)throw re;if(q.semester_id){const{semesterCGPA:we,semesterTotalCredits:ye}=Or(q.semester_id);await Mr(q.semester_id,we,ye)}}}catch(D){console.error("Error updating completed semester assessment mark:",D)}},ir=async(_,M,W)=>{try{const D=W===""?null:parseFloat(W),{data:q}=await R.from("academic_marks").select("*").eq("id",_).single();if(q){const U=M==="quiz"?D||0:q.quiz||0,te=M==="board_viva"?D||0:q.board_viva||0,j=M==="sessional_attendance"?D||0:q.sessional_attendance||0,ke=M==="lab"?D||0:q.lab||0,xe=U+te+j+ke,H=ae(xe),Ee=de(H),{error:fe}=await R.from("academic_marks").update({[M]:D,total_marks:xe,grade:Ee,grade_point:H}).eq("id",_);if(fe)throw fe;if(x){const{semesterCGPA:re,semesterTotalCredits:we}=Or(x.id);await Mr(x.id,re,we)}}x&&await le(x.id)}catch(D){console.error("Error updating sessional mark:",D)}},xd=async(_,M,W)=>{try{let D=null,q=null;if(M==="grade"){const j={"A+":4,A:3.75,"A-":3.5,"B+":3.25,B:3,"B-":2.75,"C+":2.5,C:2.25,D:2,F:0};q=W.toUpperCase(),D=j[q]||null}else{const j=W===""?null:parseFloat(W);j!==null&&!isNaN(j)&&(D=j,q=de(j))}const{error:U}=await R.from("academic_marks").update({grade:q,grade_point:D}).eq("id",_);if(U)throw U;const{data:te}=await R.from("academic_marks").select("semester_id").eq("id",_).single();if(te!=null&&te.semester_id){const{semesterCGPA:j,semesterTotalCredits:ke}=Or(te.semester_id);await Mr(te.semester_id,j,ke)}}catch(D){console.error("Error updating completed semester grade:",D)}};return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading academic data..."})}):s.jsxs("div",{className:"space-y-6",children:[x&&s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:s.jsxs("h1",{className:"text-2xl sm:text-4xl font-extrabold text-emerald-700 dark:text-emerald-300 flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("span",{role:"img","aria-label":"graduation cap",children:""}),s.jsxs("span",{children:["Academic Progress: ",ss(x.semester_number)]})]}),s.jsx("span",{className:"px-3 py-1 text-sm sm:text-base rounded-full bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300 font-semibold w-fit",children:"Active Semester"})]})}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:s.jsx(ei,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current CGPA"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:c.cgpa.toFixed(2)})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:s.jsx($e,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Earned Credits"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:h.reduce((_,M)=>_+(M.total_credits&&M.total_credits>0?M.total_credits:0),0)})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center",children:s.jsx(Jr,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[h.filter(_=>_.status==="completed").length,"/",h.length]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center",children:s.jsx(_r,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Academic Progress"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[(()=>{const M=h.filter(q=>q.status==="completed").length,W=h.find(q=>q.status==="active");let D=0;return M>0?D=M/8*100:W&&(D=1/8*100),Math.round(D)})(),"%"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[h.filter(_=>_.status==="completed").length," of 8 semesters"]})]})]})})]}),!i&&s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("button",{onClick:()=>z(!se),className:`flex items-center px-3 py-2 rounded-md text-sm sm:text-base font-medium shadow transition-colors ${se?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:[s.jsx(_r,{className:"w-4 h-4 mr-2"}),se?"Hide Analytics":"Show Analytics"]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-3 py-2 bg-emerald-600 text-white rounded-md text-sm sm:text-base font-medium shadow hover:bg-emerald-700 transition-colors",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"})," Add Course"]})]}),se&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(_r,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"}),"Academic Analytics & Insights"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"CGPA Trend"}),s.jsx("div",{className:"space-y-3",children:h.filter(_=>_.status==="completed").sort((_,M)=>_.semester_number-M.semester_number).map(_=>{const M=X[_.id]||[];let W=0,D=0;M.forEach(te=>{W+=te.credit_hours,te.grade_point&&(D+=te.credit_hours*te.grade_point)});const q=W>0?D/W:0,U=q/4*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:ss(_.semester_number)}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[q.toFixed(2)," / 4.00"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${U}%`}})})]},_.id)})})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Grade Distribution"}),s.jsx("div",{className:"space-y-3",children:(()=>{const _=Object.values(X).flat(),M={},W=["A+","A","A-","B+","B","B-","C+","C","D","F"];W.forEach(U=>{M[U]=0}),_.forEach(U=>{U.grade&&M.hasOwnProperty(U.grade)&&M[U.grade]++});const D=_.length,q=Object.values(M).reduce((U,te)=>U+te,0);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Courses"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:D}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[q," with grades  ",D-q," pending"]})]}),s.jsx("div",{className:"space-y-2",children:W.filter(U=>M[U]>0).map(U=>{const te=M[U],j=D>0?te/D*100:0,ke=q>0?te/q*100:0,xe=U==="A+"?"bg-emerald-600":U==="A"?"bg-green-500":U==="A-"?"bg-green-400":U==="B+"?"bg-blue-500":U==="B"?"bg-blue-400":U==="B-"?"bg-yellow-500":U==="C+"?"bg-yellow-400":U==="C"?"bg-orange-500":U==="D"?"bg-red-400":"bg-red-500",H=U==="A+"?4:U==="A"?3.75:U==="A-"?3.5:U==="B+"?3.25:U==="B"?3:U==="B-"?2.75:U==="C+"?2.5:U==="C"?2.25:U==="D"?2:0;return s.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:U})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[te," ",te===1?"course":"courses"]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",H.toFixed(2)," GPA)"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[j.toFixed(1),"%"]}),q>0&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ke.toFixed(1),"% of graded"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`${xe} h-2 rounded-full transition-all duration-300`,style:{width:`${j}%`}})})]})]},U)})}),q>0&&s.jsx("div",{className:"mt-4 p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Grade Distribution Summary"}),s.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:(()=>{const U=M["A+"]+M.A+M["A-"],te=M["B+"]+M.B+M["B-"],j=M["C+"]+M.C+M.D;return U/q>=.5?"Excellent Performance":te/q>=.5?"Good Performance":j/q>=.8?"Satisfactory Performance":"Needs Improvement"})()})]})})]})})()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Credit Analysis"}),s.jsx("div",{className:"space-y-4",children:(()=>{const _=h.reduce((D,q)=>D+(q.total_credits||0),0),M=8*22,W=_/M*100;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:_}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Credits Earned"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Progress to Target"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[W.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(W,100)}%`}})}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Target: ",M," credits (8 semesters)"]})]})]})})()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Performance Insights"}),s.jsx("div",{className:"space-y-3",children:(()=>{const _=Object.values(X).flat(),M=_.filter(U=>U.course_type==="theory"),W=_.filter(U=>U.course_type==="sessional"),D=M.length>0?M.reduce((U,te)=>U+(te.grade_point||0),0)/M.length:0,q=W.length>0?W.reduce((U,te)=>U+(te.grade_point||0),0)/W.length:0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Theory Courses"}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[M.length," courses"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:D.toFixed(2)}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average GPA"})]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Sessional Courses"}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[W.length," courses"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:q.toFixed(2)}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average GPA"})]})]}),s.jsxs("div",{className:"text-center p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Performance"}),s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:D>q?"Better in Theory":D<q?"Better in Sessional":"Balanced"})]})]})})()})]})]})]}),i&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:o?"Edit Course":"Add New Course"}),s.jsx("button",{onClick:nt,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:sr,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:m.subject,onChange:_=>E({...m,subject:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Code"}),s.jsx("input",{type:"text",value:m.course_code,onChange:_=>E({...m,course_code:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Credit Hours"}),s.jsx("input",{type:"number",step:"0.5",min:"0.5",max:"6",value:m.credit_hours,onChange:_=>E({...m,credit_hours:parseFloat(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Type"}),s.jsxs("select",{value:m.course_type,onChange:_=>E({...m,course_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"theory",children:"Theory"}),s.jsx("option",{value:"sessional",children:"Sessional"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:nt,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[s.jsx(ti,{className:"w-4 h-4"}),s.jsx("span",{children:o?"Update":"Save"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[Object.entries(qh()).map(([_,M])=>{h.find(j=>`${new Date().getFullYear()} - ${ss(j.semester_number)}`===_);let W=0,D=0;M.forEach(j=>{W+=j.credit_hours,j.grade_point&&(D+=j.credit_hours*j.grade_point)});const q=W>0?D/W:0,U=M.filter(j=>j.course_type==="theory"),te=M.filter(j=>j.course_type==="sessional");return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:_}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"text-center px-4 py-2 border-2 border-emerald-500 rounded-lg bg-emerald-50 dark:bg-emerald-900/20",children:[(()=>{const ke=M.filter(xe=>xe.grade_point!==null&&xe.grade_point!==void 0&&!isNaN(xe.grade_point)&&xe.credit_hours).map(xe=>({subject:xe.subject,grade_point:xe.grade_point,credit_hours:xe.credit_hours,contribution:xe.grade_point*xe.credit_hours}));return console.log(`--- Semester CGPA Calculation for ${_} ---`),console.log("Contributing marks:",ke),console.log("Semester CGPA:",q,"Total Credits:",W),null})(),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Semester CGPA"}),s.jsx("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:q.toFixed(2)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Credits"}),s.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:W})]})]})]})}),U.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx($e,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Theory Courses"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"Course"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Credits"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT1"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT2"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT3"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT4"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"CT Avg"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:s.jsxs("div",{className:"whitespace-normal",children:[s.jsx("div",{children:"Assig"}),s.jsx("div",{children:"Pres"}),s.jsx("div",{children:"Viva"})]})}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Attend"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Term"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Total"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Point"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Grade"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:U.map(j=>{const ke=[j.ct1,j.ct2,j.ct3,j.ct4].filter(H=>typeof H=="number"&&!isNaN(H));let xe="";if(ke.length>0){const Ee=ke.sort((re,we)=>we-re).slice(0,3);xe=(Ee.reduce((re,we)=>(re??0)+we,0)/(Ee.length||1)).toFixed(2)}return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:j.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:j.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var H;w({id:j.id,field:"ct1"}),L(((H=j.ct1)==null?void 0:H.toString())||"")},children:T&&T.id===j.id&&T.field==="ct1"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:C,onChange:H=>L(H.target.value),onBlur:()=>nr(j.id,"ct1",C),onKeyDown:H=>{H.key==="Enter"&&nr(j.id,"ct1",C)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.ct1??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var H;w({id:j.id,field:"ct2"}),L(((H=j.ct2)==null?void 0:H.toString())||"")},children:T&&T.id===j.id&&T.field==="ct2"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:C,onChange:H=>L(H.target.value),onBlur:()=>nr(j.id,"ct2",C),onKeyDown:H=>{H.key==="Enter"&&nr(j.id,"ct2",C)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.ct2??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var H;w({id:j.id,field:"ct3"}),L(((H=j.ct3)==null?void 0:H.toString())||"")},children:T&&T.id===j.id&&T.field==="ct3"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:C,onChange:H=>L(H.target.value),onBlur:()=>nr(j.id,"ct3",C),onKeyDown:H=>{H.key==="Enter"&&nr(j.id,"ct3",C)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.ct3??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var H;w({id:j.id,field:"ct4"}),L(((H=j.ct4)==null?void 0:H.toString())||"")},children:T&&T.id===j.id&&T.field==="ct4"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:C,onChange:H=>L(H.target.value),onBlur:()=>nr(j.id,"ct4",C),onKeyDown:H=>{H.key==="Enter"&&nr(j.id,"ct4",C)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.ct4??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-20 text-center",children:xe||"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var H;O({id:j.id,field:"assignment_pres_viva"}),ee(((H=j.assignment_pres_viva)==null?void 0:H.toString())||"")},children:Q&&Q.id===j.id&&Q.field==="assignment_pres_viva"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",autoFocus:!0,value:V,onChange:H=>ee(H.target.value),onBlur:()=>ns(j.id,"assignment_pres_viva",V),onKeyDown:H=>{H.key==="Enter"&&ns(j.id,"assignment_pres_viva",V)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.assignment_pres_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var H;O({id:j.id,field:"attendance"}),ee(((H=j.attendance)==null?void 0:H.toString())||"")},children:Q&&Q.id===j.id&&Q.field==="attendance"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",autoFocus:!0,value:V,onChange:H=>ee(H.target.value),onBlur:()=>ns(j.id,"attendance",V),onKeyDown:H=>{H.key==="Enter"&&ns(j.id,"attendance",V)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var H;O({id:j.id,field:"term_marks"}),ee(((H=j.term_marks)==null?void 0:H.toString())||"")},children:Q&&Q.id===j.id&&Q.field==="term_marks"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"60",autoFocus:!0,value:V,onChange:H=>ee(H.target.value),onBlur:()=>ns(j.id,"term_marks",V),onKeyDown:H=>{H.key==="Enter"&&ns(j.id,"term_marks",V)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.term_marks??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:(()=>{const H=[j.ct1,j.ct2,j.ct3,j.ct4].filter(be=>typeof be=="number"&&!isNaN(be));let Ee=0;if(H.length>0){const Re=H.sort((Ze,as)=>as-Ze).slice(0,3);Ee=Re.reduce((Ze,as)=>(Ze??0)+as,0)/(Re.length||1)}const fe=j.attendance||0,re=j.assignment_pres_viva||0,we=j.term_marks||0,ye=Ee+fe+re+we;return ye>0?ye.toFixed(2):"-"})()}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var H;K({id:j.id,field:"grade_point"}),N(((H=j.grade_point)==null?void 0:H.toString())||"")},children:A&&A.id===j.id&&A.field==="grade_point"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",autoFocus:!0,value:G,onChange:H=>N(H.target.value),onBlur:()=>ar(j.id,"grade_point",G),onKeyDown:H=>{H.key==="Enter"&&ar(j.id,"grade_point",G)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{K({id:j.id,field:"grade"}),N(j.grade||"")},children:A&&A.id===j.id&&A.field==="grade"?s.jsx("input",{type:"text",maxLength:"2",autoFocus:!0,value:G,onChange:H=>N(H.target.value),onBlur:()=>ar(j.id,"grade",G),onKeyDown:H=>{H.key==="Enter"&&ar(j.id,"grade",G)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):j.grade??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>He(j),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Ns,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ar(j.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(Ds,{className:"w-4 h-4"})})]})})]},j.id)})})]})})]}),te.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(ei,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Sessional Courses"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"Course"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Credits"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Quiz (20)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"Board Viva (25)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"Attendance (10)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Lab (45)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Total"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Point"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Grade"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:te.map(j=>{const ke=j.quiz||0,xe=j.board_viva||0,H=j.sessional_attendance||0,Ee=j.lab||0,fe=ke+xe+H+Ee;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:j.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:j.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var re;v({id:j.id,field:"quiz"}),F(((re=j.quiz)==null?void 0:re.toString())||"")},children:$&&$.id===j.id&&$.field==="quiz"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"20",autoFocus:!0,value:I,onChange:re=>F(re.target.value),onBlur:()=>ir(j.id,"quiz",I),onKeyDown:re=>{re.key==="Enter"&&ir(j.id,"quiz",I)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.quiz??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-20 text-center",onClick:()=>{var re;v({id:j.id,field:"board_viva"}),F(((re=j.board_viva)==null?void 0:re.toString())||"")},children:$&&$.id===j.id&&$.field==="board_viva"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"25",autoFocus:!0,value:I,onChange:re=>F(re.target.value),onBlur:()=>ir(j.id,"board_viva",I),onKeyDown:re=>{re.key==="Enter"&&ir(j.id,"board_viva",I)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.board_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-20 text-center",onClick:()=>{var re;v({id:j.id,field:"sessional_attendance"}),F(((re=j.sessional_attendance)==null?void 0:re.toString())||"")},children:$&&$.id===j.id&&$.field==="sessional_attendance"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"10",autoFocus:!0,value:I,onChange:re=>F(re.target.value),onBlur:()=>ir(j.id,"sessional_attendance",I),onKeyDown:re=>{re.key==="Enter"&&ir(j.id,"sessional_attendance",I)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.sessional_attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var re;v({id:j.id,field:"lab"}),F(((re=j.lab)==null?void 0:re.toString())||"")},children:$&&$.id===j.id&&$.field==="lab"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"45",autoFocus:!0,value:I,onChange:re=>F(re.target.value),onBlur:()=>ir(j.id,"lab",I),onKeyDown:re=>{re.key==="Enter"&&ir(j.id,"lab",I)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.lab??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-16 text-center",children:fe.toFixed(2)}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var re;K({id:j.id,field:"grade_point"}),N(((re=j.grade_point)==null?void 0:re.toString())||"")},children:A&&A.id===j.id&&A.field==="grade_point"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",autoFocus:!0,value:G,onChange:re=>N(re.target.value),onBlur:()=>ar(j.id,"grade_point",G),onKeyDown:re=>{re.key==="Enter"&&ar(j.id,"grade_point",G)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):j.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{K({id:j.id,field:"grade"}),N(j.grade||"")},children:A&&A.id===j.id&&A.field==="grade"?s.jsx("input",{type:"text",maxLength:"2",autoFocus:!0,value:G,onChange:re=>N(re.target.value),onBlur:()=>ar(j.id,"grade",G),onKeyDown:re=>{re.key==="Enter"&&ar(j.id,"grade",G)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):j.grade??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>He(j),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Ns,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ar(j.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(Ds,{className:"w-4 h-4"})})]})})]},j.id)})})]})})]})]},_)}),t.length===0&&!i&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx($e,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No academic records"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by adding your first course."}),s.jsx("div",{className:"mt-6",children:s.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[s.jsx(Zr,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Course"]})})]})]}),x&&s.jsx("div",{className:"flex justify-end mt-8",children:s.jsxs("button",{onClick:()=>g(!0),className:"flex items-center px-4 sm:px-6 py-2 sm:py-3 bg-emerald-600 text-white rounded-lg text-sm sm:text-lg font-semibold shadow hover:bg-emerald-700 transition-colors",children:[s.jsx(Us,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"})," Complete Semester"]})}),h.filter(_=>_.status==="completed").length>0&&s.jsxs("div",{className:"mt-8 space-y-6",children:[s.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[s.jsx(Jr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600 dark:text-emerald-400"}),"Completed Semesters"]}),h.filter(_=>_.status==="completed").sort((_,M)=>M.semester_number-_.semester_number).map(_=>{const M=ue.has(_.id),W=X[_.id]||[];return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:ss(_.semester_number)}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"px-3 py-1 text-sm rounded-full bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 font-medium",children:"Completed"}),(()=>{let D=0,q=0;W.forEach(te=>{D+=te.credit_hours,te.grade_point&&(q+=te.credit_hours*te.grade_point)});const U=D>0?q/D:0;return console.log(`--- Completed Semester CGPA Calculation for ${ss(_.semester_number)} ---`),console.log("Semester marks:",W),console.log("Total credits:",D),console.log("Total grade points:",q),console.log("Calculated CGPA:",U),s.jsxs(s.Fragment,{children:[U>0&&s.jsxs("span",{className:"px-3 py-1 text-sm rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 font-medium",children:["CGPA: ",U.toFixed(2)]}),D>0&&s.jsxs("span",{className:"px-3 py-1 text-sm rounded-full bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 font-medium",children:["Credits: ",D]})]})})()]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>Bh(_.id),className:"flex items-center px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-md hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors text-sm",children:[s.jsx(Ns,{className:"w-4 h-4 mr-1"}),"Reactivate Semester"]})})]}),W.length>0?s.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:s.jsx("div",{className:"inline-block min-w-full align-middle",children:s.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Course"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Credits"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT1"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT2"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT3"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT4"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Best 3"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Assignment"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Attendance"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Term"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Grade Point"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Grade"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:W.map(D=>{var te,j,ke,xe,H,Ee;const q=[D.ct1,D.ct2,D.ct3,D.ct4].filter(fe=>typeof fe=="number"&&!isNaN(fe));let U="";if(q.length>0){const re=q.sort((ye,be)=>be-ye).slice(0,3);U=(re.reduce((ye,be)=>(ye??0)+be,0)/(re.length||1)).toFixed(2)}return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:D.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:D.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:D.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:D.ct1??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:D.ct2??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:M?s.jsx("input",{type:"number",step:"0.01",min:"0",value:((te=D.ct3)==null?void 0:te.toString())||"",onChange:fe=>md(D.id,"ct3",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):D.ct3??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:M?s.jsx("input",{type:"number",step:"0.01",min:"0",value:((j=D.ct4)==null?void 0:j.toString())||"",onChange:fe=>md(D.id,"ct4",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):D.ct4??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-20 text-center",children:U||"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:M?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:((ke=D.assignment_pres_viva)==null?void 0:ke.toString())||"",onChange:fe=>_i(D.id,"assignment_pres_viva",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):D.assignment_pres_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:M?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:((xe=D.attendance)==null?void 0:xe.toString())||"",onChange:fe=>_i(D.id,"attendance",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):D.attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:M?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"60",value:((H=D.term_marks)==null?void 0:H.toString())||"",onChange:fe=>_i(D.id,"term_marks",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):D.term_marks??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:(()=>{const fe=[D.ct1,D.ct2,D.ct3,D.ct4].filter(Ze=>typeof Ze=="number"&&!isNaN(Ze));let re=0;if(fe.length>0){const as=fe.sort((Si,Ci)=>Ci-Si).slice(0,3);re=as.reduce((Si,Ci)=>(Si??0)+Ci,0)/(as.length||1)}const we=D.attendance||0,ye=D.assignment_pres_viva||0,be=D.term_marks||0,Re=re+we+ye+be;return Re>0?Re.toFixed(2):"-"})()}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:M?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",value:((Ee=D.grade_point)==null?void 0:Ee.toString())||"",onChange:fe=>xd(D.id,"grade_point",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):D.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:M?s.jsx("input",{type:"text",maxLength:"2",value:D.grade||"",onChange:fe=>xd(D.id,"grade",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):D.grade??"-"}),M&&s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>He(D),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Ns,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ar(D.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(Ds,{className:"w-4 h-4"})})]})})]},D.id)})})]})})})}):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx($e,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No courses found for this semester"})]})]},_.id)})]}),Y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:nt,children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Course"}),s.jsx("button",{onClick:nt,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:sr,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:m.subject,onChange:_=>E({...m,subject:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Code"}),s.jsx("input",{type:"text",value:m.course_code,onChange:_=>E({...m,course_code:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Credit Hours"}),s.jsx("input",{type:"number",step:"0.5",min:"0.5",max:"6",value:m.credit_hours,onChange:_=>E({...m,credit_hours:parseFloat(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Type"}),s.jsxs("select",{value:m.course_type,onChange:_=>E({...m,course_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"theory",children:"Theory"}),s.jsx("option",{value:"sessional",children:"Sessional"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:nt,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[s.jsx(ti,{className:"w-4 h-4"}),s.jsx("span",{children:"Update Course"})]})]})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Semester Completion"}),s.jsxs("p",{className:"mb-4 text-gray-700 dark:text-gray-300",children:["To complete this semester, type ",s.jsx("span",{className:"font-bold text-emerald-600",children:"YES"})," below and click Confirm."]}),s.jsx("input",{type:"text",value:f,onChange:_=>b(_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white mb-4",placeholder:"Type YES to confirm"}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:()=>{f.trim().toLowerCase()==="yes"&&he()},disabled:f.trim().toLowerCase()!=="yes",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Us,{className:"w-4 h-4"}),s.jsx("span",{children:"Confirm"})]})]})]})})]})},jy=()=>{const{user:e,loading:t}=bt(),{isRunning:r,elapsedTime:n,currentSubject:a}=Rh(),[i,l]=S.useState("dashboard"),[o,d]=S.useState(!1);if(t)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Loading..."})});if(!e)return s.jsx(cy,{});const c=()=>{switch(i){case"dashboard":return s.jsx(Qc,{setActiveTab:l});case"study":return s.jsx(fy,{});case"prayer":return s.jsx(gy,{});case"quran":return s.jsx(my,{});case"habits":return s.jsx(xy,{});case"exam":return s.jsx(py,{});case"routine":case"attendance":return s.jsx(yy,{});case"sleep":return s.jsx(vy,{});case"achievements":return s.jsx(wy,{});case"academic":return s.jsx(ky,{});case"profile":return s.jsx(by,{});default:return s.jsx(Qc,{setActiveTab:l})}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 dark:from-gray-900 dark:to-emerald-900 relative",children:[s.jsx(ly,{}),s.jsx(dy,{isRunning:r,elapsedTime:n,subject:a}),s.jsx(oy,{activeTab:i,setActiveTab:l,isOpen:o,setIsOpen:d}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"hidden lg:block",children:s.jsx(hy,{activeTab:i,setActiveTab:l})}),s.jsx("main",{className:"flex-1 lg:ml-64",children:s.jsx("div",{className:"p-4 lg:p-6 pt-20 lg:pt-6 pb-20 lg:pb-6",children:c()})})]})]})};function Ny(){return s.jsx(Lp,{children:s.jsx($p,{children:s.jsx(zp,{children:s.jsx(jy,{})})})})}ol.createRoot(document.getElementById("root")).render(s.jsx(po.StrictMode,{children:s.jsx(Ny,{})}));

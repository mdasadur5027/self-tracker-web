(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var ic={exports:{}},ya={},lc={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=Symbol.for("react.element"),n0=Symbol.for("react.portal"),a0=Symbol.for("react.fragment"),i0=Symbol.for("react.strict_mode"),l0=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),d0=Symbol.for("react.context"),c0=Symbol.for("react.forward_ref"),u0=Symbol.for("react.suspense"),h0=Symbol.for("react.memo"),f0=Symbol.for("react.lazy"),So=Symbol.iterator;function g0(e){return e===null||typeof e!="object"?null:(e=So&&e[So]||e["@@iterator"],typeof e=="function"?e:null)}var oc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dc=Object.assign,cc={};function rs(e,t,r){this.props=e,this.context=t,this.refs=cc,this.updater=r||oc}rs.prototype.isReactComponent={};rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uc(){}uc.prototype=rs.prototype;function Nl(e,t,r){this.props=e,this.context=t,this.refs=cc,this.updater=r||oc}var _l=Nl.prototype=new uc;_l.constructor=Nl;dc(_l,rs.prototype);_l.isPureReactComponent=!0;var Co=Array.isArray,hc=Object.prototype.hasOwnProperty,Sl={current:null},fc={key:!0,ref:!0,__self:!0,__source:!0};function gc(e,t,r){var s,a={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)hc.call(t,s)&&!fc.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];a.children=d}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:Zs,type:e,key:i,ref:l,props:a,_owner:Sl.current}}function m0(e,t){return{$$typeof:Zs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zs}function p0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Eo=/\/+/g;function Ha(e,t){return typeof e=="object"&&e!==null&&e.key!=null?p0(""+e.key):t.toString(36)}function Rn(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Zs:case n0:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+Ha(l,0):s,Co(a)?(r="",e!=null&&(r=e.replace(Eo,"$&/")+"/"),Rn(a,t,r,"",function(c){return c})):a!=null&&(Cl(a)&&(a=m0(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Eo,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",Co(e))for(var o=0;o<e.length;o++){i=e[o];var d=s+Ha(i,o);l+=Rn(i,t,r,d,a)}else if(d=g0(e),typeof d=="function")for(e=d.call(e),o=0;!(i=e.next()).done;)i=i.value,d=s+Ha(i,o++),l+=Rn(i,t,r,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function cn(e,t,r){if(e==null)return e;var s=[],a=0;return Rn(e,s,"","",function(i){return t.call(r,i,a++)}),s}function x0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Le={current:null},An={transition:null},y0={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:An,ReactCurrentOwner:Sl};function mc(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:cn,forEach:function(e,t,r){cn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return cn(e,function(){t++}),t},toArray:function(e){return cn(e,function(t){return t})||[]},only:function(e){if(!Cl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=rs;Y.Fragment=a0;Y.Profiler=l0;Y.PureComponent=Nl;Y.StrictMode=i0;Y.Suspense=u0;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y0;Y.act=mc;Y.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=dc({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Sl.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)hc.call(t,d)&&!fc.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&o!==void 0?o[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];s.children=o}return{$$typeof:Zs,type:e.type,key:a,ref:i,props:s,_owner:l}};Y.createContext=function(e){return e={$$typeof:d0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:o0,_context:e},e.Consumer=e};Y.createElement=gc;Y.createFactory=function(e){var t=gc.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:c0,render:e}};Y.isValidElement=Cl;Y.lazy=function(e){return{$$typeof:f0,_payload:{_status:-1,_result:e},_init:x0}};Y.memo=function(e,t){return{$$typeof:h0,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=An.transition;An.transition={};try{e()}finally{An.transition=t}};Y.unstable_act=mc;Y.useCallback=function(e,t){return Le.current.useCallback(e,t)};Y.useContext=function(e){return Le.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return Le.current.useDeferredValue(e)};Y.useEffect=function(e,t){return Le.current.useEffect(e,t)};Y.useId=function(){return Le.current.useId()};Y.useImperativeHandle=function(e,t,r){return Le.current.useImperativeHandle(e,t,r)};Y.useInsertionEffect=function(e,t){return Le.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return Le.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return Le.current.useMemo(e,t)};Y.useReducer=function(e,t,r){return Le.current.useReducer(e,t,r)};Y.useRef=function(e){return Le.current.useRef(e)};Y.useState=function(e){return Le.current.useState(e)};Y.useSyncExternalStore=function(e,t,r){return Le.current.useSyncExternalStore(e,t,r)};Y.useTransition=function(){return Le.current.useTransition()};Y.version="18.3.1";lc.exports=Y;var E=lc.exports;const pc=r0(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0=E,w0=Symbol.for("react.element"),k0=Symbol.for("react.fragment"),b0=Object.prototype.hasOwnProperty,j0=v0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N0={key:!0,ref:!0,__self:!0,__source:!0};function xc(e,t,r){var s,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)b0.call(t,s)&&!N0.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:w0,type:e,key:i,ref:l,props:a,_owner:j0.current}}ya.Fragment=k0;ya.jsx=xc;ya.jsxs=xc;ic.exports=ya;var n=ic.exports,yc={exports:{}},Ke={},vc={exports:{}},wc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,I){var F=P.length;P.push(I);e:for(;0<F;){var Z=F-1>>>1,X=P[Z];if(0<a(X,I))P[Z]=I,P[F]=X,F=Z;else break e}}function r(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var I=P[0],F=P.pop();if(F!==I){P[0]=F;e:for(var Z=0,X=P.length,je=X>>>1;Z<je;){var $=2*(Z+1)-1,_=P[$],U=$+1,B=P[U];if(0>a(_,F))U<X&&0>a(B,_)?(P[Z]=B,P[U]=F,Z=U):(P[Z]=_,P[$]=F,Z=$);else if(U<X&&0>a(B,F))P[Z]=B,P[U]=F,Z=U;else break e}}return I}function a(P,I){var F=P.sortIndex-I.sortIndex;return F!==0?F:P.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],c=[],u=1,f=null,p=3,y=!1,v=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(P){for(var I=r(c);I!==null;){if(I.callback===null)s(c);else if(I.startTime<=P)s(c),I.sortIndex=I.expirationTime,t(d,I);else break;I=r(c)}}function w(P){if(x=!1,h(P),!v)if(r(d)!==null)v=!0,b(k);else{var I=r(c);I!==null&&D(w,I.startTime-P)}}function k(P,I){v=!1,x&&(x=!1,m(O),O=-1),y=!0;var F=p;try{for(h(I),f=r(d);f!==null&&(!(f.expirationTime>I)||P&&!L());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var X=Z(f.expirationTime<=I);I=e.unstable_now(),typeof X=="function"?f.callback=X:f===r(d)&&s(d),h(I)}else s(d);f=r(d)}if(f!==null)var je=!0;else{var $=r(c);$!==null&&D(w,$.startTime-I),je=!1}return je}finally{f=null,p=F,y=!1}}var N=!1,T=null,O=-1,H=5,S=-1;function L(){return!(e.unstable_now()-S<H)}function z(){if(T!==null){var P=e.unstable_now();S=P;var I=!0;try{I=T(!0,P)}finally{I?j():(N=!1,T=null)}}else N=!1}var j;if(typeof g=="function")j=function(){g(z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,G=W.port2;W.port1.onmessage=z,j=function(){G.postMessage(null)}}else j=function(){C(z,0)};function b(P){T=P,N||(N=!0,j())}function D(P,I){O=C(function(){P(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,b(k))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(P){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var F=p;p=I;try{return P()}finally{p=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var F=p;p=P;try{return I()}finally{p=F}},e.unstable_scheduleCallback=function(P,I,F){var Z=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=F+X,P={id:u++,callback:I,priorityLevel:P,startTime:F,expirationTime:X,sortIndex:-1},F>Z?(P.sortIndex=F,t(c,P),r(d)===null&&P===r(c)&&(x?(m(O),O=-1):x=!0,D(w,F-Z))):(P.sortIndex=X,t(d,P),v||y||(v=!0,b(k))),P},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(P){var I=p;return function(){var F=p;p=I;try{return P.apply(this,arguments)}finally{p=F}}}})(wc);vc.exports=wc;var _0=vc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=E,Qe=_0;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kc=new Set,As={};function kr(e,t){Qr(e,t),Qr(e+"Capture",t)}function Qr(e,t){for(As[e]=t,e=0;e<t.length;e++)kc.add(t[e])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bi=Object.prototype.hasOwnProperty,C0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,To={},Po={};function E0(e){return bi.call(Po,e)?!0:bi.call(To,e)?!1:C0.test(e)?Po[e]=!0:(To[e]=!0,!1)}function T0(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P0(e,t,r,s){if(t===null||typeof t>"u"||T0(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $e(e,t,r,s,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Se[e]=new $e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Se[t]=new $e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Se[e]=new $e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Se[e]=new $e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Se[e]=new $e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Se[e]=new $e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Se[e]=new $e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Se[e]=new $e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Se[e]=new $e(e,5,!1,e.toLowerCase(),null,!1,!1)});var El=/[\-:]([a-z])/g;function Tl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(El,Tl);Se[t]=new $e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(El,Tl);Se[t]=new $e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(El,Tl);Se[t]=new $e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Se[e]=new $e(e,1,!1,e.toLowerCase(),null,!1,!1)});Se.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Se[e]=new $e(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pl(e,t,r,s){var a=Se.hasOwnProperty(t)?Se[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(P0(t,r,a,s)&&(r=null),s||a===null?E0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Rt=S0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,un=Symbol.for("react.element"),Pr=Symbol.for("react.portal"),Dr=Symbol.for("react.fragment"),Dl=Symbol.for("react.strict_mode"),ji=Symbol.for("react.profiler"),bc=Symbol.for("react.provider"),jc=Symbol.for("react.context"),Ol=Symbol.for("react.forward_ref"),Ni=Symbol.for("react.suspense"),_i=Symbol.for("react.suspense_list"),Rl=Symbol.for("react.memo"),$t=Symbol.for("react.lazy"),Nc=Symbol.for("react.offscreen"),Do=Symbol.iterator;function ls(e){return e===null||typeof e!="object"?null:(e=Do&&e[Do]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,Ba;function ps(e){if(Ba===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ba=t&&t[1]||""}return`
`+Ba+e}var Wa=!1;function Va(e,t){if(!e||Wa)return"";Wa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=o);break}}}finally{Wa=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ps(e):""}function D0(e){switch(e.tag){case 5:return ps(e.type);case 16:return ps("Lazy");case 13:return ps("Suspense");case 19:return ps("SuspenseList");case 0:case 2:case 15:return e=Va(e.type,!1),e;case 11:return e=Va(e.type.render,!1),e;case 1:return e=Va(e.type,!0),e;default:return""}}function Si(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dr:return"Fragment";case Pr:return"Portal";case ji:return"Profiler";case Dl:return"StrictMode";case Ni:return"Suspense";case _i:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jc:return(e.displayName||"Context")+".Consumer";case bc:return(e._context.displayName||"Context")+".Provider";case Ol:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rl:return t=e.displayName||null,t!==null?t:Si(e.type)||"Memo";case $t:t=e._payload,e=e._init;try{return Si(e(t))}catch{}}return null}function O0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Si(t);case 8:return t===Dl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _c(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function R0(e){var t=_c(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hn(e){e._valueTracker||(e._valueTracker=R0(e))}function Sc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=_c(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Wn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ci(e,t){var r=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Oo(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Zt(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cc(e,t){t=t.checked,t!=null&&Pl(e,"checked",t,!1)}function Ei(e,t){Cc(e,t);var r=Zt(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ti(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ti(e,t.type,Zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ro(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ti(e,t,r){(t!=="number"||Wn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var xs=Array.isArray;function qr(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Zt(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Pi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ao(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(A(92));if(xs(r)){if(1<r.length)throw Error(A(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Zt(r)}}function Ec(e,t){var r=Zt(t.value),s=Zt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Lo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Di(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fn,Pc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fn=fn||document.createElement("div"),fn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ls(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A0=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(e){A0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ks[t]=ks[e]})});function Dc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ks.hasOwnProperty(e)&&ks[e]?(""+t).trim():t+"px"}function Oc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=Dc(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var L0=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oi(e,t){if(t){if(L0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Ri(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ai=null;function Al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Li=null,Hr=null,Br=null;function $o(e){if(e=rn(e)){if(typeof Li!="function")throw Error(A(280));var t=e.stateNode;t&&(t=ja(t),Li(e.stateNode,e.type,t))}}function Rc(e){Hr?Br?Br.push(e):Br=[e]:Hr=e}function Ac(){if(Hr){var e=Hr,t=Br;if(Br=Hr=null,$o(e),t)for(e=0;e<t.length;e++)$o(t[e])}}function Lc(e,t){return e(t)}function $c(){}var Ga=!1;function Ic(e,t,r){if(Ga)return e(t,r);Ga=!0;try{return Lc(e,t,r)}finally{Ga=!1,(Hr!==null||Br!==null)&&($c(),Ac())}}function $s(e,t){var r=e.stateNode;if(r===null)return null;var s=ja(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(A(231,t,typeof r));return r}var $i=!1;if(Tt)try{var os={};Object.defineProperty(os,"passive",{get:function(){$i=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{$i=!1}function $0(e,t,r,s,a,i,l,o,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var bs=!1,Vn=null,Gn=!1,Ii=null,I0={onError:function(e){bs=!0,Vn=e}};function M0(e,t,r,s,a,i,l,o,d){bs=!1,Vn=null,$0.apply(I0,arguments)}function z0(e,t,r,s,a,i,l,o,d){if(M0.apply(this,arguments),bs){if(bs){var c=Vn;bs=!1,Vn=null}else throw Error(A(198));Gn||(Gn=!0,Ii=c)}}function br(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Mc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Io(e){if(br(e)!==e)throw Error(A(188))}function U0(e){var t=e.alternate;if(!t){if(t=br(e),t===null)throw Error(A(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Io(a),e;if(i===s)return Io(a),t;i=i.sibling}throw Error(A(188))}if(r.return!==s.return)r=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,s=i;break}if(o===s){l=!0,s=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,s=a;break}if(o===s){l=!0,s=i,r=a;break}o=o.sibling}if(!l)throw Error(A(189))}}if(r.alternate!==s)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?e:t}function zc(e){return e=U0(e),e!==null?Uc(e):null}function Uc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Uc(e);if(t!==null)return t;e=e.sibling}return null}var Fc=Qe.unstable_scheduleCallback,Mo=Qe.unstable_cancelCallback,F0=Qe.unstable_shouldYield,q0=Qe.unstable_requestPaint,me=Qe.unstable_now,H0=Qe.unstable_getCurrentPriorityLevel,Ll=Qe.unstable_ImmediatePriority,qc=Qe.unstable_UserBlockingPriority,Qn=Qe.unstable_NormalPriority,B0=Qe.unstable_LowPriority,Hc=Qe.unstable_IdlePriority,va=null,yt=null;function W0(e){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(va,e,void 0,(e.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:Q0,V0=Math.log,G0=Math.LN2;function Q0(e){return e>>>=0,e===0?32:31-(V0(e)/G0|0)|0}var gn=64,mn=4194304;function ys(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kn(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?s=ys(o):(i&=l,i!==0&&(s=ys(i)))}else l=r&~a,l!==0?s=ys(l):i!==0&&(s=ys(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ht(t),a=1<<r,s|=e[r],t&=~a;return s}function K0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-ht(i),o=1<<l,d=a[l];d===-1?(!(o&r)||o&s)&&(a[l]=K0(o,t)):d<=t&&(e.expiredLanes|=o),i&=~o}}function Mi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bc(){var e=gn;return gn<<=1,!(gn&4194240)&&(gn=64),e}function Qa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function en(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ht(t),e[t]=r}function Y0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ht(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function $l(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ht(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var se=0;function Wc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vc,Il,Gc,Qc,Kc,zi=!1,pn=[],Bt=null,Wt=null,Vt=null,Is=new Map,Ms=new Map,zt=[],X0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zo(e,t){switch(e){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":Is.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(t.pointerId)}}function ds(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=rn(t),t!==null&&Il(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Z0(e,t,r,s,a){switch(t){case"focusin":return Bt=ds(Bt,e,t,r,s,a),!0;case"dragenter":return Wt=ds(Wt,e,t,r,s,a),!0;case"mouseover":return Vt=ds(Vt,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return Is.set(i,ds(Is.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Ms.set(i,ds(Ms.get(i)||null,e,t,r,s,a)),!0}return!1}function Jc(e){var t=cr(e.target);if(t!==null){var r=br(t);if(r!==null){if(t=r.tag,t===13){if(t=Mc(r),t!==null){e.blockedOn=t,Kc(e.priority,function(){Gc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ln(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ui(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Ai=s,r.target.dispatchEvent(s),Ai=null}else return t=rn(r),t!==null&&Il(t),e.blockedOn=r,!1;t.shift()}return!0}function Uo(e,t,r){Ln(e)&&r.delete(t)}function ef(){zi=!1,Bt!==null&&Ln(Bt)&&(Bt=null),Wt!==null&&Ln(Wt)&&(Wt=null),Vt!==null&&Ln(Vt)&&(Vt=null),Is.forEach(Uo),Ms.forEach(Uo)}function cs(e,t){e.blockedOn===t&&(e.blockedOn=null,zi||(zi=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,ef)))}function zs(e){function t(a){return cs(a,e)}if(0<pn.length){cs(pn[0],e);for(var r=1;r<pn.length;r++){var s=pn[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Bt!==null&&cs(Bt,e),Wt!==null&&cs(Wt,e),Vt!==null&&cs(Vt,e),Is.forEach(t),Ms.forEach(t),r=0;r<zt.length;r++)s=zt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<zt.length&&(r=zt[0],r.blockedOn===null);)Jc(r),r.blockedOn===null&&zt.shift()}var Wr=Rt.ReactCurrentBatchConfig,Jn=!0;function tf(e,t,r,s){var a=se,i=Wr.transition;Wr.transition=null;try{se=1,Ml(e,t,r,s)}finally{se=a,Wr.transition=i}}function rf(e,t,r,s){var a=se,i=Wr.transition;Wr.transition=null;try{se=4,Ml(e,t,r,s)}finally{se=a,Wr.transition=i}}function Ml(e,t,r,s){if(Jn){var a=Ui(e,t,r,s);if(a===null)ni(e,t,s,Yn,r),zo(e,s);else if(Z0(a,e,t,r,s))s.stopPropagation();else if(zo(e,s),t&4&&-1<X0.indexOf(e)){for(;a!==null;){var i=rn(a);if(i!==null&&Vc(i),i=Ui(e,t,r,s),i===null&&ni(e,t,s,Yn,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else ni(e,t,s,null,r)}}var Yn=null;function Ui(e,t,r,s){if(Yn=null,e=Al(s),e=cr(e),e!==null)if(t=br(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Mc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yn=e,null}function Yc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H0()){case Ll:return 1;case qc:return 4;case Qn:case B0:return 16;case Hc:return 536870912;default:return 16}default:return 16}}var qt=null,zl=null,$n=null;function Xc(){if($n)return $n;var e,t=zl,r=t.length,s,a="value"in qt?qt.value:qt.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===a[i-s];s++);return $n=a.slice(e,1<s?1-s:void 0)}function In(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xn(){return!0}function Fo(){return!1}function Je(e){function t(r,s,a,i,l){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xn:Fo,this.isPropagationStopped=Fo,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=xn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=xn)},persist:function(){},isPersistent:xn}),t}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=Je(ss),tn=he({},ss,{view:0,detail:0}),sf=Je(tn),Ka,Ja,us,wa=he({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(Ka=e.screenX-us.screenX,Ja=e.screenY-us.screenY):Ja=Ka=0,us=e),Ka)},movementY:function(e){return"movementY"in e?e.movementY:Ja}}),qo=Je(wa),nf=he({},wa,{dataTransfer:0}),af=Je(nf),lf=he({},tn,{relatedTarget:0}),Ya=Je(lf),of=he({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),df=Je(of),cf=he({},ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uf=Je(cf),hf=he({},ss,{data:0}),Ho=Je(hf),ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mf[e])?!!t[e]:!1}function Fl(){return pf}var xf=he({},tn,{key:function(e){if(e.key){var t=ff[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=In(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fl,charCode:function(e){return e.type==="keypress"?In(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?In(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yf=Je(xf),vf=he({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bo=Je(vf),wf=he({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fl}),kf=Je(wf),bf=he({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),jf=Je(bf),Nf=he({},wa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_f=Je(Nf),Sf=[9,13,27,32],ql=Tt&&"CompositionEvent"in window,js=null;Tt&&"documentMode"in document&&(js=document.documentMode);var Cf=Tt&&"TextEvent"in window&&!js,Zc=Tt&&(!ql||js&&8<js&&11>=js),Wo=" ",Vo=!1;function eu(e,t){switch(e){case"keyup":return Sf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Or=!1;function Ef(e,t){switch(e){case"compositionend":return tu(t);case"keypress":return t.which!==32?null:(Vo=!0,Wo);case"textInput":return e=t.data,e===Wo&&Vo?null:e;default:return null}}function Tf(e,t){if(Or)return e==="compositionend"||!ql&&eu(e,t)?(e=Xc(),$n=zl=qt=null,Or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zc&&t.locale!=="ko"?null:t.data;default:return null}}var Pf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Go(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Pf[e.type]:t==="textarea"}function ru(e,t,r,s){Rc(s),t=Xn(t,"onChange"),0<t.length&&(r=new Ul("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ns=null,Us=null;function Df(e){fu(e,0)}function ka(e){var t=Lr(e);if(Sc(t))return e}function Of(e,t){if(e==="change")return t}var su=!1;if(Tt){var Xa;if(Tt){var Za="oninput"in document;if(!Za){var Qo=document.createElement("div");Qo.setAttribute("oninput","return;"),Za=typeof Qo.oninput=="function"}Xa=Za}else Xa=!1;su=Xa&&(!document.documentMode||9<document.documentMode)}function Ko(){Ns&&(Ns.detachEvent("onpropertychange",nu),Us=Ns=null)}function nu(e){if(e.propertyName==="value"&&ka(Us)){var t=[];ru(t,Us,e,Al(e)),Ic(Df,t)}}function Rf(e,t,r){e==="focusin"?(Ko(),Ns=t,Us=r,Ns.attachEvent("onpropertychange",nu)):e==="focusout"&&Ko()}function Af(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ka(Us)}function Lf(e,t){if(e==="click")return ka(t)}function $f(e,t){if(e==="input"||e==="change")return ka(t)}function If(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gt=typeof Object.is=="function"?Object.is:If;function Fs(e,t){if(gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!bi.call(t,a)||!gt(e[a],t[a]))return!1}return!0}function Jo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yo(e,t){var r=Jo(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jo(r)}}function au(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?au(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iu(){for(var e=window,t=Wn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wn(e.document)}return t}function Hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Mf(e){var t=iu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&au(r.ownerDocument.documentElement,r)){if(s!==null&&Hl(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=Yo(r,i);var l=Yo(r,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zf=Tt&&"documentMode"in document&&11>=document.documentMode,Rr=null,Fi=null,_s=null,qi=!1;function Xo(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qi||Rr==null||Rr!==Wn(s)||(s=Rr,"selectionStart"in s&&Hl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),_s&&Fs(_s,s)||(_s=s,s=Xn(Fi,"onSelect"),0<s.length&&(t=new Ul("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Rr)))}function yn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ar={animationend:yn("Animation","AnimationEnd"),animationiteration:yn("Animation","AnimationIteration"),animationstart:yn("Animation","AnimationStart"),transitionend:yn("Transition","TransitionEnd")},ei={},lu={};Tt&&(lu=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function ba(e){if(ei[e])return ei[e];if(!Ar[e])return e;var t=Ar[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in lu)return ei[e]=t[r];return e}var ou=ba("animationend"),du=ba("animationiteration"),cu=ba("animationstart"),uu=ba("transitionend"),hu=new Map,Zo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){hu.set(e,t),kr(t,[e])}for(var ti=0;ti<Zo.length;ti++){var ri=Zo[ti],Uf=ri.toLowerCase(),Ff=ri[0].toUpperCase()+ri.slice(1);tr(Uf,"on"+Ff)}tr(ou,"onAnimationEnd");tr(du,"onAnimationIteration");tr(cu,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(uu,"onTransitionEnd");Qr("onMouseEnter",["mouseout","mouseover"]);Qr("onMouseLeave",["mouseout","mouseover"]);Qr("onPointerEnter",["pointerout","pointerover"]);Qr("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qf=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function ed(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,z0(s,t,void 0,e),e.currentTarget=null}function fu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],d=o.instance,c=o.currentTarget;if(o=o.listener,d!==i&&a.isPropagationStopped())break e;ed(a,o,c),i=d}else for(l=0;l<s.length;l++){if(o=s[l],d=o.instance,c=o.currentTarget,o=o.listener,d!==i&&a.isPropagationStopped())break e;ed(a,o,c),i=d}}}if(Gn)throw e=Ii,Gn=!1,Ii=null,e}function le(e,t){var r=t[Gi];r===void 0&&(r=t[Gi]=new Set);var s=e+"__bubble";r.has(s)||(gu(t,e,2,!1),r.add(s))}function si(e,t,r){var s=0;t&&(s|=4),gu(r,e,s,t)}var vn="_reactListening"+Math.random().toString(36).slice(2);function qs(e){if(!e[vn]){e[vn]=!0,kc.forEach(function(r){r!=="selectionchange"&&(qf.has(r)||si(r,!1,e),si(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vn]||(t[vn]=!0,si("selectionchange",!1,t))}}function gu(e,t,r,s){switch(Yc(t)){case 1:var a=tf;break;case 4:a=rf;break;default:a=Ml}r=a.bind(null,t,r,e),a=void 0,!$i||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ni(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;o!==null;){if(l=cr(o),l===null)return;if(d=l.tag,d===5||d===6){s=i=l;continue e}o=o.parentNode}}s=s.return}Ic(function(){var c=i,u=Al(r),f=[];e:{var p=hu.get(e);if(p!==void 0){var y=Ul,v=e;switch(e){case"keypress":if(In(r)===0)break e;case"keydown":case"keyup":y=yf;break;case"focusin":v="focus",y=Ya;break;case"focusout":v="blur",y=Ya;break;case"beforeblur":case"afterblur":y=Ya;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=kf;break;case ou:case du:case cu:y=df;break;case uu:y=jf;break;case"scroll":y=sf;break;case"wheel":y=_f;break;case"copy":case"cut":case"paste":y=uf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Bo}var x=(t&4)!==0,C=!x&&e==="scroll",m=x?p!==null?p+"Capture":null:p;x=[];for(var g=c,h;g!==null;){h=g;var w=h.stateNode;if(h.tag===5&&w!==null&&(h=w,m!==null&&(w=$s(g,m),w!=null&&x.push(Hs(g,w,h)))),C)break;g=g.return}0<x.length&&(p=new y(p,v,null,r,u),f.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",p&&r!==Ai&&(v=r.relatedTarget||r.fromElement)&&(cr(v)||v[Pt]))break e;if((y||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=c,v=v?cr(v):null,v!==null&&(C=br(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(x=qo,w="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=Bo,w="onPointerLeave",m="onPointerEnter",g="pointer"),C=y==null?p:Lr(y),h=v==null?p:Lr(v),p=new x(w,g+"leave",y,r,u),p.target=C,p.relatedTarget=h,w=null,cr(u)===c&&(x=new x(m,g+"enter",v,r,u),x.target=h,x.relatedTarget=C,w=x),C=w,y&&v)t:{for(x=y,m=v,g=0,h=x;h;h=Nr(h))g++;for(h=0,w=m;w;w=Nr(w))h++;for(;0<g-h;)x=Nr(x),g--;for(;0<h-g;)m=Nr(m),h--;for(;g--;){if(x===m||m!==null&&x===m.alternate)break t;x=Nr(x),m=Nr(m)}x=null}else x=null;y!==null&&td(f,p,y,x,!1),v!==null&&C!==null&&td(f,C,v,x,!0)}}e:{if(p=c?Lr(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var k=Of;else if(Go(p))if(su)k=$f;else{k=Af;var N=Rf}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=Lf);if(k&&(k=k(e,c))){ru(f,k,r,u);break e}N&&N(e,p,c),e==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&Ti(p,"number",p.value)}switch(N=c?Lr(c):window,e){case"focusin":(Go(N)||N.contentEditable==="true")&&(Rr=N,Fi=c,_s=null);break;case"focusout":_s=Fi=Rr=null;break;case"mousedown":qi=!0;break;case"contextmenu":case"mouseup":case"dragend":qi=!1,Xo(f,r,u);break;case"selectionchange":if(zf)break;case"keydown":case"keyup":Xo(f,r,u)}var T;if(ql)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Or?eu(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(Zc&&r.locale!=="ko"&&(Or||O!=="onCompositionStart"?O==="onCompositionEnd"&&Or&&(T=Xc()):(qt=u,zl="value"in qt?qt.value:qt.textContent,Or=!0)),N=Xn(c,O),0<N.length&&(O=new Ho(O,e,null,r,u),f.push({event:O,listeners:N}),T?O.data=T:(T=tu(r),T!==null&&(O.data=T)))),(T=Cf?Ef(e,r):Tf(e,r))&&(c=Xn(c,"onBeforeInput"),0<c.length&&(u=new Ho("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:c}),u.data=T))}fu(f,t)})}function Hs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xn(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=$s(e,r),i!=null&&s.unshift(Hs(e,i,a)),i=$s(e,t),i!=null&&s.push(Hs(e,i,a))),e=e.return}return s}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function td(e,t,r,s,a){for(var i=t._reactName,l=[];r!==null&&r!==s;){var o=r,d=o.alternate,c=o.stateNode;if(d!==null&&d===s)break;o.tag===5&&c!==null&&(o=c,a?(d=$s(r,i),d!=null&&l.unshift(Hs(r,d,o))):a||(d=$s(r,i),d!=null&&l.push(Hs(r,d,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Hf=/\r\n?/g,Bf=/\u0000|\uFFFD/g;function rd(e){return(typeof e=="string"?e:""+e).replace(Hf,`
`).replace(Bf,"")}function wn(e,t,r){if(t=rd(t),rd(e)!==t&&r)throw Error(A(425))}function Zn(){}var Hi=null,Bi=null;function Wi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vi=typeof setTimeout=="function"?setTimeout:void 0,Wf=typeof clearTimeout=="function"?clearTimeout:void 0,sd=typeof Promise=="function"?Promise:void 0,Vf=typeof queueMicrotask=="function"?queueMicrotask:typeof sd<"u"?function(e){return sd.resolve(null).then(e).catch(Gf)}:Vi;function Gf(e){setTimeout(function(){throw e})}function ai(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),zs(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);zs(t)}function Gt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ns=Math.random().toString(36).slice(2),xt="__reactFiber$"+ns,Bs="__reactProps$"+ns,Pt="__reactContainer$"+ns,Gi="__reactEvents$"+ns,Qf="__reactListeners$"+ns,Kf="__reactHandles$"+ns;function cr(e){var t=e[xt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Pt]||r[xt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=nd(e);e!==null;){if(r=e[xt])return r;e=nd(e)}return t}e=r,r=e.parentNode}return null}function rn(e){return e=e[xt]||e[Pt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function ja(e){return e[Bs]||null}var Qi=[],$r=-1;function rr(e){return{current:e}}function oe(e){0>$r||(e.current=Qi[$r],Qi[$r]=null,$r--)}function ie(e,t){$r++,Qi[$r]=e.current,e.current=t}var er={},De=rr(er),Fe=rr(!1),mr=er;function Kr(e,t){var r=e.type.contextTypes;if(!r)return er;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function qe(e){return e=e.childContextTypes,e!=null}function ea(){oe(Fe),oe(De)}function ad(e,t,r){if(De.current!==er)throw Error(A(168));ie(De,t),ie(Fe,r)}function mu(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(A(108,O0(e)||"Unknown",a));return he({},r,s)}function ta(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,mr=De.current,ie(De,e),ie(Fe,Fe.current),!0}function id(e,t,r){var s=e.stateNode;if(!s)throw Error(A(169));r?(e=mu(e,t,mr),s.__reactInternalMemoizedMergedChildContext=e,oe(Fe),oe(De),ie(De,e)):oe(Fe),ie(Fe,r)}var _t=null,Na=!1,ii=!1;function pu(e){_t===null?_t=[e]:_t.push(e)}function Jf(e){Na=!0,pu(e)}function sr(){if(!ii&&_t!==null){ii=!0;var e=0,t=se;try{var r=_t;for(se=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}_t=null,Na=!1}catch(a){throw _t!==null&&(_t=_t.slice(e+1)),Fc(Ll,sr),a}finally{se=t,ii=!1}}return null}var Ir=[],Mr=0,ra=null,sa=0,Xe=[],Ze=0,pr=null,St=1,Ct="";function ir(e,t){Ir[Mr++]=sa,Ir[Mr++]=ra,ra=e,sa=t}function xu(e,t,r){Xe[Ze++]=St,Xe[Ze++]=Ct,Xe[Ze++]=pr,pr=e;var s=St;e=Ct;var a=32-ht(s)-1;s&=~(1<<a),r+=1;var i=32-ht(t)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,St=1<<32-ht(t)+a|r<<a|s,Ct=i+e}else St=1<<i|r<<a|s,Ct=e}function Bl(e){e.return!==null&&(ir(e,1),xu(e,1,0))}function Wl(e){for(;e===ra;)ra=Ir[--Mr],Ir[Mr]=null,sa=Ir[--Mr],Ir[Mr]=null;for(;e===pr;)pr=Xe[--Ze],Xe[Ze]=null,Ct=Xe[--Ze],Xe[Ze]=null,St=Xe[--Ze],Xe[Ze]=null}var Ge=null,We=null,de=!1,ct=null;function yu(e,t){var r=et(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ld(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ge=e,We=Gt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ge=e,We=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=pr!==null?{id:St,overflow:Ct}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=et(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ge=e,We=null,!0):!1;default:return!1}}function Ki(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ji(e){if(de){var t=We;if(t){var r=t;if(!ld(e,t)){if(Ki(e))throw Error(A(418));t=Gt(r.nextSibling);var s=Ge;t&&ld(e,t)?yu(s,r):(e.flags=e.flags&-4097|2,de=!1,Ge=e)}}else{if(Ki(e))throw Error(A(418));e.flags=e.flags&-4097|2,de=!1,Ge=e}}}function od(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ge=e}function kn(e){if(e!==Ge)return!1;if(!de)return od(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wi(e.type,e.memoizedProps)),t&&(t=We)){if(Ki(e))throw vu(),Error(A(418));for(;t;)yu(e,t),t=Gt(t.nextSibling)}if(od(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){We=Gt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}We=null}}else We=Ge?Gt(e.stateNode.nextSibling):null;return!0}function vu(){for(var e=We;e;)e=Gt(e.nextSibling)}function Jr(){We=Ge=null,de=!1}function Vl(e){ct===null?ct=[e]:ct.push(e)}var Yf=Rt.ReactCurrentBatchConfig;function hs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var s=r.stateNode}if(!s)throw Error(A(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,e))}return e}function bn(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dd(e){var t=e._init;return t(e._payload)}function wu(e){function t(m,g){if(e){var h=m.deletions;h===null?(m.deletions=[g],m.flags|=16):h.push(g)}}function r(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function s(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function a(m,g){return m=Yt(m,g),m.index=0,m.sibling=null,m}function i(m,g,h){return m.index=h,e?(h=m.alternate,h!==null?(h=h.index,h<g?(m.flags|=2,g):h):(m.flags|=2,g)):(m.flags|=1048576,g)}function l(m){return e&&m.alternate===null&&(m.flags|=2),m}function o(m,g,h,w){return g===null||g.tag!==6?(g=fi(h,m.mode,w),g.return=m,g):(g=a(g,h),g.return=m,g)}function d(m,g,h,w){var k=h.type;return k===Dr?u(m,g,h.props.children,w,h.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===$t&&dd(k)===g.type)?(w=a(g,h.props),w.ref=hs(m,g,h),w.return=m,w):(w=Bn(h.type,h.key,h.props,null,m.mode,w),w.ref=hs(m,g,h),w.return=m,w)}function c(m,g,h,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==h.containerInfo||g.stateNode.implementation!==h.implementation?(g=gi(h,m.mode,w),g.return=m,g):(g=a(g,h.children||[]),g.return=m,g)}function u(m,g,h,w,k){return g===null||g.tag!==7?(g=gr(h,m.mode,w,k),g.return=m,g):(g=a(g,h),g.return=m,g)}function f(m,g,h){if(typeof g=="string"&&g!==""||typeof g=="number")return g=fi(""+g,m.mode,h),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case un:return h=Bn(g.type,g.key,g.props,null,m.mode,h),h.ref=hs(m,null,g),h.return=m,h;case Pr:return g=gi(g,m.mode,h),g.return=m,g;case $t:var w=g._init;return f(m,w(g._payload),h)}if(xs(g)||ls(g))return g=gr(g,m.mode,h,null),g.return=m,g;bn(m,g)}return null}function p(m,g,h,w){var k=g!==null?g.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return k!==null?null:o(m,g,""+h,w);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case un:return h.key===k?d(m,g,h,w):null;case Pr:return h.key===k?c(m,g,h,w):null;case $t:return k=h._init,p(m,g,k(h._payload),w)}if(xs(h)||ls(h))return k!==null?null:u(m,g,h,w,null);bn(m,h)}return null}function y(m,g,h,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(h)||null,o(g,m,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case un:return m=m.get(w.key===null?h:w.key)||null,d(g,m,w,k);case Pr:return m=m.get(w.key===null?h:w.key)||null,c(g,m,w,k);case $t:var N=w._init;return y(m,g,h,N(w._payload),k)}if(xs(w)||ls(w))return m=m.get(h)||null,u(g,m,w,k,null);bn(g,w)}return null}function v(m,g,h,w){for(var k=null,N=null,T=g,O=g=0,H=null;T!==null&&O<h.length;O++){T.index>O?(H=T,T=null):H=T.sibling;var S=p(m,T,h[O],w);if(S===null){T===null&&(T=H);break}e&&T&&S.alternate===null&&t(m,T),g=i(S,g,O),N===null?k=S:N.sibling=S,N=S,T=H}if(O===h.length)return r(m,T),de&&ir(m,O),k;if(T===null){for(;O<h.length;O++)T=f(m,h[O],w),T!==null&&(g=i(T,g,O),N===null?k=T:N.sibling=T,N=T);return de&&ir(m,O),k}for(T=s(m,T);O<h.length;O++)H=y(T,m,O,h[O],w),H!==null&&(e&&H.alternate!==null&&T.delete(H.key===null?O:H.key),g=i(H,g,O),N===null?k=H:N.sibling=H,N=H);return e&&T.forEach(function(L){return t(m,L)}),de&&ir(m,O),k}function x(m,g,h,w){var k=ls(h);if(typeof k!="function")throw Error(A(150));if(h=k.call(h),h==null)throw Error(A(151));for(var N=k=null,T=g,O=g=0,H=null,S=h.next();T!==null&&!S.done;O++,S=h.next()){T.index>O?(H=T,T=null):H=T.sibling;var L=p(m,T,S.value,w);if(L===null){T===null&&(T=H);break}e&&T&&L.alternate===null&&t(m,T),g=i(L,g,O),N===null?k=L:N.sibling=L,N=L,T=H}if(S.done)return r(m,T),de&&ir(m,O),k;if(T===null){for(;!S.done;O++,S=h.next())S=f(m,S.value,w),S!==null&&(g=i(S,g,O),N===null?k=S:N.sibling=S,N=S);return de&&ir(m,O),k}for(T=s(m,T);!S.done;O++,S=h.next())S=y(T,m,O,S.value,w),S!==null&&(e&&S.alternate!==null&&T.delete(S.key===null?O:S.key),g=i(S,g,O),N===null?k=S:N.sibling=S,N=S);return e&&T.forEach(function(z){return t(m,z)}),de&&ir(m,O),k}function C(m,g,h,w){if(typeof h=="object"&&h!==null&&h.type===Dr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case un:e:{for(var k=h.key,N=g;N!==null;){if(N.key===k){if(k=h.type,k===Dr){if(N.tag===7){r(m,N.sibling),g=a(N,h.props.children),g.return=m,m=g;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===$t&&dd(k)===N.type){r(m,N.sibling),g=a(N,h.props),g.ref=hs(m,N,h),g.return=m,m=g;break e}r(m,N);break}else t(m,N);N=N.sibling}h.type===Dr?(g=gr(h.props.children,m.mode,w,h.key),g.return=m,m=g):(w=Bn(h.type,h.key,h.props,null,m.mode,w),w.ref=hs(m,g,h),w.return=m,m=w)}return l(m);case Pr:e:{for(N=h.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===h.containerInfo&&g.stateNode.implementation===h.implementation){r(m,g.sibling),g=a(g,h.children||[]),g.return=m,m=g;break e}else{r(m,g);break}else t(m,g);g=g.sibling}g=gi(h,m.mode,w),g.return=m,m=g}return l(m);case $t:return N=h._init,C(m,g,N(h._payload),w)}if(xs(h))return v(m,g,h,w);if(ls(h))return x(m,g,h,w);bn(m,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,g!==null&&g.tag===6?(r(m,g.sibling),g=a(g,h),g.return=m,m=g):(r(m,g),g=fi(h,m.mode,w),g.return=m,m=g),l(m)):r(m,g)}return C}var Yr=wu(!0),ku=wu(!1),na=rr(null),aa=null,zr=null,Gl=null;function Ql(){Gl=zr=aa=null}function Kl(e){var t=na.current;oe(na),e._currentValue=t}function Yi(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Vr(e,t){aa=e,Gl=zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ue=!0),e.firstContext=null)}function st(e){var t=e._currentValue;if(Gl!==e)if(e={context:e,memoizedValue:t,next:null},zr===null){if(aa===null)throw Error(A(308));zr=e,aa.dependencies={lanes:0,firstContext:e}}else zr=zr.next=e;return t}var ur=null;function Jl(e){ur===null?ur=[e]:ur.push(e)}function bu(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Jl(t)):(r.next=a.next,a.next=r),t.interleaved=r,Dt(e,s)}function Dt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var It=!1;function Yl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ju(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Et(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qt(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,te&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Dt(e,r)}return a=s.interleaved,a===null?(t.next=t,Jl(s)):(t.next=a.next,a.next=t),s.interleaved=t,Dt(e,r)}function Mn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,$l(e,r)}}function cd(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ia(e,t,r,s){var a=e.updateQueue;It=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var d=o,c=d.next;d.next=null,l===null?i=c:l.next=c,l=d;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=d))}if(i!==null){var f=a.baseState;l=0,u=c=d=null,o=i;do{var p=o.lane,y=o.eventTime;if((s&p)===p){u!==null&&(u=u.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,x=o;switch(p=t,y=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(y,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(y,f,p):v,p==null)break e;f=he({},f,p);break e;case 2:It=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[o]:p.push(o))}else y={eventTime:y,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=y,d=f):u=u.next=y,l|=p;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;p=o,o=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(d=f),a.baseState=d,a.firstBaseUpdate=c,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);yr|=l,e.lanes=l,e.memoizedState=f}}function ud(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(A(191,a));a.call(s)}}}var sn={},vt=rr(sn),Ws=rr(sn),Vs=rr(sn);function hr(e){if(e===sn)throw Error(A(174));return e}function Xl(e,t){switch(ie(Vs,t),ie(Ws,e),ie(vt,sn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Di(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Di(t,e)}oe(vt),ie(vt,t)}function Xr(){oe(vt),oe(Ws),oe(Vs)}function Nu(e){hr(Vs.current);var t=hr(vt.current),r=Di(t,e.type);t!==r&&(ie(Ws,e),ie(vt,r))}function Zl(e){Ws.current===e&&(oe(vt),oe(Ws))}var ce=rr(0);function la(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var li=[];function eo(){for(var e=0;e<li.length;e++)li[e]._workInProgressVersionPrimary=null;li.length=0}var zn=Rt.ReactCurrentDispatcher,oi=Rt.ReactCurrentBatchConfig,xr=0,ue=null,xe=null,ke=null,oa=!1,Ss=!1,Gs=0,Xf=0;function Ce(){throw Error(A(321))}function to(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!gt(e[r],t[r]))return!1;return!0}function ro(e,t,r,s,a,i){if(xr=i,ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zn.current=e===null||e.memoizedState===null?rg:sg,e=r(s,a),Ss){i=0;do{if(Ss=!1,Gs=0,25<=i)throw Error(A(301));i+=1,ke=xe=null,t.updateQueue=null,zn.current=ng,e=r(s,a)}while(Ss)}if(zn.current=da,t=xe!==null&&xe.next!==null,xr=0,ke=xe=ue=null,oa=!1,t)throw Error(A(300));return e}function so(){var e=Gs!==0;return Gs=0,e}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?ue.memoizedState=ke=e:ke=ke.next=e,ke}function nt(){if(xe===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=xe.next;var t=ke===null?ue.memoizedState:ke.next;if(t!==null)ke=t,xe=e;else{if(e===null)throw Error(A(310));xe=e,e={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},ke===null?ue.memoizedState=ke=e:ke=ke.next=e}return ke}function Qs(e,t){return typeof t=="function"?t(e):t}function di(e){var t=nt(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var s=xe,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,d=null,c=i;do{var u=c.lane;if((xr&u)===u)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:e(s,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(o=d=f,l=s):d=d.next=f,ue.lanes|=u,yr|=u}c=c.next}while(c!==null&&c!==i);d===null?l=s:d.next=o,gt(s,t.memoizedState)||(Ue=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=d,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ue.lanes|=i,yr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ci(e){var t=nt(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);gt(i,t.memoizedState)||(Ue=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function _u(){}function Su(e,t){var r=ue,s=nt(),a=t(),i=!gt(s.memoizedState,a);if(i&&(s.memoizedState=a,Ue=!0),s=s.queue,no(Tu.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||ke!==null&&ke.memoizedState.tag&1){if(r.flags|=2048,Ks(9,Eu.bind(null,r,s,a,t),void 0,null),be===null)throw Error(A(349));xr&30||Cu(r,t,a)}return a}function Cu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Eu(e,t,r,s){t.value=r,t.getSnapshot=s,Pu(t)&&Du(e)}function Tu(e,t,r){return r(function(){Pu(t)&&Du(e)})}function Pu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!gt(e,r)}catch{return!0}}function Du(e){var t=Dt(e,1);t!==null&&ft(t,e,1,-1)}function hd(e){var t=pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},t.queue=e,e=e.dispatch=tg.bind(null,ue,e),[t.memoizedState,e]}function Ks(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Ou(){return nt().memoizedState}function Un(e,t,r,s){var a=pt();ue.flags|=e,a.memoizedState=Ks(1|t,r,void 0,s===void 0?null:s)}function _a(e,t,r,s){var a=nt();s=s===void 0?null:s;var i=void 0;if(xe!==null){var l=xe.memoizedState;if(i=l.destroy,s!==null&&to(s,l.deps)){a.memoizedState=Ks(t,r,i,s);return}}ue.flags|=e,a.memoizedState=Ks(1|t,r,i,s)}function fd(e,t){return Un(8390656,8,e,t)}function no(e,t){return _a(2048,8,e,t)}function Ru(e,t){return _a(4,2,e,t)}function Au(e,t){return _a(4,4,e,t)}function Lu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $u(e,t,r){return r=r!=null?r.concat([e]):null,_a(4,4,Lu.bind(null,t,e),r)}function ao(){}function Iu(e,t){var r=nt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&to(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Mu(e,t){var r=nt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&to(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function zu(e,t,r){return xr&21?(gt(r,t)||(r=Bc(),ue.lanes|=r,yr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ue=!0),e.memoizedState=r)}function Zf(e,t){var r=se;se=r!==0&&4>r?r:4,e(!0);var s=oi.transition;oi.transition={};try{e(!1),t()}finally{se=r,oi.transition=s}}function Uu(){return nt().memoizedState}function eg(e,t,r){var s=Jt(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Fu(e))qu(t,r);else if(r=bu(e,t,r,s),r!==null){var a=Ae();ft(r,e,s,a),Hu(r,t,s)}}function tg(e,t,r){var s=Jt(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fu(e))qu(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,gt(o,l)){var d=t.interleaved;d===null?(a.next=a,Jl(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}r=bu(e,t,a,s),r!==null&&(a=Ae(),ft(r,e,s,a),Hu(r,t,s))}}function Fu(e){var t=e.alternate;return e===ue||t!==null&&t===ue}function qu(e,t){Ss=oa=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Hu(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,$l(e,r)}}var da={readContext:st,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},rg={readContext:st,useCallback:function(e,t){return pt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:fd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Un(4194308,4,Lu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Un(4194308,4,e,t)},useInsertionEffect:function(e,t){return Un(4,2,e,t)},useMemo:function(e,t){var r=pt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=pt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=eg.bind(null,ue,e),[s.memoizedState,e]},useRef:function(e){var t=pt();return e={current:e},t.memoizedState=e},useState:hd,useDebugValue:ao,useDeferredValue:function(e){return pt().memoizedState=e},useTransition:function(){var e=hd(!1),t=e[0];return e=Zf.bind(null,e[1]),pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ue,a=pt();if(de){if(r===void 0)throw Error(A(407));r=r()}else{if(r=t(),be===null)throw Error(A(349));xr&30||Cu(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,fd(Tu.bind(null,s,i,e),[e]),s.flags|=2048,Ks(9,Eu.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=pt(),t=be.identifierPrefix;if(de){var r=Ct,s=St;r=(s&~(1<<32-ht(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Gs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Xf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sg={readContext:st,useCallback:Iu,useContext:st,useEffect:no,useImperativeHandle:$u,useInsertionEffect:Ru,useLayoutEffect:Au,useMemo:Mu,useReducer:di,useRef:Ou,useState:function(){return di(Qs)},useDebugValue:ao,useDeferredValue:function(e){var t=nt();return zu(t,xe.memoizedState,e)},useTransition:function(){var e=di(Qs)[0],t=nt().memoizedState;return[e,t]},useMutableSource:_u,useSyncExternalStore:Su,useId:Uu,unstable_isNewReconciler:!1},ng={readContext:st,useCallback:Iu,useContext:st,useEffect:no,useImperativeHandle:$u,useInsertionEffect:Ru,useLayoutEffect:Au,useMemo:Mu,useReducer:ci,useRef:Ou,useState:function(){return ci(Qs)},useDebugValue:ao,useDeferredValue:function(e){var t=nt();return xe===null?t.memoizedState=e:zu(t,xe.memoizedState,e)},useTransition:function(){var e=ci(Qs)[0],t=nt().memoizedState;return[e,t]},useMutableSource:_u,useSyncExternalStore:Su,useId:Uu,unstable_isNewReconciler:!1};function lt(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Xi(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:he({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Sa={isMounted:function(e){return(e=e._reactInternals)?br(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ae(),a=Jt(e),i=Et(s,a);i.payload=t,r!=null&&(i.callback=r),t=Qt(e,i,a),t!==null&&(ft(t,e,a,s),Mn(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ae(),a=Jt(e),i=Et(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Qt(e,i,a),t!==null&&(ft(t,e,a,s),Mn(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ae(),s=Jt(e),a=Et(r,s);a.tag=2,t!=null&&(a.callback=t),t=Qt(e,a,s),t!==null&&(ft(t,e,s,r),Mn(t,e,s))}};function gd(e,t,r,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!Fs(r,s)||!Fs(a,i):!0}function Bu(e,t,r){var s=!1,a=er,i=t.contextType;return typeof i=="object"&&i!==null?i=st(i):(a=qe(t)?mr:De.current,s=t.contextTypes,i=(s=s!=null)?Kr(e,a):er),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sa,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function md(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Sa.enqueueReplaceState(t,t.state,null)}function Zi(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Yl(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=st(i):(i=qe(t)?mr:De.current,a.context=Kr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xi(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Sa.enqueueReplaceState(a,a.state,null),ia(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Zr(e,t){try{var r="",s=t;do r+=D0(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ui(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function el(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ag=typeof WeakMap=="function"?WeakMap:Map;function Wu(e,t,r){r=Et(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ua||(ua=!0,cl=s),el(e,t)},r}function Vu(e,t,r){r=Et(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){el(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){el(e,t),typeof s!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function pd(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new ag;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=vg.bind(null,e,t,r),t.then(e,e))}function xd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yd(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Et(-1,1),t.tag=2,Qt(r,t,1))),r.lanes|=1),e)}var ig=Rt.ReactCurrentOwner,Ue=!1;function Oe(e,t,r,s){t.child=e===null?ku(t,null,r,s):Yr(t,e.child,r,s)}function vd(e,t,r,s,a){r=r.render;var i=t.ref;return Vr(t,a),s=ro(e,t,r,s,i,a),r=so(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ot(e,t,a)):(de&&r&&Bl(t),t.flags|=1,Oe(e,t,s,a),t.child)}function wd(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!go(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Gu(e,t,i,s,a)):(e=Bn(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Fs,r(l,s)&&e.ref===t.ref)return Ot(e,t,a)}return t.flags|=1,e=Yt(i,s),e.ref=t.ref,e.return=t,t.child=e}function Gu(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(Fs(i,s)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Ue=!0);else return t.lanes=e.lanes,Ot(e,t,a)}return tl(e,t,r,s,a)}function Qu(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Fr,Be),Be|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(Fr,Be),Be|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,ie(Fr,Be),Be|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,ie(Fr,Be),Be|=s;return Oe(e,t,a,r),t.child}function Ku(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function tl(e,t,r,s,a){var i=qe(r)?mr:De.current;return i=Kr(t,i),Vr(t,a),r=ro(e,t,r,s,i,a),s=so(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ot(e,t,a)):(de&&s&&Bl(t),t.flags|=1,Oe(e,t,r,a),t.child)}function kd(e,t,r,s,a){if(qe(r)){var i=!0;ta(t)}else i=!1;if(Vr(t,a),t.stateNode===null)Fn(e,t),Bu(t,r,s),Zi(t,r,s,a),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var d=l.context,c=r.contextType;typeof c=="object"&&c!==null?c=st(c):(c=qe(r)?mr:De.current,c=Kr(t,c));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||d!==c)&&md(t,l,s,c),It=!1;var p=t.memoizedState;l.state=p,ia(t,s,l,a),d=t.memoizedState,o!==s||p!==d||Fe.current||It?(typeof u=="function"&&(Xi(t,r,u,s),d=t.memoizedState),(o=It||gd(t,r,o,s,p,d,c))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),l.props=s,l.state=d,l.context=c,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,ju(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:lt(t.type,o),l.props=c,f=t.pendingProps,p=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=st(d):(d=qe(r)?mr:De.current,d=Kr(t,d));var y=r.getDerivedStateFromProps;(u=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||p!==d)&&md(t,l,s,d),It=!1,p=t.memoizedState,l.state=p,ia(t,s,l,a);var v=t.memoizedState;o!==f||p!==v||Fe.current||It?(typeof y=="function"&&(Xi(t,r,y,s),v=t.memoizedState),(c=It||gd(t,r,c,s,p,v,d)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,v,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,v,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),l.props=s,l.state=v,l.context=d,s=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return rl(e,t,r,s,i,a)}function rl(e,t,r,s,a,i){Ku(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&id(t,r,!1),Ot(e,t,i);s=t.stateNode,ig.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Yr(t,e.child,null,i),t.child=Yr(t,null,o,i)):Oe(e,t,o,i),t.memoizedState=s.state,a&&id(t,r,!0),t.child}function Ju(e){var t=e.stateNode;t.pendingContext?ad(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ad(e,t.context,!1),Xl(e,t.containerInfo)}function bd(e,t,r,s,a){return Jr(),Vl(a),t.flags|=256,Oe(e,t,r,s),t.child}var sl={dehydrated:null,treeContext:null,retryLane:0};function nl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Yu(e,t,r){var s=t.pendingProps,a=ce.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ie(ce,a&1),e===null)return Ji(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Ta(l,s,0,null),e=gr(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=nl(r),t.memoizedState=sl,e):io(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return lg(e,t,l,s,o,a,r);if(i){i=s.fallback,l=t.mode,a=e.child,o=a.sibling;var d={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=d,t.deletions=null):(s=Yt(a,d),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Yt(o,i):(i=gr(i,l,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?nl(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=sl,s}return i=e.child,e=i.sibling,s=Yt(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function io(e,t){return t=Ta({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jn(e,t,r,s){return s!==null&&Vl(s),Yr(t,e.child,null,r),e=io(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lg(e,t,r,s,a,i,l){if(r)return t.flags&256?(t.flags&=-257,s=ui(Error(A(422))),jn(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Ta({mode:"visible",children:s.children},a,0,null),i=gr(i,a,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Yr(t,e.child,null,l),t.child.memoizedState=nl(l),t.memoizedState=sl,i);if(!(t.mode&1))return jn(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(A(419)),s=ui(i,s,void 0),jn(e,t,l,s)}if(o=(l&e.childLanes)!==0,Ue||o){if(s=be,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Dt(e,a),ft(s,e,a,-1))}return fo(),s=ui(Error(A(421))),jn(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=wg.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,We=Gt(a.nextSibling),Ge=t,de=!0,ct=null,e!==null&&(Xe[Ze++]=St,Xe[Ze++]=Ct,Xe[Ze++]=pr,St=e.id,Ct=e.overflow,pr=t),t=io(t,s.children),t.flags|=4096,t)}function jd(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Yi(e.return,t,r)}function hi(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function Xu(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(Oe(e,t,s.children,r),s=ce.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jd(e,r,t);else if(e.tag===19)jd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ie(ce,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&la(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),hi(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&la(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}hi(t,!0,r,null,i);break;case"together":hi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ot(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),yr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,r=Yt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Yt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function og(e,t,r){switch(t.tag){case 3:Ju(t),Jr();break;case 5:Nu(t);break;case 1:qe(t.type)&&ta(t);break;case 4:Xl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ie(na,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ie(ce,ce.current&1),t.flags|=128,null):r&t.child.childLanes?Yu(e,t,r):(ie(ce,ce.current&1),e=Ot(e,t,r),e!==null?e.sibling:null);ie(ce,ce.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Xu(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ie(ce,ce.current),s)break;return null;case 22:case 23:return t.lanes=0,Qu(e,t,r)}return Ot(e,t,r)}var Zu,al,eh,th;Zu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};al=function(){};eh=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,hr(vt.current);var i=null;switch(r){case"input":a=Ci(e,a),s=Ci(e,s),i=[];break;case"select":a=he({},a,{value:void 0}),s=he({},s,{value:void 0}),i=[];break;case"textarea":a=Pi(e,a),s=Pi(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Zn)}Oi(r,s);var l;r=null;for(c in a)if(!s.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var o=a[c];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(As.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var d=s[c];if(o=a!=null?a[c]:void 0,s.hasOwnProperty(c)&&d!==o&&(d!=null||o!=null))if(c==="style")if(o){for(l in o)!o.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&o[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(i||(i=[]),i.push(c,r)),r=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(As.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&le("scroll",e),i||o===d||(i=[])):(i=i||[]).push(c,d))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};th=function(e,t,r,s){r!==s&&(t.flags|=4)};function fs(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ee(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function dg(e,t,r){var s=t.pendingProps;switch(Wl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(t),null;case 1:return qe(t.type)&&ea(),Ee(t),null;case 3:return s=t.stateNode,Xr(),oe(Fe),oe(De),eo(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(kn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ct!==null&&(fl(ct),ct=null))),al(e,t),Ee(t),null;case 5:Zl(t);var a=hr(Vs.current);if(r=t.type,e!==null&&t.stateNode!=null)eh(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(A(166));return Ee(t),null}if(e=hr(vt.current),kn(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[xt]=t,s[Bs]=i,e=(t.mode&1)!==0,r){case"dialog":le("cancel",s),le("close",s);break;case"iframe":case"object":case"embed":le("load",s);break;case"video":case"audio":for(a=0;a<vs.length;a++)le(vs[a],s);break;case"source":le("error",s);break;case"img":case"image":case"link":le("error",s),le("load",s);break;case"details":le("toggle",s);break;case"input":Oo(s,i),le("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},le("invalid",s);break;case"textarea":Ao(s,i),le("invalid",s)}Oi(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&wn(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&wn(s.textContent,o,e),a=["children",""+o]):As.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&le("scroll",s)}switch(r){case"input":hn(s),Ro(s,i,!0);break;case"textarea":hn(s),Lo(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Zn)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[xt]=t,e[Bs]=s,Zu(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ri(r,s),r){case"dialog":le("cancel",e),le("close",e),a=s;break;case"iframe":case"object":case"embed":le("load",e),a=s;break;case"video":case"audio":for(a=0;a<vs.length;a++)le(vs[a],e);a=s;break;case"source":le("error",e),a=s;break;case"img":case"image":case"link":le("error",e),le("load",e),a=s;break;case"details":le("toggle",e),a=s;break;case"input":Oo(e,s),a=Ci(e,s),le("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=he({},s,{value:void 0}),le("invalid",e);break;case"textarea":Ao(e,s),a=Pi(e,s),le("invalid",e);break;default:a=s}Oi(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var d=o[i];i==="style"?Oc(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Pc(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Ls(e,d):typeof d=="number"&&Ls(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(As.hasOwnProperty(i)?d!=null&&i==="onScroll"&&le("scroll",e):d!=null&&Pl(e,i,d,l))}switch(r){case"input":hn(e),Ro(e,s,!1);break;case"textarea":hn(e),Lo(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Zt(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?qr(e,!!s.multiple,i,!1):s.defaultValue!=null&&qr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ee(t),null;case 6:if(e&&t.stateNode!=null)th(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(A(166));if(r=hr(Vs.current),hr(vt.current),kn(t)){if(s=t.stateNode,r=t.memoizedProps,s[xt]=t,(i=s.nodeValue!==r)&&(e=Ge,e!==null))switch(e.tag){case 3:wn(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wn(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[xt]=t,t.stateNode=s}return Ee(t),null;case 13:if(oe(ce),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&We!==null&&t.mode&1&&!(t.flags&128))vu(),Jr(),t.flags|=98560,i=!1;else if(i=kn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[xt]=t}else Jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ee(t),i=!1}else ct!==null&&(fl(ct),ct=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||ce.current&1?ve===0&&(ve=3):fo())),t.updateQueue!==null&&(t.flags|=4),Ee(t),null);case 4:return Xr(),al(e,t),e===null&&qs(t.stateNode.containerInfo),Ee(t),null;case 10:return Kl(t.type._context),Ee(t),null;case 17:return qe(t.type)&&ea(),Ee(t),null;case 19:if(oe(ce),i=t.memoizedState,i===null)return Ee(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)fs(i,!1);else{if(ve!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=la(e),l!==null){for(t.flags|=128,fs(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ie(ce,ce.current&1|2),t.child}e=e.sibling}i.tail!==null&&me()>es&&(t.flags|=128,s=!0,fs(i,!1),t.lanes=4194304)}else{if(!s)if(e=la(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),fs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!de)return Ee(t),null}else 2*me()-i.renderingStartTime>es&&r!==1073741824&&(t.flags|=128,s=!0,fs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=me(),t.sibling=null,r=ce.current,ie(ce,s?r&1|2:r&1),t):(Ee(t),null);case 22:case 23:return ho(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Be&1073741824&&(Ee(t),t.subtreeFlags&6&&(t.flags|=8192)):Ee(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function cg(e,t){switch(Wl(t),t.tag){case 1:return qe(t.type)&&ea(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xr(),oe(Fe),oe(De),eo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zl(t),null;case 13:if(oe(ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(ce),null;case 4:return Xr(),null;case 10:return Kl(t.type._context),null;case 22:case 23:return ho(),null;case 24:return null;default:return null}}var Nn=!1,Pe=!1,ug=typeof WeakSet=="function"?WeakSet:Set,M=null;function Ur(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ge(e,t,s)}else r.current=null}function il(e,t,r){try{r()}catch(s){ge(e,t,s)}}var Nd=!1;function hg(e,t){if(Hi=Jn,e=iu(),Hl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,d=-1,c=0,u=0,f=e,p=null;t:for(;;){for(var y;f!==r||a!==0&&f.nodeType!==3||(o=l+a),f!==i||s!==0&&f.nodeType!==3||(d=l+s),f.nodeType===3&&(l+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===e)break t;if(p===r&&++c===a&&(o=l),p===i&&++u===s&&(d=l),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}r=o===-1||d===-1?null:{start:o,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bi={focusedElem:e,selectionRange:r},Jn=!1,M=t;M!==null;)if(t=M,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,M=e;else for(;M!==null;){t=M;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,C=v.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?x:lt(t.type,x),C);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){ge(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,M=e;break}M=t.return}return v=Nd,Nd=!1,v}function Cs(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&il(t,r,i)}a=a.next}while(a!==s)}}function Ca(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function ll(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rh(e){var t=e.alternate;t!==null&&(e.alternate=null,rh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xt],delete t[Bs],delete t[Gi],delete t[Qf],delete t[Kf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sh(e){return e.tag===5||e.tag===3||e.tag===4}function _d(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ol(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zn));else if(s!==4&&(e=e.child,e!==null))for(ol(e,t,r),e=e.sibling;e!==null;)ol(e,t,r),e=e.sibling}function dl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(dl(e,t,r),e=e.sibling;e!==null;)dl(e,t,r),e=e.sibling}var Ne=null,ot=!1;function At(e,t,r){for(r=r.child;r!==null;)nh(e,t,r),r=r.sibling}function nh(e,t,r){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(va,r)}catch{}switch(r.tag){case 5:Pe||Ur(r,t);case 6:var s=Ne,a=ot;Ne=null,At(e,t,r),Ne=s,ot=a,Ne!==null&&(ot?(e=Ne,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ne.removeChild(r.stateNode));break;case 18:Ne!==null&&(ot?(e=Ne,r=r.stateNode,e.nodeType===8?ai(e.parentNode,r):e.nodeType===1&&ai(e,r),zs(e)):ai(Ne,r.stateNode));break;case 4:s=Ne,a=ot,Ne=r.stateNode.containerInfo,ot=!0,At(e,t,r),Ne=s,ot=a;break;case 0:case 11:case 14:case 15:if(!Pe&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&il(r,t,l),a=a.next}while(a!==s)}At(e,t,r);break;case 1:if(!Pe&&(Ur(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){ge(r,t,o)}At(e,t,r);break;case 21:At(e,t,r);break;case 22:r.mode&1?(Pe=(s=Pe)||r.memoizedState!==null,At(e,t,r),Pe=s):At(e,t,r);break;default:At(e,t,r)}}function Sd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ug),t.forEach(function(s){var a=kg.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function at(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ne=o.stateNode,ot=!1;break e;case 3:Ne=o.stateNode.containerInfo,ot=!0;break e;case 4:Ne=o.stateNode.containerInfo,ot=!0;break e}o=o.return}if(Ne===null)throw Error(A(160));nh(i,l,a),Ne=null,ot=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(c){ge(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ah(t,e),t=t.sibling}function ah(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(at(t,e),mt(e),s&4){try{Cs(3,e,e.return),Ca(3,e)}catch(x){ge(e,e.return,x)}try{Cs(5,e,e.return)}catch(x){ge(e,e.return,x)}}break;case 1:at(t,e),mt(e),s&512&&r!==null&&Ur(r,r.return);break;case 5:if(at(t,e),mt(e),s&512&&r!==null&&Ur(r,r.return),e.flags&32){var a=e.stateNode;try{Ls(a,"")}catch(x){ge(e,e.return,x)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Cc(a,i),Ri(o,l);var c=Ri(o,i);for(l=0;l<d.length;l+=2){var u=d[l],f=d[l+1];u==="style"?Oc(a,f):u==="dangerouslySetInnerHTML"?Pc(a,f):u==="children"?Ls(a,f):Pl(a,u,f,c)}switch(o){case"input":Ei(a,i);break;case"textarea":Ec(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?qr(a,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?qr(a,!!i.multiple,i.defaultValue,!0):qr(a,!!i.multiple,i.multiple?[]:"",!1))}a[Bs]=i}catch(x){ge(e,e.return,x)}}break;case 6:if(at(t,e),mt(e),s&4){if(e.stateNode===null)throw Error(A(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){ge(e,e.return,x)}}break;case 3:if(at(t,e),mt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{zs(t.containerInfo)}catch(x){ge(e,e.return,x)}break;case 4:at(t,e),mt(e);break;case 13:at(t,e),mt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(co=me())),s&4&&Sd(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Pe=(c=Pe)||u,at(t,e),Pe=c):at(t,e),mt(e),s&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(M=e,u=e.child;u!==null;){for(f=M=u;M!==null;){switch(p=M,y=p.child,p.tag){case 0:case 11:case 14:case 15:Cs(4,p,p.return);break;case 1:Ur(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){ge(s,r,x)}}break;case 5:Ur(p,p.return);break;case 22:if(p.memoizedState!==null){Ed(f);continue}}y!==null?(y.return=p,M=y):Ed(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,d=f.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=Dc("display",l))}catch(x){ge(e,e.return,x)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){ge(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:at(t,e),mt(e),s&4&&Sd(e);break;case 21:break;default:at(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(sh(r)){var s=r;break e}r=r.return}throw Error(A(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Ls(a,""),s.flags&=-33);var i=_d(e);dl(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=_d(e);ol(e,o,l);break;default:throw Error(A(161))}}catch(d){ge(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fg(e,t,r){M=e,ih(e)}function ih(e,t,r){for(var s=(e.mode&1)!==0;M!==null;){var a=M,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Nn;if(!l){var o=a.alternate,d=o!==null&&o.memoizedState!==null||Pe;o=Nn;var c=Pe;if(Nn=l,(Pe=d)&&!c)for(M=a;M!==null;)l=M,d=l.child,l.tag===22&&l.memoizedState!==null?Td(a):d!==null?(d.return=l,M=d):Td(a);for(;i!==null;)M=i,ih(i),i=i.sibling;M=a,Nn=o,Pe=c}Cd(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,M=i):Cd(e)}}function Cd(e){for(;M!==null;){var t=M;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pe||Ca(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Pe)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:lt(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ud(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ud(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&zs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Pe||t.flags&512&&ll(t)}catch(p){ge(t,t.return,p)}}if(t===e){M=null;break}if(r=t.sibling,r!==null){r.return=t.return,M=r;break}M=t.return}}function Ed(e){for(;M!==null;){var t=M;if(t===e){M=null;break}var r=t.sibling;if(r!==null){r.return=t.return,M=r;break}M=t.return}}function Td(e){for(;M!==null;){var t=M;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ca(4,t)}catch(d){ge(t,r,d)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(d){ge(t,a,d)}}var i=t.return;try{ll(t)}catch(d){ge(t,i,d)}break;case 5:var l=t.return;try{ll(t)}catch(d){ge(t,l,d)}}}catch(d){ge(t,t.return,d)}if(t===e){M=null;break}var o=t.sibling;if(o!==null){o.return=t.return,M=o;break}M=t.return}}var gg=Math.ceil,ca=Rt.ReactCurrentDispatcher,lo=Rt.ReactCurrentOwner,tt=Rt.ReactCurrentBatchConfig,te=0,be=null,pe=null,_e=0,Be=0,Fr=rr(0),ve=0,Js=null,yr=0,Ea=0,oo=0,Es=null,Me=null,co=0,es=1/0,jt=null,ua=!1,cl=null,Kt=null,_n=!1,Ht=null,ha=0,Ts=0,ul=null,qn=-1,Hn=0;function Ae(){return te&6?me():qn!==-1?qn:qn=me()}function Jt(e){return e.mode&1?te&2&&_e!==0?_e&-_e:Yf.transition!==null?(Hn===0&&(Hn=Bc()),Hn):(e=se,e!==0||(e=window.event,e=e===void 0?16:Yc(e.type)),e):1}function ft(e,t,r,s){if(50<Ts)throw Ts=0,ul=null,Error(A(185));en(e,r,s),(!(te&2)||e!==be)&&(e===be&&(!(te&2)&&(Ea|=r),ve===4&&Ut(e,_e)),He(e,s),r===1&&te===0&&!(t.mode&1)&&(es=me()+500,Na&&sr()))}function He(e,t){var r=e.callbackNode;J0(e,t);var s=Kn(e,e===be?_e:0);if(s===0)r!==null&&Mo(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Mo(r),t===1)e.tag===0?Jf(Pd.bind(null,e)):pu(Pd.bind(null,e)),Vf(function(){!(te&6)&&sr()}),r=null;else{switch(Wc(s)){case 1:r=Ll;break;case 4:r=qc;break;case 16:r=Qn;break;case 536870912:r=Hc;break;default:r=Qn}r=gh(r,lh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function lh(e,t){if(qn=-1,Hn=0,te&6)throw Error(A(327));var r=e.callbackNode;if(Gr()&&e.callbackNode!==r)return null;var s=Kn(e,e===be?_e:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=fa(e,s);else{t=s;var a=te;te|=2;var i=dh();(be!==e||_e!==t)&&(jt=null,es=me()+500,fr(e,t));do try{xg();break}catch(o){oh(e,o)}while(!0);Ql(),ca.current=i,te=a,pe!==null?t=0:(be=null,_e=0,t=ve)}if(t!==0){if(t===2&&(a=Mi(e),a!==0&&(s=a,t=hl(e,a))),t===1)throw r=Js,fr(e,0),Ut(e,s),He(e,me()),r;if(t===6)Ut(e,s);else{if(a=e.current.alternate,!(s&30)&&!mg(a)&&(t=fa(e,s),t===2&&(i=Mi(e),i!==0&&(s=i,t=hl(e,i))),t===1))throw r=Js,fr(e,0),Ut(e,s),He(e,me()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(A(345));case 2:lr(e,Me,jt);break;case 3:if(Ut(e,s),(s&130023424)===s&&(t=co+500-me(),10<t)){if(Kn(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Ae(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Vi(lr.bind(null,e,Me,jt),t);break}lr(e,Me,jt);break;case 4:if(Ut(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-ht(s);i=1<<l,l=t[l],l>a&&(a=l),s&=~i}if(s=a,s=me()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*gg(s/1960))-s,10<s){e.timeoutHandle=Vi(lr.bind(null,e,Me,jt),s);break}lr(e,Me,jt);break;case 5:lr(e,Me,jt);break;default:throw Error(A(329))}}}return He(e,me()),e.callbackNode===r?lh.bind(null,e):null}function hl(e,t){var r=Es;return e.current.memoizedState.isDehydrated&&(fr(e,t).flags|=256),e=fa(e,t),e!==2&&(t=Me,Me=r,t!==null&&fl(t)),e}function fl(e){Me===null?Me=e:Me.push.apply(Me,e)}function mg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!gt(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ut(e,t){for(t&=~oo,t&=~Ea,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ht(t),s=1<<r;e[r]=-1,t&=~s}}function Pd(e){if(te&6)throw Error(A(327));Gr();var t=Kn(e,0);if(!(t&1))return He(e,me()),null;var r=fa(e,t);if(e.tag!==0&&r===2){var s=Mi(e);s!==0&&(t=s,r=hl(e,s))}if(r===1)throw r=Js,fr(e,0),Ut(e,t),He(e,me()),r;if(r===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,Me,jt),He(e,me()),null}function uo(e,t){var r=te;te|=1;try{return e(t)}finally{te=r,te===0&&(es=me()+500,Na&&sr())}}function vr(e){Ht!==null&&Ht.tag===0&&!(te&6)&&Gr();var t=te;te|=1;var r=tt.transition,s=se;try{if(tt.transition=null,se=1,e)return e()}finally{se=s,tt.transition=r,te=t,!(te&6)&&sr()}}function ho(){Be=Fr.current,oe(Fr)}function fr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Wf(r)),pe!==null)for(r=pe.return;r!==null;){var s=r;switch(Wl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ea();break;case 3:Xr(),oe(Fe),oe(De),eo();break;case 5:Zl(s);break;case 4:Xr();break;case 13:oe(ce);break;case 19:oe(ce);break;case 10:Kl(s.type._context);break;case 22:case 23:ho()}r=r.return}if(be=e,pe=e=Yt(e.current,null),_e=Be=t,ve=0,Js=null,oo=Ea=yr=0,Me=Es=null,ur!==null){for(t=0;t<ur.length;t++)if(r=ur[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}r.pending=s}ur=null}return e}function oh(e,t){do{var r=pe;try{if(Ql(),zn.current=da,oa){for(var s=ue.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}oa=!1}if(xr=0,ke=xe=ue=null,Ss=!1,Gs=0,lo.current=null,r===null||r.return===null){ve=1,Js=t,pe=null;break}e:{var i=e,l=r.return,o=r,d=t;if(t=_e,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,u=o,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=xd(l);if(y!==null){y.flags&=-257,yd(y,l,o,i,t),y.mode&1&&pd(i,c,t),t=y,d=c;var v=t.updateQueue;if(v===null){var x=new Set;x.add(d),t.updateQueue=x}else v.add(d);break e}else{if(!(t&1)){pd(i,c,t),fo();break e}d=Error(A(426))}}else if(de&&o.mode&1){var C=xd(l);if(C!==null){!(C.flags&65536)&&(C.flags|=256),yd(C,l,o,i,t),Vl(Zr(d,o));break e}}i=d=Zr(d,o),ve!==4&&(ve=2),Es===null?Es=[i]:Es.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Wu(i,d,t);cd(i,m);break e;case 1:o=d;var g=i.type,h=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Kt===null||!Kt.has(h)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Vu(i,o,t);cd(i,w);break e}}i=i.return}while(i!==null)}uh(r)}catch(k){t=k,pe===r&&r!==null&&(pe=r=r.return);continue}break}while(!0)}function dh(){var e=ca.current;return ca.current=da,e===null?da:e}function fo(){(ve===0||ve===3||ve===2)&&(ve=4),be===null||!(yr&268435455)&&!(Ea&268435455)||Ut(be,_e)}function fa(e,t){var r=te;te|=2;var s=dh();(be!==e||_e!==t)&&(jt=null,fr(e,t));do try{pg();break}catch(a){oh(e,a)}while(!0);if(Ql(),te=r,ca.current=s,pe!==null)throw Error(A(261));return be=null,_e=0,ve}function pg(){for(;pe!==null;)ch(pe)}function xg(){for(;pe!==null&&!F0();)ch(pe)}function ch(e){var t=fh(e.alternate,e,Be);e.memoizedProps=e.pendingProps,t===null?uh(e):pe=t,lo.current=null}function uh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=cg(r,t),r!==null){r.flags&=32767,pe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ve=6,pe=null;return}}else if(r=dg(r,t,Be),r!==null){pe=r;return}if(t=t.sibling,t!==null){pe=t;return}pe=t=e}while(t!==null);ve===0&&(ve=5)}function lr(e,t,r){var s=se,a=tt.transition;try{tt.transition=null,se=1,yg(e,t,r,s)}finally{tt.transition=a,se=s}return null}function yg(e,t,r,s){do Gr();while(Ht!==null);if(te&6)throw Error(A(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Y0(e,i),e===be&&(pe=be=null,_e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_n||(_n=!0,gh(Qn,function(){return Gr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=tt.transition,tt.transition=null;var l=se;se=1;var o=te;te|=4,lo.current=null,hg(e,r),ah(r,e),Mf(Bi),Jn=!!Hi,Bi=Hi=null,e.current=r,fg(r),q0(),te=o,se=l,tt.transition=i}else e.current=r;if(_n&&(_n=!1,Ht=e,ha=a),i=e.pendingLanes,i===0&&(Kt=null),W0(r.stateNode),He(e,me()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(ua)throw ua=!1,e=cl,cl=null,e;return ha&1&&e.tag!==0&&Gr(),i=e.pendingLanes,i&1?e===ul?Ts++:(Ts=0,ul=e):Ts=0,sr(),null}function Gr(){if(Ht!==null){var e=Wc(ha),t=tt.transition,r=se;try{if(tt.transition=null,se=16>e?16:e,Ht===null)var s=!1;else{if(e=Ht,Ht=null,ha=0,te&6)throw Error(A(331));var a=te;for(te|=4,M=e.current;M!==null;){var i=M,l=i.child;if(M.flags&16){var o=i.deletions;if(o!==null){for(var d=0;d<o.length;d++){var c=o[d];for(M=c;M!==null;){var u=M;switch(u.tag){case 0:case 11:case 15:Cs(8,u,i)}var f=u.child;if(f!==null)f.return=u,M=f;else for(;M!==null;){u=M;var p=u.sibling,y=u.return;if(rh(u),u===c){M=null;break}if(p!==null){p.return=y,M=p;break}M=y}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}M=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,M=l;else e:for(;M!==null;){if(i=M,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cs(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,M=m;break e}M=i.return}}var g=e.current;for(M=g;M!==null;){l=M;var h=l.child;if(l.subtreeFlags&2064&&h!==null)h.return=l,M=h;else e:for(l=g;M!==null;){if(o=M,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ca(9,o)}}catch(k){ge(o,o.return,k)}if(o===l){M=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,M=w;break e}M=o.return}}if(te=a,sr(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(va,e)}catch{}s=!0}return s}finally{se=r,tt.transition=t}}return!1}function Dd(e,t,r){t=Zr(r,t),t=Wu(e,t,1),e=Qt(e,t,1),t=Ae(),e!==null&&(en(e,1,t),He(e,t))}function ge(e,t,r){if(e.tag===3)Dd(e,e,r);else for(;t!==null;){if(t.tag===3){Dd(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Kt===null||!Kt.has(s))){e=Zr(r,e),e=Vu(t,e,1),t=Qt(t,e,1),e=Ae(),t!==null&&(en(t,1,e),He(t,e));break}}t=t.return}}function vg(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ae(),e.pingedLanes|=e.suspendedLanes&r,be===e&&(_e&r)===r&&(ve===4||ve===3&&(_e&130023424)===_e&&500>me()-co?fr(e,0):oo|=r),He(e,t)}function hh(e,t){t===0&&(e.mode&1?(t=mn,mn<<=1,!(mn&130023424)&&(mn=4194304)):t=1);var r=Ae();e=Dt(e,t),e!==null&&(en(e,t,r),He(e,r))}function wg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),hh(e,r)}function kg(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(A(314))}s!==null&&s.delete(t),hh(e,r)}var fh;fh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fe.current)Ue=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ue=!1,og(e,t,r);Ue=!!(e.flags&131072)}else Ue=!1,de&&t.flags&1048576&&xu(t,sa,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Fn(e,t),e=t.pendingProps;var a=Kr(t,De.current);Vr(t,r),a=ro(null,t,s,e,a,r);var i=so();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qe(s)?(i=!0,ta(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Yl(t),a.updater=Sa,t.stateNode=a,a._reactInternals=t,Zi(t,s,e,r),t=rl(null,t,s,!0,i,r)):(t.tag=0,de&&i&&Bl(t),Oe(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Fn(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=jg(s),e=lt(s,e),a){case 0:t=tl(null,t,s,e,r);break e;case 1:t=kd(null,t,s,e,r);break e;case 11:t=vd(null,t,s,e,r);break e;case 14:t=wd(null,t,s,lt(s.type,e),r);break e}throw Error(A(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:lt(s,a),tl(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:lt(s,a),kd(e,t,s,a,r);case 3:e:{if(Ju(t),e===null)throw Error(A(387));s=t.pendingProps,i=t.memoizedState,a=i.element,ju(e,t),ia(t,s,null,r);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Zr(Error(A(423)),t),t=bd(e,t,s,r,a);break e}else if(s!==a){a=Zr(Error(A(424)),t),t=bd(e,t,s,r,a);break e}else for(We=Gt(t.stateNode.containerInfo.firstChild),Ge=t,de=!0,ct=null,r=ku(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Jr(),s===a){t=Ot(e,t,r);break e}Oe(e,t,s,r)}t=t.child}return t;case 5:return Nu(t),e===null&&Ji(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Wi(s,a)?l=null:i!==null&&Wi(s,i)&&(t.flags|=32),Ku(e,t),Oe(e,t,l,r),t.child;case 6:return e===null&&Ji(t),null;case 13:return Yu(e,t,r);case 4:return Xl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Yr(t,null,s,r):Oe(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:lt(s,a),vd(e,t,s,a,r);case 7:return Oe(e,t,t.pendingProps,r),t.child;case 8:return Oe(e,t,t.pendingProps.children,r),t.child;case 12:return Oe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ie(na,s._currentValue),s._currentValue=l,i!==null)if(gt(i.value,l)){if(i.children===a.children&&!Fe.current){t=Ot(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var d=o.firstContext;d!==null;){if(d.context===s){if(i.tag===1){d=Et(-1,r&-r),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Yi(i.return,r,t),o.lanes|=r;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(A(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Yi(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Oe(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Vr(t,r),a=st(a),s=s(a),t.flags|=1,Oe(e,t,s,r),t.child;case 14:return s=t.type,a=lt(s,t.pendingProps),a=lt(s.type,a),wd(e,t,s,a,r);case 15:return Gu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:lt(s,a),Fn(e,t),t.tag=1,qe(s)?(e=!0,ta(t)):e=!1,Vr(t,r),Bu(t,s,a),Zi(t,s,a,r),rl(null,t,s,!0,e,r);case 19:return Xu(e,t,r);case 22:return Qu(e,t,r)}throw Error(A(156,t.tag))};function gh(e,t){return Fc(e,t)}function bg(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function et(e,t,r,s){return new bg(e,t,r,s)}function go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jg(e){if(typeof e=="function")return go(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ol)return 11;if(e===Rl)return 14}return 2}function Yt(e,t){var r=e.alternate;return r===null?(r=et(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bn(e,t,r,s,a,i){var l=2;if(s=e,typeof e=="function")go(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Dr:return gr(r.children,a,i,t);case Dl:l=8,a|=8;break;case ji:return e=et(12,r,t,a|2),e.elementType=ji,e.lanes=i,e;case Ni:return e=et(13,r,t,a),e.elementType=Ni,e.lanes=i,e;case _i:return e=et(19,r,t,a),e.elementType=_i,e.lanes=i,e;case Nc:return Ta(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bc:l=10;break e;case jc:l=9;break e;case Ol:l=11;break e;case Rl:l=14;break e;case $t:l=16,s=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=et(l,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function gr(e,t,r,s){return e=et(7,e,s,t),e.lanes=r,e}function Ta(e,t,r,s){return e=et(22,e,s,t),e.elementType=Nc,e.lanes=r,e.stateNode={isHidden:!1},e}function fi(e,t,r){return e=et(6,e,null,t),e.lanes=r,e}function gi(e,t,r){return t=et(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ng(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qa(0),this.expirationTimes=Qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qa(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function mo(e,t,r,s,a,i,l,o,d){return e=new Ng(e,t,r,o,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=et(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yl(i),e}function _g(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function mh(e){if(!e)return er;e=e._reactInternals;e:{if(br(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var r=e.type;if(qe(r))return mu(e,r,t)}return t}function ph(e,t,r,s,a,i,l,o,d){return e=mo(r,s,!0,e,a,i,l,o,d),e.context=mh(null),r=e.current,s=Ae(),a=Jt(r),i=Et(s,a),i.callback=t??null,Qt(r,i,a),e.current.lanes=a,en(e,a,s),He(e,s),e}function Pa(e,t,r,s){var a=t.current,i=Ae(),l=Jt(a);return r=mh(r),t.context===null?t.context=r:t.pendingContext=r,t=Et(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Qt(a,t,l),e!==null&&(ft(e,a,l,i),Mn(e,a,l)),l}function ga(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Od(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function po(e,t){Od(e,t),(e=e.alternate)&&Od(e,t)}function Sg(){return null}var xh=typeof reportError=="function"?reportError:function(e){console.error(e)};function xo(e){this._internalRoot=e}Da.prototype.render=xo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Pa(e,t,null,null)};Da.prototype.unmount=xo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vr(function(){Pa(null,e,null,null)}),t[Pt]=null}};function Da(e){this._internalRoot=e}Da.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zt.length&&t!==0&&t<zt[r].priority;r++);zt.splice(r,0,e),r===0&&Jc(e)}};function yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Oa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rd(){}function Cg(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var c=ga(l);i.call(c)}}var l=ph(t,s,e,0,null,!1,!1,"",Rd);return e._reactRootContainer=l,e[Pt]=l.current,qs(e.nodeType===8?e.parentNode:e),vr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var c=ga(d);o.call(c)}}var d=mo(e,0,!1,null,null,!1,!1,"",Rd);return e._reactRootContainer=d,e[Pt]=d.current,qs(e.nodeType===8?e.parentNode:e),vr(function(){Pa(t,d,r,s)}),d}function Ra(e,t,r,s,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var d=ga(l);o.call(d)}}Pa(t,l,e,a)}else l=Cg(r,t,e,a,s);return ga(l)}Vc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ys(t.pendingLanes);r!==0&&($l(t,r|1),He(t,me()),!(te&6)&&(es=me()+500,sr()))}break;case 13:vr(function(){var s=Dt(e,1);if(s!==null){var a=Ae();ft(s,e,1,a)}}),po(e,1)}};Il=function(e){if(e.tag===13){var t=Dt(e,134217728);if(t!==null){var r=Ae();ft(t,e,134217728,r)}po(e,134217728)}};Gc=function(e){if(e.tag===13){var t=Jt(e),r=Dt(e,t);if(r!==null){var s=Ae();ft(r,e,t,s)}po(e,t)}};Qc=function(){return se};Kc=function(e,t){var r=se;try{return se=e,t()}finally{se=r}};Li=function(e,t,r){switch(t){case"input":if(Ei(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=ja(s);if(!a)throw Error(A(90));Sc(s),Ei(s,a)}}}break;case"textarea":Ec(e,r);break;case"select":t=r.value,t!=null&&qr(e,!!r.multiple,t,!1)}};Lc=uo;$c=vr;var Eg={usingClientEntryPoint:!1,Events:[rn,Lr,ja,Rc,Ac,uo]},gs={findFiberByHostInstance:cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tg={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zc(e),e===null?null:e.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||Sg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sn.isDisabled&&Sn.supportsFiber)try{va=Sn.inject(Tg),yt=Sn}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eg;Ke.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yo(t))throw Error(A(200));return _g(e,t,null,r)};Ke.createRoot=function(e,t){if(!yo(e))throw Error(A(299));var r=!1,s="",a=xh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=mo(e,1,!1,null,null,r,!1,s,a),e[Pt]=t.current,qs(e.nodeType===8?e.parentNode:e),new xo(t)};Ke.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=zc(t),e=e===null?null:e.stateNode,e};Ke.flushSync=function(e){return vr(e)};Ke.hydrate=function(e,t,r){if(!Oa(t))throw Error(A(200));return Ra(null,e,t,!0,r)};Ke.hydrateRoot=function(e,t,r){if(!yo(e))throw Error(A(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",l=xh;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=ph(t,null,e,1,r??null,a,!1,i,l),e[Pt]=t.current,qs(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Da(t)};Ke.render=function(e,t,r){if(!Oa(t))throw Error(A(200));return Ra(null,e,t,!1,r)};Ke.unmountComponentAtNode=function(e){if(!Oa(e))throw Error(A(40));return e._reactRootContainer?(vr(function(){Ra(null,null,e,!1,function(){e._reactRootContainer=null,e[Pt]=null})}),!0):!1};Ke.unstable_batchedUpdates=uo;Ke.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Oa(r))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Ra(e,t,r,!1,s)};Ke.version="18.3.1-next-f1338f8080-20240426";function yh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yh)}catch(e){console.error(e)}}yh(),yc.exports=Ke;var Pg=yc.exports,vh,Ad=Pg;vh=Ad.createRoot,Ad.hydrateRoot;const Dg="modulepreload",Og=function(e){return"/"+e},Ld={},nn=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(d=>{if(d=Og(d),d in Ld)return;Ld[d]=!0;const c=d.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Dg,c||(f.as="script"),f.crossOrigin="",f.href=d,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},Rg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nn(async()=>{const{default:s}=await Promise.resolve().then(()=>as);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class vo extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class Ag extends vo{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $d extends vo{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Id extends vo{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gl||(gl={}));var Lg=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(f){l(f)}}function d(u){try{c(s.throw(u))}catch(f){l(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};class $g{constructor(t,{headers:r={},customFetch:s,region:a=gl.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Rg(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return Lg(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=r;let o={},{region:d}=r;d||(d=this.region);const c=new URL(`${this.url}/${t}`);d&&d!=="any"&&(o["x-region"]=d,c.searchParams.set("forceFunctionRegion",d));let u;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const f=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:u}).catch(x=>{throw new Ag(x)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new $d(f);if(!f.ok)throw new Id(f);let y=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield f.json():y==="application/octet-stream"?v=yield f.blob():y==="text/event-stream"?v=f:y==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof Id||a instanceof $d?a.context:void 0}}})}}var ze={},wo={},Aa={},an={},La={},$a={},Ig=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ts=Ig();const Mg=ts.fetch,wh=ts.fetch.bind(ts),kh=ts.Headers,zg=ts.Request,Ug=ts.Response,as=Object.freeze(Object.defineProperty({__proto__:null,Headers:kh,Request:zg,Response:Ug,default:wh,fetch:Mg},Symbol.toStringTag,{value:"Module"})),Fg=s0(as);var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});let qg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ia.default=qg;var bh=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($a,"__esModule",{value:!0});const Hg=bh(Fg),Bg=bh(Ia);let Wg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Hg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,d;let c=null,u=null,f=null,p=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=m:u=JSON.parse(m))}const x=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),C=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");x&&C&&C.length>1&&(f=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,p=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(u=[],c=null,p=200,y="OK")}catch{i.status===404&&x===""?(p=204,y="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,p=200,y="OK"),c&&this.shouldThrowOnError)throw new Bg.default(c)}return{error:c,data:u,count:f,status:p,statusText:y}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,d;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};$a.default=Wg;var Vg=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(La,"__esModule",{value:!0});const Gg=Vg($a);let Qg=class extends Gg.default{select(t){let r=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const d=[t?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${c}"; options=${d};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};La.default=Qg;var Kg=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(an,"__esModule",{value:!0});const Jg=Kg(La);let Yg=class extends Jg.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${i}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};an.default=Yg;var Xg=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Aa,"__esModule",{value:!0});const ms=Xg(an);let Zg=class{constructor(t,{headers:r={},schema:s,fetch:a}){this.url=t,this.headers=r,this.schema=s,this.fetch=a}select(t,{head:r=!1,count:s}={}){const a=r?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),s&&(this.headers.Prefer=`count=${s}`),new ms.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:s=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((o,d)=>o.concat(Object.keys(d)),[]);if(l.length>0){const o=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",o.join(","))}}return new ms.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){const l="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const d=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ms.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const s="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new ms.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new ms.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Aa.default=Zg;var Ma={},za={};Object.defineProperty(za,"__esModule",{value:!0});za.version=void 0;za.version="0.0.0-automated";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.DEFAULT_HEADERS=void 0;const em=za;Ma.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${em.version}`};var jh=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wo,"__esModule",{value:!0});const tm=jh(Aa),rm=jh(an),sm=Ma;let nm=class Nh{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},sm.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new tm.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Nh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:i}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let d;s||a?(l=s?"HEAD":"GET",Object.entries(r).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{o.searchParams.append(u,f)})):(l="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new rm.default({method:l,url:o,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};wo.default=nm;var is=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ze,"__esModule",{value:!0});ze.PostgrestError=ze.PostgrestBuilder=ze.PostgrestTransformBuilder=ze.PostgrestFilterBuilder=ze.PostgrestQueryBuilder=ze.PostgrestClient=void 0;const _h=is(wo);ze.PostgrestClient=_h.default;const Sh=is(Aa);ze.PostgrestQueryBuilder=Sh.default;const Ch=is(an);ze.PostgrestFilterBuilder=Ch.default;const Eh=is(La);ze.PostgrestTransformBuilder=Eh.default;const Th=is($a);ze.PostgrestBuilder=Th.default;const Ph=is(Ia);ze.PostgrestError=Ph.default;var am=ze.default={PostgrestClient:_h.default,PostgrestQueryBuilder:Sh.default,PostgrestFilterBuilder:Ch.default,PostgrestTransformBuilder:Eh.default,PostgrestBuilder:Th.default,PostgrestError:Ph.default};const{PostgrestClient:im,PostgrestQueryBuilder:$x,PostgrestFilterBuilder:Ix,PostgrestTransformBuilder:Mx,PostgrestBuilder:zx,PostgrestError:Ux}=am;function lm(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const om=lm(),dm="2.11.15",cm=`realtime-js/${dm}`,um="1.0.0",Dh=1e4,hm=1e3;var Ps;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ps||(Ps={}));var Te;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Te||(Te={}));var dt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(dt||(dt={}));var ml;(function(e){e.websocket="websocket"})(ml||(ml={}));var dr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dr||(dr={}));class fm{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=s.decode(t.slice(l,l+a));l=l+a;const d=s.decode(t.slice(l,l+i));l=l+i;const c=JSON.parse(s.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:d,payload:c}}}class Oh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ae||(ae={}));const Md=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((i,l)=>(i[l]=gm(l,e,t,a),i),{})},gm=(e,t,r,s)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,l=r[e];return i&&!s.includes(i)?Rh(i,l):pl(l)},Rh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ym(t,r)}switch(e){case ae.bool:return mm(t);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return pm(t);case ae.json:case ae.jsonb:return xm(t);case ae.timestamp:return vm(t);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return pl(t);default:return pl(t)}},pl=e=>e,mm=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},pm=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},xm=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ym=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Rh(t,o))}return e},vm=e=>typeof e=="string"?e.replace(" ","T"):e,Ah=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class mi{constructor(t,r,s={},a=Dh){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zd||(zd={}));class Ds{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ds.syncState(this.state,a,i,l),this.pendingDiffs.forEach(d=>{this.state=Ds.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ds.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),l=this.transformState(r),o={},d={};return this.map(i,(c,u)=>{l[c]||(d[c]=u)}),this.map(l,(c,u)=>{const f=i[c];if(f){const p=u.map(C=>C.presence_ref),y=f.map(C=>C.presence_ref),v=u.filter(C=>y.indexOf(C.presence_ref)<0),x=f.filter(C=>p.indexOf(C.presence_ref)<0);v.length>0&&(o[c]=v),x.length>0&&(d[c]=x)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:d},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(o,d)=>{var c;const u=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(d),u.length>0){const f=t[o].map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0);t[o].unshift(...p)}s(o,u,d)}),this.map(l,(o,d)=>{let c=t[o];if(!c)return;const u=d.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),t[o]=c,a(o,c,d),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ud;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ud||(Ud={}));var Fd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Fd||(Fd={}));var Nt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Nt||(Nt={}));class ko{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new mi(this,dt.join,this.params,this.timeout),this.rejoinTimer=new Oh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dt.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Ds(this),this.broadcastEndpointURL=Ah(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:i,presence:l,private:o}}=this.params;this._onError(u=>t==null?void 0:t(Nt.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(Nt.CLOSED));const d={},c={broadcast:i,presence:l,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&a!==void 0?a:[],private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){t==null||t(Nt.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,v=[];for(let x=0;x<y;x++){const C=p[x],{filter:{event:m,schema:g,table:h,filter:w}}=C,k=u&&u[x];if(k&&k.event===m&&k.schema===g&&k.table===h&&k.filter===w)v.push(Object.assign(Object.assign({},C),{id:k.id}));else{this.unsubscribe(),this.state=Te.errored,t==null||t(Nt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Nt.SUBSCRIBED);return}}).receive("error",u=>{this.state=Te.errored,t==null||t(Nt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Nt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this._on(t,r,s)}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Te.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new mi(this,dt.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),l}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new mi(this,t,r,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const l=t.toLocaleLowerCase(),{close:o,error:d,leave:c,join:u}=dt;if(s&&[o,d,c,u].indexOf(l)>=0&&s!==this._joinRef())return;let p=this._onMessage(l,r,s);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var v,x,C;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((C=(x=y.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===l}).map(y=>y.callback(p,s)):(i=this.bindings[l])===null||i===void 0||i.filter(y=>{var v,x,C,m,g,h;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const w=y.id,k=(v=y.filter)===null||v===void 0?void 0:v.event;return w&&((x=r.ids)===null||x===void 0?void 0:x.includes(w))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const w=(g=(m=y==null?void 0:y.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((h=r==null?void 0:r.event)===null||h===void 0?void 0:h.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:x,table:C,commit_timestamp:m,type:g,errors:h}=v;p=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:m,eventType:g,new:{},old:{},errors:h}),this._getPayloadRecords(v))}y.callback(p,s)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&ko.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(dt.close,{},t)}_onError(t){this._on(dt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Md(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Md(t.columns,t.old_record)),r}}const qd=()=>{},wm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class km{constructor(t,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qd,this.ref=0,this.logger=qd,this.conn=null,this.sendBuffer=[],this.serializer=new fm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...o)=>nn(async()=>{const{default:d}=await Promise.resolve().then(()=>as);return{default:d}},void 0).then(({default:d})=>d(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${ml.websocket}`,this.httpEndpoint=Ah(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Oh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=om),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:um}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ps.connecting:return dr.Connecting;case Ps.open:return dr.Open;case Ps.closing:return dr.Closing;default:return dr.Closed}}isConnected(){return this.connectionState()===dr.Open}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new ko(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,l=()=>{this.encode(t,o=>{var d;(d=this.conn)===null||d===void 0||d.send(o)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:cm};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(dt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(hm,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:s,event:a,payload:i,ref:l}=r;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${a} ${l&&"("+l+")"||""}`,i),Array.from(this.channels).filter(o=>o._isMember(s)).forEach(o=>o._trigger(a,i,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(dt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([wm],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class bo extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function we(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class bm extends bo{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class xl extends bo{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var jm=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(f){l(f)}}function d(u){try{c(s.throw(u))}catch(f){l(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};const Lh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nn(async()=>{const{default:s}=await Promise.resolve().then(()=>as);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},Nm=()=>jm(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield nn(()=>Promise.resolve().then(()=>as),void 0)).Response:Response}),yl=e=>{if(Array.isArray(e))return e.map(r=>yl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=yl(s)}),t};var jr=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(f){l(f)}}function d(u){try{c(s.throw(u))}catch(f){l(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};const pi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_m=(e,t,r)=>jr(void 0,void 0,void 0,function*(){const s=yield Nm();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new bm(pi(a),e.status||500))}).catch(a=>{t(new xl(pi(a),a))}):t(new xl(pi(e),e))}),Sm=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),r))};function ln(e,t,r,s,a,i){return jr(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,Sm(t,s,a,i)).then(d=>{if(!d.ok)throw d;return s!=null&&s.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>_m(d,o,s))})})}function ma(e,t,r,s){return jr(this,void 0,void 0,function*(){return ln(e,"GET",t,r,s)})}function Mt(e,t,r,s,a){return jr(this,void 0,void 0,function*(){return ln(e,"POST",t,s,a,r)})}function Cm(e,t,r,s,a){return jr(this,void 0,void 0,function*(){return ln(e,"PUT",t,s,a,r)})}function Em(e,t,r,s){return jr(this,void 0,void 0,function*(){return ln(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function $h(e,t,r,s,a){return jr(this,void 0,void 0,function*(){return ln(e,"DELETE",t,s,a,r)})}var Ie=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(f){l(f)}}function d(u){try{c(s.throw(u))}catch(f){l(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};const Tm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pm{constructor(t,r={},s,a){this.url=t,this.headers=r,this.bucketId=s,this.fetch=Lh(a)}uploadOrUpdate(t,r,s,a){return Ie(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Hd),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=s,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,d&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),p=yield f.json();return f.ok?{data:{path:c,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(we(i))return{data:null,error:i};throw i}})}upload(t,r,s){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Ie(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:Hd.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",c.cacheControl)):(d=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:d,headers:u}),p=yield f.json();return f.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(d){if(we(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Mt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new bo("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}update(t,r,s){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Ie(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Mt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Ie(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Mt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Ie(this,void 0,void 0,function*(){try{const a=yield Mt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}download(t,r){return Ie(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield ma(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(we(o))return{data:null,error:o};throw o}})}info(t){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield ma(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:yl(s),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}exists(t){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Em(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(we(s)&&s instanceof xl){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&a.push(d);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${c}`)}}}remove(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield $h(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}list(t,r,s){return Ie(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Tm),r),{prefix:t||""});return{data:yield Mt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Dm="2.7.1",Om={"X-Client-Info":`storage-js/${Dm}`};var _r=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(f){l(f)}}function d(u){try{c(s.throw(u))}catch(f){l(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};class Rm{constructor(t,r={},s){this.url=t,this.headers=Object.assign(Object.assign({},Om),r),this.fetch=Lh(s)}listBuckets(){return _r(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(we(t))return{data:null,error:t};throw t}})}getBucket(t){return _r(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return _r(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return _r(this,void 0,void 0,function*(){try{return{data:yield Cm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(we(s))return{data:null,error:s};throw s}})}emptyBucket(t){return _r(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}deleteBucket(t){return _r(this,void 0,void 0,function*(){try{return{data:yield $h(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}}class Am extends Rm{constructor(t,r={},s){super(t,r,s)}from(t){return new Pm(this.url,this.headers,t,this.fetch)}}const Lm="2.50.5";let ws="";typeof Deno<"u"?ws="deno":typeof document<"u"?ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ws="react-native":ws="node";const $m={"X-Client-Info":`supabase-js-${ws}/${Lm}`},Im={headers:$m},Mm={schema:"public"},zm={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Um={};var Fm=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(f){l(f)}}function d(u){try{c(s.throw(u))}catch(f){l(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};const qm=e=>{let t;return e?t=e:typeof fetch>"u"?t=wh:t=fetch,(...r)=>t(...r)},Hm=()=>typeof Headers>"u"?kh:Headers,Bm=(e,t,r)=>{const s=qm(r),a=Hm();return(i,l)=>Fm(void 0,void 0,void 0,function*(){var o;const d=(o=yield t())!==null&&o!==void 0?o:e;let c=new a(l==null?void 0:l.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),s(i,Object.assign(Object.assign({},l),{headers:c}))})};var Wm=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(f){l(f)}}function d(u){try{c(s.throw(u))}catch(f){l(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};function Vm(e){return e.endsWith("/")?e:e+"/"}function Gm(e,t){var r,s;const{db:a,auth:i,realtime:l,global:o}=e,{db:d,auth:c,realtime:u,global:f}=t,p={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),l),global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Wm(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const Ih="2.70.0",Tr=30*1e3,vl=3,xi=vl*Tr,Qm="http://localhost:9999",Km="supabase.auth.token",Jm={"X-Client-Info":`gotrue-js/${Ih}`},wl="X-Supabase-Api-Version",Mh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ym=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xm=6e5;class jo extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Zm extends jo{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function ep(e){return Q(e)&&e.name==="AuthApiError"}class zh extends jo{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class nr extends jo{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class Lt extends nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tp(e){return Q(e)&&e.name==="AuthSessionMissingError"}class Cn extends nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class En extends nr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Tn extends nr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rp(e){return Q(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bd extends nr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kl extends nr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function yi(e){return Q(e)&&e.name==="AuthRetryableFetchError"}class Wd extends nr{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Os extends nr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vd=` 	
\r=`.split(""),sp=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Vd.length;t+=1)e[Vd[t].charCodeAt(0)]=-2;for(let t=0;t<pa.length;t+=1)e[pa[t].charCodeAt(0)]=t;return e})();function Gd(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(pa[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(pa[s]),t.queuedBits-=6}}function Uh(e,t,r){const s=sp[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Qd(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{ip(l,s,r)};for(let l=0;l<e.length;l+=1)Uh(e.charCodeAt(l),a,i);return t.join("")}function np(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ap(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}np(s,t)}}function ip(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function lp(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Uh(e.charCodeAt(a),r,s);return new Uint8Array(t)}function op(e){const t=[];return ap(e,r=>t.push(r)),new Uint8Array(t)}function dp(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>Gd(a,r,s)),Gd(null,r,s),t.join("")}function cp(e){return Math.round(Date.now()/1e3)+e}function up(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const it=()=>typeof window<"u"&&typeof document<"u",ar={tested:!1,writable:!1},Rs=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ar.tested)return ar.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ar.tested=!0,ar.writable=!0}catch{ar.tested=!0,ar.writable=!1}return ar.writable};function hp(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const Fh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>nn(async()=>{const{default:s}=await Promise.resolve().then(()=>as);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},fp=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",qh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Pn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Dn=async(e,t)=>{await e.removeItem(t)};class Ua{constructor(){this.promise=new Ua.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ua.promiseConstructor=Promise;function vi(e){const t=e.split(".");if(t.length!==3)throw new Os("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Ym.test(t[s]))throw new Os("JWT not in base64url format");return{header:JSON.parse(Qd(t[0])),payload:JSON.parse(Qd(t[1])),signature:lp(t[2]),raw:{header:t[0],payload:t[1]}}}async function gp(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function mp(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){s(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function pp(e){return("0"+e.toString(16)).substr(-2)}function xp(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,pp).join("")}async function yp(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function vp(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await yp(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sr(e,t,r=!1){const s=xp();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await qh(e,`${t}-code-verifier`,a);const i=await vp(s);return[i,s===i?"plain":"s256"]}const wp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kp(e){const t=e.headers.get(wl);if(!t||!t.match(wp))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function bp(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function jp(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Np=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cr(e){if(!Np.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var _p=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};const or=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Sp=[502,503,504];async function Kd(e){var t;if(!fp(e))throw new kl(or(e),0);if(Sp.includes(e.status))throw new kl(or(e),e.status);let r;try{r=await e.json()}catch(i){throw new zh(or(i),i)}let s;const a=kp(e);if(a&&a.getTime()>=Mh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Wd(or(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Lt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Wd(or(r),e.status,r.weak_password.reasons);throw new Zm(or(r),e.status||500,s)}const Cp=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function J(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[wl]||(i[wl]=Mh["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const l=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await Ep(e,t,r+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(d):{data:Object.assign({},d),error:null}}async function Ep(e,t,r,s,a,i){const l=Cp(t,s,a,i);let o;try{o=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new kl(or(d),0)}if(o.ok||await Kd(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(d){await Kd(d)}}function bt(e){var t;let r=null;Op(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=cp(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function Jd(e){const t=bt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ft(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Tp(e){return{data:e,error:null}}function Pp(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,l=_p(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},d=Object.assign({},l);return{data:{properties:o,user:d},error:null}}function Dp(e){return e}function Op(e){return e.access_token&&e.refresh_token&&e.expires_in}const wi=["global","local","others"];var Rp=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class Ap{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Fh(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=wi[0]){if(wi.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wi.join(", ")}`);try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ft})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Rp(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Pp,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ft})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,l,o,d;try{const c={nextPage:null,lastPage:0,total:0},u=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Dp});if(u.error)throw u.error;const f=await u.json(),p=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(d=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(v.split(";")[1].split("=")[1]);c[`${C}Page`]=x}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Q(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Cr(t);try{return await J(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ft})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Cr(t);try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ft})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Cr(t);try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ft})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Cr(t.userId);try{const{data:r,error:s}=await J(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Cr(t.userId),Cr(t.id);try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}const Lp={getItem:e=>Rs()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Rs()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Rs()&&globalThis.localStorage.removeItem(e)}};function Yd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function $p(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Er={debug:!!(globalThis&&Rs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ip extends Hh{}async function Mp(e,t,r){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Er.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ip(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Er.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}$p();const zp={url:Qm,storageKey:Km,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Xd(e,t,r){return await r()}class Ys{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ys.nextInstanceID,Ys.nextInstanceID+=1,this.instanceID>0&&it()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},zp),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Ap({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Fh(a.fetch),this.lock=a.lock||Xd,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:it()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Mp:this.lock=Xd,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Rs()?this.storage=Lp:(this.memoryStorage={},this.storage=Yd(this.memoryStorage)):(this.memoryStorage={},this.storage=Yd(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ih}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=hp(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),it()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),rp(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Q(r)?{error:r}:{error:new zh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:bt}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,s,a;try{let i;if("email"in t){const{email:u,password:f,options:p}=t;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Sr(this.storage,this.storageKey)),i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:y,code_challenge_method:v},xform:bt})}else if("phone"in t){const{phone:u,password:f,options:p}=t;i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:bt})}else throw new En("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Jd})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Jd})}else throw new En("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Cn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,a,i,l,o,d,c,u,f,p,y;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:C,wallet:m,statement:g,options:h}=t;let w;if(it())if(typeof m=="object")w=m;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const k=new URL((r=h==null?void 0:h.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},h==null?void 0:h.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),g?{statement:g}:null));let T;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")T=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)T=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)v=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),x=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(s=h==null?void 0:h.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=h==null?void 0:h.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${h.signInWithSolana.notBefore}`]:[],...!((l=h==null?void 0:h.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${h.signInWithSolana.expirationTime}`]:[],...!((o=h==null?void 0:h.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${h.signInWithSolana.chainId}`]:[],...!((d=h==null?void 0:h.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${h.signInWithSolana.nonce}`]:[],...!((c=h==null?void 0:h.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${h.signInWithSolana.requestId}`]:[],...!((f=(u=h==null?void 0:h.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...h.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:C,error:m}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:dp(x)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:bt});if(m)throw m;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Cn}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:m})}catch(C){if(Q(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(t){const r=await Pn(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:i,error:l}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:bt});if(await Dn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Cn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(Q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:l}=t,o=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:bt}),{data:d,error:c}=o;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Cn}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,a,i,l;try{if("email"in t){const{email:o,options:d}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Sr(this.storage,this.storageKey));const{error:f}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:d}=t,{data:c,error:u}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new En("You must provide either an email or phone number.")}catch(o){if(Q(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,s;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:o}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:bt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,c=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,s,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Sr(this.storage,this.storageKey)),await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Tp})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Lt;const{error:a}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:l}=await J(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:l,error:o}=await J(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new En("You must provide either an email or phone number and a type")}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Pn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<xi:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,c,u)=>(!l&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ft}):await this._useSession(async r=>{var s,a,i;const{data:l,error:o}=r;if(o)throw o;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lt}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ft})})}catch(r){if(Q(r))return tp(r)&&(await this._removeSession(),await Dn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Lt;const l=a.session;let o=null,d=null;this.flowType==="pkce"&&t.email!=null&&([o,d]=await Sr(this.storage,this.storageKey));const{data:c,error:u}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:d}),jwt:l.access_token,xform:Ft});if(u)throw u;return l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Lt;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:l}=vi(t.access_token);if(l.exp&&(s=l.exp,a=s<=r),a){const{session:o,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Lt;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!it())throw new Tn("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Tn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bd("No code detected.");const{data:g,error:h}=await this._exchangeCodeForSession(t.code);if(h)throw h;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:d,token_type:c}=t;if(!i||!o||!l||!c)throw new Tn("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(o);let p=u+f;d&&(p=parseInt(d));const y=p-u;y*1e3<=Tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const v=p-f;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,u);const{data:x,error:C}=await this._getUser(i);if(C)throw C;const m={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:p,refresh_token:l,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(s){if(Q(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Pn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{error:i};const l=(s=a.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(ep(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Dn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=up(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Sr(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var l,o,d,c,u;const{data:f,error:p}=i;if(p)throw p;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",y,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return it()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Q(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:l}=r;if(l)throw l;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await mp(async a=>(a>0&&await gp(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bt})),(a,i)=>{const l=200*Math.pow(2,a);return i&&yi(i)&&Date.now()+l-s<Tr})}catch(s){if(this._debug(r,"error",s),Q(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),it()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Pn(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<xi;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${xi}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),yi(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ua;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Lt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),Q(i)){const l={session:null,error:i};return yi(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await qh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Dn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&it()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Tr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Tr}ms, refresh threshold is ${vl} ticks`),a<=vl&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Hh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,l]=await Sr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await J(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:c}=await J(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await J(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?{data:null,error:i}:await J(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],a=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=vi(a.access_token);let o=null;l.aal&&(o=l.aal);let d=o;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s||(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+Xm>Date.now()))return s;const{data:a,error:i}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new Os("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),s=a.keys.find(l=>l.kid===t),!s)throw new Os("No matching signing key found in JWKS");return s}async getClaims(t,r={keys:[]}){try{let s=t;if(!s){const{data:y,error:v}=await this.getSession();if(v||!y.session)return{data:null,error:v};s=y.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:d}}=vi(s);if(bp(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:i,header:a,signature:l},error:null}}const c=jp(a.alg),u=await this.fetchJwk(a.kid,r),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,l,op(`${o}.${d}`)))throw new Os("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}}}Ys.nextInstanceID=0;const Up=Ys;class Fp extends Up{constructor(t){super(t)}}var qp=function(e,t,r,s){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(s.next(u))}catch(f){l(f)}}function d(u){try{c(s.throw(u))}catch(f){l(f)}}function c(u){u.done?i(u.value):a(u.value).then(o,d)}c((s=s.apply(e,t||[])).next())})};class Hp{constructor(t,r,s){var a,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=Vm(t),d=new URL(o);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Mm,realtime:Um,auth:Object.assign(Object.assign({},zm),{storageKey:c}),global:Im},f=Gm(s??{},u);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=Bm(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new im(new URL("rest/v1",d).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new $g(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Am(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return qp(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,storageKey:i,flowType:l,lock:o,debug:d},c,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fp({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,flowType:l,lock:o,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new km(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Bp=(e,t,r)=>new Hp(e,t,r),Wp="https://gfxphdzbawtuincogots.supabase.co",Vp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmeHBoZHpiYXd0dWluY29nb3RzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxNTY5MTYsImV4cCI6MjA2NzczMjkxNn0.UO0Z-zPjyf0wzXW7XEjVHFygXVfg7o15-1RJaBhIJV4",R=Bp(Wp,Vp),Bh=E.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),Ye=()=>{const e=E.useContext(Bh);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Gp=({children:e})=>{const[t,r]=E.useState(null),[s,a]=E.useState(null),[i,l]=E.useState(!0);E.useEffect(()=>{R.auth.getSession().then(({data:{session:c}})=>{a(c),r((c==null?void 0:c.user)??null),l(!1)});const{data:{subscription:d}}=R.auth.onAuthStateChange(async(c,u)=>{a(u),r((u==null?void 0:u.user)??null),l(!1)});return()=>d.unsubscribe()},[]);const o=async()=>{await R.auth.signOut()};return n.jsx(Bh.Provider,{value:{user:t,session:s,loading:i,signOut:o},children:e})},Wh=E.createContext({isDark:!0,toggleTheme:()=>{}}),Vh=()=>{const e=E.useContext(Wh);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Qp=({children:e})=>{const[t,r]=E.useState(!0);E.useEffect(()=>{const a=localStorage.getItem("theme");r(a?a==="dark":!0)},[]),E.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const s=()=>{r(!t)};return n.jsx(Wh.Provider,{value:{isDark:t,toggleTheme:s},children:e})},Kp=()=>{const{user:e}=Ye(),[t,r]=E.useState({studySessions:[],prayerRecords:[],quranSessions:[],habitRecords:[],attendanceRecords:[],classSchedules:[],sleepRecords:[],exams:[],achievements:[],profile:null,loading:!0,lastUpdated:""});E.useEffect(()=>{e&&s()},[e]);const s=async()=>{if(e)try{r(x=>({...x,loading:!0}));const[i,l,o,d,c,u,f,p,y]=await Promise.all([R.from("study_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}),R.from("prayer_records").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}),R.from("quran_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}),R.from("habit_records").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}),R.from("attendance_records").select("*").eq("user_id",e.id).order("date",{ascending:!1}),R.from("class_schedule").select("*").eq("user_id",e.id).order("time"),R.from("sleep_records").select("*").eq("user_id",e.id).order("date",{ascending:!1}),R.from("exams").select("*").eq("user_id",e.id).order("date"),R.from("profiles").select("*").eq("user_id",e.id).maybeSingle()]),v={studySessions:i.data||[],prayerRecords:l.data||[],quranSessions:o.data||[],habitRecords:d.data||[],attendanceRecords:c.data||[],classSchedules:u.data||[],sleepRecords:f.data||[],exams:p.data||[],profile:y.data,lastUpdated:new Date().toISOString()};localStorage.setItem("preloaded_data",JSON.stringify(v)),r({...v,achievements:[],loading:!1})}catch(i){console.error("Error preloading data:",i);const l=localStorage.getItem("preloaded_data");if(l){const o=JSON.parse(l);r({...o,achievements:[],loading:!1})}else r(o=>({...o,loading:!1}))}};return{preloadedData:t,refreshData:()=>{e&&s()}}},Gh=()=>{const[e,t]=E.useState(navigator.onLine),[r,s]=E.useState([]);return E.useEffect(()=>{const c=()=>t(!0),u=()=>t(!1);return window.addEventListener("online",c),window.addEventListener("offline",u),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",u)}},[]),{isOnline:e,saveOfflineData:(c,u)=>{try{const f=localStorage.getItem("offline_data"),p=f?JSON.parse(f):{};p[c]=u,localStorage.setItem("offline_data",JSON.stringify(p))}catch(f){console.error("Error saving offline data:",f)}},getOfflineData:c=>{try{const u=localStorage.getItem("offline_data");return(u?JSON.parse(u):{})[c]||null}catch(u){return console.error("Error getting offline data:",u),null}},addToPendingSync:c=>{const u=JSON.parse(localStorage.getItem("pending_sync")||"[]");u.push({...c,timestamp:Date.now()}),localStorage.setItem("pending_sync",JSON.stringify(u)),s(u)},clearPendingSync:()=>{localStorage.removeItem("pending_sync"),s([])},getPendingSync:()=>JSON.parse(localStorage.getItem("pending_sync")||"[]"),pendingSync:r}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),V=(e,t)=>{const r=E.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:d,...c},u)=>E.createElement("svg",{ref:u,...Jp,width:a,height:a,stroke:s,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Yp(e)}`,o].join(" "),...c},[...t.map(([f,p])=>E.createElement(f,p)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=V("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=V("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=V("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=V("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=V("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=V("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=V("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=V("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=V("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=V("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=V("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=V("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=V("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=V("FolderSync",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=V("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=V("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=V("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=V("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=V("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=V("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=V("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=V("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=V("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=V("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=V("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=V("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=V("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=V("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=V("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=V("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=V("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=V("Sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=V("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=V("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=V("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=V("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=V("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mx=()=>{const{isOnline:e,pendingSync:t}=Gh();return e&&t.length===0?null:n.jsx("div",{className:`fixed top-4 left-4 lg:top-4 lg:left-80 z-40 px-3 py-2 rounded-lg shadow-lg transition-all duration-300 ${e?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:n.jsx("div",{className:"flex items-center space-x-2",children:e?n.jsxs(n.Fragment,{children:[n.jsx(gx,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Online"}),t.length>0&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(nx,{className:"w-3 h-3 animate-spin"}),n.jsxs("span",{className:"text-xs",children:["(",t.length,")"]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(fx,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Offline"}),t.length>0&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Zp,{className:"w-3 h-3"}),n.jsxs("span",{className:"text-xs",children:["(",t.length,")"]})]})]})})})},nc=[{id:"dashboard",label:"Dashboard",icon:Jh},{id:"study",label:"Study",icon:Re},{id:"prayer",label:"Prayer",icon:Xt},{id:"quran",label:"Quran",icon:Xs},{id:"habits",label:"Habits",icon:wt},{id:"exam",label:"Exams",icon:wr},{id:"routine",label:"Classes",icon:Ve},{id:"sleep",label:"Sleep",icon:ut},{id:"achievements",label:"Awards",icon:xa},{id:"profile",label:"Profile",icon:kt}],px=({activeTab:e,setActiveTab:t,isOpen:r,setIsOpen:s})=>{const a=i=>{t(i),s(!1)};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 z-40 px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:n.jsx(Re,{className:"w-5 h-5 text-white"})}),n.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),n.jsx("button",{onClick:()=>s(!r),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r?n.jsx(ye,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"}):n.jsx(ox,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})})]})}),r&&n.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>s(!1)}),n.jsx("div",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-40 transform transition-transform duration-300 ${r?"translate-x-0":"-translate-x-full"}`,children:n.jsx("div",{className:"p-6 pt-20",children:n.jsx("nav",{className:"space-y-2",children:nc.map(i=>{const l=i.icon;return n.jsxs("button",{onClick:()=>a(i.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===i.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[n.jsx(l,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:i.label})]},i.id)})})})}),n.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:n.jsx("div",{className:"grid grid-cols-5 gap-1 p-2",children:nc.slice(0,5).map(i=>{const l=i.icon;return n.jsxs("button",{onClick:()=>a(i.id),className:`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-colors ${e===i.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-300"}`,children:[n.jsx(l,{className:"w-5 h-5 mb-1"}),n.jsx("span",{className:"text-xs font-medium truncate",children:i.label})]},i.id)})})})]})},xx=()=>{const[e,t]=E.useState(!1),[r,s]=E.useState(""),[a,i]=E.useState(""),[l,o]=E.useState(""),[d,c]=E.useState(!1),[u,f]=E.useState(!1),[p,y]=E.useState(""),v=async x=>{x.preventDefault(),c(!0),y("");try{if(e){const{error:C}=await R.auth.signUp({email:r,password:a,options:{data:{full_name:l}}});if(C)throw C;y("Check your email for the confirmation link!")}else{const{error:C}=await R.auth.signInWithPassword({email:r,password:a});if(C)throw C}}catch(C){y(C.message)}finally{c(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center p-4",children:[n.jsx("div",{className:`absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.05"%3E%3Cpath d="M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-20`}),n.jsx("div",{className:"relative w-full max-w-md",children:n.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:n.jsx(Kh,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Life Tracker"}),n.jsx("p",{className:"text-emerald-100 text-sm",children:e?"Create your account":"Welcome back"})]}),n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),n.jsx("input",{type:"text",value:l,onChange:x=>o(x.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your full name",required:e})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(lx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),n.jsx("input",{type:"email",value:r,onChange:x=>s(x.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(ax,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),n.jsx("input",{type:u?"text":"password",value:a,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your password",required:!0}),n.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-emerald-300 hover:text-emerald-200",children:u?n.jsx(rx,{className:"w-5 h-5"}):n.jsx(sx,{className:"w-5 h-5"})})]})]}),p&&n.jsx("div",{className:`p-3 rounded-lg text-sm ${p.includes("Check your email")?"bg-emerald-500/20 text-emerald-100 border border-emerald-400/30":"bg-red-500/20 text-red-100 border border-red-400/30"}`,children:p}),n.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Loading...":e?"Create Account":"Sign In"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("button",{onClick:()=>t(!e),className:"text-emerald-200 hover:text-emerald-100 text-sm transition-colors",children:e?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})]})},ac=({setActiveTab:e})=>{var u;const{user:t}=Ye(),{isDark:r}=Vh(),[s,a]=E.useState({studyHoursToday:0,prayersCompleted:0,totalPrayers:5,habitStreak:0,nextExamDays:0,quranReadToday:0,quranDailyGoal:2}),[i,l]=E.useState([]),o=new Date().toLocaleDateString("en-US",{weekday:"long"}),d=["Saturday","Sunday","Monday","Tuesday","Wednesday"].includes(o);E.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(!t)return;const f=new Date().toISOString().split("T")[0],p=new Date().toLocaleDateString("en-US",{weekday:"long"});try{const{data:y}=await R.from("study_sessions").select("duration").eq("user_id",t.id).eq("date",f),v=(y==null?void 0:y.reduce((O,H)=>O+H.duration,0))||0,{data:x}=await R.from("prayer_records").select("*").eq("user_id",t.id).eq("date",f),C=(x==null?void 0:x.length)||0,{data:m}=await R.from("habits").select("streak").eq("user_id",t.id).eq("type","good"),g=m&&m.length>0?Math.max(...m.map(O=>O.streak)):0,{data:h}=await R.from("exams").select("date").eq("user_id",t.id).gte("date",f).order("date",{ascending:!0}).limit(1);let w=0;if(h&&h.length>0){const O=new Date(h[0].date),H=new Date,S=O.getTime()-H.getTime();w=Math.ceil(S/(1e3*60*60*24))}const{data:k}=await R.from("class_schedules").select("*").eq("user_id",t.id).eq("day",p).order("time"),{data:N}=await R.from("quran_readings").select("pages").eq("user_id",t.id).eq("date",f),T=(N==null?void 0:N.reduce((O,H)=>O+H.pages,0))||0;a({studyHoursToday:v,prayersCompleted:C,totalPrayers:5,habitStreak:g,nextExamDays:w,quranReadToday:T,quranDailyGoal:2}),l(k||[])}catch(y){console.error("Error loading dashboard data:",y)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:["Welcome back, ",((u=t==null?void 0:t.user_metadata)==null?void 0:u.full_name)||"User"]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Let's make today productive and meaningful"})]}),n.jsx("div",{className:"hidden sm:block text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 p-6 rounded-xl text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-emerald-100",children:"Study Hours Today"}),n.jsxs("p",{className:"text-2xl font-bold",children:[s.studyHoursToday,"h"]})]}),n.jsx(Re,{className:"w-8 h-8 text-emerald-200"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"bg-emerald-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${Math.min(s.studyHoursToday/6*100,100)}%`}})}),n.jsxs("p",{className:"text-xs text-emerald-100 mt-1",children:[Math.round(s.studyHoursToday/6*100),"% of daily goal"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 p-6 rounded-xl text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-teal-100",children:"Prayers Completed"}),n.jsxs("p",{className:"text-2xl font-bold",children:[s.prayersCompleted,"/",s.totalPrayers]})]}),n.jsx(Xt,{className:"w-8 h-8 text-teal-200"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("div",{className:"bg-teal-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${s.prayersCompleted/s.totalPrayers*100}%`}})}),n.jsx("p",{className:"text-xs text-teal-100 mt-1",children:s.prayersCompleted===5?"All completed!":"Keep going!"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-6 rounded-xl text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-amber-100",children:"Habit Streak"}),n.jsx("p",{className:"text-2xl font-bold",children:s.habitStreak})]}),n.jsx(Qh,{className:"w-8 h-8 text-amber-200"})]}),n.jsx("div",{className:"mt-4",children:n.jsx("p",{className:"text-xs text-amber-100",children:"Days consistent"})})]}),n.jsxs("div",{className:"bg-gradient-to-r from-rose-500 to-pink-500 p-6 rounded-xl text-white shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-rose-100",children:"Exam in"}),n.jsx("p",{className:"text-2xl font-bold",children:s.nextExamDays||"None"})]}),n.jsx(wr,{className:"w-8 h-8 text-rose-200"})]}),n.jsx("div",{className:"mt-4",children:n.jsx("p",{className:"text-xs text-rose-100",children:s.nextExamDays>0?"Days remaining":"No upcoming exams"})})]})]}),d&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Today's Classes"}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(Ve,{className:"w-4 h-4"}),n.jsx("span",{children:o})]})]}),n.jsx("div",{className:"space-y-3",children:i.length>0?i.map((f,p)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:f.subject}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[f.instructor,"  ",f.location]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:f.time})})]},p)):n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Ve,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No classes scheduled for today"}),n.jsx("p",{className:"text-sm mt-1",children:"Add your class schedule to see it here"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Today's Progress"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:n.jsx(Re,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Study Session"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${Math.min(s.studyHoursToday/6*100,100)}%`}})}),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(s.studyHoursToday/6*100),"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center",children:n.jsx(Xt,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Daily Prayers"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-teal-600 h-2 rounded-full",style:{width:`${s.prayersCompleted/s.totalPrayers*100}%`}})}),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(s.prayersCompleted/s.totalPrayers*100),"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-amber-100 dark:bg-amber-900 rounded-full flex items-center justify-center",children:n.jsx(Xs,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Quran Reading"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:`${Math.min(s.quranReadToday/s.quranDailyGoal*100,100)}%`}})}),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(s.quranReadToday/s.quranDailyGoal*100),"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center",children:n.jsx(ut,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Sleep Goal"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full w-0"})}),n.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"0%"})]})]})]})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>e("study"),className:"w-full bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[n.jsx(Re,{className:"w-4 h-4"}),n.jsx("span",{children:"Start Study Session"})]}),n.jsxs("button",{onClick:()=>e("prayer"),className:"w-full bg-teal-50 dark:bg-teal-900/20 hover:bg-teal-100 dark:hover:bg-teal-900/30 text-teal-700 dark:text-teal-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[n.jsx(Xt,{className:"w-4 h-4"}),n.jsx("span",{children:"Log Prayer"})]}),n.jsxs("button",{onClick:()=>e("habits"),className:"w-full bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-700 dark:text-amber-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[n.jsx(wt,{className:"w-4 h-4"}),n.jsx("span",{children:"Update Habits"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Achievements"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center",children:n.jsx(dn,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"Getting Started"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Welcome to Life Tracker!"})]})]}),n.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:n.jsx(Re,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"First Steps"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Start tracking to unlock achievements"})]})]})]})]})]})]})]})},yx=[{id:"dashboard",label:"Dashboard",icon:Jh},{id:"study",label:"Study Tracker",icon:Re},{id:"prayer",label:"Prayer Tracker",icon:Xt},{id:"quran",label:"Quran Tracker",icon:Xs},{id:"habits",label:"Habit Tracker",icon:wt},{id:"exam",label:"Exam Countdown",icon:wr},{id:"routine",label:"Classes",icon:Ve},{id:"sleep",label:"Sleep Tracker",icon:ut},{id:"achievements",label:"Achievements",icon:xa},{id:"profile",label:"Profile",icon:kt}],vx=({activeTab:e,setActiveTab:t})=>{var o;const{signOut:r,user:s}=Ye(),{isDark:a,toggleTheme:i}=Vh(),l=async()=>{await r()};return n.jsxs("div",{className:"fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-10 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[n.jsxs("div",{className:"flex-1 flex flex-col p-6 min-h-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-8",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:n.jsx(Kh,{className:"w-5 h-5 text-white"})}),n.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),n.jsx("nav",{className:`space-y-2 overflow-y-auto flex-1 min-h-0 sidebar-scrollbar${a?" dark":""}`,children:yx.map(d=>{const c=d.icon;return n.jsxs("button",{onClick:()=>t(d.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===d.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-r-2 border-emerald-600 dark:border-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[n.jsx(c,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:d.label})]},d.id)})})]}),n.jsx("div",{className:"px-6 pb-6 space-y-4",children:n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:n.jsx(kt,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white truncate",children:((o=s==null?void 0:s.user_metadata)==null?void 0:o.full_name)||"User"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:s==null?void 0:s.email})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[a?n.jsx(No,{className:"w-4 h-4"}):n.jsx(ut,{className:"w-4 h-4"}),n.jsx("span",{children:a?"Light":"Dark"})]}),n.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[n.jsx(ix,{className:"w-4 h-4"}),n.jsx("span",{children:"Sign Out"})]})]})]})})]})},wx=()=>{const{user:e}=Ye(),{isOnline:t,saveOfflineData:r,getOfflineData:s,addToPendingSync:a}=Gh(),[i,l]=E.useState(!1),[o,d]=E.useState(0),[c,u]=E.useState(""),[f,p]=E.useState(6),[y,v]=E.useState(0),[x,C]=E.useState([]),[m,g]=E.useState([]),[h,w]=E.useState(!1),[k,N]=E.useState(""),[T,O]=E.useState(null),[H,S]=E.useState(null);E.useEffect(()=>{e&&L()},[e]),E.useEffect(()=>{let D=null;return i?(D=setInterval(()=>{d(P=>P+1)},1e3),O(D)):T&&(clearInterval(T),O(null)),()=>{D&&clearInterval(D)}},[i]);const L=async()=>{if(!e)return;const D=new Date().toISOString().split("T")[0],{data:P}=await R.from("study_sessions").select("duration").eq("user_id",e.id).eq("date",D);if(P){const X=P.reduce((je,$)=>je+$.duration,0);v(X)}const I=new Date;I.setDate(I.getDate()-I.getDay());const{data:F}=await R.from("study_sessions").select("date, duration").eq("user_id",e.id).gte("date",I.toISOString().split("T")[0]);if(F){const X=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],je=X.map($=>({day:$,hours:F.filter(_=>new Date(_.date).getDay()===X.indexOf($)).reduce((_,U)=>_+U.duration,0)}));g(je)}const{data:Z}=await R.from("study_sessions").select("subject, duration").eq("user_id",e.id).gte("date",I.toISOString().split("T")[0]);if(Z){const X=new Map;Z.forEach(_=>{const U=X.get(_.subject)||0;X.set(_.subject,U+_.duration)});const je=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"],$=Array.from(X.entries()).map(([_,U],B)=>({name:_,hours:Number(U),color:je[B%je.length]}));C($)}},z=()=>{if(!c.trim()){alert("Please select or enter a subject first");return}l(!0),S(Date.now())},j=()=>{l(!1),S(null)},W=async()=>{if(!e||o===0)return;const D=new Date().toISOString().split("T")[0],P=o/3600,I={user_id:e.id,subject:c,duration:P,date:D,notes:`${Math.floor(o/3600)}h ${Math.floor(o%3600/60)}m session`};if(t){const{error:F}=await R.from("study_sessions").insert(I);F||(d(0),l(!1),u(""),S(null),L())}else{a({table:"study_sessions",operation:"insert",data:I}),d(0),l(!1),u(""),S(null);const F=s("study_sessions")||[];F.push({...I,id:Date.now().toString()}),r("study_sessions",F),L()}},G=()=>{k.trim()&&!x.find(D=>D.name===k)&&(C(D=>[...D,{name:k,hours:0,color:["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"][D.length%5]}]),N(""),w(!1))},b=()=>o;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Study Tracker"}),n.jsxs("button",{onClick:()=>w(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(on,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Subject"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Current Session"}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(Ve,{className:"w-4 h-4"}),n.jsx("span",{children:i?"Active":"Paused"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),n.jsxs("select",{value:c,onChange:D=>u(D.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",disabled:i,children:[n.jsx("option",{value:"",children:"Select a subject"}),x.map(D=>n.jsx("option",{value:D.name,children:D.name},D.name))]})]}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsxs("div",{className:"text-6xl font-bold text-gray-800 dark:text-white mb-2",children:[Math.floor(b()/3600),":",Math.floor(b()%3600/60).toString().padStart(2,"0"),":",(b()%60).toString().padStart(2,"0")]}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c||"Select a subject to start"}),i&&n.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"Session in progress..."})]}),n.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[i?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:j,className:"px-8 py-3 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[n.jsx(dx,{className:"w-5 h-5"}),n.jsx("span",{children:"Pause"})]}),n.jsx("button",{onClick:W,className:"px-8 py-3 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg font-medium transition-colors",children:"End Session"})]}):n.jsxs("button",{onClick:z,disabled:!c,className:"px-8 py-3 bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[n.jsx(ux,{className:"w-5 h-5"}),n.jsx("span",{children:"Start"})]}),n.jsx("button",{onClick:()=>{d(0),l(!1),S(null)},className:"px-8 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Reset"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[y.toFixed(1),"h"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today's Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[f,"h"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily Goal"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(y/f*100),"%"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Progress"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Progress"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[n.jsx("span",{children:"Progress towards daily goal"}),n.jsxs("span",{children:[y.toFixed(1),"/",f," hours"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:n.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(y/f*100,100)}%`}})})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Subject Breakdown"}),n.jsx("div",{className:"space-y-4",children:x.length>0?x.map(D=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-4 h-4 rounded-full ${D.color}`}),n.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:D.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[D.hours.toFixed(1),"h"]}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"this week"})]})]},D.name)):n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Re,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No subjects added yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Add subjects to track your study progress"})]})})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Weekly Overview"}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(dn,{className:"w-4 h-4"}),n.jsxs("span",{children:[m.reduce((D,P)=>D+P.hours,0).toFixed(1),"h total"]})]})]}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:m.map(D=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:D.day}),n.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:n.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[D.hours.toFixed(1),"h"]})})]},D.day))})]}),h&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Subject"}),n.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),n.jsx("input",{type:"text",value:k,onChange:D=>N(D.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics, Physics, etc."})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:G,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Subject"})]})]})]})})]})},kx=()=>{const{user:e}=Ye(),t=[{name:"Fajr",time:"05:00",completed:!1,type:null,icon:Zh},{name:"Dhuhr",time:"12:00",completed:!1,type:null,icon:No},{name:"Asr",time:"16:00",completed:!1,type:null,icon:ex},{name:"Maghrib",time:"18:00",completed:!1,type:null,icon:e0},{name:"Isha",time:"20:00",completed:!1,type:null,icon:ut}],[r,s]=E.useState(t),[a,i]=E.useState(!1),[l,o]=E.useState(null),[d,c]=E.useState(""),[u,f]=E.useState(0),[p,y]=E.useState(0),[v,x]=E.useState(null),[C,m]=E.useState({totalPrayers:0,totalPossible:35,withJamat:0,consistency:0,bestStreak:0,personalBest:0}),[g,h]=E.useState([]),[w,k]=E.useState(!1);E.useEffect(()=>{e&&(s(t),O(),N())},[e]);const N=async()=>{if(!e)return;console.log("Testing database connection...");const{data:_,error:U}=await R.from("missed_prayers").select("count").eq("user_id",e.id).limit(1);console.log("Database connection test:",{data:_,error:U})},T=async()=>{if(!e)return;const _=new Date().toISOString().split("T")[0];console.log("Clearing all prayers for today:",_);try{const{error:U}=await R.from("prayer_records").delete().eq("user_id",e.id).eq("date",_);console.log("Clear regular prayers result:",{error:U});const{error:B}=await R.from("missed_prayers").delete().eq("user_id",e.id).eq("missed_date",_);console.log("Clear kaza prayers result:",{error:B}),await O()}catch(U){console.error("Error clearing prayers:",U)}},O=async()=>{if(e)try{const[_,U,B,K]=await Promise.all([z(),j(),W(),G()]);if(_){const re=t.map(ee=>{const q=_.find(ne=>ne.prayer_name===ee.name);return{...ee,completed:!!q,type:(q==null?void 0:q.prayer_type)||null}});s(re)}await b()}catch(_){console.error("Error loading prayer data:",_)}},H=(_,U)=>{o(_),c(U)},S=_=>{s(U=>U.map(B=>B.name===_?{...B,time:d}:B)),o(null),c("")},L=()=>{o(null),c("")},z=async()=>{if(!e)return null;const _=new Date().toISOString().split("T")[0];console.log("Loading today's prayers for date:",_);const{data:U,error:B}=await R.from("prayer_records").select("*").eq("user_id",e.id).eq("date",_);console.log("Regular prayers loaded:",U,"Error:",B);const{data:K,error:re}=await R.from("missed_prayers").select("*").eq("user_id",e.id).eq("missed_date",_);console.log("Kaza prayers loaded:",K,"Error:",re);const ee=[...U||[],...(K||[]).map(q=>({...q,prayer_type:"kaza",date:q.missed_date,time:q.completed_time||q.prayer_time,completed:q.is_completed}))];return console.log("Combined prayers for today:",ee),ee},j=async()=>{if(!e)return;const _=new Date;_.setDate(_.getDate()-_.getDay());const U=_.toISOString().split("T")[0],B=new Date(_);B.setDate(B.getDate()+6);const K=B.toISOString().split("T")[0],{data:re,error:ee}=await R.from("prayer_records").select("*").eq("user_id",e.id).gte("date",U).lte("date",K);if(re){const q=re.filter(qa=>qa.prayer_type!=="kaza"),ne=q.length,fe=35,Fa=q.filter(qa=>qa.prayer_type==="jamat").length,t0=Math.round(ne/fe*100);m({totalPrayers:ne,totalPossible:fe,withJamat:Fa,consistency:t0,bestStreak:0,personalBest:0})}},W=async()=>{if(!e)return;const _=new Date;let U=0,B=new Date(_);for(;;){const q=B.toISOString().split("T")[0],{data:ne}=await R.from("prayer_records").select("*").eq("user_id",e.id).eq("date",q);if(ne&&ne.length>=5)U++,B.setDate(B.getDate()-1);else break}f(U);const K=new Date;K.setDate(1);const re=K.toISOString().split("T")[0],{data:ee}=await R.from("prayer_records").select("*").eq("user_id",e.id).gte("date",re);if(ee){const ne=new Date().getDate()*5,fe=Math.round(ee.length/ne*100);y(fe)}},G=async()=>{if(!e)return;const _=new Date;_.setDate(_.getDate()-30);const U=_.toISOString().split("T")[0],B=new Date().toISOString().split("T")[0];console.log("Loading kaza prayers from:",U,"to:",B);const{data:K,error:re}=await R.from("missed_prayers").select("*").eq("user_id",e.id).gte("missed_date",U).lte("missed_date",B).order("missed_date",{ascending:!1});if(console.log("Missed prayers data:",K,"Error:",re),K){const ee=K.map(q=>({id:q.id,prayer_name:q.prayer_name,date:q.missed_date,completed:q.is_completed,completed_date:q.completed_date,prayer_time:q.prayer_time}));console.log("Processed kaza prayers list:",ee),h(ee)}else h([])},b=async()=>{},D=async(_,U)=>{var re;if(!e)return;const B=new Date().toISOString().split("T")[0],K=new Date().toTimeString().slice(0,5);console.log("Logging prayer:",{prayerName:_,type:U,today:B,now:K});try{if(U==="kaza"){const{data:ee,error:q}=await R.from("missed_prayers").upsert({user_id:e.id,prayer_name:_,missed_date:B,prayer_time:((re=r.find(ne=>ne.name===_))==null?void 0:re.time)||"00:00",is_completed:!1,completed_date:null,completed_time:null},{onConflict:"user_id,prayer_name,missed_date"}).select();if(console.log("Kaza prayer insert result:",{data:ee,error:q}),q){console.error("Error adding kaza prayer:",q);return}s(ne=>ne.map(fe=>fe.name===_?{...fe,completed:!0,type:U}:fe)),x(null),await G()}else{const{data:ee,error:q}=await R.from("prayer_records").upsert({user_id:e.id,prayer_name:_,prayer_type:U,date:B,time:K},{onConflict:"user_id,prayer_name,date"}).select();if(console.log("Regular prayer insert result:",{data:ee,error:q}),q){console.error("Error adding regular prayer:",q);return}s(ne=>ne.map(fe=>fe.name===_?{...fe,completed:!0,type:U}:fe)),x(null),await Promise.all([j(),W(),G()])}}catch(ee){console.error("Unexpected error logging prayer:",ee)}},P=async _=>{if(!e)return;const U=new Date().toISOString().split("T")[0],B=r.find(K=>K.name===_);console.log("Removing prayer:",{prayerName:_,type:B==null?void 0:B.type,today:U});try{if((B==null?void 0:B.type)==="kaza"){const{data:K,error:re}=await R.from("missed_prayers").delete().eq("user_id",e.id).eq("prayer_name",_).eq("missed_date",U);if(console.log("Kaza prayer delete result:",{data:K,error:re}),re){console.error("Error deleting kaza prayer:",re);return}s(ee=>ee.map(q=>q.name===_?{...q,completed:!1,type:null}:q)),await G()}else{const{data:K,error:re}=await R.from("prayer_records").delete().eq("user_id",e.id).eq("prayer_name",_).eq("date",U);if(console.log("Regular prayer delete result:",{data:K,error:re}),re){console.error("Error deleting regular prayer:",re);return}s(ee=>ee.map(q=>q.name===_?{...q,completed:!1,type:null}:q)),await Promise.all([j(),W(),G()])}}catch(K){console.error("Unexpected error removing prayer:",K)}},I=r.filter(_=>_.completed&&_.type!=="kaza").length,F=I/r.length*100,Z=_=>{switch(_){case"jamat":return n.jsx(rc,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"});case"individual":return n.jsx(kt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"kaza":return n.jsx(On,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});default:return null}},X=_=>{switch(_){case"jamat":return"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800";case"individual":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case"kaza":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";default:return"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}},je=async _=>{if(!e)return;const U=new Date().toISOString().split("T")[0],B=new Date().toTimeString().slice(0,5),{data:K,error:re}=await R.from("missed_prayers").update({is_completed:!0,completed_date:U,completed_time:B,updated_at:new Date().toISOString()}).eq("id",_.id).select();!re&&K&&(h(ee=>ee.map(q=>q.id===_.id?{...q,completed:!0,completed_date:U}:q)),await Promise.all([j(),W(),G()]))},$=async _=>{if(!e)return;const{error:U}=await R.from("missed_prayers").update({is_completed:!1,completed_date:null,completed_time:null,updated_at:new Date().toISOString()}).eq("id",_.id);U||(h(B=>B.map(K=>K.id===_.id?{...K,completed:!1,completed_date:void 0}:K)),await Promise.all([j(),W(),G()]))};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Prayer Tracker"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:T,className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"Clear Today"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xt,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-medium",children:[I,"/5"]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[n.jsx("span",{children:"Daily prayers completed"}),n.jsxs("span",{children:[Math.round(F),"%"]})]}),n.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${F}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:u}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[p,"%"]}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Monthly Progress"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Prayers"}),n.jsx("div",{className:"space-y-4",children:r.map(_=>{const U=_.icon;return n.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${_.completed?X(_.type):"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${_.completed?"bg-emerald-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:n.jsx(U,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:_.name}),_.type&&Z(_.type)]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(Ve,{className:"w-4 h-4"}),l===_.name?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"time",value:d,onChange:B=>c(B.target.value),className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md px-2 py-1 text-sm"}),n.jsx("button",{onClick:()=>S(_.name),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",children:n.jsx(Yh,{className:"w-4 h-4"})}),n.jsx("button",{onClick:L,className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:n.jsx(ye,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{children:_.time}),n.jsx("button",{onClick:()=>H(_.name,_.time),className:"w-4 h-4 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",children:n.jsx(cx,{className:"w-3 h-3"})})]}),_.type&&n.jsxs("span",{className:"capitalize",children:[" ",_.type==="jamat"?"With Jamat":_.type==="individual"?"Individual":"Kaza/Missed"]})]})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:_.completed?n.jsx("button",{onClick:()=>P(_.name),className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:""}):n.jsx("button",{onClick:()=>x(_.name),className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400 flex items-center justify-center transition-colors",children:n.jsx(jl,{className:"w-4 h-4 text-gray-400"})})})]},_.name)})})]}),v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:["Log ",v," Prayer"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>D(v,"jamat"),className:"w-full flex items-center space-x-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors",children:[n.jsx(rc,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"With Jamat"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed in congregation"})]})]}),n.jsxs("button",{onClick:()=>D(v,"individual"),className:"w-full flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:[n.jsx(kt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Individual"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed alone"})]})]}),n.jsxs("button",{onClick:()=>D(v,"kaza"),className:"w-full flex items-center space-x-3 p-3 bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors",children:[n.jsx(On,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Mark as Missed"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add to kaza list for later completion"})]})]})]}),n.jsx("button",{onClick:()=>x(null),className:"w-full mt-4 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total prayers"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[C.totalPrayers,"/",C.totalPossible]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"With Jamat"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[C.withJamat,"/",C.totalPossible]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Consistency"}),n.jsxs("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:[C.consistency,"%"]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Best Streak"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2",children:u}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Days of consistent prayers"}),n.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Current streak"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Kaza Prayers (Last 30 Days)"}),n.jsx("button",{onClick:()=>k(!w),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:w?"Hide Details":"Show Details"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[n.jsx("span",{children:"Missed prayers"}),n.jsxs("span",{children:[g.filter(_=>!_.completed).length," remaining"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${g.filter(_=>_.completed).length/Math.max(g.length,1)*100}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[g.filter(_=>_.completed).length," of ",g.length," completed"]})]}),w&&n.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:g.length>0?g.map(_=>n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${_.completed?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800"}`,children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${_.completed?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:n.jsx(On,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:_.prayer_name}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Missed on ",new Date(_.date).toLocaleDateString(),_.completed&&n.jsxs("span",{className:"ml-2 text-green-600 dark:text-green-400",children:[" Completed on ",new Date(_.completed_date).toLocaleDateString()]})]})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:_.completed?n.jsx("button",{onClick:()=>$(_),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Mark as incomplete",children:""}):n.jsx("button",{onClick:()=>je(_),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",title:"Mark as completed",children:""})})]},_.id)):n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(On,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No missed prayers in the last 30 days"}),n.jsx("p",{className:"text-sm mt-1",children:"Great job keeping up with your prayers!"})]})})]})]})})},bx=()=>{const{user:e}=Ye(),[t,r]=E.useState(2),[s,a]=E.useState(0),[i,l]=E.useState(""),[o,d]=E.useState(0),[c,u]=E.useState(0),[f,p]=E.useState(0),[y,v]=E.useState([]),[x,C]=E.useState([]),[m,g]=E.useState({totalPages:0,totalSessions:0,averagePerDay:0,consistency:0}),[h,w]=E.useState(!1),[k,N]=E.useState(!1),[T,O]=E.useState(!1),[H,S]=E.useState(!1),[L,z]=E.useState({pages:1,surah:"",verses:"",notes:""}),[j,W]=E.useState({surah:"",verse:"",page:"",notes:""});pc.useEffect(()=>{e&&(G(),b(),D(),je())},[e]);const G=async()=>{if(!e)return;const $=new Date().toISOString().split("T")[0],{data:_}=await R.from("quran_readings").select("pages").eq("user_id",e.id).eq("date",$);if(_){const re=_.reduce((ee,q)=>ee+q.pages,0);a(re)}const{data:U}=await R.from("quran_readings").select("*").eq("user_id",e.id).order("date",{ascending:!1});if(U&&(v(U),U.length>0)){l(U[0].surah);const re=U.reduce((ee,q)=>ee+q.pages,0);u(re)}const B=new Date;B.setDate(1);const{data:K}=await R.from("quran_readings").select("pages, date").eq("user_id",e.id).gte("date",B.toISOString().split("T")[0]);if(K){const re=K.reduce((fe,Fa)=>fe+Fa.pages,0),ee=K.length,q=new Date().getDate(),ne=re/q;g({totalPages:re,totalSessions:ee,averagePerDay:Math.round(ne*10)/10,consistency:Math.round(ee/q*100)})}},b=async()=>{if(!e)return;const $=new Date;let _=0,U=new Date($);for(;;){const B=U.toISOString().split("T")[0],{data:K}=await R.from("quran_readings").select("*").eq("user_id",e.id).eq("date",B);if(K&&K.length>0)_++,U.setDate(U.getDate()-1);else break}p(_)},D=async()=>{if(!e)return;const{data:$}=await R.from("quran_bookmarks").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});$&&C($)},P=async()=>{if(!e||L.pages<=0)return;const $=new Date().toISOString().split("T")[0];new Date().toTimeString().slice(0,5);const{error:_}=await R.from("quran_readings").insert({user_id:e.id,pages:L.pages,surah:L.surah,verses:L.verses,date:$,notes:L.notes});_||(w(!1),z({pages:1,surah:"",verses:"",notes:""}),await G(),await b())},I=async()=>{if(!e||!j.surah)return;const{error:$}=await R.from("quran_bookmarks").upsert({user_id:e.id,surah:j.surah,verse:j.verse,page:j.page,notes:j.notes,created_at:new Date().toISOString()},{onConflict:"user_id,surah"});$||(N(!1),W({surah:"",verse:"",page:"",notes:""}),await D())},F=async $=>{if(!e)return;const{error:_}=await R.from("quran_readings").delete().eq("id",$).eq("user_id",e.id);_||(await G(),await b())},Z=async $=>{if(!e)return;const{error:_}=await R.from("quran_bookmarks").delete().eq("id",$).eq("user_id",e.id);_||await D()},X=async $=>{if(!e)return;const{error:_}=await R.from("user_settings").upsert({user_id:e.id,quran_daily_goal:$},{onConflict:"user_id"});_||(r($),S(!1))},je=async()=>{if(!e)return;const{data:$}=await R.from("user_settings").select("quran_daily_goal").eq("user_id",e.id).single();$&&$.quran_daily_goal&&r($.quran_daily_goal)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Quran Tracker"}),n.jsxs("button",{onClick:()=>w(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(Re,{className:"w-4 h-4"}),n.jsx("span",{children:"Log Reading"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Today's Reading"}),n.jsx("button",{onClick:()=>S(!0),className:"text-sm bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg transition-colors",children:"Set Goal"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[n.jsx("span",{children:"Daily goal progress"}),n.jsxs("span",{children:[Math.round(s/t*100),"%"]})]}),n.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${Math.min(s/t*100,100)}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:f}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold",children:i||"Not started"}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Current Surah"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:c}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Pages Read"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Reading Goal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"number",value:t,onChange:$=>r(Number($.target.value)),className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"pages per day"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complete Quran in"}),n.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[Math.ceil((604-m.totalPages*2)/t)," days"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"At current pace"})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(m.totalPages/604*100),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(m.totalPages/604*100,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[m.totalPages," of 604 pages completed"]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>w(!0),className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors border border-emerald-200 dark:border-emerald-800",children:[n.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:"Log Reading Session"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Record pages read"})]}),n.jsxs("button",{onClick:()=>N(!0),className:"p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors border border-blue-200 dark:border-blue-800",children:[n.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Set Bookmark"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Save current position"})]}),n.jsxs("button",{onClick:()=>O(!0),className:"p-4 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors border border-purple-200 dark:border-purple-800",children:[n.jsx("div",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"View Progress"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Detailed analytics"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Readings"}),n.jsxs("div",{className:"space-y-3",children:[y.map(($,_)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900/20 rounded-full flex items-center justify-center",children:n.jsx(Xs,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:$.surah}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",$.verses]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[$.pages," pages"]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:$.date})]}),n.jsx("button",{onClick:()=>F($.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete reading",children:n.jsx(ye,{className:"w-3 h-3"})})]})]},_)),y.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Xs,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No readings recorded yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Start your Quran reading journey today!"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bookmarks"}),n.jsxs("div",{className:"space-y-3",children:[x.map(($,_)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:n.jsx(Zd,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:$.surah}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",$.verse]}),n.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:$.page?`Page ${$.page}`:""})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:$.notes}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:$.created_at})]}),n.jsx("button",{onClick:()=>Z($.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete bookmark",children:n.jsx(ye,{className:"w-3 h-3"})})]})]},_)),x.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Zd,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No bookmarks saved yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Bookmark your favorite verses!"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Monthly Statistics"}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(dn,{className:"w-4 h-4"}),n.jsx("span",{children:"This month"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:m.totalPages}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:m.totalSessions}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Reading Sessions"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:m.averagePerDay}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Pages/Day"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[m.consistency,"%"]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]})]}),h&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Reading Session"}),n.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pages Read"}),n.jsx("input",{type:"number",value:L.pages,onChange:$=>z({...L,pages:Number($.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),n.jsx("input",{type:"text",value:L.surah,onChange:$=>z({...L,surah:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Fatiha"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verses"}),n.jsx("input",{type:"text",value:L.verses,onChange:$=>z({...L,verses:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 1-7"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:L.notes,onChange:$=>z({...L,notes:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any reflections or notes..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:P,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),n.jsx("button",{onClick:()=>w(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Bookmark"}),n.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),n.jsx("input",{type:"text",value:j.surah,onChange:$=>W({...j,surah:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Baqarah"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verse"}),n.jsx("input",{type:"text",value:j.verse,onChange:$=>W({...j,verse:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 255"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Page (Optional)"}),n.jsx("input",{type:"text",value:j.page,onChange:$=>W({...j,page:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 42"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:j.notes,onChange:$=>W({...j,notes:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Why this bookmark is important..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:I,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Set Bookmark"}),n.jsx("button",{onClick:()=>N(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),T&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Detailed Progress"}),n.jsx("button",{onClick:()=>O(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:m.totalPages}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),n.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:m.totalSessions}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sessions"})]}),n.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:m.averagePerDay}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg/Day"})]}),n.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[n.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[m.consistency,"%"]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Quran Completion Progress"}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:n.jsx("div",{className:"bg-emerald-500 h-4 rounded-full transition-all duration-300",style:{width:`${Math.min(m.totalPages/604*100,100)}%`}})}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[m.totalPages," of 604 pages completed (",Math.round(m.totalPages/604*100),"%)"]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{onClick:()=>O(!1),className:"w-full bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Close"})})]})}),H&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Daily Goal"}),n.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),n.jsx("input",{type:"number",value:t,onChange:$=>r(Number($.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1",max:"50"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 1-5 pages per day for consistent progress"})]}),n.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:n.jsxs("div",{className:"text-sm text-emerald-800 dark:text-emerald-200",children:[n.jsx("strong",{children:"At this pace:"})," You'll complete the Quran in approximately"," ",n.jsxs("span",{className:"font-bold",children:[Math.ceil(604/t)," days"]})]})})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>X(t),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Save Goal"}),n.jsx("button",{onClick:()=>S(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},jx=()=>{const{user:e}=Ye(),[t,r]=E.useState([]),[s,a]=E.useState(!1),[i,l]=E.useState({name:"",type:"good",category:"health"});E.useEffect(()=>{e&&o()},[e]);const o=async()=>{if(!e)return;const{data:h,error:w}=await R.from("habits").select("*").eq("user_id",e.id);if(h){const k=h.map(N=>({...N,completedToday:d(N.last_completed),badHabitFreeFor:N.type==="bad"?c(N.last_completed):void 0,color:u(N.category)}));r(k)}},d=h=>{if(!h)return!1;const w=new Date().toISOString().split("T")[0];return h===w},c=h=>{if(!h)return 0;const w=new Date(h),N=new Date().getTime()-w.getTime(),T=Math.floor(N/(1e3*60*60*24));return Math.max(0,T)},u=h=>{switch(h){case"health":return"bg-blue-500";case"spiritual":return"bg-emerald-500";case"productivity":return"bg-purple-500";case"learning":return"bg-orange-500";default:return"bg-gray-500"}},f=async(h,w)=>{if(!e)return;const k=new Date().toISOString().split("T")[0],N=t.find(S=>S.id===h);if(!N)return;let T=N.streak,O=k;w==="good"?N.completedToday?(T=Math.max(0,N.streak-1),O=N.lastCompleted||""):T=N.streak+1:N.completedToday||(T=0);const{error:H}=await R.from("habits").update({streak:T,last_completed:O}).eq("id",h);H||r(S=>S.map(L=>L.id===h?{...L,completedToday:!L.completedToday,streak:T,lastCompleted:O,badHabitFreeFor:w==="bad"?c(O):L.badHabitFreeFor}:L))},p=async()=>{if(!e||!i.name.trim())return;const{data:h,error:w}=await R.from("habits").insert({user_id:e.id,name:i.name,type:i.type,category:i.category,streak:0,last_completed:null}).select().single();h&&!w&&(r(k=>[...k,{...h,completedToday:!1,color:u(h.category),badHabitFreeFor:i.type==="bad"?0:void 0}]),l({name:"",type:"good",category:"health"}),a(!1))},y=t.filter(h=>h.type==="good"),v=t.filter(h=>h.type==="bad"),x=y.filter(h=>h.completedToday).length,C=y.length,m=C>0?x/C*100:0,g={health:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",spiritual:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300",productivity:"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300",learning:"bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-300"};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Habit Tracker"}),n.jsxs("button",{onClick:()=>a(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[n.jsx(on,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Habit"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(wt,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-medium",children:[x,"/",C]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[n.jsx("span",{children:"Good habits completed"}),n.jsxs("span",{children:[Math.round(m),"%"]})]}),n.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${m}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:y.length>0?Math.max(...y.map(h=>h.streak)):0}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Best Streak"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:t.filter(h=>h.streak>0).length}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Active Habits"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:v.length}),n.jsx("div",{className:"text-emerald-100 text-sm",children:"Bad Habits"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Good Habits"}),n.jsx("div",{className:"space-y-3",children:y.map(h=>n.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${h.completedToday?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${h.completedToday?"bg-emerald-500 text-white":`${h.color} text-white`}`,children:h.completedToday?n.jsx(jl,{className:"w-5 h-5"}):n.jsx(wt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:h.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g[h.category]}`,children:h.category})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(Qh,{className:"w-4 h-4"}),n.jsxs("span",{children:[h.streak," day streak"]})]})]})]}),n.jsx("button",{onClick:()=>f(h.id,"good"),className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${h.completedToday?"bg-emerald-500 text-white":"border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400"}`,children:h.completedToday&&n.jsx(jl,{className:"w-4 h-4"})})]},h.id))})]}),v.length>0&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bad Habits to Overcome"}),n.jsx("div",{className:"space-y-3",children:v.map(h=>n.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:n.jsx(bl,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:h.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g[h.category]}`,children:h.category})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(wr,{className:"w-4 h-4"}),n.jsxs("span",{children:[h.badHabitFreeFor||0," days free from this habit"]})]})]})]}),n.jsx("button",{onClick:()=>f(h.id,"bad"),className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Did it today"})]},h.id))})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Habit"}),n.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Name"}),n.jsx("input",{type:"text",value:i.name,onChange:h=>l({...i,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Meditate for 10 minutes"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Type"}),n.jsxs("select",{value:i.type,onChange:h=>l({...i,type:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"good",children:"Good Habit (to build)"}),n.jsx("option",{value:"bad",children:"Bad Habit (to overcome)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),n.jsxs("select",{value:i.category,onChange:h=>l({...i,category:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"health",children:"Health"}),n.jsx("option",{value:"spiritual",children:"Spiritual"}),n.jsx("option",{value:"productivity",children:"Productivity"}),n.jsx("option",{value:"learning",children:"Learning"})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),n.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Add Habit"})]})]})]})})]})},Nx=()=>{const{user:e}=Ye(),[t,r]=E.useState([]),[s,a]=E.useState(!1),[i,l]=E.useState(!1),[o,d]=E.useState(!1),[c,u]=E.useState(null),[f,p]=E.useState(!1),[y,v]=E.useState(!1),[x,C]=E.useState({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),[m,g]=E.useState({hours:1,notes:""});pc.useEffect(()=>{e&&h()},[e]);const h=async()=>{if(!e)return;const{data:b}=await R.from("exams").select("*").eq("user_id",e.id).order("date",{ascending:!0});b&&r(b)},w=async()=>{if(!e||!x.subject||!x.date||f){console.log("Validation failed or already adding:",{user:!!e,subject:x.subject,date:x.date,isAdding:f});return}p(!0);try{const b={user_id:e.id,subject:x.subject,date:x.date,time:x.time||null,location:x.location||null,type:x.type,target_hours:x.targetHours,study_hours:0};x.notes&&x.notes.trim()&&(b.notes=x.notes.trim()),console.log("Adding exam:",b);const{data:D,error:P}=await R.from("exams").insert(b).select();if(P){console.error("Error adding exam:",P),alert("Failed to add exam: "+P.message);return}console.log("Exam added successfully:",D),a(!1),C({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await h()}catch(b){console.error("Unexpected error:",b),alert("An unexpected error occurred while adding the exam.")}finally{p(!1)}},k=async()=>{if(!(!e||!c||!x.subject||!x.date||y)){v(!0);try{const b={subject:x.subject,date:x.date,time:x.time||null,location:x.location||null,type:x.type,target_hours:x.targetHours};x.notes&&x.notes.trim()&&(b.notes=x.notes.trim());const{error:D}=await R.from("exams").update(b).eq("id",c.id).eq("user_id",e.id);if(D){console.error("Error updating exam:",D),alert("Failed to update exam: "+D.message);return}l(!1),u(null),C({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await h()}catch(b){console.error("Unexpected error:",b),alert("An unexpected error occurred while updating the exam.")}finally{v(!1)}}},N=async b=>{if(!e)return;const{error:D}=await R.from("exams").delete().eq("id",b).eq("user_id",e.id);D||await h()},T=async()=>{if(!e||!c||m.hours<=0)return;const b=c.studyHours+m.hours,{error:D}=await R.from("exams").update({study_hours:b}).eq("id",c.id).eq("user_id",e.id);D||(d(!1),u(null),g({hours:1,notes:""}),await h())},O=b=>{u(b),C({subject:b.subject,date:b.date,time:b.time,location:b.location,type:b.type,targetHours:b.targetHours,notes:b.notes||""}),l(!0)},H=b=>{u(b),d(!0)},S=b=>{const D=new Date(b),P=new Date,I=D.getTime()-P.getTime(),F=Math.ceil(I/(1e3*60*60*24));return Math.max(0,F)},L=b=>{switch(b){case"final":return"bg-red-100 text-red-800";case"class_test":return"bg-orange-100 text-orange-800";case"quiz":return"bg-blue-100 text-blue-800";case"assignment":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},z=b=>{switch(b){case"final":return"Final";case"class_test":return"Class Test";case"quiz":return"Quiz";case"assignment":return"Assignment";default:return b}},j=b=>b<=3?"text-red-600 dark:text-red-400":b<=7?"text-orange-600 dark:text-orange-400":b<=14?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",W=t.sort((b,D)=>new Date(b.date).getTime()-new Date(D.date).getTime())[0],G=W?S(W.date):0;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Exam Countdown"}),n.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(on,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Exam"})]})]}),W&&n.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Next Exam"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(wr,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:W.subject})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-3xl font-bold",children:G}),n.jsx("div",{className:"text-red-100 text-sm",children:"Days Left"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-xl font-bold",children:[W.studyHours,"h"]}),n.jsx("div",{className:"text-red-100 text-sm",children:"Hours Studied"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-xl font-bold",children:[Math.round(W.studyHours/W.targetHours*100),"%"]}),n.jsx("div",{className:"text-red-100 text-sm",children:"Progress"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upcoming Exams"}),n.jsxs("div",{className:"space-y-4",children:[t.map(b=>{const D=S(b.date),P=b.studyHours/b.targetHours*100;return n.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:n.jsx(Re,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:b.subject}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(Ve,{className:"w-4 h-4"}),n.jsxs("span",{children:[b.time,"  ",b.location]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`text-2xl font-bold ${j(D)}`,children:D}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"days left"})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${L(b.type)}`,children:z(b.type)}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[b.date,"  ",b.time]})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-1",children:[n.jsx("span",{children:"Study Progress"}),n.jsxs("span",{children:[b.studyHours,"h / ",b.targetHours,"h"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${P>=100?"bg-green-500":P>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(P,100)}%`}})})]}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[n.jsxs("span",{children:[Math.round(P),"% complete"]}),n.jsxs("span",{children:[b.targetHours-b.studyHours,"h remaining"]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[n.jsx("button",{onClick:()=>H(b),className:"px-3 py-1 bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm hover:bg-emerald-200 dark:hover:bg-emerald-900/30 transition-colors",children:"Log Study"}),n.jsx("button",{onClick:()=>O(b),className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-sm hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:n.jsx(Xh,{className:"w-3 h-3"})}),n.jsx("button",{onClick:()=>N(b.id),className:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:n.jsx(_o,{className:"w-3 h-3"})})]})]},b.id)}),t.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Re,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No exams scheduled yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Add your first exam to get started!"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recommended Study Schedule"}),n.jsxs("div",{className:"space-y-3",children:[t.slice(0,3).map(b=>{const D=S(b.date),P=b.targetHours-b.studyHours,I=D>0?Math.ceil(P/D):0;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:n.jsx(wt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:b.subject}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:P>0?`${P}h remaining`:"Study complete!"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:I>0?`${I}h/day`:"Complete!"}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[D," days left"]})]})]},b.id)}),t.length===0&&n.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:n.jsx("p",{className:"text-sm",children:"No study schedule available"})})]})]}),t.length>0&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Exam Statistics"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Exams"})]}),n.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t.filter(b=>S(b.date)<=7).length}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),n.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:Math.round(t.reduce((b,D)=>b+D.studyHours/D.targetHours*100,0)/t.length)}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Progress"})]}),n.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.reduce((b,D)=>b+D.studyHours,0)}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Hours Studied"})]})]})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Exam"}),n.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:x.subject,onChange:b=>C({...x,subject:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:x.date,onChange:b=>C({...x,date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),n.jsx("input",{type:"time",value:x.time,onChange:b=>C({...x,time:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:x.location,onChange:b=>C({...x,location:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),n.jsxs("select",{value:x.type,onChange:b=>C({...x,type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"class_test",children:"Class Test"}),n.jsx("option",{value:"final",children:"Final"}),n.jsx("option",{value:"quiz",children:"Quiz"}),n.jsx("option",{value:"assignment",children:"Assignment"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),n.jsx("input",{type:"number",value:x.targetHours,onChange:b=>C({...x,targetHours:Number(b.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:x.notes,onChange:b=>C({...x,notes:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:w,disabled:f,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${f?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:f?"Adding...":"Add Exam"}),n.jsx("button",{onClick:()=>a(!1),disabled:f,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${f?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200"}`,children:"Cancel"})]})]})}),i&&c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Exam"}),n.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:x.subject,onChange:b=>C({...x,subject:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:x.date,onChange:b=>C({...x,date:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),n.jsx("input",{type:"time",value:x.time,onChange:b=>C({...x,time:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:x.location,onChange:b=>C({...x,location:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),n.jsxs("select",{value:x.type,onChange:b=>C({...x,type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"class_test",children:"Class Test"}),n.jsx("option",{value:"final",children:"Final"}),n.jsx("option",{value:"quiz",children:"Quiz"}),n.jsx("option",{value:"assignment",children:"Assignment"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),n.jsx("input",{type:"number",value:x.targetHours,onChange:b=>C({...x,targetHours:Number(b.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:x.notes,onChange:b=>C({...x,notes:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:k,disabled:y,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:y?"Updating...":"Update Exam"}),n.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),o&&c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Study Session"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:n.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[n.jsx("strong",{children:c.subject}),n.jsx("br",{}),"Current progress: ",c.studyHours,"h / ",c.targetHours,"h"]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours Studied"}),n.jsx("input",{type:"number",value:m.hours,onChange:b=>g({...m,hours:Number(b.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"0.5",step:"0.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:m.notes,onChange:b=>g({...m,notes:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"What did you study today?"})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:T,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),n.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},_x=()=>{const{user:e}=Ye(),[t,r]=E.useState([]),[s,a]=E.useState([]),[i,l]=E.useState(!0),[o,d]=E.useState(!1),[c,u]=E.useState(!1),[f,p]=E.useState(null),[y,v]=E.useState({subject:"",time:"",endTime:"",location:"",instructor:"",day:"Monday",color:"#3B82F6"}),x=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],C=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"];E.useEffect(()=>{e&&m()},[e]);const m=async()=>{try{const[S,L]=await Promise.all([R.from("attendance_records").select("*").eq("user_id",e==null?void 0:e.id).order("date",{ascending:!1}),R.from("class_schedules").select("*").eq("user_id",e==null?void 0:e.id).order("day",{ascending:!0})]);S.data&&r(S.data),L.data&&a(L.data)}catch(S){console.error("Error fetching data:",S)}finally{l(!1)}},g=async()=>{if(!(!e||!y.subject||!y.time))try{const{data:S,error:L}=await R.from("class_schedules").insert([{...y,user_id:e.id}]).select().single();if(L)throw L;S&&(a([...s,S]),v({subject:"",time:"",endTime:"",location:"",instructor:"",day:"Monday",color:"#3B82F6"}),d(!1))}catch(S){console.error("Error adding class:",S)}},h=async S=>{if(!e||!f)return;const L=new Date().toISOString().split("T")[0];try{const{data:z}=await R.from("attendance_records").select("id").eq("user_id",e.id).eq("subject",f.subject).eq("date",L).single();if(z){const{error:j}=await R.from("attendance_records").update({status:S}).eq("id",z.id);if(j)throw j}else{const{data:j,error:W}=await R.from("attendance_records").insert([{user_id:e.id,subject:f.subject,date:L,status:S}]).select().single();if(W)throw W;j&&r([j,...t])}m(),u(!1),p(null)}catch(z){console.error("Error marking attendance:",z)}},w=async S=>{try{const{error:L}=await R.from("class_schedules").delete().eq("id",S);if(L)throw L;a(s.filter(z=>z.id!==S))}catch(L){console.error("Error deleting class:",L)}},k=S=>{const L=t.filter(G=>G.subject===S),z=L.filter(G=>G.status!=="cancelled").length,j=L.filter(G=>G.status==="present").length,W=z>0?Math.round(j/z*100):0;return{totalClasses:z,presentClasses:j,percentage:W}},N=()=>{const S=new Date,L=x[S.getDay()===0?6:S.getDay()-1],z=S.getHours()*60+S.getMinutes();return s.find(j=>{if(j.day!==L)return!1;const[W,G]=j.time.split(":").map(Number),[b,D]=j.endTime.split(":").map(Number),P=W*60+G,I=b*60+D;return z>=P&&z<=I})},T=()=>{const S=new Date,L=x[S.getDay()===0?6:S.getDay()-1],z=S.getHours()*60+S.getMinutes(),j=s.filter(G=>G.day===L).filter(G=>{const[b,D]=G.time.split(":").map(Number);return b*60+D>z}).sort((G,b)=>{const D=G.time.split(":").map(Number),P=b.time.split(":").map(Number);return D[0]*60+D[1]-(P[0]*60+P[1])});if(j.length>0)return j[0];const W=x.indexOf(L);for(let G=1;G<7;G++){const b=(W+G)%7,D=x[b],P=s.filter(I=>I.day===D).sort((I,F)=>{const Z=I.time.split(":").map(Number),X=F.time.split(":").map(Number);return Z[0]*60+Z[1]-(X[0]*60+X[1])});if(P.length>0)return P[0]}return null},O=N(),H=T();return i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.jsxs("div",{className:"space-y-6",children:[O&&n.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"bg-white/20 rounded-full p-2",children:n.jsx(Re,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Current Class"}),n.jsx("p",{className:"text-emerald-100",children:O.subject})]})]}),n.jsx("button",{onClick:()=>{p(O),u(!0)},className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:"Mark Attendance"})]}),n.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm text-emerald-100",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ve,{className:"w-4 h-4"}),n.jsxs("span",{children:[O.time," - ",O.endTime]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(ki,{className:"w-4 h-4"}),n.jsx("span",{children:O.location})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(kt,{className:"w-4 h-4"}),n.jsx("span",{children:O.instructor})]})]})]}),H&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"bg-white/20 rounded-full p-2",children:n.jsx(Xp,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Next Class"}),n.jsx("p",{className:"text-blue-100",children:H.subject})]})]}),n.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm text-blue-100",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(wr,{className:"w-4 h-4"}),n.jsx("span",{children:H.day})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ve,{className:"w-4 h-4"}),n.jsxs("span",{children:[H.time," - ",H.endTime]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(ki,{className:"w-4 h-4"}),n.jsx("span",{children:H.location})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center space-x-2",children:[n.jsx(wr,{className:"w-6 h-6"}),n.jsx("span",{children:"Class Schedule"})]}),n.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(on,{className:"w-4 h-4"}),n.jsx("span",{children:"Add Class"})]})]}),s.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[n.jsx(Re,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No classes scheduled yet"}),n.jsx("p",{className:"text-sm",children:"Add your first class to get started"})]}):n.jsx("div",{className:"grid gap-4",children:x.map(S=>{const L=s.filter(z=>z.day===S);return L.length===0?null:n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"font-semibold text-lg text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 pb-2",children:S}),n.jsx("div",{className:"grid gap-3",children:L.sort((z,j)=>z.time.localeCompare(j.time)).map(z=>{const j=k(z.subject);return n.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md transition-all",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-3 h-12 rounded-full",style:{backgroundColor:z.color}}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-lg text-gray-800 dark:text-white",children:z.subject}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:[z.time," - ",z.endTime]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(ki,{className:"w-3 h-3"}),n.jsx("span",{children:z.location})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(kt,{className:"w-3 h-3"}),n.jsx("span",{children:z.instructor})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("button",{onClick:()=>{p(z),h("present")},className:"bg-green-100 hover:bg-green-200 text-green-700 p-2 rounded-lg transition-colors",title:"Mark Present",children:n.jsx(ec,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{p(z),h("absent")},className:"bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded-lg transition-colors",title:"Mark Absent",children:n.jsx(sc,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{p(z),h("late")},className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700 p-2 rounded-lg transition-colors",title:"Mark Late",children:n.jsx(Ve,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{p(z),h("cancelled")},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 p-2 rounded-lg transition-colors",title:"Mark Cancelled",children:n.jsx(ye,{className:"w-4 h-4"})})]}),n.jsx("button",{onClick:()=>w(z.id),className:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors",children:n.jsx(_o,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Attendance: "}),n.jsxs("span",{className:`font-semibold ${j.percentage>=75?"text-green-600":j.percentage>=50?"text-yellow-600":"text-red-600"}`,children:[j.percentage,"%"]})]}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[j.presentClasses,"/",j.totalClasses," classes"]})]}),n.jsx("div",{className:"flex items-center space-x-1",children:n.jsx(dn,{className:`w-4 h-4 ${j.percentage>=75?"text-green-600":j.percentage>=50?"text-yellow-600":"text-red-600"}`})})]})})]},z.id)})})]},S)})})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Class"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject"}),n.jsx("input",{type:"text",value:y.subject,onChange:S=>v({...y,subject:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter subject name"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),n.jsx("input",{type:"time",value:y.time,onChange:S=>v({...y,time:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),n.jsx("input",{type:"time",value:y.endTime,onChange:S=>v({...y,endTime:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Day"}),n.jsx("select",{value:y.day,onChange:S=>v({...y,day:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:x.map(S=>n.jsx("option",{value:S,children:S},S))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),n.jsx("input",{type:"text",value:y.location,onChange:S=>v({...y,location:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Room number or location"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Instructor"}),n.jsx("input",{type:"text",value:y.instructor,onChange:S=>v({...y,instructor:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Instructor name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),n.jsx("div",{className:"flex space-x-2",children:C.map(S=>n.jsx("button",{onClick:()=>v({...y,color:S}),className:`w-8 h-8 rounded-full border-2 ${y.color===S?"border-gray-800 dark:border-white":"border-gray-300"}`,style:{backgroundColor:S}},S))})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:g,disabled:!y.subject||!y.time,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Add Class"})]})]})}),c&&f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Mark Attendance"}),n.jsx("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Subject: ",n.jsx("span",{className:"font-semibold",children:f.subject})]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Date: ",n.jsx("span",{className:"font-semibold",children:new Date().toLocaleDateString()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:()=>h("present"),className:"flex items-center justify-center space-x-2 p-4 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg transition-colors",children:[n.jsx(ec,{className:"w-5 h-5"}),n.jsx("span",{children:"Present"})]}),n.jsxs("button",{onClick:()=>h("absent"),className:"flex items-center justify-center space-x-2 p-4 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors",children:[n.jsx(sc,{className:"w-5 h-5"}),n.jsx("span",{children:"Absent"})]}),n.jsxs("button",{onClick:()=>h("late"),className:"flex items-center justify-center space-x-2 p-4 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 rounded-lg transition-colors",children:[n.jsx(Ve,{className:"w-5 h-5"}),n.jsx("span",{children:"Late"})]}),n.jsxs("button",{onClick:()=>h("cancelled"),className:"flex items-center justify-center space-x-2 p-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[n.jsx(ye,{className:"w-5 h-5"}),n.jsx("span",{children:"Cancelled"})]})]})]})})]})},Sx=()=>{var w;const{user:e}=Ye(),[t,r]=E.useState([]),[s,a]=E.useState(8),[i,l]=E.useState(!1),[o,d]=E.useState(!1),[c,u]=E.useState({date:"",bedtime:"",wakeTime:"",quality:3,notes:""});E.useEffect(()=>{e&&f()},[e]);const f=async()=>{if(!e)return;const{data:k}=await R.from("sleep_records").select("*").eq("user_id",e.id).order("date",{ascending:!1}).limit(30);k&&r(k)},p=async()=>{if(!e||!c.date||!c.bedtime||!c.wakeTime)return;d(!0);const k=new Date(`2000-01-01T${c.bedtime}`);let T=(new Date(`2000-01-01T${c.wakeTime}`).getTime()-k.getTime())/(1e3*60*60);T<0&&(T+=24);const{error:O}=await R.from("sleep_records").insert({user_id:e.id,date:c.date,bedtime:c.bedtime,wake_time:c.wakeTime,duration:Math.round(T*10)/10,quality:c.quality,notes:c.notes||null});O||(l(!1),u({date:"",bedtime:"",wakeTime:"",quality:3,notes:""}),await f()),d(!1)},y=()=>{if(t.length===0)return{avgDuration:0,avgQuality:0,goalAchieved:0,totalNights:0,bestNight:null,worstNight:null};const N=t.reduce((L,z)=>L+z.duration,0)/t.length,T=t.reduce((L,z)=>L+z.quality,0)/t.length,O=t.filter(L=>L.duration>=s).length,H=t.reduce((L,z)=>z.quality>L.quality?z:L),S=t.reduce((L,z)=>z.quality<L.quality?z:L);return{avgDuration:Math.round(N*10)/10,avgQuality:Math.round(T*10)/10,goalAchieved:O,totalNights:t.length,bestNight:H,worstNight:S}},v=k=>k>=4?"bg-green-100 dark:bg-green-900/20":k>=3?"bg-yellow-100 dark:bg-yellow-900/20":"bg-red-100 dark:bg-red-900/20",x=()=>{if(!t[0])return null;const T=new Date().getHours();return T>=22||T<=6?{status:"sleep",message:"Sleep time"}:{status:"awake",message:"Awake time"}},C=()=>{if(t.length<2)return"stable";const k=t.slice(0,7),N=t.slice(7,14);if(k.length===0||N.length===0)return"stable";const T=k.reduce((H,S)=>H+S.duration,0)/k.length,O=N.reduce((H,S)=>H+S.duration,0)/N.length;return T>O+.5?"improving":T<O-.5?"declining":"stable"},m=y(),g=x(),h=C();return E.useEffect(()=>{const k=new Date().toISOString().split("T")[0];u(N=>({...N,date:k}))},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Sleep Tracker"}),n.jsxs("button",{onClick:()=>l(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(on,{className:"w-4 h-4"}),n.jsx("span",{children:"Log Sleep"})]})]}),g&&n.jsxs("div",{className:`rounded-xl p-6 text-white ${g.status==="sleep"?"bg-gradient-to-r from-indigo-500 to-purple-600":"bg-gradient-to-r from-orange-500 to-yellow-600"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Current Status"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[g.status==="sleep"?n.jsx(ut,{className:"w-5 h-5"}):n.jsx(No,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:g.message})]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[((w=t[0])==null?void 0:w.duration)||0,"h"]}),n.jsx("div",{className:"text-indigo-100 text-sm",children:"Last Night"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[s,"h"]}),n.jsx("div",{className:"text-indigo-100 text-sm",children:"Daily Goal"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[m.avgDuration,"h"]}),n.jsx("div",{className:"text-indigo-100 text-sm",children:"7-Day Average"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[m.avgQuality,"/5"]}),n.jsx("div",{className:"text-indigo-100 text-sm",children:"Avg Quality"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Goal & Trends"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Sleep Goal (hours)"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("input",{type:"number",value:s,onChange:k=>a(Number(k.target.value)),min:"6",max:"12",step:"0.5",className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"hours per night"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Goal Achievement"}),n.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[m.totalNights>0?Math.round(m.goalAchieved/m.totalNights*100):0,"%"]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m.goalAchieved," of ",m.totalNights," nights"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Trend"}),n.jsx("div",{className:`text-2xl font-bold ${h==="improving"?"text-green-600 dark:text-green-400":h==="declining"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:h.charAt(0).toUpperCase()+h.slice(1)}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last 7 days vs previous week"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Overview"}),n.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[t.slice(0,7).reverse().map((k,N)=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:new Date(k.date).toLocaleDateString("en-US",{weekday:"short"})}),n.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[k.duration,"h"]}),n.jsx("div",{className:"flex justify-center mt-1",children:[...Array(5)].map((T,O)=>n.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${O<k.quality?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},O))})]})]},k.id)),t.length===0&&n.jsxs("div",{className:"col-span-7 text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(ut,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No sleep records yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Average Duration"}),n.jsx(Ve,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]}),n.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-2",children:[m.avgDuration,"h"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last 7 days"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Sleep Quality"}),n.jsx(tc,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),n.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:[m.avgQuality,"/5"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average rating"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Consistency"}),n.jsx(wt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})]}),n.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:[m.totalNights>0?Math.round(m.goalAchieved/m.totalNights*100):0,"%"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Goal achievement"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Sleep Records"}),n.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(k=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${v(k.quality)}`,children:n.jsx(ut,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:k.date}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[k.bedtime," - ",k.wakeTime]}),k.notes&&n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:k.notes})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[k.duration,"h"]}),n.jsx("div",{className:"flex justify-end",children:[...Array(5)].map((N,T)=>n.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${T<k.quality?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},T))})]})]},k.id)),t.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(ut,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),n.jsx("p",{children:"No sleep records yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Tips"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900/20 rounded-full flex items-center justify-center",children:n.jsx(e0,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Consistent Schedule"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Go to bed and wake up at the same time every day"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:n.jsx(ut,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Sleep Environment"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Keep your bedroom cool, dark, and quiet"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center",children:n.jsx(Zh,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Morning Light"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get sunlight exposure in the morning"})]})]}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:n.jsx(Ve,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Pre-Sleep Routine"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Develop a relaxing bedtime routine"})]})]})]})]}),i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Sleep"}),n.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:c.date,onChange:k=>u({...c,date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Bedtime ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",value:c.bedtime,onChange:k=>u({...c,bedtime:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Wake Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"time",value:c.wakeTime,onChange:k=>u({...c,wakeTime:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Quality"}),n.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(k=>n.jsx("button",{onClick:()=>u({...c,quality:k}),className:`p-2 rounded-lg transition-colors ${c.quality>=k?"text-yellow-500 bg-yellow-100 dark:bg-yellow-900/20":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:n.jsx(tc,{className:"w-5 h-5"})},k))}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[c.quality===1&&"Very Poor",c.quality===2&&"Poor",c.quality===3&&"Fair",c.quality===4&&"Good",c.quality===5&&"Excellent"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),n.jsx("textarea",{value:c.notes,onChange:k=>u({...c,notes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"How did you sleep? Any factors that affected your sleep?"})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:p,disabled:o||!c.date||!c.bedtime||!c.wakeTime,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:o?"Logging...":"Log Sleep"}),n.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},Cx=({preloadedData:e})=>{const{user:t}=Ye(),[r,s]=E.useState([]),[a,i]=E.useState({}),[l,o]=E.useState(!0),[d,c]=E.useState("all"),[u,f]=E.useState(!1);return n.jsx("div",{className:"space-y-6"})},Ex=()=>{var z;const{user:e,signOut:t}=Ye(),[r,s]=E.useState(!1),[a,i]=E.useState(!1),[l,o]=E.useState(!1),[d,c]=E.useState(""),[u,f]=E.useState(!1),[p,y]=E.useState(!1),[v,x]=E.useState({totalStudyHours:0,totalPrayersCompleted:0,totalQuranPages:0,streakDays:0,achievementsUnlocked:0,attendanceRate:0,totalSleepHours:0,averageSleepQuality:0,totalHabitsCompleted:0,totalExams:0,memberSince:"",lastActive:""}),[C,m]=E.useState([]),[g,h]=E.useState({name:((z=e==null?void 0:e.user_metadata)==null?void 0:z.full_name)||"",email:(e==null?void 0:e.email)||"",joinDate:"2024-01-01",university:"",major:"",year:"1st",location:"",timezone:"UTC+2",dailyStudyGoal:6,sleepGoal:8,weeklyQuranGoal:14,phone:"",website:"",bio:""});E.useEffect(()=>{e&&(w(),k(),N())},[e]);const w=async()=>{var W;if(!e)return;const{data:j}=await R.from("profiles").select("*").eq("user_id",e.id).maybeSingle();j&&h({name:j.full_name||"",email:j.email||"",joinDate:((W=j.created_at)==null?void 0:W.split("T")[0])||"2024-01-01",university:j.university||"",major:j.major||"",year:j.year||"Senior",location:j.location||"",timezone:j.timezone||"UTC+2",dailyStudyGoal:j.daily_study_goal||6,sleepGoal:j.sleep_goal||8,weeklyQuranGoal:j.weekly_quran_goal||14,phone:j.phone||"",website:j.website||"",bio:j.bio||""})},k=async()=>{if(e)try{const{data:j}=await R.from("study_sessions").select("*").eq("user_id",e.id),{data:W}=await R.from("prayer_records").select("*").eq("user_id",e.id),{data:G}=await R.from("quran_sessions").select("*").eq("user_id",e.id),{data:b}=await R.from("attendance_records").select("*").eq("user_id",e.id),{data:D}=await R.from("sleep_records").select("*").eq("user_id",e.id),{data:P}=await R.from("habit_records").select("*").eq("user_id",e.id),{data:I}=await R.from("exams").select("*").eq("user_id",e.id),F=(j==null?void 0:j.reduce((ne,fe)=>ne+(fe.duration||0),0))||0,Z=(W==null?void 0:W.length)||0,X=(G==null?void 0:G.reduce((ne,fe)=>ne+(fe.pages_read||0),0))||0,je=(D==null?void 0:D.reduce((ne,fe)=>ne+(fe.duration||0),0))||0,$=(D==null?void 0:D.length)>0?D.reduce((ne,fe)=>ne+(fe.quality||0),0)/D.length:0,_=(P==null?void 0:P.length)||0,U=(I==null?void 0:I.length)||0,B=(b==null?void 0:b.filter(ne=>ne.status==="present").length)||0,K=(b==null?void 0:b.length)||0,re=K>0?Math.round(B/K*100):0,ee=Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24))),q=Math.min(8,Math.floor(F/10)+Math.floor(Z/10));x({totalStudyHours:Math.round(F*10)/10,totalPrayersCompleted:Z,totalQuranPages:X,streakDays:ee,achievementsUnlocked:q,attendanceRate:re,totalSleepHours:Math.round(je*10)/10,averageSleepQuality:Math.round($*10)/10,totalHabitsCompleted:_,totalExams:U,memberSince:g.joinDate,lastActive:new Date().toISOString().split("T")[0]})}catch(j){console.error("Error loading user stats:",j)}},N=async()=>{if(e)try{const j=[],{data:W}=await R.from("study_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);W==null||W.forEach(D=>{j.push({id:D.id,type:"study",description:`Studied ${D.subject} for ${D.duration}h`,time:new Date(D.created_at).toLocaleDateString(),value:`${D.duration}h`})});const{data:G}=await R.from("prayer_records").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);G==null||G.forEach(D=>{j.push({id:D.id,type:"prayer",description:`Completed ${D.prayer_name}`,time:new Date(D.created_at).toLocaleDateString(),value:D.prayer_name})});const{data:b}=await R.from("quran_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);b==null||b.forEach(D=>{j.push({id:D.id,type:"quran",description:`Read ${D.pages_read} pages of Quran`,time:new Date(D.created_at).toLocaleDateString(),value:`${D.pages_read} pages`})}),j.sort((D,P)=>new Date(P.time).getTime()-new Date(D.time).getTime()),m(j.slice(0,10))}catch(j){console.error("Error loading recent activities:",j)}},T=async()=>{if(e){y(!0);try{const{error:j}=await R.from("profiles").upsert({user_id:e.id,full_name:g.name,email:g.email,university:g.university,major:g.major,year:g.year,location:g.location,timezone:g.timezone,daily_study_goal:g.dailyStudyGoal,sleep_goal:g.sleepGoal,weekly_quran_goal:g.weeklyQuranGoal,phone:g.phone,website:g.website,bio:g.bio,updated_at:new Date().toISOString()});j||(o(!1),await w())}catch(j){console.error("Error saving profile:",j)}finally{y(!1)}}},O=async()=>{if(!(!e||d!=="RESET")){f(!0);try{await Promise.all([R.from("study_sessions").delete().eq("user_id",e.id),R.from("prayer_records").delete().eq("user_id",e.id),R.from("quran_sessions").delete().eq("user_id",e.id),R.from("habit_records").delete().eq("user_id",e.id),R.from("class_schedules").delete().eq("user_id",e.id),R.from("attendance_records").delete().eq("user_id",e.id),R.from("sleep_records").delete().eq("user_id",e.id),R.from("exams").delete().eq("user_id",e.id)]),s(!1),c(""),await k(),await N(),alert("All data has been reset successfully!")}catch(j){console.error("Error resetting data:",j),alert("Error resetting data. Please try again.")}finally{f(!1)}}},H=async()=>{if(!(!e||d!=="DELETE FOREVER")){f(!0);try{await Promise.all([R.from("study_sessions").delete().eq("user_id",e.id),R.from("prayer_records").delete().eq("user_id",e.id),R.from("quran_sessions").delete().eq("user_id",e.id),R.from("habit_records").delete().eq("user_id",e.id),R.from("class_schedules").delete().eq("user_id",e.id),R.from("attendance_records").delete().eq("user_id",e.id),R.from("sleep_records").delete().eq("user_id",e.id),R.from("exams").delete().eq("user_id",e.id),R.from("profiles").delete().eq("user_id",e.id)]),await t()}catch(j){console.error("Error deleting account:",j),alert("Error deleting account. Please try again.")}finally{f(!1)}}},S=async()=>{if(e)try{const j={profile:g,stats:v,activities:C,exportDate:new Date().toISOString()},W=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),G=URL.createObjectURL(W),b=document.createElement("a");b.href=G,b.download=`user-data-${e.id}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(G)}catch(j){console.error("Error exporting data:",j),alert("Error exporting data. Please try again.")}},L=j=>{switch(j){case"study":return n.jsx(Re,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"prayer":return n.jsx(Xt,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"quran":return n.jsx(Re,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"});case"habit":return n.jsx(wt,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});case"attendance":return n.jsx(kt,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"});case"sleep":return n.jsx(ut,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"});case"achievement":return n.jsx(xa,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"});default:return n.jsx(wt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Profile"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:S,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(tx,{className:"w-4 h-4"}),n.jsx("span",{children:"Export Data"})]}),n.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(Xh,{className:"w-4 h-4"}),n.jsx("span",{children:"Edit Profile"})]})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-xl p-6 text-white shadow-lg",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center shadow-inner",children:n.jsx(kt,{className:"w-10 h-10"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-2xl font-bold",children:g.name}),n.jsx("p",{className:"text-blue-100",children:g.email}),n.jsxs("p",{className:"text-blue-100",children:[g.major,"  ",g.year]}),n.jsx("p",{className:"text-blue-100",children:g.university}),g.bio&&n.jsxs("p",{className:"text-blue-100 mt-2 italic",children:['"',g.bio,'"']})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-blue-100",children:"Member since"}),n.jsx("div",{className:"font-medium",children:new Date(g.joinDate).toLocaleDateString()}),n.jsx("div",{className:"text-sm text-blue-100 mt-2",children:"Last active"}),n.jsx("div",{className:"font-medium",children:v.lastActive})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Study Progress"}),n.jsx(dn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total hours"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[v.totalStudyHours,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Daily goal"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.dailyStudyGoal,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Current streak"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[v.streakDays," days"]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Spiritual Progress"}),n.jsx(Xt,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Prayers completed"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:v.totalPrayersCompleted})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Quran pages read"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:v.totalQuranPages})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Weekly Quran goal"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[g.weeklyQuranGoal," pages"]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Health & Habits"}),n.jsx(wt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep hours"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[v.totalSleepHours,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep quality"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[v.averageSleepQuality,"/5"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Habits completed"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:v.totalHabitsCompleted})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Achievements"}),n.jsx(xa,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Unlocked"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[v.achievementsUnlocked,"/8"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Attendance rate"}),n.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[v.attendanceRate,"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total exams"}),n.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:v.totalExams})]})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Data Management"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(hx,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Reset All Data"}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Clear all tracking data but keep your account"})]})]}),n.jsx("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors",children:"Reset Data"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(_o,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Delete Account"}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Permanently delete your account and all data"})]})]}),n.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete Account"})]})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Activity"}),n.jsx("div",{className:"space-y-3",children:C.length>0?C.map((j,W)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-white dark:bg-gray-600 rounded-full flex items-center justify-center shadow-sm",children:L(j.type)}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:j.description}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:j.time})]})]}),j.value&&n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:j.value})]},j.id||W)):n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx("p",{children:"No recent activity"}),n.jsx("p",{className:"text-sm mt-1",children:"Start using the app to see your activity here"})]})})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Profile"}),n.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(ye,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Full Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:g.name,onChange:j=>h({...g,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",value:g.email,onChange:j=>h({...g,email:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"University"}),n.jsx("input",{type:"text",value:g.university,onChange:j=>h({...g,university:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Major"}),n.jsx("input",{type:"text",value:g.major,onChange:j=>h({...g,major:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Academic Year"}),n.jsxs("select",{value:g.year,onChange:j=>h({...g,year:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[n.jsx("option",{value:"1st",children:"1st Year"}),n.jsx("option",{value:"2nd",children:"2nd Year"}),n.jsx("option",{value:"3rd",children:"3rd Year"}),n.jsx("option",{value:"4th",children:"4th Year"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),n.jsx("input",{type:"text",value:g.location,onChange:j=>h({...g,location:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),n.jsx("input",{type:"tel",value:g.phone,onChange:j=>h({...g,phone:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Website"}),n.jsx("input",{type:"url",value:g.website,onChange:j=>h({...g,website:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Study Goal (hours)"}),n.jsx("input",{type:"number",value:g.dailyStudyGoal,onChange:j=>h({...g,dailyStudyGoal:Number(j.target.value)}),min:"1",max:"24",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sleep Goal (hours)"}),n.jsx("input",{type:"number",value:g.sleepGoal,onChange:j=>h({...g,sleepGoal:Number(j.target.value)}),min:"6",max:"12",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weekly Quran Goal (pages)"}),n.jsx("input",{type:"number",value:g.weeklyQuranGoal,onChange:j=>h({...g,weeklyQuranGoal:Number(j.target.value)}),min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),n.jsx("textarea",{value:g.bio,onChange:j=>h({...g,bio:j.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Tell us about yourself..."})]})]}),n.jsxs("div",{className:"flex space-x-3 mt-6",children:[n.jsx("button",{onClick:T,disabled:p||!g.name||!g.email,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center space-x-2",children:p?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Saving..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Yh,{className:"w-4 h-4"}),n.jsx("span",{children:"Save Changes"})]})}),n.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),r&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(bl,{className:"w-6 h-6 text-yellow-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Reset All Data"})]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete all your tracking data including study sessions, prayers, habits, and more. Your account will remain active."}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "RESET" to confirm:'}),n.jsx("input",{type:"text",value:d,onChange:j=>c(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type RESET"})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>{s(!1),c("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),n.jsx("button",{onClick:O,disabled:d!=="RESET"||u,className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Resetting...":"Reset Data"})]})]})}),a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx(bl,{className:"w-6 h-6 text-red-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Delete Account"})]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete your account and all associated data. This action cannot be undone."}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "DELETE FOREVER" to confirm:'}),n.jsx("input",{type:"text",value:d,onChange:j=>c(j.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type DELETE FOREVER"})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>{i(!1),c("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),n.jsx("button",{onClick:H,disabled:d!=="DELETE FOREVER"||u,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Deleting...":"Delete Account"})]})]})})]})},Tx=()=>{const{user:e,loading:t}=Ye(),{preloadedData:r,refreshData:s}=Kp(),[a,i]=E.useState("dashboard"),[l,o]=E.useState(!1);if(t)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xl",children:"Loading..."})});if(!e)return n.jsx(xx,{});const d=()=>{switch(a){case"dashboard":return n.jsx(ac,{setActiveTab:i,preloadedData:r});case"study":return n.jsx(wx,{preloadedData:r,refreshData:s});case"prayer":return n.jsx(kx,{preloadedData:r,refreshData:s});case"quran":return n.jsx(bx,{preloadedData:r,refreshData:s});case"habits":return n.jsx(jx,{preloadedData:r,refreshData:s});case"exam":return n.jsx(Nx,{preloadedData:r,refreshData:s});case"routine":case"attendance":return n.jsx(_x,{preloadedData:r,refreshData:s});case"sleep":return n.jsx(Sx,{preloadedData:r,refreshData:s});case"achievements":return n.jsx(Cx,{preloadedData:r});case"profile":return n.jsx(Ex,{preloadedData:r,refreshData:s});default:return n.jsx(ac,{setActiveTab:i,preloadedData:r})}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 dark:from-gray-900 dark:to-emerald-900 relative",children:[n.jsx(mx,{}),n.jsx(px,{activeTab:a,setActiveTab:i,isOpen:l,setIsOpen:o}),n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"hidden lg:block",children:n.jsx(vx,{activeTab:a,setActiveTab:i})}),n.jsx("main",{className:"flex-1 lg:ml-64",children:n.jsx("div",{className:"p-4 lg:p-6 pt-20 lg:pt-6 pb-20 lg:pb-6",children:d()})})]})]})};function Px(){return n.jsx(Qp,{children:n.jsx(Gp,{children:n.jsx(Tx,{})})})}vh(document.getElementById("root")).render(n.jsx(E.StrictMode,{children:n.jsx(Px,{})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),r}var eu={exports:{}},di={},tu={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=Symbol.for("react.element"),Xh=Symbol.for("react.portal"),Zh=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),tg=Symbol.for("react.profiler"),rg=Symbol.for("react.provider"),sg=Symbol.for("react.context"),ag=Symbol.for("react.forward_ref"),ng=Symbol.for("react.suspense"),ig=Symbol.for("react.memo"),lg=Symbol.for("react.lazy"),_d=Symbol.iterator;function og(e){return e===null||typeof e!="object"?null:(e=_d&&e[_d]||e["@@iterator"],typeof e=="function"?e:null)}var ru={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},su=Object.assign,au={};function Bs(e,t,r){this.props=e,this.context=t,this.refs=au,this.updater=r||ru}Bs.prototype.isReactComponent={};Bs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nu(){}nu.prototype=Bs.prototype;function ko(e,t,r){this.props=e,this.context=t,this.refs=au,this.updater=r||ru}var jo=ko.prototype=new nu;jo.constructor=ko;su(jo,Bs.prototype);jo.isPureReactComponent=!0;var Sd=Array.isArray,iu=Object.prototype.hasOwnProperty,No={current:null},lu={key:!0,ref:!0,__self:!0,__source:!0};function ou(e,t,r){var a,n={},i=null,l=null;if(t!=null)for(a in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)iu.call(t,a)&&!lu.hasOwnProperty(a)&&(n[a]=t[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];n.children=d}if(e&&e.defaultProps)for(a in o=e.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:qa,type:e,key:i,ref:l,props:n,_owner:No.current}}function dg(e,t){return{$$typeof:qa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _o(e){return typeof e=="object"&&e!==null&&e.$$typeof===qa}function cg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Cd=/\/+/g;function Ii(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cg(""+e.key):t.toString(36)}function wn(e,t,r,a,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case qa:case Xh:l=!0}}if(l)return l=e,n=n(l),e=a===""?"."+Ii(l,0):a,Sd(n)?(r="",e!=null&&(r=e.replace(Cd,"$&/")+"/"),wn(n,t,r,"",function(c){return c})):n!=null&&(_o(n)&&(n=dg(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Cd,"$&/")+"/")+e)),t.push(n)),1;if(l=0,a=a===""?".":a+":",Sd(e))for(var o=0;o<e.length;o++){i=e[o];var d=a+Ii(i,o);l+=wn(i,t,r,d,n)}else if(d=og(e),typeof d=="function")for(e=d.call(e),o=0;!(i=e.next()).done;)i=i.value,d=a+Ii(i,o++),l+=wn(i,t,r,d,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ya(e,t,r){if(e==null)return e;var a=[],n=0;return wn(e,a,"","",function(i){return t.call(r,i,n++)}),a}function ug(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nt={current:null},kn={transition:null},hg={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:kn,ReactCurrentOwner:No};function du(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Ya,forEach:function(e,t,r){Ya(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ya(e,function(){t++}),t},toArray:function(e){return Ya(e,function(t){return t})||[]},only:function(e){if(!_o(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=Bs;xe.Fragment=Zh;xe.Profiler=tg;xe.PureComponent=ko;xe.StrictMode=eg;xe.Suspense=ng;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hg;xe.act=du;xe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=su({},e.props),n=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=No.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)iu.call(t,d)&&!lu.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&o!==void 0?o[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];a.children=o}return{$$typeof:qa,type:e.type,key:n,ref:i,props:a,_owner:l}};xe.createContext=function(e){return e={$$typeof:sg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rg,_context:e},e.Consumer=e};xe.createElement=ou;xe.createFactory=function(e){var t=ou.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:ag,render:e}};xe.isValidElement=_o;xe.lazy=function(e){return{$$typeof:lg,_payload:{_status:-1,_result:e},_init:ug}};xe.memo=function(e,t){return{$$typeof:ig,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=kn.transition;kn.transition={};try{e()}finally{kn.transition=t}};xe.unstable_act=du;xe.useCallback=function(e,t){return nt.current.useCallback(e,t)};xe.useContext=function(e){return nt.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return nt.current.useDeferredValue(e)};xe.useEffect=function(e,t){return nt.current.useEffect(e,t)};xe.useId=function(){return nt.current.useId()};xe.useImperativeHandle=function(e,t,r){return nt.current.useImperativeHandle(e,t,r)};xe.useInsertionEffect=function(e,t){return nt.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return nt.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return nt.current.useMemo(e,t)};xe.useReducer=function(e,t,r){return nt.current.useReducer(e,t,r)};xe.useRef=function(e){return nt.current.useRef(e)};xe.useState=function(e){return nt.current.useState(e)};xe.useSyncExternalStore=function(e,t,r){return nt.current.useSyncExternalStore(e,t,r)};xe.useTransition=function(){return nt.current.useTransition()};xe.version="18.3.1";tu.exports=xe;var b=tu.exports;const So=Jh(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg=b,mg=Symbol.for("react.element"),fg=Symbol.for("react.fragment"),xg=Object.prototype.hasOwnProperty,yg=gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pg={key:!0,ref:!0,__self:!0,__source:!0};function cu(e,t,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)xg.call(t,a)&&!pg.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:mg,type:e,key:i,ref:l,props:n,_owner:yg.current}}di.Fragment=fg;di.jsx=cu;di.jsxs=cu;eu.exports=di;var s=eu.exports,yl={},uu={exports:{}},wt={},hu={exports:{}},gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,U){var G=R.length;R.push(U);e:for(;0<G;){var de=G-1>>>1,ue=R[de];if(0<n(ue,U))R[de]=U,R[G]=ue,G=de;else break e}}function r(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var U=R[0],G=R.pop();if(G!==U){R[0]=G;e:for(var de=0,ue=R.length,ce=ue>>>1;de<ce;){var j=2*(de+1)-1,Z=R[j],N=j+1,W=R[N];if(0>n(Z,G))N<ue&&0>n(W,Z)?(R[de]=W,R[N]=G,de=N):(R[de]=Z,R[j]=G,de=j);else if(N<ue&&0>n(W,G))R[de]=W,R[N]=G,de=N;else break e}}return U}function n(R,U){var G=R.sortIndex-U.sortIndex;return G!==0?G:R.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],c=[],u=1,h=null,f=3,p=!1,w=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var U=r(c);U!==null;){if(U.callback===null)a(c);else if(U.startTime<=R)a(c),U.sortIndex=U.expirationTime,t(d,U);else break;U=r(c)}}function v(R){if(x=!1,g(R),!w)if(r(d)!==null)w=!0,k(P);else{var U=r(c);U!==null&&L(v,U.startTime-R)}}function P(R,U){w=!1,x&&(x=!1,y(B),B=-1),p=!0;var G=f;try{for(g(U),h=r(d);h!==null&&(!(h.expirationTime>U)||R&&!M());){var de=h.callback;if(typeof de=="function"){h.callback=null,f=h.priorityLevel;var ue=de(h.expirationTime<=U);U=e.unstable_now(),typeof ue=="function"?h.callback=ue:h===r(d)&&a(d),g(U)}else a(d);h=r(d)}if(h!==null)var ce=!0;else{var j=r(c);j!==null&&L(v,j.startTime-U),ce=!1}return ce}finally{h=null,f=G,p=!1}}var S=!1,D=null,B=-1,se=5,ee=-1;function M(){return!(e.unstable_now()-ee<se)}function te(){if(D!==null){var R=e.unstable_now();ee=R;var U=!0;try{U=D(!0,R)}finally{U?O():(S=!1,D=null)}}else S=!1}var O;if(typeof m=="function")O=function(){m(te)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,J=z.port2;z.port1.onmessage=te,O=function(){J.postMessage(null)}}else O=function(){E(te,0)};function k(R){D=R,S||(S=!0,O())}function L(R,U){B=E(function(){R(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,k(P))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var G=f;f=U;try{return R()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=f;f=R;try{return U()}finally{f=G}},e.unstable_scheduleCallback=function(R,U,G){var de=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?de+G:de):G=de,R){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=G+ue,R={id:u++,callback:U,priorityLevel:R,startTime:G,expirationTime:ue,sortIndex:-1},G>de?(R.sortIndex=G,t(c,R),r(d)===null&&R===r(c)&&(x?(y(B),B=-1):x=!0,L(v,G-de))):(R.sortIndex=ue,t(d,R),w||p||(w=!0,k(P))),R},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(R){var U=f;return function(){var G=f;f=U;try{return R.apply(this,arguments)}finally{f=G}}}})(gu);hu.exports=gu;var vg=hu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg=b,bt=vg;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mu=new Set,Na={};function as(e,t){Rs(e,t),Rs(e+"Capture",t)}function Rs(e,t){for(Na[e]=t,e=0;e<t.length;e++)mu.add(t[e])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pl=Object.prototype.hasOwnProperty,wg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ed={},Td={};function kg(e){return pl.call(Td,e)?!0:pl.call(Ed,e)?!1:wg.test(e)?Td[e]=!0:(Ed[e]=!0,!1)}function jg(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ng(e,t,r,a){if(t===null||typeof t>"u"||jg(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function it(e,t,r,a,n,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new it(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new it(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new it(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new it(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new it(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new it(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new it(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new it(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new it(e,5,!1,e.toLowerCase(),null,!1,!1)});var Co=/[\-:]([a-z])/g;function Eo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Co,Eo);Ke[t]=new it(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Co,Eo);Ke[t]=new it(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Co,Eo);Ke[t]=new it(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new it(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new it(e,1,!1,e.toLowerCase(),null,!0,!0)});function To(e,t,r,a){var n=Ke.hasOwnProperty(t)?Ke[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ng(t,r,n,a)&&(r=null),a||n===null?kg(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,a=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var hr=bg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xa=Symbol.for("react.element"),fs=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),Po=Symbol.for("react.strict_mode"),vl=Symbol.for("react.profiler"),fu=Symbol.for("react.provider"),xu=Symbol.for("react.context"),Do=Symbol.for("react.forward_ref"),bl=Symbol.for("react.suspense"),wl=Symbol.for("react.suspense_list"),Ao=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),yu=Symbol.for("react.offscreen"),Pd=Symbol.iterator;function Ks(e){return e===null||typeof e!="object"?null:(e=Pd&&e[Pd]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,Ui;function na(e){if(Ui===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ui=t&&t[1]||""}return`
`+Ui+e}var zi=!1;function Fi(e,t){if(!e||zi)return"";zi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var d=`
`+n[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=o);break}}}finally{zi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?na(e):""}function _g(e){switch(e.tag){case 5:return na(e.type);case 16:return na("Lazy");case 13:return na("Suspense");case 19:return na("SuspenseList");case 0:case 2:case 15:return e=Fi(e.type,!1),e;case 11:return e=Fi(e.type.render,!1),e;case 1:return e=Fi(e.type,!0),e;default:return""}}function kl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xs:return"Fragment";case fs:return"Portal";case vl:return"Profiler";case Po:return"StrictMode";case bl:return"Suspense";case wl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xu:return(e.displayName||"Context")+".Consumer";case fu:return(e._context.displayName||"Context")+".Provider";case Do:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ao:return t=e.displayName||null,t!==null?t:kl(e.type)||"Memo";case xr:t=e._payload,e=e._init;try{return kl(e(t))}catch{}}return null}function Sg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kl(t);case 8:return t===Po?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cg(e){var t=pu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Za(e){e._valueTracker||(e._valueTracker=Cg(e))}function vu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=pu(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function On(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jl(e,t){var r=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Dd(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Ar(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bu(e,t){t=t.checked,t!=null&&To(e,"checked",t,!1)}function Nl(e,t){bu(e,t);var r=Ar(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_l(e,t.type,r):t.hasOwnProperty("defaultValue")&&_l(e,t.type,Ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ad(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _l(e,t,r){(t!=="number"||On(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ia=Array.isArray;function Ts(e,t,r,a){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Ar(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Sl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Od(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(V(92));if(ia(r)){if(1<r.length)throw Error(V(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ar(r)}}function wu(e,t){var r=Ar(t.value),a=Ar(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Md(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ku(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ku(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var en,ju=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(en=en||document.createElement("div"),en.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=en.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _a(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Eg=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(e){Eg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ca[t]=ca[e]})});function Nu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ca.hasOwnProperty(e)&&ca[e]?(""+t).trim():t+"px"}function _u(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Nu(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,n):e[r]=n}}var Tg=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function El(e,t){if(t){if(Tg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function Tl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pl=null;function Oo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dl=null,Ps=null,Ds=null;function Rd(e){if(e=Wa(e)){if(typeof Dl!="function")throw Error(V(280));var t=e.stateNode;t&&(t=mi(t),Dl(e.stateNode,e.type,t))}}function Su(e){Ps?Ds?Ds.push(e):Ds=[e]:Ps=e}function Cu(){if(Ps){var e=Ps,t=Ds;if(Ds=Ps=null,Rd(e),t)for(e=0;e<t.length;e++)Rd(t[e])}}function Eu(e,t){return e(t)}function Tu(){}var qi=!1;function Pu(e,t,r){if(qi)return e(t,r);qi=!0;try{return Eu(e,t,r)}finally{qi=!1,(Ps!==null||Ds!==null)&&(Tu(),Cu())}}function Sa(e,t){var r=e.stateNode;if(r===null)return null;var a=mi(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(V(231,t,typeof r));return r}var Al=!1;if(or)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Al=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Al=!1}function Pg(e,t,r,a,n,i,l,o,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var ua=!1,Mn=null,Rn=!1,Ol=null,Dg={onError:function(e){ua=!0,Mn=e}};function Ag(e,t,r,a,n,i,l,o,d){ua=!1,Mn=null,Pg.apply(Dg,arguments)}function Og(e,t,r,a,n,i,l,o,d){if(Ag.apply(this,arguments),ua){if(ua){var c=Mn;ua=!1,Mn=null}else throw Error(V(198));Rn||(Rn=!0,Ol=c)}}function ns(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Du(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $d(e){if(ns(e)!==e)throw Error(V(188))}function Mg(e){var t=e.alternate;if(!t){if(t=ns(e),t===null)throw Error(V(188));return t!==e?null:e}for(var r=e,a=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return $d(n),e;if(i===a)return $d(n),t;i=i.sibling}throw Error(V(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(V(189))}}if(r.alternate!==a)throw Error(V(190))}if(r.tag!==3)throw Error(V(188));return r.stateNode.current===r?e:t}function Au(e){return e=Mg(e),e!==null?Ou(e):null}function Ou(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ou(e);if(t!==null)return t;e=e.sibling}return null}var Mu=bt.unstable_scheduleCallback,Ld=bt.unstable_cancelCallback,Rg=bt.unstable_shouldYield,$g=bt.unstable_requestPaint,Le=bt.unstable_now,Lg=bt.unstable_getCurrentPriorityLevel,Mo=bt.unstable_ImmediatePriority,Ru=bt.unstable_UserBlockingPriority,$n=bt.unstable_NormalPriority,Ig=bt.unstable_LowPriority,$u=bt.unstable_IdlePriority,ci=null,Kt=null;function Ug(e){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(ci,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:qg,zg=Math.log,Fg=Math.LN2;function qg(e){return e>>>=0,e===0?32:31-(zg(e)/Fg|0)|0}var tn=64,rn=4194304;function la(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ln(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,n=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=la(o):(i&=l,i!==0&&(a=la(i)))}else l=r&~n,l!==0?a=la(l):i!==0&&(a=la(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Ut(t),n=1<<r,a|=e[r],t&=~n;return a}function Bg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hg(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Ut(i),o=1<<l,d=n[l];d===-1?(!(o&r)||o&a)&&(n[l]=Bg(o,t)):d<=t&&(e.expiredLanes|=o),i&=~o}}function Ml(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lu(){var e=tn;return tn<<=1,!(tn&4194240)&&(tn=64),e}function Bi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ba(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=r}function Wg(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Ut(r),i=1<<n;t[n]=0,a[n]=-1,e[n]=-1,r&=~i}}function Ro(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Ut(r),n=1<<a;n&t|e[a]&t&&(e[a]|=t),r&=~n}}var be=0;function Iu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uu,$o,zu,Fu,qu,Rl=!1,sn=[],Nr=null,_r=null,Sr=null,Ca=new Map,Ea=new Map,vr=[],Gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Id(e,t){switch(e){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Ca.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(t.pointerId)}}function Ys(e,t,r,a,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},t!==null&&(t=Wa(t),t!==null&&$o(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Vg(e,t,r,a,n){switch(t){case"focusin":return Nr=Ys(Nr,e,t,r,a,n),!0;case"dragenter":return _r=Ys(_r,e,t,r,a,n),!0;case"mouseover":return Sr=Ys(Sr,e,t,r,a,n),!0;case"pointerover":var i=n.pointerId;return Ca.set(i,Ys(Ca.get(i)||null,e,t,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Ea.set(i,Ys(Ea.get(i)||null,e,t,r,a,n)),!0}return!1}function Bu(e){var t=Hr(e.target);if(t!==null){var r=ns(t);if(r!==null){if(t=r.tag,t===13){if(t=Du(r),t!==null){e.blockedOn=t,qu(e.priority,function(){zu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=$l(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Pl=a,r.target.dispatchEvent(a),Pl=null}else return t=Wa(r),t!==null&&$o(t),e.blockedOn=r,!1;t.shift()}return!0}function Ud(e,t,r){jn(e)&&r.delete(t)}function Qg(){Rl=!1,Nr!==null&&jn(Nr)&&(Nr=null),_r!==null&&jn(_r)&&(_r=null),Sr!==null&&jn(Sr)&&(Sr=null),Ca.forEach(Ud),Ea.forEach(Ud)}function Xs(e,t){e.blockedOn===t&&(e.blockedOn=null,Rl||(Rl=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,Qg)))}function Ta(e){function t(n){return Xs(n,e)}if(0<sn.length){Xs(sn[0],e);for(var r=1;r<sn.length;r++){var a=sn[r];a.blockedOn===e&&(a.blockedOn=null)}}for(Nr!==null&&Xs(Nr,e),_r!==null&&Xs(_r,e),Sr!==null&&Xs(Sr,e),Ca.forEach(t),Ea.forEach(t),r=0;r<vr.length;r++)a=vr[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<vr.length&&(r=vr[0],r.blockedOn===null);)Bu(r),r.blockedOn===null&&vr.shift()}var As=hr.ReactCurrentBatchConfig,In=!0;function Kg(e,t,r,a){var n=be,i=As.transition;As.transition=null;try{be=1,Lo(e,t,r,a)}finally{be=n,As.transition=i}}function Jg(e,t,r,a){var n=be,i=As.transition;As.transition=null;try{be=4,Lo(e,t,r,a)}finally{be=n,As.transition=i}}function Lo(e,t,r,a){if(In){var n=$l(e,t,r,a);if(n===null)Zi(e,t,a,Un,r),Id(e,a);else if(Vg(n,e,t,r,a))a.stopPropagation();else if(Id(e,a),t&4&&-1<Gg.indexOf(e)){for(;n!==null;){var i=Wa(n);if(i!==null&&Uu(i),i=$l(e,t,r,a),i===null&&Zi(e,t,a,Un,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else Zi(e,t,a,null,r)}}var Un=null;function $l(e,t,r,a){if(Un=null,e=Oo(a),e=Hr(e),e!==null)if(t=ns(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Du(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Un=e,null}function Hu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lg()){case Mo:return 1;case Ru:return 4;case $n:case Ig:return 16;case $u:return 536870912;default:return 16}default:return 16}}var kr=null,Io=null,Nn=null;function Wu(){if(Nn)return Nn;var e,t=Io,r=t.length,a,n="value"in kr?kr.value:kr.textContent,i=n.length;for(e=0;e<r&&t[e]===n[e];e++);var l=r-e;for(a=1;a<=l&&t[r-a]===n[i-a];a++);return Nn=n.slice(e,1<a?1-a:void 0)}function _n(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function an(){return!0}function zd(){return!1}function kt(e){function t(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?an:zd,this.isPropagationStopped=zd,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=kt(Hs),Ha=Oe({},Hs,{view:0,detail:0}),Yg=kt(Ha),Hi,Wi,Zs,ui=Oe({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zs&&(Zs&&e.type==="mousemove"?(Hi=e.screenX-Zs.screenX,Wi=e.screenY-Zs.screenY):Wi=Hi=0,Zs=e),Hi)},movementY:function(e){return"movementY"in e?e.movementY:Wi}}),Fd=kt(ui),Xg=Oe({},ui,{dataTransfer:0}),Zg=kt(Xg),em=Oe({},Ha,{relatedTarget:0}),Gi=kt(em),tm=Oe({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=kt(tm),sm=Oe({},Hs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),am=kt(sm),nm=Oe({},Hs,{data:0}),qd=kt(nm),im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=om[e])?!!t[e]:!1}function zo(){return dm}var cm=Oe({},Ha,{key:function(e){if(e.key){var t=im[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_n(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zo,charCode:function(e){return e.type==="keypress"?_n(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_n(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),um=kt(cm),hm=Oe({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=kt(hm),gm=Oe({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zo}),mm=kt(gm),fm=Oe({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),xm=kt(fm),ym=Oe({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pm=kt(ym),vm=[9,13,27,32],Fo=or&&"CompositionEvent"in window,ha=null;or&&"documentMode"in document&&(ha=document.documentMode);var bm=or&&"TextEvent"in window&&!ha,Gu=or&&(!Fo||ha&&8<ha&&11>=ha),Hd=" ",Wd=!1;function Vu(e,t){switch(e){case"keyup":return vm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ys=!1;function wm(e,t){switch(e){case"compositionend":return Qu(t);case"keypress":return t.which!==32?null:(Wd=!0,Hd);case"textInput":return e=t.data,e===Hd&&Wd?null:e;default:return null}}function km(e,t){if(ys)return e==="compositionend"||!Fo&&Vu(e,t)?(e=Wu(),Nn=Io=kr=null,ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gu&&t.locale!=="ko"?null:t.data;default:return null}}var jm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jm[e.type]:t==="textarea"}function Ku(e,t,r,a){Su(a),t=zn(t,"onChange"),0<t.length&&(r=new Uo("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var ga=null,Pa=null;function Nm(e){i0(e,0)}function hi(e){var t=bs(e);if(vu(t))return e}function _m(e,t){if(e==="change")return t}var Ju=!1;if(or){var Vi;if(or){var Qi="oninput"in document;if(!Qi){var Vd=document.createElement("div");Vd.setAttribute("oninput","return;"),Qi=typeof Vd.oninput=="function"}Vi=Qi}else Vi=!1;Ju=Vi&&(!document.documentMode||9<document.documentMode)}function Qd(){ga&&(ga.detachEvent("onpropertychange",Yu),Pa=ga=null)}function Yu(e){if(e.propertyName==="value"&&hi(Pa)){var t=[];Ku(t,Pa,e,Oo(e)),Pu(Nm,t)}}function Sm(e,t,r){e==="focusin"?(Qd(),ga=t,Pa=r,ga.attachEvent("onpropertychange",Yu)):e==="focusout"&&Qd()}function Cm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hi(Pa)}function Em(e,t){if(e==="click")return hi(t)}function Tm(e,t){if(e==="input"||e==="change")return hi(t)}function Pm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:Pm;function Da(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!pl.call(t,n)||!Ft(e[n],t[n]))return!1}return!0}function Kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jd(e,t){var r=Kd(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kd(r)}}function Xu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zu(){for(var e=window,t=On();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=On(e.document)}return t}function qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dm(e){var t=Zu(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Xu(r.ownerDocument.documentElement,r)){if(a!==null&&qo(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!e.extend&&i>a&&(n=a,a=i,i=n),n=Jd(r,i);var l=Jd(r,a);n&&l&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Am=or&&"documentMode"in document&&11>=document.documentMode,ps=null,Ll=null,ma=null,Il=!1;function Yd(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Il||ps==null||ps!==On(a)||(a=ps,"selectionStart"in a&&qo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ma&&Da(ma,a)||(ma=a,a=zn(Ll,"onSelect"),0<a.length&&(t=new Uo("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=ps)))}function nn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vs={animationend:nn("Animation","AnimationEnd"),animationiteration:nn("Animation","AnimationIteration"),animationstart:nn("Animation","AnimationStart"),transitionend:nn("Transition","TransitionEnd")},Ki={},e0={};or&&(e0=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function gi(e){if(Ki[e])return Ki[e];if(!vs[e])return e;var t=vs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in e0)return Ki[e]=t[r];return e}var t0=gi("animationend"),r0=gi("animationiteration"),s0=gi("animationstart"),a0=gi("transitionend"),n0=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){n0.set(e,t),as(t,[e])}for(var Ji=0;Ji<Xd.length;Ji++){var Yi=Xd[Ji],Om=Yi.toLowerCase(),Mm=Yi[0].toUpperCase()+Yi.slice(1);Rr(Om,"on"+Mm)}Rr(t0,"onAnimationEnd");Rr(r0,"onAnimationIteration");Rr(s0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(a0,"onTransitionEnd");Rs("onMouseEnter",["mouseout","mouseover"]);Rs("onMouseLeave",["mouseout","mouseover"]);Rs("onPointerEnter",["pointerout","pointerover"]);Rs("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rm=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function Zd(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,Og(a,t,void 0,e),e.currentTarget=null}function i0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var l=a.length-1;0<=l;l--){var o=a[l],d=o.instance,c=o.currentTarget;if(o=o.listener,d!==i&&n.isPropagationStopped())break e;Zd(n,o,c),i=d}else for(l=0;l<a.length;l++){if(o=a[l],d=o.instance,c=o.currentTarget,o=o.listener,d!==i&&n.isPropagationStopped())break e;Zd(n,o,c),i=d}}}if(Rn)throw e=Ol,Rn=!1,Ol=null,e}function Se(e,t){var r=t[Bl];r===void 0&&(r=t[Bl]=new Set);var a=e+"__bubble";r.has(a)||(l0(t,e,2,!1),r.add(a))}function Xi(e,t,r){var a=0;t&&(a|=4),l0(r,e,a,t)}var ln="_reactListening"+Math.random().toString(36).slice(2);function Aa(e){if(!e[ln]){e[ln]=!0,mu.forEach(function(r){r!=="selectionchange"&&(Rm.has(r)||Xi(r,!1,e),Xi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ln]||(t[ln]=!0,Xi("selectionchange",!1,t))}}function l0(e,t,r,a){switch(Hu(t)){case 1:var n=Kg;break;case 4:n=Jg;break;default:n=Lo}r=n.bind(null,t,r,e),n=void 0,!Al||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Zi(e,t,r,a,n){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===n||d.nodeType===8&&d.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Hr(o),l===null)return;if(d=l.tag,d===5||d===6){a=i=l;continue e}o=o.parentNode}}a=a.return}Pu(function(){var c=i,u=Oo(r),h=[];e:{var f=n0.get(e);if(f!==void 0){var p=Uo,w=e;switch(e){case"keypress":if(_n(r)===0)break e;case"keydown":case"keyup":p=um;break;case"focusin":w="focus",p=Gi;break;case"focusout":w="blur",p=Gi;break;case"beforeblur":case"afterblur":p=Gi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Zg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=mm;break;case t0:case r0:case s0:p=rm;break;case a0:p=xm;break;case"scroll":p=Yg;break;case"wheel":p=pm;break;case"copy":case"cut":case"paste":p=am;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Bd}var x=(t&4)!==0,E=!x&&e==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var m=c,g;m!==null;){g=m;var v=g.stateNode;if(g.tag===5&&v!==null&&(g=v,y!==null&&(v=Sa(m,y),v!=null&&x.push(Oa(m,v,g)))),E)break;m=m.return}0<x.length&&(f=new p(f,w,null,r,u),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==Pl&&(w=r.relatedTarget||r.fromElement)&&(Hr(w)||w[dr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=r.relatedTarget||r.toElement,p=c,w=w?Hr(w):null,w!==null&&(E=ns(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(x=Fd,v="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=Bd,v="onPointerLeave",y="onPointerEnter",m="pointer"),E=p==null?f:bs(p),g=w==null?f:bs(w),f=new x(v,m+"leave",p,r,u),f.target=E,f.relatedTarget=g,v=null,Hr(u)===c&&(x=new x(y,m+"enter",w,r,u),x.target=g,x.relatedTarget=E,v=x),E=v,p&&w)t:{for(x=p,y=w,m=0,g=x;g;g=ds(g))m++;for(g=0,v=y;v;v=ds(v))g++;for(;0<m-g;)x=ds(x),m--;for(;0<g-m;)y=ds(y),g--;for(;m--;){if(x===y||y!==null&&x===y.alternate)break t;x=ds(x),y=ds(y)}x=null}else x=null;p!==null&&ec(h,f,p,x,!1),w!==null&&E!==null&&ec(h,E,w,x,!0)}}e:{if(f=c?bs(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var P=_m;else if(Gd(f))if(Ju)P=Tm;else{P=Cm;var S=Sm}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=Em);if(P&&(P=P(e,c))){Ku(h,P,r,u);break e}S&&S(e,f,c),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&_l(f,"number",f.value)}switch(S=c?bs(c):window,e){case"focusin":(Gd(S)||S.contentEditable==="true")&&(ps=S,Ll=c,ma=null);break;case"focusout":ma=Ll=ps=null;break;case"mousedown":Il=!0;break;case"contextmenu":case"mouseup":case"dragend":Il=!1,Yd(h,r,u);break;case"selectionchange":if(Am)break;case"keydown":case"keyup":Yd(h,r,u)}var D;if(Fo)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else ys?Vu(e,r)&&(B="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(Gu&&r.locale!=="ko"&&(ys||B!=="onCompositionStart"?B==="onCompositionEnd"&&ys&&(D=Wu()):(kr=u,Io="value"in kr?kr.value:kr.textContent,ys=!0)),S=zn(c,B),0<S.length&&(B=new qd(B,e,null,r,u),h.push({event:B,listeners:S}),D?B.data=D:(D=Qu(r),D!==null&&(B.data=D)))),(D=bm?wm(e,r):km(e,r))&&(c=zn(c,"onBeforeInput"),0<c.length&&(u=new qd("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=D))}i0(h,t)})}function Oa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function zn(e,t){for(var r=t+"Capture",a=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Sa(e,r),i!=null&&a.unshift(Oa(e,i,n)),i=Sa(e,t),i!=null&&a.push(Oa(e,i,n))),e=e.return}return a}function ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ec(e,t,r,a,n){for(var i=t._reactName,l=[];r!==null&&r!==a;){var o=r,d=o.alternate,c=o.stateNode;if(d!==null&&d===a)break;o.tag===5&&c!==null&&(o=c,n?(d=Sa(r,i),d!=null&&l.unshift(Oa(r,d,o))):n||(d=Sa(r,i),d!=null&&l.push(Oa(r,d,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var $m=/\r\n?/g,Lm=/\u0000|\uFFFD/g;function tc(e){return(typeof e=="string"?e:""+e).replace($m,`
`).replace(Lm,"")}function on(e,t,r){if(t=tc(t),tc(e)!==t&&r)throw Error(V(425))}function Fn(){}var Ul=null,zl=null;function Fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ql=typeof setTimeout=="function"?setTimeout:void 0,Im=typeof clearTimeout=="function"?clearTimeout:void 0,rc=typeof Promise=="function"?Promise:void 0,Um=typeof queueMicrotask=="function"?queueMicrotask:typeof rc<"u"?function(e){return rc.resolve(null).then(e).catch(zm)}:ql;function zm(e){setTimeout(function(){throw e})}function el(e,t){var r=t,a=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){e.removeChild(n),Ta(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Ta(t)}function Cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Ws,Ma="__reactProps$"+Ws,dr="__reactContainer$"+Ws,Bl="__reactEvents$"+Ws,Fm="__reactListeners$"+Ws,qm="__reactHandles$"+Ws;function Hr(e){var t=e[Qt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dr]||r[Qt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=sc(e);e!==null;){if(r=e[Qt])return r;e=sc(e)}return t}e=r,r=e.parentNode}return null}function Wa(e){return e=e[Qt]||e[dr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function mi(e){return e[Ma]||null}var Hl=[],ws=-1;function $r(e){return{current:e}}function Ce(e){0>ws||(e.current=Hl[ws],Hl[ws]=null,ws--)}function _e(e,t){ws++,Hl[ws]=e.current,e.current=t}var Or={},et=$r(Or),ht=$r(!1),Jr=Or;function $s(e,t){var r=e.type.contextTypes;if(!r)return Or;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function gt(e){return e=e.childContextTypes,e!=null}function qn(){Ce(ht),Ce(et)}function ac(e,t,r){if(et.current!==Or)throw Error(V(168));_e(et,t),_e(ht,r)}function o0(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(V(108,Sg(e)||"Unknown",n));return Oe({},r,a)}function Bn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Or,Jr=et.current,_e(et,e),_e(ht,ht.current),!0}function nc(e,t,r){var a=e.stateNode;if(!a)throw Error(V(169));r?(e=o0(e,t,Jr),a.__reactInternalMemoizedMergedChildContext=e,Ce(ht),Ce(et),_e(et,e)):Ce(ht),_e(ht,r)}var ar=null,fi=!1,tl=!1;function d0(e){ar===null?ar=[e]:ar.push(e)}function Bm(e){fi=!0,d0(e)}function Lr(){if(!tl&&ar!==null){tl=!0;var e=0,t=be;try{var r=ar;for(be=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}ar=null,fi=!1}catch(n){throw ar!==null&&(ar=ar.slice(e+1)),Mu(Mo,Lr),n}finally{be=t,tl=!1}}return null}var ks=[],js=0,Hn=null,Wn=0,_t=[],St=0,Yr=null,nr=1,ir="";function zr(e,t){ks[js++]=Wn,ks[js++]=Hn,Hn=e,Wn=t}function c0(e,t,r){_t[St++]=nr,_t[St++]=ir,_t[St++]=Yr,Yr=e;var a=nr;e=ir;var n=32-Ut(a)-1;a&=~(1<<n),r+=1;var i=32-Ut(t)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,nr=1<<32-Ut(t)+n|r<<n|a,ir=i+e}else nr=1<<i|r<<n|a,ir=e}function Bo(e){e.return!==null&&(zr(e,1),c0(e,1,0))}function Ho(e){for(;e===Hn;)Hn=ks[--js],ks[js]=null,Wn=ks[--js],ks[js]=null;for(;e===Yr;)Yr=_t[--St],_t[St]=null,ir=_t[--St],_t[St]=null,nr=_t[--St],_t[St]=null}var vt=null,pt=null,Te=!1,It=null;function u0(e,t){var r=Ct(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ic(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vt=e,pt=Cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vt=e,pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yr!==null?{id:nr,overflow:ir}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ct(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,vt=e,pt=null,!0):!1;default:return!1}}function Wl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gl(e){if(Te){var t=pt;if(t){var r=t;if(!ic(e,t)){if(Wl(e))throw Error(V(418));t=Cr(r.nextSibling);var a=vt;t&&ic(e,t)?u0(a,r):(e.flags=e.flags&-4097|2,Te=!1,vt=e)}}else{if(Wl(e))throw Error(V(418));e.flags=e.flags&-4097|2,Te=!1,vt=e}}}function lc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vt=e}function dn(e){if(e!==vt)return!1;if(!Te)return lc(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fl(e.type,e.memoizedProps)),t&&(t=pt)){if(Wl(e))throw h0(),Error(V(418));for(;t;)u0(e,t),t=Cr(t.nextSibling)}if(lc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){pt=Cr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}pt=null}}else pt=vt?Cr(e.stateNode.nextSibling):null;return!0}function h0(){for(var e=pt;e;)e=Cr(e.nextSibling)}function Ls(){pt=vt=null,Te=!1}function Wo(e){It===null?It=[e]:It.push(e)}var Hm=hr.ReactCurrentBatchConfig;function ea(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(V(309));var a=r.stateNode}if(!a)throw Error(V(147,e));var n=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(V(284));if(!r._owner)throw Error(V(290,e))}return e}function cn(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oc(e){var t=e._init;return t(e._payload)}function g0(e){function t(y,m){if(e){var g=y.deletions;g===null?(y.deletions=[m],y.flags|=16):g.push(m)}}function r(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function a(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function n(y,m){return y=Dr(y,m),y.index=0,y.sibling=null,y}function i(y,m,g){return y.index=g,e?(g=y.alternate,g!==null?(g=g.index,g<m?(y.flags|=2,m):g):(y.flags|=2,m)):(y.flags|=1048576,m)}function l(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,m,g,v){return m===null||m.tag!==6?(m=ol(g,y.mode,v),m.return=y,m):(m=n(m,g),m.return=y,m)}function d(y,m,g,v){var P=g.type;return P===xs?u(y,m,g.props.children,v,g.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===xr&&oc(P)===m.type)?(v=n(m,g.props),v.ref=ea(y,m,g),v.return=y,v):(v=An(g.type,g.key,g.props,null,y.mode,v),v.ref=ea(y,m,g),v.return=y,v)}function c(y,m,g,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=dl(g,y.mode,v),m.return=y,m):(m=n(m,g.children||[]),m.return=y,m)}function u(y,m,g,v,P){return m===null||m.tag!==7?(m=Qr(g,y.mode,v,P),m.return=y,m):(m=n(m,g),m.return=y,m)}function h(y,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ol(""+m,y.mode,g),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Xa:return g=An(m.type,m.key,m.props,null,y.mode,g),g.ref=ea(y,null,m),g.return=y,g;case fs:return m=dl(m,y.mode,g),m.return=y,m;case xr:var v=m._init;return h(y,v(m._payload),g)}if(ia(m)||Ks(m))return m=Qr(m,y.mode,g,null),m.return=y,m;cn(y,m)}return null}function f(y,m,g,v){var P=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return P!==null?null:o(y,m,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Xa:return g.key===P?d(y,m,g,v):null;case fs:return g.key===P?c(y,m,g,v):null;case xr:return P=g._init,f(y,m,P(g._payload),v)}if(ia(g)||Ks(g))return P!==null?null:u(y,m,g,v,null);cn(y,g)}return null}function p(y,m,g,v,P){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(g)||null,o(m,y,""+v,P);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xa:return y=y.get(v.key===null?g:v.key)||null,d(m,y,v,P);case fs:return y=y.get(v.key===null?g:v.key)||null,c(m,y,v,P);case xr:var S=v._init;return p(y,m,g,S(v._payload),P)}if(ia(v)||Ks(v))return y=y.get(g)||null,u(m,y,v,P,null);cn(m,v)}return null}function w(y,m,g,v){for(var P=null,S=null,D=m,B=m=0,se=null;D!==null&&B<g.length;B++){D.index>B?(se=D,D=null):se=D.sibling;var ee=f(y,D,g[B],v);if(ee===null){D===null&&(D=se);break}e&&D&&ee.alternate===null&&t(y,D),m=i(ee,m,B),S===null?P=ee:S.sibling=ee,S=ee,D=se}if(B===g.length)return r(y,D),Te&&zr(y,B),P;if(D===null){for(;B<g.length;B++)D=h(y,g[B],v),D!==null&&(m=i(D,m,B),S===null?P=D:S.sibling=D,S=D);return Te&&zr(y,B),P}for(D=a(y,D);B<g.length;B++)se=p(D,y,B,g[B],v),se!==null&&(e&&se.alternate!==null&&D.delete(se.key===null?B:se.key),m=i(se,m,B),S===null?P=se:S.sibling=se,S=se);return e&&D.forEach(function(M){return t(y,M)}),Te&&zr(y,B),P}function x(y,m,g,v){var P=Ks(g);if(typeof P!="function")throw Error(V(150));if(g=P.call(g),g==null)throw Error(V(151));for(var S=P=null,D=m,B=m=0,se=null,ee=g.next();D!==null&&!ee.done;B++,ee=g.next()){D.index>B?(se=D,D=null):se=D.sibling;var M=f(y,D,ee.value,v);if(M===null){D===null&&(D=se);break}e&&D&&M.alternate===null&&t(y,D),m=i(M,m,B),S===null?P=M:S.sibling=M,S=M,D=se}if(ee.done)return r(y,D),Te&&zr(y,B),P;if(D===null){for(;!ee.done;B++,ee=g.next())ee=h(y,ee.value,v),ee!==null&&(m=i(ee,m,B),S===null?P=ee:S.sibling=ee,S=ee);return Te&&zr(y,B),P}for(D=a(y,D);!ee.done;B++,ee=g.next())ee=p(D,y,B,ee.value,v),ee!==null&&(e&&ee.alternate!==null&&D.delete(ee.key===null?B:ee.key),m=i(ee,m,B),S===null?P=ee:S.sibling=ee,S=ee);return e&&D.forEach(function(te){return t(y,te)}),Te&&zr(y,B),P}function E(y,m,g,v){if(typeof g=="object"&&g!==null&&g.type===xs&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Xa:e:{for(var P=g.key,S=m;S!==null;){if(S.key===P){if(P=g.type,P===xs){if(S.tag===7){r(y,S.sibling),m=n(S,g.props.children),m.return=y,y=m;break e}}else if(S.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===xr&&oc(P)===S.type){r(y,S.sibling),m=n(S,g.props),m.ref=ea(y,S,g),m.return=y,y=m;break e}r(y,S);break}else t(y,S);S=S.sibling}g.type===xs?(m=Qr(g.props.children,y.mode,v,g.key),m.return=y,y=m):(v=An(g.type,g.key,g.props,null,y.mode,v),v.ref=ea(y,m,g),v.return=y,y=v)}return l(y);case fs:e:{for(S=g.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){r(y,m.sibling),m=n(m,g.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else t(y,m);m=m.sibling}m=dl(g,y.mode,v),m.return=y,y=m}return l(y);case xr:return S=g._init,E(y,m,S(g._payload),v)}if(ia(g))return w(y,m,g,v);if(Ks(g))return x(y,m,g,v);cn(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(r(y,m.sibling),m=n(m,g),m.return=y,y=m):(r(y,m),m=ol(g,y.mode,v),m.return=y,y=m),l(y)):r(y,m)}return E}var Is=g0(!0),m0=g0(!1),Gn=$r(null),Vn=null,Ns=null,Go=null;function Vo(){Go=Ns=Vn=null}function Qo(e){var t=Gn.current;Ce(Gn),e._currentValue=t}function Vl(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Os(e,t){Vn=e,Go=Ns=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ut=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(Go!==e)if(e={context:e,memoizedValue:t,next:null},Ns===null){if(Vn===null)throw Error(V(308));Ns=e,Vn.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Wr=null;function Ko(e){Wr===null?Wr=[e]:Wr.push(e)}function f0(e,t,r,a){var n=t.interleaved;return n===null?(r.next=r,Ko(t)):(r.next=n.next,n.next=r),t.interleaved=r,cr(e,a)}function cr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var yr=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Er(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,pe&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,cr(e,r)}return n=a.interleaved,n===null?(t.next=t,Ko(a)):(t.next=n.next,n.next=t),a.interleaved=t,cr(e,r)}function Sn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Ro(e,r)}}function dc(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Qn(e,t,r,a){var n=e.updateQueue;yr=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var d=o,c=d.next;d.next=null,l===null?i=c:l.next=c,l=d;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=d))}if(i!==null){var h=n.baseState;l=0,u=c=d=null,o=i;do{var f=o.lane,p=o.eventTime;if((a&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=e,x=o;switch(f=t,p=r,x.tag){case 1:if(w=x.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=Oe({},h,f);break e;case 2:yr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,d=h):u=u.next=p,l|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(u===null&&(d=h),n.baseState=d,n.firstBaseUpdate=c,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);Zr|=l,e.lanes=l,e.memoizedState=h}}function cc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(V(191,n));n.call(a)}}}var Ga={},Jt=$r(Ga),Ra=$r(Ga),$a=$r(Ga);function Gr(e){if(e===Ga)throw Error(V(174));return e}function Yo(e,t){switch(_e($a,t),_e(Ra,e),_e(Jt,Ga),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cl(t,e)}Ce(Jt),_e(Jt,t)}function Us(){Ce(Jt),Ce(Ra),Ce($a)}function y0(e){Gr($a.current);var t=Gr(Jt.current),r=Cl(t,e.type);t!==r&&(_e(Ra,e),_e(Jt,r))}function Xo(e){Ra.current===e&&(Ce(Jt),Ce(Ra))}var De=$r(0);function Kn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rl=[];function Zo(){for(var e=0;e<rl.length;e++)rl[e]._workInProgressVersionPrimary=null;rl.length=0}var Cn=hr.ReactCurrentDispatcher,sl=hr.ReactCurrentBatchConfig,Xr=0,Ae=null,Fe=null,He=null,Jn=!1,fa=!1,La=0,Wm=0;function Je(){throw Error(V(321))}function ed(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ft(e[r],t[r]))return!1;return!0}function td(e,t,r,a,n,i){if(Xr=i,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cn.current=e===null||e.memoizedState===null?Km:Jm,e=r(a,n),fa){i=0;do{if(fa=!1,La=0,25<=i)throw Error(V(301));i+=1,He=Fe=null,t.updateQueue=null,Cn.current=Ym,e=r(a,n)}while(fa)}if(Cn.current=Yn,t=Fe!==null&&Fe.next!==null,Xr=0,He=Fe=Ae=null,Jn=!1,t)throw Error(V(300));return e}function rd(){var e=La!==0;return La=0,e}function Vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ae.memoizedState=He=e:He=He.next=e,He}function Dt(){if(Fe===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=He===null?Ae.memoizedState:He.next;if(t!==null)He=t,Fe=e;else{if(e===null)throw Error(V(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},He===null?Ae.memoizedState=He=e:He=He.next=e}return He}function Ia(e,t){return typeof t=="function"?t(e):t}function al(e){var t=Dt(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var a=Fe,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,d=null,c=i;do{var u=c.lane;if((Xr&u)===u)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),a=c.hasEagerState?c.eagerState:e(a,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(o=d=h,l=a):d=d.next=h,Ae.lanes|=u,Zr|=u}c=c.next}while(c!==null&&c!==i);d===null?l=a:d.next=o,Ft(a,t.memoizedState)||(ut=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=d,r.lastRenderedState=a}if(e=r.interleaved,e!==null){n=e;do i=n.lane,Ae.lanes|=i,Zr|=i,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nl(e){var t=Dt(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var a=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=e(i,l.action),l=l.next;while(l!==n);Ft(i,t.memoizedState)||(ut=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function p0(){}function v0(e,t){var r=Ae,a=Dt(),n=t(),i=!Ft(a.memoizedState,n);if(i&&(a.memoizedState=n,ut=!0),a=a.queue,sd(k0.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||He!==null&&He.memoizedState.tag&1){if(r.flags|=2048,Ua(9,w0.bind(null,r,a,n,t),void 0,null),We===null)throw Error(V(349));Xr&30||b0(r,t,n)}return n}function b0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function w0(e,t,r,a){t.value=r,t.getSnapshot=a,j0(t)&&N0(e)}function k0(e,t,r){return r(function(){j0(t)&&N0(e)})}function j0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ft(e,r)}catch{return!0}}function N0(e){var t=cr(e,1);t!==null&&zt(t,e,1,-1)}function uc(e){var t=Vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=Qm.bind(null,Ae,e),[t.memoizedState,e]}function Ua(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function _0(){return Dt().memoizedState}function En(e,t,r,a){var n=Vt();Ae.flags|=e,n.memoizedState=Ua(1|t,r,void 0,a===void 0?null:a)}function xi(e,t,r,a){var n=Dt();a=a===void 0?null:a;var i=void 0;if(Fe!==null){var l=Fe.memoizedState;if(i=l.destroy,a!==null&&ed(a,l.deps)){n.memoizedState=Ua(t,r,i,a);return}}Ae.flags|=e,n.memoizedState=Ua(1|t,r,i,a)}function hc(e,t){return En(8390656,8,e,t)}function sd(e,t){return xi(2048,8,e,t)}function S0(e,t){return xi(4,2,e,t)}function C0(e,t){return xi(4,4,e,t)}function E0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function T0(e,t,r){return r=r!=null?r.concat([e]):null,xi(4,4,E0.bind(null,t,e),r)}function ad(){}function P0(e,t){var r=Dt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&ed(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function D0(e,t){var r=Dt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&ed(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function A0(e,t,r){return Xr&21?(Ft(r,t)||(r=Lu(),Ae.lanes|=r,Zr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=r)}function Gm(e,t){var r=be;be=r!==0&&4>r?r:4,e(!0);var a=sl.transition;sl.transition={};try{e(!1),t()}finally{be=r,sl.transition=a}}function O0(){return Dt().memoizedState}function Vm(e,t,r){var a=Pr(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},M0(e))R0(t,r);else if(r=f0(e,t,r,a),r!==null){var n=st();zt(r,e,a,n),$0(r,t,a)}}function Qm(e,t,r){var a=Pr(e),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(M0(e))R0(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,Ft(o,l)){var d=t.interleaved;d===null?(n.next=n,Ko(t)):(n.next=d.next,d.next=n),t.interleaved=n;return}}catch{}finally{}r=f0(e,t,n,a),r!==null&&(n=st(),zt(r,e,a,n),$0(r,t,a))}}function M0(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function R0(e,t){fa=Jn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $0(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Ro(e,r)}}var Yn={readContext:Pt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Km={readContext:Pt,useCallback:function(e,t){return Vt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:hc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,En(4194308,4,E0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return En(4194308,4,e,t)},useInsertionEffect:function(e,t){return En(4,2,e,t)},useMemo:function(e,t){var r=Vt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Vt();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Vm.bind(null,Ae,e),[a.memoizedState,e]},useRef:function(e){var t=Vt();return e={current:e},t.memoizedState=e},useState:uc,useDebugValue:ad,useDeferredValue:function(e){return Vt().memoizedState=e},useTransition:function(){var e=uc(!1),t=e[0];return e=Gm.bind(null,e[1]),Vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Ae,n=Vt();if(Te){if(r===void 0)throw Error(V(407));r=r()}else{if(r=t(),We===null)throw Error(V(349));Xr&30||b0(a,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,hc(k0.bind(null,a,i,e),[e]),a.flags|=2048,Ua(9,w0.bind(null,a,i,r,t),void 0,null),r},useId:function(){var e=Vt(),t=We.identifierPrefix;if(Te){var r=ir,a=nr;r=(a&~(1<<32-Ut(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=La++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Wm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jm={readContext:Pt,useCallback:P0,useContext:Pt,useEffect:sd,useImperativeHandle:T0,useInsertionEffect:S0,useLayoutEffect:C0,useMemo:D0,useReducer:al,useRef:_0,useState:function(){return al(Ia)},useDebugValue:ad,useDeferredValue:function(e){var t=Dt();return A0(t,Fe.memoizedState,e)},useTransition:function(){var e=al(Ia)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:p0,useSyncExternalStore:v0,useId:O0,unstable_isNewReconciler:!1},Ym={readContext:Pt,useCallback:P0,useContext:Pt,useEffect:sd,useImperativeHandle:T0,useInsertionEffect:S0,useLayoutEffect:C0,useMemo:D0,useReducer:nl,useRef:_0,useState:function(){return nl(Ia)},useDebugValue:ad,useDeferredValue:function(e){var t=Dt();return Fe===null?t.memoizedState=e:A0(t,Fe.memoizedState,e)},useTransition:function(){var e=nl(Ia)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:p0,useSyncExternalStore:v0,useId:O0,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ql(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Oe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yi={isMounted:function(e){return(e=e._reactInternals)?ns(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=st(),n=Pr(e),i=lr(a,n);i.payload=t,r!=null&&(i.callback=r),t=Er(e,i,n),t!==null&&(zt(t,e,n,a),Sn(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=st(),n=Pr(e),i=lr(a,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Er(e,i,n),t!==null&&(zt(t,e,n,a),Sn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=st(),a=Pr(e),n=lr(r,a);n.tag=2,t!=null&&(n.callback=t),t=Er(e,n,a),t!==null&&(zt(t,e,a,r),Sn(t,e,a))}};function gc(e,t,r,a,n,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,l):t.prototype&&t.prototype.isPureReactComponent?!Da(r,a)||!Da(n,i):!0}function L0(e,t,r){var a=!1,n=Or,i=t.contextType;return typeof i=="object"&&i!==null?i=Pt(i):(n=gt(t)?Jr:et.current,a=t.contextTypes,i=(a=a!=null)?$s(e,n):Or),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function mc(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&yi.enqueueReplaceState(t,t.state,null)}function Kl(e,t,r,a){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Jo(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=Pt(i):(i=gt(t)?Jr:et.current,n.context=$s(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ql(e,t,i,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&yi.enqueueReplaceState(n,n.state,null),Qn(e,r,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function zs(e,t){try{var r="",a=t;do r+=_g(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function il(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Jl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Xm=typeof WeakMap=="function"?WeakMap:Map;function I0(e,t,r){r=lr(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Zn||(Zn=!0,io=a),Jl(e,t)},r}function U0(e,t,r){r=lr(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;r.payload=function(){return a(n)},r.callback=function(){Jl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Jl(e,t),typeof a!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function fc(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new Xm;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(r)||(n.add(r),e=gf.bind(null,e,t,r),t.then(e,e))}function xc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yc(e,t,r,a,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=lr(-1,1),t.tag=2,Er(r,t,1))),r.lanes|=1),e)}var Zm=hr.ReactCurrentOwner,ut=!1;function rt(e,t,r,a){t.child=e===null?m0(t,null,r,a):Is(t,e.child,r,a)}function pc(e,t,r,a,n){r=r.render;var i=t.ref;return Os(t,n),a=td(e,t,r,a,i,n),r=rd(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ur(e,t,n)):(Te&&r&&Bo(t),t.flags|=1,rt(e,t,a,n),t.child)}function vc(e,t,r,a,n){if(e===null){var i=r.type;return typeof i=="function"&&!hd(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,z0(e,t,i,a,n)):(e=An(r.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Da,r(l,a)&&e.ref===t.ref)return ur(e,t,n)}return t.flags|=1,e=Dr(i,a),e.ref=t.ref,e.return=t,t.child=e}function z0(e,t,r,a,n){if(e!==null){var i=e.memoizedProps;if(Da(i,a)&&e.ref===t.ref)if(ut=!1,t.pendingProps=a=i,(e.lanes&n)!==0)e.flags&131072&&(ut=!0);else return t.lanes=e.lanes,ur(e,t,n)}return Yl(e,t,r,a,n)}function F0(e,t,r){var a=t.pendingProps,n=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Ss,xt),xt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Ss,xt),xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,_e(Ss,xt),xt|=a}else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,_e(Ss,xt),xt|=a;return rt(e,t,n,r),t.child}function q0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Yl(e,t,r,a,n){var i=gt(r)?Jr:et.current;return i=$s(t,i),Os(t,n),r=td(e,t,r,a,i,n),a=rd(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ur(e,t,n)):(Te&&a&&Bo(t),t.flags|=1,rt(e,t,r,n),t.child)}function bc(e,t,r,a,n){if(gt(r)){var i=!0;Bn(t)}else i=!1;if(Os(t,n),t.stateNode===null)Tn(e,t),L0(t,r,a),Kl(t,r,a,n),a=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var d=l.context,c=r.contextType;typeof c=="object"&&c!==null?c=Pt(c):(c=gt(r)?Jr:et.current,c=$s(t,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||d!==c)&&mc(t,l,a,c),yr=!1;var f=t.memoizedState;l.state=f,Qn(t,a,l,n),d=t.memoizedState,o!==a||f!==d||ht.current||yr?(typeof u=="function"&&(Ql(t,r,u,a),d=t.memoizedState),(o=yr||gc(t,r,o,a,f,d,c))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),l.props=a,l.state=d,l.context=c,a=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,x0(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Rt(t.type,o),l.props=c,h=t.pendingProps,f=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=Pt(d):(d=gt(r)?Jr:et.current,d=$s(t,d));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==d)&&mc(t,l,a,d),yr=!1,f=t.memoizedState,l.state=f,Qn(t,a,l,n);var w=t.memoizedState;o!==h||f!==w||ht.current||yr?(typeof p=="function"&&(Ql(t,r,p,a),w=t.memoizedState),(c=yr||gc(t,r,c,a,f,w,d)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,w,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,w,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=w),l.props=a,l.state=w,l.context=d,a=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),a=!1)}return Xl(e,t,r,a,i,n)}function Xl(e,t,r,a,n,i){q0(e,t);var l=(t.flags&128)!==0;if(!a&&!l)return n&&nc(t,r,!1),ur(e,t,i);a=t.stateNode,Zm.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&l?(t.child=Is(t,e.child,null,i),t.child=Is(t,null,o,i)):rt(e,t,o,i),t.memoizedState=a.state,n&&nc(t,r,!0),t.child}function B0(e){var t=e.stateNode;t.pendingContext?ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ac(e,t.context,!1),Yo(e,t.containerInfo)}function wc(e,t,r,a,n){return Ls(),Wo(n),t.flags|=256,rt(e,t,r,a),t.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function eo(e){return{baseLanes:e,cachePool:null,transitions:null}}function H0(e,t,r){var a=t.pendingProps,n=De.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),_e(De,n&1),e===null)return Gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=bi(l,a,0,null),e=Qr(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=eo(r),t.memoizedState=Zl,e):nd(t,l));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return ef(e,t,l,a,o,n,r);if(i){i=a.fallback,l=t.mode,n=e.child,o=n.sibling;var d={mode:"hidden",children:a.children};return!(l&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=Dr(n,d),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=Dr(o,i):(i=Qr(i,l,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=e.child.memoizedState,l=l===null?eo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Zl,a}return i=e.child,e=i.sibling,a=Dr(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function nd(e,t){return t=bi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function un(e,t,r,a){return a!==null&&Wo(a),Is(t,e.child,null,r),e=nd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ef(e,t,r,a,n,i,l){if(r)return t.flags&256?(t.flags&=-257,a=il(Error(V(422))),un(e,t,l,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=bi({mode:"visible",children:a.children},n,0,null),i=Qr(i,n,l,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&Is(t,e.child,null,l),t.child.memoizedState=eo(l),t.memoizedState=Zl,i);if(!(t.mode&1))return un(e,t,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(V(419)),a=il(i,a,void 0),un(e,t,l,a)}if(o=(l&e.childLanes)!==0,ut||o){if(a=We,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,cr(e,n),zt(a,e,n,-1))}return ud(),a=il(Error(V(421))),un(e,t,l,a)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=mf.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,pt=Cr(n.nextSibling),vt=t,Te=!0,It=null,e!==null&&(_t[St++]=nr,_t[St++]=ir,_t[St++]=Yr,nr=e.id,ir=e.overflow,Yr=t),t=nd(t,a.children),t.flags|=4096,t)}function kc(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Vl(e.return,t,r)}function ll(e,t,r,a,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function W0(e,t,r){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(rt(e,t,a.children,r),a=De.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kc(e,r,t);else if(e.tag===19)kc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(_e(De,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Kn(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),ll(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Kn(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}ll(t,!0,r,null,i);break;case"together":ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ur(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,r=Dr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Dr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function tf(e,t,r){switch(t.tag){case 3:B0(t),Ls();break;case 5:y0(t);break;case 1:gt(t.type)&&Bn(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;_e(Gn,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(_e(De,De.current&1),t.flags|=128,null):r&t.child.childLanes?H0(e,t,r):(_e(De,De.current&1),e=ur(e,t,r),e!==null?e.sibling:null);_e(De,De.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return W0(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),_e(De,De.current),a)break;return null;case 22:case 23:return t.lanes=0,F0(e,t,r)}return ur(e,t,r)}var G0,to,V0,Q0;G0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};to=function(){};V0=function(e,t,r,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Gr(Jt.current);var i=null;switch(r){case"input":n=jl(e,n),a=jl(e,a),i=[];break;case"select":n=Oe({},n,{value:void 0}),a=Oe({},a,{value:void 0}),i=[];break;case"textarea":n=Sl(e,n),a=Sl(e,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Fn)}El(r,a);var l;r=null;for(c in n)if(!a.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var o=n[c];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Na.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in a){var d=a[c];if(o=n!=null?n[c]:void 0,a.hasOwnProperty(c)&&d!==o&&(d!=null||o!=null))if(c==="style")if(o){for(l in o)!o.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&o[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(i||(i=[]),i.push(c,r)),r=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Na.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&Se("scroll",e),i||o===d||(i=[])):(i=i||[]).push(c,d))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Q0=function(e,t,r,a){r!==a&&(t.flags|=4)};function ta(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function rf(e,t,r){var a=t.pendingProps;switch(Ho(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return gt(t.type)&&qn(),Ye(t),null;case 3:return a=t.stateNode,Us(),Ce(ht),Ce(et),Zo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(dn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,It!==null&&(co(It),It=null))),to(e,t),Ye(t),null;case 5:Xo(t);var n=Gr($a.current);if(r=t.type,e!==null&&t.stateNode!=null)V0(e,t,r,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(V(166));return Ye(t),null}if(e=Gr(Jt.current),dn(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[Qt]=t,a[Ma]=i,e=(t.mode&1)!==0,r){case"dialog":Se("cancel",a),Se("close",a);break;case"iframe":case"object":case"embed":Se("load",a);break;case"video":case"audio":for(n=0;n<oa.length;n++)Se(oa[n],a);break;case"source":Se("error",a);break;case"img":case"image":case"link":Se("error",a),Se("load",a);break;case"details":Se("toggle",a);break;case"input":Dd(a,i),Se("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Se("invalid",a);break;case"textarea":Od(a,i),Se("invalid",a)}El(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&on(a.textContent,o,e),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&on(a.textContent,o,e),n=["children",""+o]):Na.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Se("scroll",a)}switch(r){case"input":Za(a),Ad(a,i,!0);break;case"textarea":Za(a),Md(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Fn)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ku(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),r==="select"&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[Qt]=t,e[Ma]=a,G0(e,t,!1,!1),t.stateNode=e;e:{switch(l=Tl(r,a),r){case"dialog":Se("cancel",e),Se("close",e),n=a;break;case"iframe":case"object":case"embed":Se("load",e),n=a;break;case"video":case"audio":for(n=0;n<oa.length;n++)Se(oa[n],e);n=a;break;case"source":Se("error",e),n=a;break;case"img":case"image":case"link":Se("error",e),Se("load",e),n=a;break;case"details":Se("toggle",e),n=a;break;case"input":Dd(e,a),n=jl(e,a),Se("invalid",e);break;case"option":n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=Oe({},a,{value:void 0}),Se("invalid",e);break;case"textarea":Od(e,a),n=Sl(e,a),Se("invalid",e);break;default:n=a}El(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var d=o[i];i==="style"?_u(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&ju(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&_a(e,d):typeof d=="number"&&_a(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Na.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Se("scroll",e):d!=null&&To(e,i,d,l))}switch(r){case"input":Za(e),Ad(e,a,!1);break;case"textarea":Za(e),Md(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ar(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?Ts(e,!!a.multiple,i,!1):a.defaultValue!=null&&Ts(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Fn)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)Q0(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(V(166));if(r=Gr($a.current),Gr(Jt.current),dn(t)){if(a=t.stateNode,r=t.memoizedProps,a[Qt]=t,(i=a.nodeValue!==r)&&(e=vt,e!==null))switch(e.tag){case 3:on(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&on(a.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Qt]=t,t.stateNode=a}return Ye(t),null;case 13:if(Ce(De),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&pt!==null&&t.mode&1&&!(t.flags&128))h0(),Ls(),t.flags|=98560,i=!1;else if(i=dn(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(V(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(V(317));i[Qt]=t}else Ls(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),i=!1}else It!==null&&(co(It),It=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?qe===0&&(qe=3):ud())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return Us(),to(e,t),e===null&&Aa(t.stateNode.containerInfo),Ye(t),null;case 10:return Qo(t.type._context),Ye(t),null;case 17:return gt(t.type)&&qn(),Ye(t),null;case 19:if(Ce(De),i=t.memoizedState,i===null)return Ye(t),null;if(a=(t.flags&128)!==0,l=i.rendering,l===null)if(a)ta(i,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Kn(e),l!==null){for(t.flags|=128,ta(i,!1),a=l.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)i=r,e=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _e(De,De.current&1|2),t.child}e=e.sibling}i.tail!==null&&Le()>Fs&&(t.flags|=128,a=!0,ta(i,!1),t.lanes=4194304)}else{if(!a)if(e=Kn(l),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ta(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Te)return Ye(t),null}else 2*Le()-i.renderingStartTime>Fs&&r!==1073741824&&(t.flags|=128,a=!0,ta(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Le(),t.sibling=null,r=De.current,_e(De,a?r&1|2:r&1),t):(Ye(t),null);case 22:case 23:return cd(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?xt&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function sf(e,t){switch(Ho(t),t.tag){case 1:return gt(t.type)&&qn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Us(),Ce(ht),Ce(et),Zo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xo(t),null;case 13:if(Ce(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(De),null;case 4:return Us(),null;case 10:return Qo(t.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var hn=!1,Ze=!1,af=typeof WeakSet=="function"?WeakSet:Set,ne=null;function _s(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Me(e,t,a)}else r.current=null}function ro(e,t,r){try{r()}catch(a){Me(e,t,a)}}var jc=!1;function nf(e,t){if(Ul=In,e=Zu(),qo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,d=-1,c=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==r||n!==0&&h.nodeType!==3||(o=l+n),h!==i||a!==0&&h.nodeType!==3||(d=l+a),h.nodeType===3&&(l+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++c===n&&(o=l),f===i&&++u===a&&(d=l),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=o===-1||d===-1?null:{start:o,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(zl={focusedElem:e,selectionRange:r},In=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,E=w.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:Rt(t.type,x),E);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(v){Me(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return w=jc,jc=!1,w}function xa(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&ro(t,r,i)}n=n.next}while(n!==a)}}function pi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function so(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function K0(e){var t=e.alternate;t!==null&&(e.alternate=null,K0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[Ma],delete t[Bl],delete t[Fm],delete t[qm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function J0(e){return e.tag===5||e.tag===3||e.tag===4}function Nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||J0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ao(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Fn));else if(a!==4&&(e=e.child,e!==null))for(ao(e,t,r),e=e.sibling;e!==null;)ao(e,t,r),e=e.sibling}function no(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(no(e,t,r),e=e.sibling;e!==null;)no(e,t,r),e=e.sibling}var Ve=null,$t=!1;function mr(e,t,r){for(r=r.child;r!==null;)Y0(e,t,r),r=r.sibling}function Y0(e,t,r){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(ci,r)}catch{}switch(r.tag){case 5:Ze||_s(r,t);case 6:var a=Ve,n=$t;Ve=null,mr(e,t,r),Ve=a,$t=n,Ve!==null&&($t?(e=Ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&($t?(e=Ve,r=r.stateNode,e.nodeType===8?el(e.parentNode,r):e.nodeType===1&&el(e,r),Ta(e)):el(Ve,r.stateNode));break;case 4:a=Ve,n=$t,Ve=r.stateNode.containerInfo,$t=!0,mr(e,t,r),Ve=a,$t=n;break;case 0:case 11:case 14:case 15:if(!Ze&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&ro(r,t,l),n=n.next}while(n!==a)}mr(e,t,r);break;case 1:if(!Ze&&(_s(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){Me(r,t,o)}mr(e,t,r);break;case 21:mr(e,t,r);break;case 22:r.mode&1?(Ze=(a=Ze)||r.memoizedState!==null,mr(e,t,r),Ze=a):mr(e,t,r);break;default:mr(e,t,r)}}function _c(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new af),t.forEach(function(a){var n=ff.bind(null,e,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Ot(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ve=o.stateNode,$t=!1;break e;case 3:Ve=o.stateNode.containerInfo,$t=!0;break e;case 4:Ve=o.stateNode.containerInfo,$t=!0;break e}o=o.return}if(Ve===null)throw Error(V(160));Y0(i,l,n),Ve=null,$t=!1;var d=n.alternate;d!==null&&(d.return=null),n.return=null}catch(c){Me(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)X0(t,e),t=t.sibling}function X0(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Gt(e),a&4){try{xa(3,e,e.return),pi(3,e)}catch(x){Me(e,e.return,x)}try{xa(5,e,e.return)}catch(x){Me(e,e.return,x)}}break;case 1:Ot(t,e),Gt(e),a&512&&r!==null&&_s(r,r.return);break;case 5:if(Ot(t,e),Gt(e),a&512&&r!==null&&_s(r,r.return),e.flags&32){var n=e.stateNode;try{_a(n,"")}catch(x){Me(e,e.return,x)}}if(a&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&bu(n,i),Tl(o,l);var c=Tl(o,i);for(l=0;l<d.length;l+=2){var u=d[l],h=d[l+1];u==="style"?_u(n,h):u==="dangerouslySetInnerHTML"?ju(n,h):u==="children"?_a(n,h):To(n,u,h,c)}switch(o){case"input":Nl(n,i);break;case"textarea":wu(n,i);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ts(n,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ts(n,!!i.multiple,i.defaultValue,!0):Ts(n,!!i.multiple,i.multiple?[]:"",!1))}n[Ma]=i}catch(x){Me(e,e.return,x)}}break;case 6:if(Ot(t,e),Gt(e),a&4){if(e.stateNode===null)throw Error(V(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(x){Me(e,e.return,x)}}break;case 3:if(Ot(t,e),Gt(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Ta(t.containerInfo)}catch(x){Me(e,e.return,x)}break;case 4:Ot(t,e),Gt(e);break;case 13:Ot(t,e),Gt(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(od=Le())),a&4&&_c(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(c=Ze)||u,Ot(t,e),Ze=c):Ot(t,e),Gt(e),a&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(ne=e,u=e.child;u!==null;){for(h=ne=u;ne!==null;){switch(f=ne,p=f.child,f.tag){case 0:case 11:case 14:case 15:xa(4,f,f.return);break;case 1:_s(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){a=f,r=f.return;try{t=a,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(x){Me(a,r,x)}}break;case 5:_s(f,f.return);break;case 22:if(f.memoizedState!==null){Cc(h);continue}}p!==null?(p.return=f,ne=p):Cc(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,c?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,d=h.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=Nu("display",l))}catch(x){Me(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Me(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ot(t,e),Gt(e),a&4&&_c(e);break;case 21:break;default:Ot(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(J0(r)){var a=r;break e}r=r.return}throw Error(V(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(_a(n,""),a.flags&=-33);var i=Nc(e);no(e,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Nc(e);ao(e,o,l);break;default:throw Error(V(161))}}catch(d){Me(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lf(e,t,r){ne=e,Z0(e)}function Z0(e,t,r){for(var a=(e.mode&1)!==0;ne!==null;){var n=ne,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||hn;if(!l){var o=n.alternate,d=o!==null&&o.memoizedState!==null||Ze;o=hn;var c=Ze;if(hn=l,(Ze=d)&&!c)for(ne=n;ne!==null;)l=ne,d=l.child,l.tag===22&&l.memoizedState!==null?Ec(n):d!==null?(d.return=l,ne=d):Ec(n);for(;i!==null;)ne=i,Z0(i),i=i.sibling;ne=n,hn=o,Ze=c}Sc(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,ne=i):Sc(e)}}function Sc(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||pi(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ze)if(r===null)a.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Rt(t.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cc(t,i,a);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}cc(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ta(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Ze||t.flags&512&&so(t)}catch(f){Me(t,t.return,f)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Cc(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Ec(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{pi(4,t)}catch(d){Me(t,r,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(d){Me(t,n,d)}}var i=t.return;try{so(t)}catch(d){Me(t,i,d)}break;case 5:var l=t.return;try{so(t)}catch(d){Me(t,l,d)}}}catch(d){Me(t,t.return,d)}if(t===e){ne=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ne=o;break}ne=t.return}}var of=Math.ceil,Xn=hr.ReactCurrentDispatcher,id=hr.ReactCurrentOwner,Et=hr.ReactCurrentBatchConfig,pe=0,We=null,Ue=null,Qe=0,xt=0,Ss=$r(0),qe=0,za=null,Zr=0,vi=0,ld=0,ya=null,dt=null,od=0,Fs=1/0,rr=null,Zn=!1,io=null,Tr=null,gn=!1,jr=null,ei=0,pa=0,lo=null,Pn=-1,Dn=0;function st(){return pe&6?Le():Pn!==-1?Pn:Pn=Le()}function Pr(e){return e.mode&1?pe&2&&Qe!==0?Qe&-Qe:Hm.transition!==null?(Dn===0&&(Dn=Lu()),Dn):(e=be,e!==0||(e=window.event,e=e===void 0?16:Hu(e.type)),e):1}function zt(e,t,r,a){if(50<pa)throw pa=0,lo=null,Error(V(185));Ba(e,r,a),(!(pe&2)||e!==We)&&(e===We&&(!(pe&2)&&(vi|=r),qe===4&&br(e,Qe)),mt(e,a),r===1&&pe===0&&!(t.mode&1)&&(Fs=Le()+500,fi&&Lr()))}function mt(e,t){var r=e.callbackNode;Hg(e,t);var a=Ln(e,e===We?Qe:0);if(a===0)r!==null&&Ld(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&Ld(r),t===1)e.tag===0?Bm(Tc.bind(null,e)):d0(Tc.bind(null,e)),Um(function(){!(pe&6)&&Lr()}),r=null;else{switch(Iu(a)){case 1:r=Mo;break;case 4:r=Ru;break;case 16:r=$n;break;case 536870912:r=$u;break;default:r=$n}r=lh(r,eh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function eh(e,t){if(Pn=-1,Dn=0,pe&6)throw Error(V(327));var r=e.callbackNode;if(Ms()&&e.callbackNode!==r)return null;var a=Ln(e,e===We?Qe:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=ti(e,a);else{t=a;var n=pe;pe|=2;var i=rh();(We!==e||Qe!==t)&&(rr=null,Fs=Le()+500,Vr(e,t));do try{uf();break}catch(o){th(e,o)}while(!0);Vo(),Xn.current=i,pe=n,Ue!==null?t=0:(We=null,Qe=0,t=qe)}if(t!==0){if(t===2&&(n=Ml(e),n!==0&&(a=n,t=oo(e,n))),t===1)throw r=za,Vr(e,0),br(e,a),mt(e,Le()),r;if(t===6)br(e,a);else{if(n=e.current.alternate,!(a&30)&&!df(n)&&(t=ti(e,a),t===2&&(i=Ml(e),i!==0&&(a=i,t=oo(e,i))),t===1))throw r=za,Vr(e,0),br(e,a),mt(e,Le()),r;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(V(345));case 2:Fr(e,dt,rr);break;case 3:if(br(e,a),(a&130023424)===a&&(t=od+500-Le(),10<t)){if(Ln(e,0)!==0)break;if(n=e.suspendedLanes,(n&a)!==a){st(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=ql(Fr.bind(null,e,dt,rr),t);break}Fr(e,dt,rr);break;case 4:if(br(e,a),(a&4194240)===a)break;for(t=e.eventTimes,n=-1;0<a;){var l=31-Ut(a);i=1<<l,l=t[l],l>n&&(n=l),a&=~i}if(a=n,a=Le()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*of(a/1960))-a,10<a){e.timeoutHandle=ql(Fr.bind(null,e,dt,rr),a);break}Fr(e,dt,rr);break;case 5:Fr(e,dt,rr);break;default:throw Error(V(329))}}}return mt(e,Le()),e.callbackNode===r?eh.bind(null,e):null}function oo(e,t){var r=ya;return e.current.memoizedState.isDehydrated&&(Vr(e,t).flags|=256),e=ti(e,t),e!==2&&(t=dt,dt=r,t!==null&&co(t)),e}function co(e){dt===null?dt=e:dt.push.apply(dt,e)}function df(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!Ft(i(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function br(e,t){for(t&=~ld,t&=~vi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ut(t),a=1<<r;e[r]=-1,t&=~a}}function Tc(e){if(pe&6)throw Error(V(327));Ms();var t=Ln(e,0);if(!(t&1))return mt(e,Le()),null;var r=ti(e,t);if(e.tag!==0&&r===2){var a=Ml(e);a!==0&&(t=a,r=oo(e,a))}if(r===1)throw r=za,Vr(e,0),br(e,t),mt(e,Le()),r;if(r===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,dt,rr),mt(e,Le()),null}function dd(e,t){var r=pe;pe|=1;try{return e(t)}finally{pe=r,pe===0&&(Fs=Le()+500,fi&&Lr())}}function es(e){jr!==null&&jr.tag===0&&!(pe&6)&&Ms();var t=pe;pe|=1;var r=Et.transition,a=be;try{if(Et.transition=null,be=1,e)return e()}finally{be=a,Et.transition=r,pe=t,!(pe&6)&&Lr()}}function cd(){xt=Ss.current,Ce(Ss)}function Vr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Im(r)),Ue!==null)for(r=Ue.return;r!==null;){var a=r;switch(Ho(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&qn();break;case 3:Us(),Ce(ht),Ce(et),Zo();break;case 5:Xo(a);break;case 4:Us();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:Qo(a.type._context);break;case 22:case 23:cd()}r=r.return}if(We=e,Ue=e=Dr(e.current,null),Qe=xt=t,qe=0,za=null,ld=vi=Zr=0,dt=ya=null,Wr!==null){for(t=0;t<Wr.length;t++)if(r=Wr[t],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}Wr=null}return e}function th(e,t){do{var r=Ue;try{if(Vo(),Cn.current=Yn,Jn){for(var a=Ae.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Jn=!1}if(Xr=0,He=Fe=Ae=null,fa=!1,La=0,id.current=null,r===null||r.return===null){qe=1,za=t,Ue=null;break}e:{var i=e,l=r.return,o=r,d=t;if(t=Qe,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xc(l);if(p!==null){p.flags&=-257,yc(p,l,o,i,t),p.mode&1&&fc(i,c,t),t=p,d=c;var w=t.updateQueue;if(w===null){var x=new Set;x.add(d),t.updateQueue=x}else w.add(d);break e}else{if(!(t&1)){fc(i,c,t),ud();break e}d=Error(V(426))}}else if(Te&&o.mode&1){var E=xc(l);if(E!==null){!(E.flags&65536)&&(E.flags|=256),yc(E,l,o,i,t),Wo(zs(d,o));break e}}i=d=zs(d,o),qe!==4&&(qe=2),ya===null?ya=[i]:ya.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=I0(i,d,t);dc(i,y);break e;case 1:o=d;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Tr===null||!Tr.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=U0(i,o,t);dc(i,v);break e}}i=i.return}while(i!==null)}ah(r)}catch(P){t=P,Ue===r&&r!==null&&(Ue=r=r.return);continue}break}while(!0)}function rh(){var e=Xn.current;return Xn.current=Yn,e===null?Yn:e}function ud(){(qe===0||qe===3||qe===2)&&(qe=4),We===null||!(Zr&268435455)&&!(vi&268435455)||br(We,Qe)}function ti(e,t){var r=pe;pe|=2;var a=rh();(We!==e||Qe!==t)&&(rr=null,Vr(e,t));do try{cf();break}catch(n){th(e,n)}while(!0);if(Vo(),pe=r,Xn.current=a,Ue!==null)throw Error(V(261));return We=null,Qe=0,qe}function cf(){for(;Ue!==null;)sh(Ue)}function uf(){for(;Ue!==null&&!Rg();)sh(Ue)}function sh(e){var t=ih(e.alternate,e,xt);e.memoizedProps=e.pendingProps,t===null?ah(e):Ue=t,id.current=null}function ah(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=sf(r,t),r!==null){r.flags&=32767,Ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ue=null;return}}else if(r=rf(r,t,xt),r!==null){Ue=r;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);qe===0&&(qe=5)}function Fr(e,t,r){var a=be,n=Et.transition;try{Et.transition=null,be=1,hf(e,t,r,a)}finally{Et.transition=n,be=a}return null}function hf(e,t,r,a){do Ms();while(jr!==null);if(pe&6)throw Error(V(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Wg(e,i),e===We&&(Ue=We=null,Qe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gn||(gn=!0,lh($n,function(){return Ms(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Et.transition,Et.transition=null;var l=be;be=1;var o=pe;pe|=4,id.current=null,nf(e,r),X0(r,e),Dm(zl),In=!!Ul,zl=Ul=null,e.current=r,lf(r),$g(),pe=o,be=l,Et.transition=i}else e.current=r;if(gn&&(gn=!1,jr=e,ei=n),i=e.pendingLanes,i===0&&(Tr=null),Ug(r.stateNode),mt(e,Le()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Zn)throw Zn=!1,e=io,io=null,e;return ei&1&&e.tag!==0&&Ms(),i=e.pendingLanes,i&1?e===lo?pa++:(pa=0,lo=e):pa=0,Lr(),null}function Ms(){if(jr!==null){var e=Iu(ei),t=Et.transition,r=be;try{if(Et.transition=null,be=16>e?16:e,jr===null)var a=!1;else{if(e=jr,jr=null,ei=0,pe&6)throw Error(V(331));var n=pe;for(pe|=4,ne=e.current;ne!==null;){var i=ne,l=i.child;if(ne.flags&16){var o=i.deletions;if(o!==null){for(var d=0;d<o.length;d++){var c=o[d];for(ne=c;ne!==null;){var u=ne;switch(u.tag){case 0:case 11:case 15:xa(8,u,i)}var h=u.child;if(h!==null)h.return=u,ne=h;else for(;ne!==null;){u=ne;var f=u.sibling,p=u.return;if(K0(u),u===c){ne=null;break}if(f!==null){f.return=p,ne=f;break}ne=p}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}ne=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ne=l;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xa(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ne=y;break e}ne=i.return}}var m=e.current;for(ne=m;ne!==null;){l=ne;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,ne=g;else e:for(l=m;ne!==null;){if(o=ne,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:pi(9,o)}}catch(P){Me(o,o.return,P)}if(o===l){ne=null;break e}var v=o.sibling;if(v!==null){v.return=o.return,ne=v;break e}ne=o.return}}if(pe=n,Lr(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(ci,e)}catch{}a=!0}return a}finally{be=r,Et.transition=t}}return!1}function Pc(e,t,r){t=zs(r,t),t=I0(e,t,1),e=Er(e,t,1),t=st(),e!==null&&(Ba(e,1,t),mt(e,t))}function Me(e,t,r){if(e.tag===3)Pc(e,e,r);else for(;t!==null;){if(t.tag===3){Pc(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Tr===null||!Tr.has(a))){e=zs(r,e),e=U0(t,e,1),t=Er(t,e,1),e=st(),t!==null&&(Ba(t,1,e),mt(t,e));break}}t=t.return}}function gf(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&r,We===e&&(Qe&r)===r&&(qe===4||qe===3&&(Qe&130023424)===Qe&&500>Le()-od?Vr(e,0):ld|=r),mt(e,t)}function nh(e,t){t===0&&(e.mode&1?(t=rn,rn<<=1,!(rn&130023424)&&(rn=4194304)):t=1);var r=st();e=cr(e,t),e!==null&&(Ba(e,t,r),mt(e,r))}function mf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),nh(e,r)}function ff(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(V(314))}a!==null&&a.delete(t),nh(e,r)}var ih;ih=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)ut=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ut=!1,tf(e,t,r);ut=!!(e.flags&131072)}else ut=!1,Te&&t.flags&1048576&&c0(t,Wn,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Tn(e,t),e=t.pendingProps;var n=$s(t,et.current);Os(t,r),n=td(null,t,a,e,n,r);var i=rd();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(a)?(i=!0,Bn(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Jo(t),n.updater=yi,t.stateNode=n,n._reactInternals=t,Kl(t,a,e,r),t=Xl(null,t,a,!0,i,r)):(t.tag=0,Te&&i&&Bo(t),rt(null,t,n,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Tn(e,t),e=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=yf(a),e=Rt(a,e),n){case 0:t=Yl(null,t,a,e,r);break e;case 1:t=bc(null,t,a,e,r);break e;case 11:t=pc(null,t,a,e,r);break e;case 14:t=vc(null,t,a,Rt(a.type,e),r);break e}throw Error(V(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Rt(a,n),Yl(e,t,a,n,r);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Rt(a,n),bc(e,t,a,n,r);case 3:e:{if(B0(t),e===null)throw Error(V(387));a=t.pendingProps,i=t.memoizedState,n=i.element,x0(e,t),Qn(t,a,null,r);var l=t.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=zs(Error(V(423)),t),t=wc(e,t,a,r,n);break e}else if(a!==n){n=zs(Error(V(424)),t),t=wc(e,t,a,r,n);break e}else for(pt=Cr(t.stateNode.containerInfo.firstChild),vt=t,Te=!0,It=null,r=m0(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ls(),a===n){t=ur(e,t,r);break e}rt(e,t,a,r)}t=t.child}return t;case 5:return y0(t),e===null&&Gl(t),a=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,l=n.children,Fl(a,n)?l=null:i!==null&&Fl(a,i)&&(t.flags|=32),q0(e,t),rt(e,t,l,r),t.child;case 6:return e===null&&Gl(t),null;case 13:return H0(e,t,r);case 4:return Yo(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Is(t,null,a,r):rt(e,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Rt(a,n),pc(e,t,a,n,r);case 7:return rt(e,t,t.pendingProps,r),t.child;case 8:return rt(e,t,t.pendingProps.children,r),t.child;case 12:return rt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,_e(Gn,a._currentValue),a._currentValue=l,i!==null)if(Ft(i.value,l)){if(i.children===n.children&&!ht.current){t=ur(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var d=o.firstContext;d!==null;){if(d.context===a){if(i.tag===1){d=lr(-1,r&-r),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Vl(i.return,r,t),o.lanes|=r;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(V(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Vl(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}rt(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Os(t,r),n=Pt(n),a=a(n),t.flags|=1,rt(e,t,a,r),t.child;case 14:return a=t.type,n=Rt(a,t.pendingProps),n=Rt(a.type,n),vc(e,t,a,n,r);case 15:return z0(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Rt(a,n),Tn(e,t),t.tag=1,gt(a)?(e=!0,Bn(t)):e=!1,Os(t,r),L0(t,a,n),Kl(t,a,n,r),Xl(null,t,a,!0,e,r);case 19:return W0(e,t,r);case 22:return F0(e,t,r)}throw Error(V(156,t.tag))};function lh(e,t){return Mu(e,t)}function xf(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,r,a){return new xf(e,t,r,a)}function hd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yf(e){if(typeof e=="function")return hd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Do)return 11;if(e===Ao)return 14}return 2}function Dr(e,t){var r=e.alternate;return r===null?(r=Ct(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function An(e,t,r,a,n,i){var l=2;if(a=e,typeof e=="function")hd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case xs:return Qr(r.children,n,i,t);case Po:l=8,n|=8;break;case vl:return e=Ct(12,r,t,n|2),e.elementType=vl,e.lanes=i,e;case bl:return e=Ct(13,r,t,n),e.elementType=bl,e.lanes=i,e;case wl:return e=Ct(19,r,t,n),e.elementType=wl,e.lanes=i,e;case yu:return bi(r,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fu:l=10;break e;case xu:l=9;break e;case Do:l=11;break e;case Ao:l=14;break e;case xr:l=16,a=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=Ct(l,r,t,n),t.elementType=e,t.type=a,t.lanes=i,t}function Qr(e,t,r,a){return e=Ct(7,e,a,t),e.lanes=r,e}function bi(e,t,r,a){return e=Ct(22,e,a,t),e.elementType=yu,e.lanes=r,e.stateNode={isHidden:!1},e}function ol(e,t,r){return e=Ct(6,e,null,t),e.lanes=r,e}function dl(e,t,r){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pf(e,t,r,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function gd(e,t,r,a,n,i,l,o,d){return e=new pf(e,t,r,o,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ct(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jo(i),e}function vf(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fs,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function oh(e){if(!e)return Or;e=e._reactInternals;e:{if(ns(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var r=e.type;if(gt(r))return o0(e,r,t)}return t}function dh(e,t,r,a,n,i,l,o,d){return e=gd(r,a,!0,e,n,i,l,o,d),e.context=oh(null),r=e.current,a=st(),n=Pr(r),i=lr(a,n),i.callback=t??null,Er(r,i,n),e.current.lanes=n,Ba(e,n,a),mt(e,a),e}function wi(e,t,r,a){var n=t.current,i=st(),l=Pr(n);return r=oh(r),t.context===null?t.context=r:t.pendingContext=r,t=lr(i,l),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Er(n,t,l),e!==null&&(zt(e,n,l,i),Sn(e,n,l)),l}function ri(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Dc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function md(e,t){Dc(e,t),(e=e.alternate)&&Dc(e,t)}function bf(){return null}var ch=typeof reportError=="function"?reportError:function(e){console.error(e)};function fd(e){this._internalRoot=e}ki.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));wi(e,t,null,null)};ki.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;es(function(){wi(null,e,null,null)}),t[dr]=null}};function ki(e){this._internalRoot=e}ki.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vr.length&&t!==0&&t<vr[r].priority;r++);vr.splice(r,0,e),r===0&&Bu(e)}};function xd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ji(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ac(){}function wf(e,t,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var c=ri(l);i.call(c)}}var l=dh(t,a,e,0,null,!1,!1,"",Ac);return e._reactRootContainer=l,e[dr]=l.current,Aa(e.nodeType===8?e.parentNode:e),es(),l}for(;n=e.lastChild;)e.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var c=ri(d);o.call(c)}}var d=gd(e,0,!1,null,null,!1,!1,"",Ac);return e._reactRootContainer=d,e[dr]=d.current,Aa(e.nodeType===8?e.parentNode:e),es(function(){wi(t,d,r,a)}),d}function Ni(e,t,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var d=ri(l);o.call(d)}}wi(t,l,e,n)}else l=wf(r,t,e,n,a);return ri(l)}Uu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=la(t.pendingLanes);r!==0&&(Ro(t,r|1),mt(t,Le()),!(pe&6)&&(Fs=Le()+500,Lr()))}break;case 13:es(function(){var a=cr(e,1);if(a!==null){var n=st();zt(a,e,1,n)}}),md(e,1)}};$o=function(e){if(e.tag===13){var t=cr(e,134217728);if(t!==null){var r=st();zt(t,e,134217728,r)}md(e,134217728)}};zu=function(e){if(e.tag===13){var t=Pr(e),r=cr(e,t);if(r!==null){var a=st();zt(r,e,t,a)}md(e,t)}};Fu=function(){return be};qu=function(e,t){var r=be;try{return be=e,t()}finally{be=r}};Dl=function(e,t,r){switch(t){case"input":if(Nl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var n=mi(a);if(!n)throw Error(V(90));vu(a),Nl(a,n)}}}break;case"textarea":wu(e,r);break;case"select":t=r.value,t!=null&&Ts(e,!!r.multiple,t,!1)}};Eu=dd;Tu=es;var kf={usingClientEntryPoint:!1,Events:[Wa,bs,mi,Su,Cu,dd]},ra={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jf={bundleType:ra.bundleType,version:ra.version,rendererPackageName:ra.rendererPackageName,rendererConfig:ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Au(e),e===null?null:e.stateNode},findFiberByHostInstance:ra.findFiberByHostInstance||bf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mn.isDisabled&&mn.supportsFiber)try{ci=mn.inject(jf),Kt=mn}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kf;wt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(t))throw Error(V(200));return vf(e,t,null,r)};wt.createRoot=function(e,t){if(!xd(e))throw Error(V(299));var r=!1,a="",n=ch;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=gd(e,1,!1,null,null,r,!1,a,n),e[dr]=t.current,Aa(e.nodeType===8?e.parentNode:e),new fd(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=Au(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return es(e)};wt.hydrate=function(e,t,r){if(!ji(t))throw Error(V(200));return Ni(null,e,t,!0,r)};wt.hydrateRoot=function(e,t,r){if(!xd(e))throw Error(V(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=ch;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=dh(t,null,e,1,r??null,n,!1,i,l),e[dr]=t.current,Aa(e),a)for(e=0;e<a.length;e++)r=a[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new ki(t)};wt.render=function(e,t,r){if(!ji(t))throw Error(V(200));return Ni(null,e,t,!1,r)};wt.unmountComponentAtNode=function(e){if(!ji(e))throw Error(V(40));return e._reactRootContainer?(es(function(){Ni(null,null,e,!1,function(){e._reactRootContainer=null,e[dr]=null})}),!0):!1};wt.unstable_batchedUpdates=dd;wt.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!ji(r))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return Ni(e,t,r,!1,a)};wt.version="18.3.1-next-f1338f8080-20240426";function uh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uh)}catch(e){console.error(e)}}uh(),uu.exports=wt;var Nf=uu.exports,Oc=Nf;yl.createRoot=Oc.createRoot,yl.hydrateRoot=Oc.hydrateRoot;const _f="modulepreload",Sf=function(e,t){return new URL(e,t).href},Mc={},Va=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){const l=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),d=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=Sf(c,a),c in Mc)return;Mc[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!a)for(let w=l.length-1;w>=0;w--){const x=l[w];if(x.href===c&&(!u||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":_f,u||(p.as="script"),p.crossOrigin="",p.href=c,d&&p.setAttribute("nonce",d),document.head.appendChild(p),u)return new Promise((w,x)=>{p.addEventListener("load",w),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},Cf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Va(async()=>{const{default:a}=await Promise.resolve().then(()=>Gs);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class yd extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class Ef extends yd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Rc extends yd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $c extends yd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var uo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(uo||(uo={}));var Tf=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};class Pf{constructor(t,{headers:r={},customFetch:a,region:n=uo.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=Cf(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return Tf(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:l}=r;let o={},{region:d}=r;d||(d=this.region);const c=new URL(`${this.url}/${t}`);d&&d!=="any"&&(o["x-region"]=d,c.searchParams.set("forceFunctionRegion",d));let u;l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:u}).catch(x=>{throw new Ef(x)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Rc(h);if(!h.ok)throw new $c(h);let p=((a=h.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return p==="application/json"?w=yield h.json():p==="application/octet-stream"?w=yield h.blob():p==="text/event-stream"?w=h:p==="multipart/form-data"?w=yield h.formData():w=yield h.text(),{data:w,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof $c||n instanceof Rc?n.context:void 0}}})}}var ct={},pd={},_i={},Qa={},Si={},Ci={},Df=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qs=Df();const Af=qs.fetch,hh=qs.fetch.bind(qs),gh=qs.Headers,Of=qs.Request,Mf=qs.Response,Gs=Object.freeze(Object.defineProperty({__proto__:null,Headers:gh,Request:Of,Response:Mf,default:hh,fetch:Af},Symbol.toStringTag,{value:"Module"})),Rf=Yh(Gs);var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});let $f=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ei.default=$f;var mh=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ci,"__esModule",{value:!0});const Lf=mh(Rf),If=mh(Ei);let Uf=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Lf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let n=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,d;let c=null,u=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const x=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),E=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");x&&E&&E.length>1&&(h=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(u=[],c=null,f=200,p="OK")}catch{i.status===404&&x===""?(f=204,p="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new If.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(i=>{var l,o,d;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}};Ci.default=Uf;var zf=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Si,"__esModule",{value:!0});const Ff=zf(Ci);let qf=class extends Ff.default{select(t){let r=!1;const a=(t??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:a,foreignTable:n,referencedTable:i=n}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:a=r}={}){const n=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,r,{foreignTable:a,referencedTable:n=a}={}){const i=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:a=!1,buffers:n=!1,wal:i=!1,format:l="text"}={}){var o;const d=[t?"analyze":null,r?"verbose":null,a?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${c}"; options=${d};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Si.default=qf;var Bf=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qa,"__esModule",{value:!0});const Hf=Bf(Si);let Wf=class extends Hf.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const a=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:a,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const l=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${i}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,a])=>{this.url.searchParams.append(r,`eq.${a}`)}),this}not(t,r,a){return this.url.searchParams.append(t,`not.${r}.${a}`),this}or(t,{foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,r,a){return this.url.searchParams.append(t,`${r}.${a}`),this}};Qa.default=Wf;var Gf=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_i,"__esModule",{value:!0});const sa=Gf(Qa);let Vf=class{constructor(t,{headers:r={},schema:a,fetch:n}){this.url=t,this.headers=r,this.schema=a,this.fetch=n}select(t,{head:r=!1,count:a}={}){const n=r?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),a&&(this.headers.Prefer=`count=${a}`),new sa.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:a=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((o,d)=>o.concat(Object.keys(d)),[]);if(l.length>0){const o=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",o.join(","))}}return new sa.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:a=!1,count:n,defaultToNull:i=!0}={}){const l="POST",o=[`resolution=${a?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const d=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new sa.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const a="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new sa.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",a=[];return t&&a.push(`count=${t}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new sa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};_i.default=Vf;var Ti={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.version=void 0;Pi.version="0.0.0-automated";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.DEFAULT_HEADERS=void 0;const Qf=Pi;Ti.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Qf.version}`};var fh=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});const Kf=fh(_i),Jf=fh(Qa),Yf=Ti;let Xf=class xh{constructor(t,{headers:r={},schema:a,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},Yf.DEFAULT_HEADERS),r),this.schemaName=a,this.fetch=n}from(t){const r=new URL(`${this.url}/${t}`);return new Kf.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new xh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:a=!1,get:n=!1,count:i}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let d;a||n?(l=a?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{o.searchParams.append(u,h)})):(l="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Jf.default({method:l,url:o,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};pd.default=Xf;var Vs=Tt&&Tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const yh=Vs(pd);ct.PostgrestClient=yh.default;const ph=Vs(_i);ct.PostgrestQueryBuilder=ph.default;const vh=Vs(Qa);ct.PostgrestFilterBuilder=vh.default;const bh=Vs(Si);ct.PostgrestTransformBuilder=bh.default;const wh=Vs(Ci);ct.PostgrestBuilder=wh.default;const kh=Vs(Ei);ct.PostgrestError=kh.default;var Zf=ct.default={PostgrestClient:yh.default,PostgrestQueryBuilder:ph.default,PostgrestFilterBuilder:vh.default,PostgrestTransformBuilder:bh.default,PostgrestBuilder:wh.default,PostgrestError:kh.default};const{PostgrestClient:ex,PostgrestQueryBuilder:Wp,PostgrestFilterBuilder:Gp,PostgrestTransformBuilder:Vp,PostgrestBuilder:Qp,PostgrestError:Kp}=Zf;function tx(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const rx=tx(),sx="2.11.15",ax=`realtime-js/${sx}`,nx="1.0.0",jh=1e4,ix=1e3;var va;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(va||(va={}));var Xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xe||(Xe={}));var Lt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Lt||(Lt={}));var ho;(function(e){e.websocket="websocket"})(ho||(ho={}));var Br;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Br||(Br={}));class lx{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const n=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=a.decode(t.slice(l,l+n));l=l+n;const d=a.decode(t.slice(l,l+i));l=l+i;const c=JSON.parse(a.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:d,payload:c}}}class Nh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ne||(Ne={}));const Lc=(e,t,r={})=>{var a;const n=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,l)=>(i[l]=ox(l,e,t,n),i),{})},ox=(e,t,r,a)=>{const n=t.find(o=>o.name===e),i=n==null?void 0:n.type,l=r[e];return i&&!a.includes(i)?_h(i,l):go(l)},_h=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return hx(t,r)}switch(e){case Ne.bool:return dx(t);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return cx(t);case Ne.json:case Ne.jsonb:return ux(t);case Ne.timestamp:return gx(t);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return go(t);default:return go(t)}},go=e=>e,dx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ux=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},hx=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>_h(t,o))}return e},gx=e=>typeof e=="string"?e.replace(" ","T"):e,Sh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class cl{constructor(t,r,a={},n=jh){this.channel=t,this.event=r,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ic;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ic||(Ic={}));class ba{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ba.syncState(this.state,n,i,l),this.pendingDiffs.forEach(d=>{this.state=ba.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ba.syncDiff(this.state,n,i,l),o())}),this.onJoin((n,i,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:l})}),this.onLeave((n,i,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,n){const i=this.cloneDeep(t),l=this.transformState(r),o={},d={};return this.map(i,(c,u)=>{l[c]||(d[c]=u)}),this.map(l,(c,u)=>{const h=i[c];if(h){const f=u.map(E=>E.presence_ref),p=h.map(E=>E.presence_ref),w=u.filter(E=>p.indexOf(E.presence_ref)<0),x=h.filter(E=>f.indexOf(E.presence_ref)<0);w.length>0&&(o[c]=w),x.length>0&&(d[c]=x)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:d},a,n)}static syncDiff(t,r,a,n){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(o,d)=>{var c;const u=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(d),u.length>0){const h=t[o].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[o].unshift(...f)}a(o,u,d)}),this.map(l,(o,d)=>{let c=t[o];if(!c)return;const u=d.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[o]=c,n(o,c,d),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const n=t[a];return"metas"in n?r[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Uc||(Uc={}));var zc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zc||(zc={}));var sr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sr||(sr={}));class vd{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new cl(this,Lt.join,this.params,this.timeout),this.rejoinTimer=new Nh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new ba(this),this.broadcastEndpointURL=Sh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:i,presence:l,private:o}}=this.params;this._onError(u=>t==null?void 0:t(sr.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(sr.CLOSED));const d={},c={broadcast:i,presence:l,postgres_changes:(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(u=>u.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(sr.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,w=[];for(let x=0;x<p;x++){const E=f[x],{filter:{event:y,schema:m,table:g,filter:v}}=E,P=u&&u[x];if(P&&P.event===y&&P.schema===m&&P.table===g&&P.filter===v)w.push(Object.assign(Object.assign({},E),{id:P.id}));else{this.unsubscribe(),this.state=Xe.errored,t==null||t(sr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(sr.SUBSCRIBED);return}}).receive("error",u=>{this.state=Xe.errored,t==null||t(sr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this._on(t,r,a)}async send(t,r={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lt.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new cl(this,Lt.leave,{},t),a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),l}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new cl(this,t,r,a);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var n,i;const l=t.toLocaleLowerCase(),{close:o,error:d,leave:c,join:u}=Lt;if(a&&[o,d,c,u].indexOf(l)>=0&&a!==this._joinRef())return;let f=this._onMessage(l,r,a);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var w,x,E;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((E=(x=p.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(p=>p.callback(f,a)):(i=this.bindings[l])===null||i===void 0||i.filter(p=>{var w,x,E,y,m,g;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in p){const v=p.id,P=(w=p.filter)===null||w===void 0?void 0:w.event;return v&&((x=r.ids)===null||x===void 0?void 0:x.includes(v))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((E=r.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const v=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return v==="*"||v===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===l}).map(p=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:x,table:E,commit_timestamp:y,type:m,errors:g}=w;f=Object.assign(Object.assign({},{schema:x,table:E,commit_timestamp:y,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(w))}p.callback(f,a)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&vd.isEqual(n.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Lt.close,{},t)}_onError(t){this._on(Lt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Lc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Lc(t.columns,t.old_record)),r}}const Fc=()=>{},mx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fx{constructor(t,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fc,this.ref=0,this.logger=Fc,this.conn=null,this.sendBuffer=[],this.serializer=new lx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...o)=>Va(async()=>{const{default:d}=await Promise.resolve().then(()=>Gs);return{default:d}},void 0,import.meta.url).then(({default:d})=>d(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${ho.websocket}`,this.httpEndpoint=Sh(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Nh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=rx),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nx}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case va.connecting:return Br.Connecting;case va.open:return Br.Open;case va.closing:return Br.Closing;default:return Br.Closed}}isConnected(){return this.connectionState()===Br.Open}channel(t,r={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new vd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:n,ref:i}=t,l=()=>{this.encode(t,o=>{var d;(d=this.conn)===null||d===void 0||d.send(o)})};this.log("push",`${r} ${a} (${i})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const n={access_token:r,version:ax};r&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(Lt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(ix,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:a,event:n,payload:i,ref:l}=r;a==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${n} ${l&&"("+l+")"||""}`,i),Array.from(this.channels).filter(o=>o._isMember(a)).forEach(o=>o._trigger(n,i,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Lt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${a}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([mx],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class bd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Be(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class xx extends bd{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class mo extends bd{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var yx=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};const Ch=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Va(async()=>{const{default:a}=await Promise.resolve().then(()=>Gs);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},px=()=>yx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Va(()=>Promise.resolve().then(()=>Gs),void 0,import.meta.url)).Response:Response}),fo=e=>{if(Array.isArray(e))return e.map(r=>fo(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=fo(a)}),t};var is=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};const ul=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),vx=(e,t,r)=>is(void 0,void 0,void 0,function*(){const a=yield px();e instanceof a&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{t(new xx(ul(n),e.status||500))}).catch(n=>{t(new mo(ul(n),n))}):t(new mo(ul(e),e))}),bx=(e,t,r,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),r))};function Ka(e,t,r,a,n,i){return is(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,bx(t,a,n,i)).then(d=>{if(!d.ok)throw d;return a!=null&&a.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>vx(d,o,a))})})}function si(e,t,r,a){return is(this,void 0,void 0,function*(){return Ka(e,"GET",t,r,a)})}function pr(e,t,r,a,n){return is(this,void 0,void 0,function*(){return Ka(e,"POST",t,a,n,r)})}function wx(e,t,r,a,n){return is(this,void 0,void 0,function*(){return Ka(e,"PUT",t,a,n,r)})}function kx(e,t,r,a){return is(this,void 0,void 0,function*(){return Ka(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Eh(e,t,r,a,n){return is(this,void 0,void 0,function*(){return Ka(e,"DELETE",t,a,n,r)})}var ot=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};const jx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nx{constructor(t,r={},a,n){this.url=t,this.headers=r,this.bucketId=a,this.fetch=Ch(n)}uploadOrUpdate(t,r,a,n){return ot(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},qc),n);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=a,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,d&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}upload(t,r,a){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,n){return ot(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:qc.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.append("cacheControl",c.cacheControl)):(d=a,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:d,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(d){if(Be(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return ot(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield pr(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new bd("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(a){if(Be(a))return{data:null,error:a};throw a}})}update(t,r,a){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return ot(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}copy(t,r,a){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,a){return ot(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield pr(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const l=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,a){return ot(this,void 0,void 0,function*(){try{const n=yield pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}download(t,r){return ot(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield si(this.fetch,`${this.url}/${n}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Be(o))return{data:null,error:o};throw o}})}info(t){return ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield si(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:fo(a),error:null}}catch(a){if(Be(a))return{data:null,error:a};throw a}})}exists(t){return ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield kx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(Be(a)&&a instanceof mo){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&n.push(d);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${a}${c}`)}}}remove(t){return ot(this,void 0,void 0,function*(){try{return{data:yield Eh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}})}list(t,r,a){return ot(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},jx),r),{prefix:t||""});return{data:yield pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const _x="2.7.1",Sx={"X-Client-Info":`storage-js/${_x}`};var cs=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};class Cx{constructor(t,r={},a){this.url=t,this.headers=Object.assign(Object.assign({},Sx),r),this.fetch=Ch(a)}listBuckets(){return cs(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}})}getBucket(t){return cs(this,void 0,void 0,function*(){try{return{data:yield si(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return cs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Be(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return cs(this,void 0,void 0,function*(){try{return{data:yield wx(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Be(a))return{data:null,error:a};throw a}})}emptyBucket(t){return cs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}})}deleteBucket(t){return cs(this,void 0,void 0,function*(){try{return{data:yield Eh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}})}}class Ex extends Cx{constructor(t,r={},a){super(t,r,a)}from(t){return new Nx(this.url,this.headers,t,this.fetch)}}const Tx="2.50.5";let da="";typeof Deno<"u"?da="deno":typeof document<"u"?da="web":typeof navigator<"u"&&navigator.product==="ReactNative"?da="react-native":da="node";const Px={"X-Client-Info":`supabase-js-${da}/${Tx}`},Dx={headers:Px},Ax={schema:"public"},Ox={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mx={};var Rx=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};const $x=e=>{let t;return e?t=e:typeof fetch>"u"?t=hh:t=fetch,(...r)=>t(...r)},Lx=()=>typeof Headers>"u"?gh:Headers,Ix=(e,t,r)=>{const a=$x(r),n=Lx();return(i,l)=>Rx(void 0,void 0,void 0,function*(){var o;const d=(o=yield t())!==null&&o!==void 0?o:e;let c=new n(l==null?void 0:l.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),a(i,Object.assign(Object.assign({},l),{headers:c}))})};var Ux=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};function zx(e){return e.endsWith("/")?e:e+"/"}function Fx(e,t){var r,a;const{db:n,auth:i,realtime:l,global:o}=e,{db:d,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},d),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),l),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(a=o==null?void 0:o.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>Ux(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Th="2.70.0",ms=30*1e3,xo=3,hl=xo*ms,qx="http://localhost:9999",Bx="supabase.auth.token",Hx={"X-Client-Info":`gotrue-js/${Th}`},yo="X-Supabase-Api-Version",Ph={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Wx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gx=6e5;class wd extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function he(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Vx extends wd{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function Qx(e){return he(e)&&e.name==="AuthApiError"}class Dh extends wd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ir extends wd{constructor(t,r,a,n){super(t,a,n),this.name=r,this.status=a}}class fr extends Ir{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Kx(e){return he(e)&&e.name==="AuthSessionMissingError"}class fn extends Ir{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xn extends Ir{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yn extends Ir{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jx(e){return he(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bc extends Ir{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class po extends Ir{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function gl(e){return he(e)&&e.name==="AuthRetryableFetchError"}class Hc extends Ir{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class wa extends Ir{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wc=` 	
\r=`.split(""),Yx=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Wc.length;t+=1)e[Wc[t].charCodeAt(0)]=-2;for(let t=0;t<ai.length;t+=1)e[ai[t].charCodeAt(0)]=t;return e})();function Gc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(ai[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(ai[a]),t.queuedBits-=6}}function Ah(e,t,r){const a=Yx[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Vc(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=l=>{ey(l,a,r)};for(let l=0;l<e.length;l+=1)Ah(e.charCodeAt(l),n,i);return t.join("")}function Xx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Zx(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Xx(a,t)}}function ey(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ty(e){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Ah(e.charCodeAt(n),r,a);return new Uint8Array(t)}function ry(e){const t=[];return Zx(e,r=>t.push(r)),new Uint8Array(t)}function sy(e){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};return e.forEach(n=>Gc(n,r,a)),Gc(null,r,a),t.join("")}function ay(e){return Math.round(Date.now()/1e3)+e}function ny(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Mt=()=>typeof window<"u"&&typeof document<"u",Ur={tested:!1,writable:!1},ka=()=>{if(!Mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ur.tested)return Ur.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ur.tested=!0,Ur.writable=!0}catch{Ur.tested=!0,Ur.writable=!1}return Ur.writable};function iy(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((a,n)=>{t[n]=a}),t}const Oh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Va(async()=>{const{default:a}=await Promise.resolve().then(()=>Gs);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},ly=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Mh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},pn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},vn=async(e,t)=>{await e.removeItem(t)};class Di{constructor(){this.promise=new Di.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Di.promiseConstructor=Promise;function ml(e){const t=e.split(".");if(t.length!==3)throw new wa("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!Wx.test(t[a]))throw new wa("JWT not in base64url format");return{header:JSON.parse(Vc(t[0])),payload:JSON.parse(Vc(t[1])),signature:ty(t[2]),raw:{header:t[0],payload:t[1]}}}async function oy(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function dy(e,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){a(l);return}}catch(l){if(!t(i,l)){n(l);return}}})()})}function cy(e){return("0"+e.toString(16)).substr(-2)}function uy(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,cy).join("")}async function hy(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function gy(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await hy(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function us(e,t,r=!1){const a=uy();let n=a;r&&(n+="/PASSWORD_RECOVERY"),await Mh(e,`${t}-code-verifier`,n);const i=await gy(a);return[i,a===i?"plain":"s256"]}const my=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fy(e){const t=e.headers.get(yo);if(!t||!t.match(my))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function xy(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function yy(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const py=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hs(e){if(!py.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var vy=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};const qr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),by=[502,503,504];async function Qc(e){var t;if(!ly(e))throw new po(qr(e),0);if(by.includes(e.status))throw new po(qr(e),e.status);let r;try{r=await e.json()}catch(i){throw new Dh(qr(i),i)}let a;const n=fy(e);if(n&&n.getTime()>=Ph["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new Hc(qr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new fr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Hc(qr(r),e.status,r.weak_password.reasons);throw new Vx(qr(r),e.status||500,a)}const wy=(e,t,r,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),r))};async function fe(e,t,r,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[yo]||(i[yo]=Ph["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const l=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(l.redirect_to=a.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await ky(e,t,r+o,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(d):{data:Object.assign({},d),error:null}}async function ky(e,t,r,a,n,i){const l=wy(t,a,n,i);let o;try{o=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new po(qr(d),0)}if(o.ok||await Qc(o),a!=null&&a.noResolveJson)return o;try{return await o.json()}catch(d){await Qc(d)}}function tr(e){var t;let r=null;Sy(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=ay(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function Kc(e){const t=tr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function wr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function jy(e){return{data:e,error:null}}function Ny(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i}=e,l=vy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i},d=Object.assign({},l);return{data:{properties:o,user:d},error:null}}function _y(e){return e}function Sy(e){return e.access_token&&e.refresh_token&&e.expires_in}const fl=["global","local","others"];var Cy=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};class Ey{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=Oh(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=fl[0]){if(fl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fl.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(he(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:wr})}catch(a){if(he(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=Cy(t,["options"]),n=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Ny,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:wr})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,n,i,l,o,d;try{const c={nextPage:null,lastPage:0,total:0},u=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:_y});if(u.error)throw u.error;const h=await u.json(),f=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,p=(d=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&d!==void 0?d:[];return p.length>0&&(p.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);c[`${E}Page`]=x}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(he(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){hs(t);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:wr})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){hs(t);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:wr})}catch(a){if(he(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){hs(t);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:wr})}catch(a){if(he(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){hs(t.userId);try{const{data:r,error:a}=await fe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:a}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(t){hs(t.userId),hs(t.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}}const Ty={getItem:e=>ka()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ka()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ka()&&globalThis.localStorage.removeItem(e)}};function Jc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Py(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const gs={debug:!!(globalThis&&ka()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Dy extends Rh{}async function Ay(e,t,r){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),gs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Dy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Py();const Oy={url:qx,storageKey:Bx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yc(e,t,r){return await r()}class Fa{constructor(t){var r,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fa.nextInstanceID,Fa.nextInstanceID+=1,this.instanceID>0&&Mt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Oy),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Ey({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Oh(n.fetch),this.lock=n.lock||Yc,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Mt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ay:this.lock=Yc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ka()?this.storage=Ty:(this.memoryStorage={},this.storage=Jc(this.memoryStorage)):(this.memoryStorage={},this.storage=Jc(this.memoryStorage)),Mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Th}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=iy(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),Mt()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Jx(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return he(r)?{error:r}:{error:new Dh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,n;try{const i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:tr}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,a,n;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await us(this.storage,this.storageKey)),i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:w},xform:tr})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:tr})}else throw new xn("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kc})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kc})}else throw new xn("You must provide either an email or phone number and a password");const{data:a,error:n}=r;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new fn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,n,i,l,o,d,c,u,h,f,p;let w,x;if("message"in t)w=t.message,x=t.signature;else{const{chain:E,wallet:y,statement:m,options:g}=t;let v;if(Mt())if(typeof y=="object")v=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))v=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const P=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const S=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),m?{statement:m}:null));let D;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")D=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)D=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)w=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),x=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${P.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(n=(a=g==null?void 0:g.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((d=g==null?void 0:g.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(u=g==null?void 0:g.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const S=await v.signMessage(new TextEncoder().encode(w),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:E,error:y}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:sy(x)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:tr});if(y)throw y;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new fn}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:y})}catch(E){if(he(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const r=await pn(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(r??"").split("/");try{const{data:i,error:l}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:tr});if(await vn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:l})}catch(i){if(he(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:n,access_token:i,nonce:l}=t,o=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:tr}),{data:d,error:c}=o;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new fn}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,n,i,l;try{if("email"in t){const{email:o,options:d}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await us(this.storage,this.storageKey));const{error:h}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:d}=t,{data:c,error:u}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new xn("You must provide either an email or phone number.")}catch(o){if(he(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,a;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:l,error:o}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:tr});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,c=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,a,n;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await us(this.storage,this.storageKey)),await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:jy})}catch(i){if(he(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new fr;const{error:n}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:l}=await fe(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:l,error:o}=await fe(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new xn("You must provide either an email or phone number and a type")}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await pn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<hl:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,c,u)=>(!l&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:wr}):await this._useSession(async r=>{var a,n,i;const{data:l,error:o}=r;if(o)throw o;return!(!((a=l.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fr}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:wr})})}catch(r){if(he(r))return Kx(r)&&(await this._removeSession(),await vn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new fr;const l=n.session;let o=null,d=null;this.flowType==="pkce"&&t.email!=null&&([o,d]=await us(this.storage,this.storageKey));const{data:c,error:u}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:d}),jwt:l.access_token,xform:wr});if(u)throw u;return l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(a){if(he(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new fr;const r=Date.now()/1e3;let a=r,n=!0,i=null;const{payload:l}=ml(t.access_token);if(l.exp&&(a=l.exp,n=a<=r),n){const{session:o,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(he(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(a=l.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new fr;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Mt())throw new yn("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bc("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:l,expires_in:o,expires_at:d,token_type:c}=t;if(!i||!o||!l||!c)throw new yn("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let f=u+h;d&&(f=parseInt(d));const p=f-u;p*1e3<=ms&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const w=f-h;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,u);const{data:x,error:E}=await this._getUser(i);if(E)throw E;const y={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:l,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(a){if(he(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await pn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{error:i};const l=(a=n.session)===null||a===void 0?void 0:a.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(Qx(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await vn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=ny(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,n;try{const{data:{session:i},error:l}=r;if(l)throw l;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await us(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(he(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:n}=await this._useSession(async i=>{var l,o,d,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Mt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(he(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:l}=r;if(l)throw l;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await dy(async n=>(n>0&&await oy(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:tr})),(n,i)=>{const l=200*Math.pow(2,n);return i&&gl(i)&&Date.now()+l-a<ms})}catch(a){if(this._debug(r,"error",a),he(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),Mt()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await pn(this.storage,this.storageKey);if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const n=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<hl;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${hl}s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),gl(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Di;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new fr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),he(i)){const l={session:null,error:i};return gl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Mh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await vn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Mt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ms);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ms}ms, refresh threshold is ${xo} ticks`),n<=xo&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Rh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const n=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,l]=await us(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await fe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:c}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((n=d==null?void 0:d.totp)===null||n===void 0)&&n.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],n=a.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=a.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ml(n.access_token);let o=null;l.aal&&(o=l.aal);let d=o;((a=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(l=>l.kid===t);if(a||(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+Gx>Date.now()))return a;const{data:n,error:i}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new wa("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),a=n.keys.find(l=>l.kid===t),!a)throw new wa("No matching signing key found in JWKS");return a}async getClaims(t,r={keys:[]}){try{let a=t;if(!a){const{data:p,error:w}=await this.getSession();if(w||!p.session)return{data:null,error:w};a=p.session.access_token}const{header:n,payload:i,signature:l,raw:{header:o,payload:d}}=ml(a);if(xy(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(a);if(p)throw p;return{data:{claims:i,header:n,signature:l},error:null}}const c=yy(n.alg),u=await this.fetchJwk(n.kid,r),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,l,ry(`${o}.${d}`)))throw new wa("Invalid JWT signature");return{data:{claims:i,header:n,signature:l},error:null}}catch(a){if(he(a))return{data:null,error:a};throw a}}}Fa.nextInstanceID=0;const My=Fa;class Ry extends My{constructor(t){super(t)}}var $y=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};class Ly{constructor(t,r,a){var n,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=zx(t),d=new URL(o);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Ax,realtime:Mx,auth:Object.assign(Object.assign({},Ox),{storageKey:c}),global:Dx},h=Fx(a??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=Ix(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ex(new URL("rest/v1",d).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Pf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ex(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return $y(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,storageKey:i,flowType:l,lock:o,debug:d},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ry({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,flowType:l,lock:o,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new fx(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Iy=(e,t,r)=>new Ly(e,t,r),Uy="https://gfxphdzbawtuincogots.supabase.co",zy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmeHBoZHpiYXd0dWluY29nb3RzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxNTY5MTYsImV4cCI6MjA2NzczMjkxNn0.UO0Z-zPjyf0wzXW7XEjVHFygXVfg7o15-1RJaBhIJV4",T=Iy(Uy,zy),$h=b.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),Ge=()=>{const e=b.useContext($h);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Fy=({children:e})=>{const[t,r]=b.useState(null),[a,n]=b.useState(null),[i,l]=b.useState(!0);b.useEffect(()=>{T.auth.getSession().then(({data:{session:c}})=>{n(c),r((c==null?void 0:c.user)??null),l(!1)});const{data:{subscription:d}}=T.auth.onAuthStateChange(async(c,u)=>{n(u),r((u==null?void 0:u.user)??null),l(!1)});return()=>d.unsubscribe()},[]);const o=async()=>{await T.auth.signOut()};return s.jsx($h.Provider,{value:{user:t,session:a,loading:i,signOut:o},children:e})},Lh=b.createContext({isDark:!0,toggleTheme:()=>{}}),Ih=()=>{const e=b.useContext(Lh);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},qy=({children:e})=>{const[t,r]=b.useState(!0);b.useEffect(()=>{const n=localStorage.getItem("theme");r(n?n==="dark":!0)},[]),b.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const a=()=>{r(!t)};return s.jsx(Lh.Provider,{value:{isDark:t,toggleTheme:a},children:e})},Uh=b.createContext(void 0),aa="study_timer_state",By=({children:e})=>{const[t,r]=b.useState(!1),[a,n]=b.useState(0),[i,l]=b.useState(""),[o,d]=b.useState(!1),[c,u]=b.useState(null),[h,f]=b.useState(null),[p,w]=b.useState(0),x=b.useRef(null);b.useEffect(()=>{const P=localStorage.getItem(aa);if(P)try{const S=JSON.parse(P);if(S.isActive){const D=Date.now(),B=Math.floor((D-S.startTime)/1e3),se=S.totalElapsed+B;r(!0),n(se),l(S.subject),d(!0),u(S.timerId),f(S.startTime),w(S.totalElapsed)}}catch(S){console.error("Error loading timer state:",S),localStorage.removeItem(aa)}},[]);const E=b.useCallback(()=>{if(o&&h){const P={timerId:c||"",startTime:h,totalElapsed:p,isActive:t,subject:i,userId:""};localStorage.setItem(aa,JSON.stringify(P))}else localStorage.removeItem(aa)},[o,h,c,p,t,i]);b.useEffect(()=>(t&&h?x.current=setInterval(()=>{const P=Date.now(),S=Math.floor((P-h)/1e3),D=p+S;n(D)},1e3):x.current&&(clearInterval(x.current),x.current=null),()=>{x.current&&clearInterval(x.current)}),[t,h,p]),b.useEffect(()=>{if(t){const P=setInterval(E,5e3),S=()=>{E()};return window.addEventListener("beforeunload",S),()=>{clearInterval(P),window.removeEventListener("beforeunload",S)}}},[t,E]);const y=b.useCallback((P,S)=>{const D=Date.now(),B=`timer_${D}`;r(!0),l(P),d(!0),u(B),f(D),w(0),n(0),console.log("Timer started for:",P)},[]),m=b.useCallback(()=>{if(t&&h){const P=Date.now(),S=Math.floor((P-h)/1e3),D=p+S;r(!1),w(D),n(D),f(null),console.log("Timer paused at:",D,"seconds")}},[t,h,p]),g=b.useCallback(()=>{r(!1),n(0),l(""),d(!1),u(null),f(null),w(0),localStorage.removeItem(aa),console.log("Timer stopped")},[]),v={isRunning:t,elapsedTime:a,startTimer:y,pauseTimer:m,stopTimer:g,currentSubject:i,hasActiveTimer:o};return s.jsx(Uh.Provider,{value:v,children:e})},zh=()=>{const e=b.useContext(Uh);if(e===void 0)throw new Error("useTimer must be used within a TimerProvider");return e},Fh=()=>{const[e,t]=b.useState(navigator.onLine),[r,a]=b.useState([]);return b.useEffect(()=>{const c=()=>t(!0),u=()=>t(!1);return window.addEventListener("online",c),window.addEventListener("offline",u),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",u)}},[]),{isOnline:e,saveOfflineData:(c,u)=>{try{const h=localStorage.getItem("offline_data"),f=h?JSON.parse(h):{};f[c]=u,localStorage.setItem("offline_data",JSON.stringify(f))}catch(h){console.error("Error saving offline data:",h)}},getOfflineData:c=>{try{const u=localStorage.getItem("offline_data");return(u?JSON.parse(u):{})[c]||null}catch(u){return console.error("Error getting offline data:",u),null}},addToPendingSync:c=>{const u=JSON.parse(localStorage.getItem("pending_sync")||"[]");u.push({...c,timestamp:Date.now()}),localStorage.setItem("pending_sync",JSON.stringify(u)),a(u)},clearPendingSync:()=>{localStorage.removeItem("pending_sync"),a([])},getPendingSync:()=>JSON.parse(localStorage.getItem("pending_sync")||"[]"),pendingSync:r}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(e,t)=>{const r=b.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:d,...c},u)=>b.createElement("svg",{ref:u,...Hy,width:n,height:n,stroke:a,strokeWidth:l?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Wy(e)}`,o].join(" "),...c},[...t.map(([h,f])=>b.createElement(h,f)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=oe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=oe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=oe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=oe("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=oe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=oe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=oe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=oe("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=oe("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=oe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=oe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=oe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=oe("FolderSync",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=oe("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=oe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=oe("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=oe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=oe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=oe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=oe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=oe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=oe("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=oe("Sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=oe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=oe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=oe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=oe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yp=()=>{const{isOnline:e,pendingSync:t}=Fh();return e&&t.length===0?null:s.jsx("div",{className:`fixed top-4 left-4 lg:top-4 lg:left-80 z-40 px-3 py-2 rounded-lg shadow-lg transition-all duration-300 ${e?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:s.jsx("div",{className:"flex items-center space-x-2",children:e?s.jsxs(s.Fragment,{children:[s.jsx(fp,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Online"}),t.length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(tp,{className:"w-3 h-3 animate-spin"}),s.jsxs("span",{className:"text-xs",children:["(",t.length,")"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(mp,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Offline"}),t.length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ky,{className:"w-3 h-3"}),s.jsxs("span",{className:"text-xs",children:["(",t.length,")"]})]})]})})})},Ja=()=>{const{user:e}=Ge(),[t,r]=b.useState(!1),[a,n]=b.useState(!0),[i,l]=b.useState(null),o=b.useCallback(async()=>{if(!e){r(!1),n(!1),l(null);return}try{n(!0),l(null);const{data:d,error:c}=await T.from("profiles").select("role").eq("id",e.id).single();if(c){console.error("Database error:",c),l(c.message),r(!1);return}r((d==null?void 0:d.role)==="admin")}catch(d){console.error("Error checking admin status:",d),l(d instanceof Error?d.message:"Unknown error"),r(!1)}finally{n(!1)}},[e]);return b.useEffect(()=>{o()},[o]),{isAdmin:t,loading:a,error:i,refresh:o}},pp=({activeTab:e,setActiveTab:t,isOpen:r,setIsOpen:a})=>{const{isAdmin:n}=Ja(),i=o=>{t(o),a(!1)},l=[{id:"dashboard",label:"Dashboard",icon:Wh},{id:"study",label:"Study",icon:Ie},{id:"prayer",label:"Prayer",icon:Yt},{id:"quran",label:"Quran",icon:rs},{id:"habits",label:"Habits",icon:at},{id:"exam",label:"Exams",icon:ls},{id:"routine",label:"Classes",icon:Xt},{id:"sleep",label:"Sleep",icon:yt},{id:"academic",label:"Analysis",icon:ni},{id:"achievements",label:"Awards",icon:ts},...n?[{id:"admin",label:"Admin",icon:Ai}]:[],{id:"profile",label:"Profile",icon:Zt}];return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 z-40 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:s.jsx(Ie,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),s.jsx("button",{onClick:()=>a(!r),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r?s.jsx(Re,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"}):s.jsx(ip,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})})]})}),r&&s.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>a(!1)}),s.jsx("div",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-40 transform transition-transform duration-300 ${r?"translate-x-0":"-translate-x-full"}`,children:s.jsx("div",{className:"p-6 pt-20",children:s.jsx("nav",{className:"space-y-2",children:l.map(o=>{const d=o.icon;return s.jsxs("button",{onClick:()=>i(o.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===o.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(d,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:o.label})]},o.id)})})})}),s.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:s.jsx("div",{className:"grid grid-cols-5 gap-1 p-2",children:l.slice(0,5).map(o=>{const d=o.icon;return s.jsxs("button",{onClick:()=>i(o.id),className:`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-colors ${e===o.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-300"}`,children:[s.jsx(d,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-medium truncate",children:o.label})]},o.id)})})})]})},vp=({isRunning:e,elapsedTime:t,subject:r})=>{if(!e)return null;const a=n=>{const i=Math.floor(n/3600),l=Math.floor(n%3600/60),o=Math.floor(n%60);return`${i.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-pulse",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vh,{className:"w-4 h-4"}),s.jsx(Xt,{className:"w-4 h-4"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:r}),s.jsx("div",{className:"text-xs opacity-90",children:a(Math.floor(t))})]})]}),s.jsx("div",{className:"text-xs mt-1 opacity-75",children:"Timer running in background"})]})},bp=()=>{const[e,t]=b.useState(!1),[r,a]=b.useState(""),[n,i]=b.useState(""),[l,o]=b.useState(""),[d,c]=b.useState(!1),[u,h]=b.useState(!1),[f,p]=b.useState(""),w=async x=>{x.preventDefault(),c(!0),p("");try{if(e){const{data:E,error:y}=await T.auth.signUp({email:r,password:n,options:{data:{full_name:l}}});if(y)throw y;if(E.user&&!E.session)try{const{error:m}=await T.from("profiles").insert({user_id:E.user.id,email:E.user.email,full_name:l});m&&console.warn("Profile creation failed:",m)}catch(m){console.warn("Profile creation error:",m)}p("Check your email for the confirmation link!")}else{const{error:E}=await T.auth.signInWithPassword({email:r,password:n});if(E)throw E}}catch(E){console.error("Auth error:",E),p(E.message)}finally{c(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center p-4",children:[s.jsx("div",{className:`absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.05"%3E%3Cpath d="M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-20`}),s.jsx("div",{className:"relative w-full max-w-md",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Hh,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Life Tracker"}),s.jsx("p",{className:"text-emerald-100 text-sm",children:e?"Create your account":"Welcome back"})]}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(Zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:"text",value:l,onChange:x=>o(x.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your full name",required:e})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:"email",value:r,onChange:x=>a(x.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Gh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:u?"text":"password",value:n,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your password",required:!0}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-emerald-300 hover:text-emerald-200",children:u?s.jsx(ep,{className:"w-5 h-5"}):s.jsx(Bh,{className:"w-5 h-5"})})]})]}),f&&s.jsx("div",{className:`p-3 rounded-lg text-sm ${f.includes("Check your email")?"bg-emerald-500/20 text-emerald-100 border border-emerald-400/30":"bg-red-500/20 text-red-100 border border-red-400/30"}`,children:f}),s.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Loading...":e?"Create Account":"Sign In"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>t(!e),className:"text-emerald-200 hover:text-emerald-100 text-sm transition-colors",children:e?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})]})},Zc=({setActiveTab:e})=>{var p;const{user:t}=Ge(),{isDark:r}=Ih(),[a,n]=b.useState({studyHoursToday:0,prayersCompleted:0,totalPrayers:5,habitStreak:0,nextExamDays:0,quranReadToday:0,quranDailyGoal:2,sleepHoursToday:0,sleepGoal:8,prayersMinutesToday:0}),[i,l]=b.useState([]),[o,d]=b.useState(null),c=new Date().toLocaleDateString("en-US",{weekday:"long"}),u=["Saturday","Sunday","Monday","Tuesday","Wednesday"].includes(c);b.useEffect(()=>{t&&h()},[t]);const h=async()=>{if(!t)return;const w=new Date().toISOString().split("T")[0],x=new Date().toLocaleDateString("en-US",{weekday:"long"});try{const{data:E}=await T.from("study_sessions").select("duration").eq("user_id",t.id).eq("date",w),y=(E==null?void 0:E.reduce((k,L)=>k+L.duration,0))||0,{data:m}=await T.from("prayer_records").select("*").eq("user_id",t.id).eq("date",w),g=(m==null?void 0:m.length)||0,{data:v}=await T.from("habits").select("streak").eq("user_id",t.id).eq("type","good"),P=v&&v.length>0?Math.max(...v.map(k=>k.streak)):0,{data:S}=await T.from("exams").select("date").eq("user_id",t.id).gte("date",w).order("date",{ascending:!0}).limit(1);let D=0;if(S&&S.length>0){const k=new Date(S[0].date),L=new Date,R=k.getTime()-L.getTime();D=Math.ceil(R/(1e3*60*60*24))}const{data:B}=await T.from("class_schedules").select("*").eq("user_id",t.id).eq("day",x).order("time"),{data:se}=await T.from("quran_readings").select("pages").eq("user_id",t.id).eq("date",w),ee=(se==null?void 0:se.reduce((k,L)=>k+L.pages,0))||0,{data:M}=await T.from("sleep_records").select("duration").eq("user_id",t.id).eq("date",w),te=(M==null?void 0:M.reduce((k,L)=>k+(L.duration||0),0))||0;let O=8;const{data:z}=await T.from("profiles").select("sleep_goal").eq("user_id",t.id).maybeSingle();z!=null&&z.sleep_goal&&(O=z.sleep_goal);const J=[20,30,20,15,30];n({studyHoursToday:Math.round(y*10)/10,prayersCompleted:g,totalPrayers:5,habitStreak:P,nextExamDays:D,quranReadToday:ee,quranDailyGoal:2,sleepHoursToday:Math.round(te*10)/10,sleepGoal:O,prayersMinutesToday:J.slice(0,g).reduce((k,L)=>k+L,0)}),l(B||[])}catch(E){console.error("Error loading dashboard data:",E)}},f=i&&i.length>0?1.5:0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:["Welcome back, ",((p=t==null?void 0:t.user_metadata)==null?void 0:p.full_name)||"User"]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Let's make today productive and meaningful"})]}),s.jsx("div",{className:"hidden sm:block text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s.jsxs("div",{className:"w-full flex flex-col items-center my-2",children:[s.jsxs("div",{className:"w-full max-w-2xl flex h-7 rounded-full overflow-hidden border border-gray-200 dark:border-gray-700 shadow-md transition-transform duration-200 hover:-translate-y-1 bg-gray-100 dark:bg-gray-900 group relative",children:[s.jsx("div",{className:`bg-blue-500 dark:bg-blue-700 h-full flex items-center transition-all duration-700 first:rounded-l-full last:rounded-r-full relative cursor-pointer ${o==="sleep"?"scale-105 z-10 shadow-lg ring-2 ring-blue-300 dark:ring-blue-700":""}`,style:{width:`${Math.min(a.sleepHoursToday/24*100,100)}%`,minWidth:a.sleepHoursToday>0?"2%":0},title:`Sleep: ${a.sleepHoursToday}h (${Math.round(a.sleepHoursToday/24*100)}%)`,onMouseEnter:()=>d("sleep"),onMouseLeave:()=>d(null),onTouchStart:()=>d("sleep"),onTouchEnd:()=>d(null),children:a.sleepHoursToday/24*100>7&&s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(a.sleepHoursToday/24*100),"%"]})}),s.jsx("div",{className:`bg-orange-500 dark:bg-orange-600 h-full flex items-center transition-all duration-700 relative cursor-pointer ${o==="study"?"scale-105 z-10 shadow-lg ring-2 ring-orange-300 dark:ring-orange-700":""}`,style:{width:`${Math.min(a.studyHoursToday/24*100,100)}%`,minWidth:a.studyHoursToday>0?"2%":0},title:`Study: ${a.studyHoursToday}h (${Math.round(a.studyHoursToday/24*100)}%)`,onMouseEnter:()=>d("study"),onMouseLeave:()=>d(null),onTouchStart:()=>d("study"),onTouchEnd:()=>d(null),children:a.studyHoursToday/24*100>7&&s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(a.studyHoursToday/24*100),"%"]})}),s.jsx("div",{className:`bg-teal-500 dark:bg-teal-700 h-full flex items-center transition-all duration-700 relative cursor-pointer ${o==="prayers"?"scale-105 z-10 shadow-lg ring-2 ring-teal-300 dark:ring-teal-700":""}`,style:{width:`${Math.min((a.prayersMinutesToday||0)/60/24*100,100)}%`,minWidth:a.prayersMinutesToday>0?"2%":0},title:`Prayers: ${((a.prayersMinutesToday||0)/60).toFixed(2)}h (${Math.round((a.prayersMinutesToday||0)/60/24*100)}%)`,onMouseEnter:()=>d("prayers"),onMouseLeave:()=>d(null),onTouchStart:()=>d("prayers"),onTouchEnd:()=>d(null),children:(a.prayersMinutesToday||0)/60/24*100>7&&s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round((a.prayersMinutesToday||0)/60/24*100),"%"]})}),s.jsx("div",{className:`bg-violet-500 dark:bg-violet-700 h-full flex items-center transition-all duration-700 relative cursor-pointer ${o==="class"?"scale-105 z-10 shadow-lg ring-2 ring-violet-300 dark:ring-violet-700":""}`,style:{width:`${Math.min(f/24*100,100)}%`,minWidth:f>0?"2%":0},title:`Class: ${f}h (${Math.round(f/24*100)}%)`,onMouseEnter:()=>d("class"),onMouseLeave:()=>d(null),onTouchStart:()=>d("class"),onTouchEnd:()=>d(null),children:f/24*100>7&&s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(f/24*100),"%"]})})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mt-2",children:[s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mr-2"}),"Sleep"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 mr-2"}),"Study"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-teal-500 mr-2"}),"Prayers"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-violet-100 dark:bg-violet-900 text-violet-700 dark:text-violet-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-violet-500 mr-2"}),"Class"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100",children:"Study Hours Today"}),s.jsxs("p",{className:"text-2xl font-bold",children:[a.studyHoursToday.toFixed(1),"h"]})]}),s.jsx(Ie,{className:"w-8 h-8 text-emerald-200"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${Math.min(a.studyHoursToday/6*100,100)}%`}})}),s.jsxs("p",{className:"text-xs text-emerald-100 mt-1",children:[Math.round(a.studyHoursToday/6*100),"% of daily goal"]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-teal-100",children:"Prayers Completed"}),s.jsxs("p",{className:"text-2xl font-bold",children:[a.prayersCompleted,"/",a.totalPrayers]})]}),s.jsx(Yt,{className:"w-8 h-8 text-teal-200"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"bg-teal-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${a.prayersCompleted/a.totalPrayers*100}%`}})}),s.jsx("p",{className:"text-xs text-teal-100 mt-1",children:a.prayersCompleted===5?"All completed!":"Keep going!"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-amber-100",children:"Habit Streak"}),s.jsx("p",{className:"text-2xl font-bold",children:a.habitStreak})]}),s.jsx(kd,{className:"w-8 h-8 text-amber-200"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-xs text-amber-100",children:"Days consistent"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-rose-500 to-pink-500 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-rose-100",children:"Exam in"}),s.jsx("p",{className:"text-2xl font-bold",children:a.nextExamDays||"None"})]}),s.jsx(ls,{className:"w-8 h-8 text-rose-200"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-xs text-rose-100",children:a.nextExamDays>0?"Days remaining":"No upcoming exams"})})]})]}),u&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Today's Classes"}),s.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Xt,{className:"w-4 h-4"}),s.jsx("span",{children:c})]})]}),s.jsx("div",{className:"space-y-3",children:i.length>0?i.map((w,x)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:w.subject}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[w.instructor,"  ",w.location]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:w.time})})]},x)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Xt,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No classes scheduled for today"}),s.jsx("p",{className:"text-sm mt-1",children:"Add your class schedule to see it here"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Today's Progress"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx(Ie,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Study Session"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${Math.min(a.studyHoursToday/6*100,100)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(a.studyHoursToday/6*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center",children:s.jsx(Yt,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Daily Prayers"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-teal-600 h-2 rounded-full",style:{width:`${a.prayersCompleted/a.totalPrayers*100}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(a.prayersCompleted/a.totalPrayers*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-amber-100 dark:bg-amber-900 rounded-full flex items-center justify-center",children:s.jsx(rs,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Quran Reading"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:`${Math.min(a.quranReadToday/a.quranDailyGoal*100,100)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(a.quranReadToday/a.quranDailyGoal*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center",children:s.jsx(yt,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Sleep Goal"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full w-0"})}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"0%"})]})]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>e("study"),className:"w-full bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx(Ie,{className:"w-4 h-4"}),s.jsx("span",{children:"Start Study Session"})]}),s.jsxs("button",{onClick:()=>e("prayer"),className:"w-full bg-teal-50 dark:bg-teal-900/20 hover:bg-teal-100 dark:hover:bg-teal-900/30 text-teal-700 dark:text-teal-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx(Yt,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Prayer"})]}),s.jsxs("button",{onClick:()=>e("habits"),className:"w-full bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-700 dark:text-amber-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Update Habits"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Achievements"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[s.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center",children:s.jsx(Kr,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"Getting Started"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Welcome to Life Tracker!"})]})]}),s.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx(Ie,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"First Steps"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Start tracking to unlock achievements"})]})]})]})]})]})]})]})},wp=({activeTab:e,setActiveTab:t})=>{var u;const{signOut:r,user:a}=Ge(),{isDark:n,toggleTheme:i}=Ih(),{isAdmin:l,error:o}=Ja(),d=async()=>{await r()},c=[{id:"dashboard",label:"Dashboard",icon:Wh},{id:"routine",label:"Classes",icon:Xt},{id:"study",label:"Study Tracker",icon:Ie},{id:"prayer",label:"Prayer Tracker",icon:Yt},{id:"quran",label:"Quran Tracker",icon:rs},{id:"habits",label:"Habit Tracker",icon:at},{id:"exam",label:"Exam Countdown",icon:ls},{id:"sleep",label:"Sleep Tracker",icon:yt},{id:"academic",label:"Academic",icon:ni},{id:"achievements",label:"Achievements",icon:ts},...l?[{id:"admin",label:"Admin Panel",icon:Ai}]:[],{id:"profile",label:"Profile",icon:Zt}];return s.jsxs("div",{className:"fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-10 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[s.jsxs("div",{className:"flex-1 flex flex-col p-6 min-h-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-8",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:s.jsx(Hh,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),s.jsx("nav",{className:`space-y-2 overflow-y-auto flex-1 min-h-0 sidebar-scrollbar${n?" dark":""}`,children:c.map(h=>{const f=h.icon;return s.jsxs("button",{onClick:()=>t(h.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===h.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-r-2 border-emerald-600 dark:border-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(f,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:h.label})]},h.id)})})]}),s.jsx("div",{className:"px-6 pb-6 space-y-4",children:s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx(Zt,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white truncate",children:((u=a==null?void 0:a.user_metadata)==null?void 0:u.full_name)||"User"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:a==null?void 0:a.email}),o&&s.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 truncate",children:["Admin Error: ",o]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[n?s.jsx(jd,{className:"w-4 h-4"}):s.jsx(yt,{className:"w-4 h-4"}),s.jsx("span",{children:n?"Light":"Dark"})]}),s.jsxs("button",{onClick:d,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[s.jsx(rp,{className:"w-4 h-4"}),s.jsx("span",{children:"Sign Out"})]})]})]})})]})},kp=()=>{const{user:e}=Ge(),{isOnline:t,saveOfflineData:r,getOfflineData:a,addToPendingSync:n}=Fh(),{isRunning:i,elapsedTime:l,startTimer:o,pauseTimer:d,stopTimer:c,currentSubject:u,hasActiveTimer:h}=zh(),[f,p]=b.useState(""),[w,x]=b.useState(6),[E,y]=b.useState(0),[m,g]=b.useState([]),[v,P]=b.useState([]),[S,D]=b.useState(!1),[B,se]=b.useState("");b.useEffect(()=>{e&&ee()},[e]),b.useEffect(()=>{h&&u&&p(u)},[h,u]);const ee=async()=>{if(!e)return;const L=new Date().toISOString().split("T")[0],{data:R}=await T.from("study_sessions").select("duration").eq("user_id",e.id).eq("date",L);if(R){const ue=R.reduce((ce,j)=>ce+j.duration,0);y(Math.round(ue*10)/10)}const U=new Date;U.setDate(U.getDate()-U.getDay());const{data:G}=await T.from("study_sessions").select("date, duration").eq("user_id",e.id).gte("date",U.toISOString().split("T")[0]);if(G){const ue=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ce=ue.map(j=>({day:j,hours:Math.round(G.filter(Z=>new Date(Z.date).getDay()===ue.indexOf(j)).reduce((Z,N)=>Z+N.duration,0)*10)/10}));P(ce)}const{data:de}=await T.from("study_sessions").select("subject, duration").eq("user_id",e.id).gte("date",U.toISOString().split("T")[0]);if(de){const ue=new Map;de.forEach(Z=>{const N=ue.get(Z.subject)||0;ue.set(Z.subject,N+Z.duration)});const ce=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"],j=Array.from(ue.entries()).map(([Z,N],W)=>({name:Z,hours:Math.round(Number(N)*10)/10,color:ce[W%ce.length]}));g(j)}},M=()=>{if(!f.trim()){alert("Please select or enter a subject first");return}e&&o(f,e.id)},te=()=>{d()},O=async()=>{if(!e||l===0)return;const L=new Date().toISOString().split("T")[0],R=l/3600,U={user_id:e.id,subject:f,duration:R,date:L,notes:`${Math.floor(l/3600)}h ${Math.floor(l%3600/60)}m session`};if(t){const{error:G}=await T.from("study_sessions").insert(U);G||(c(),p(""),ee())}else{n({table:"study_sessions",operation:"insert",data:U}),c(),p("");const G=a("study_sessions")||[];G.push({...U,id:Date.now().toString()}),r("study_sessions",G),ee()}},z=()=>{B.trim()&&!m.find(L=>L.name===B)&&(g(L=>[...L,{name:B,hours:0,color:["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"][L.length%5]}]),se(""),D(!1))},J=()=>l,k=L=>{const R=Math.floor(L/3600),U=Math.floor(L%3600/60),G=Math.floor(L%60);return`${R.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Study Tracker"}),s.jsxs("button",{onClick:()=>D(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(ss,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Subject"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Current Session"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Xt,{className:"w-4 h-4"}),s.jsx("span",{children:i?"Active":"Paused"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),s.jsxs("select",{value:f,onChange:L=>p(L.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",disabled:i,children:[s.jsx("option",{value:"",children:"Select a subject"}),m.map(L=>s.jsx("option",{value:L.name,children:L.name},L.name))]})]}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-6xl font-bold text-gray-800 dark:text-white mb-2",children:k(Math.floor(J()))}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:f||"Select a subject to start"}),i&&s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"Session in progress..."})]}),s.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[i?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:te,className:"px-8 py-3 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[s.jsx(lp,{className:"w-5 h-5"}),s.jsx("span",{children:"Pause"})]}),s.jsx("button",{onClick:O,className:"px-8 py-3 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg font-medium transition-colors",children:"End Session"})]}):s.jsxs("button",{onClick:M,disabled:!f,className:"px-8 py-3 bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[s.jsx(Vh,{className:"w-5 h-5"}),s.jsx("span",{children:"Start"})]}),s.jsx("button",{onClick:()=>{c(),p("")},className:"px-8 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Reset"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[E.toFixed(1),"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today's Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[w,"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily Goal"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(E/w*100),"%"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Progress"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("span",{children:"Progress towards daily goal"}),s.jsxs("span",{children:[E.toFixed(1),"/",w.toFixed(1)," hours"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(E/w*100,100)}%`}})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Subject Breakdown"}),s.jsx("div",{className:"space-y-4",children:m.length>0?m.map(L=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${L.color}`}),s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:L.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[L.hours.toFixed(1),"h"]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"this week"})]})]},L.name)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Ie,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No subjects added yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add subjects to track your study progress"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Weekly Overview"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Kr,{className:"w-4 h-4"}),s.jsxs("span",{children:[v.reduce((L,R)=>L+R.hours,0).toFixed(1),"h total"]})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:v.map(L=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:L.day}),s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[L.hours.toFixed(1),"h"]})})]},L.day))})]}),S&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Subject"}),s.jsx("button",{onClick:()=>D(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:B,onChange:L=>se(L.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics, Physics, etc."})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>D(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Subject"})]})]})]})})]})},jp=()=>{const{user:e}=Ge(),t=[{name:"Fajr",time:"05:00",completed:!1,type:null,icon:Qh},{name:"Dhuhr",time:"12:00",completed:!1,type:null,icon:jd},{name:"Asr",time:"16:00",completed:!1,type:null,icon:Jy},{name:"Maghrib",time:"18:00",completed:!1,type:null,icon:Kh},{name:"Isha",time:"20:00",completed:!1,type:null,icon:yt}],[r,a]=b.useState(t),[n,i]=b.useState(!1),[l,o]=b.useState(null),[d,c]=b.useState(""),[u,h]=b.useState(0),[f,p]=b.useState(0),[w,x]=b.useState(null),[E,y]=b.useState({totalPrayers:0,totalPossible:35,withJamat:0,consistency:0,bestStreak:0,personalBest:0}),[m,g]=b.useState([]),[v,P]=b.useState(!1);b.useEffect(()=>{e&&(a(t),B(),S())},[e]);const S=async()=>{if(!e)return;console.log("Testing database connection...");const{data:N,error:W}=await T.from("missed_prayers").select("count").eq("user_id",e.id).limit(1);console.log("Database connection test:",{data:N,error:W})},D=async()=>{if(!e)return;const N=new Date().toISOString().split("T")[0];console.log("Clearing all prayers for today:",N);try{const{error:W}=await T.from("prayer_records").delete().eq("user_id",e.id).eq("date",N);console.log("Clear regular prayers result:",{error:W});const{error:ae}=await T.from("missed_prayers").delete().eq("user_id",e.id).eq("missed_date",N);console.log("Clear kaza prayers result:",{error:ae}),await B()}catch(W){console.error("Error clearing prayers:",W)}},B=async()=>{if(e)try{const[N,W,ae,A,H]=await Promise.all([te(),O(),z(),J(),k()]);if(N){const re=t.map(F=>{const X=N.find(lt=>lt.prayer_name===F.name);let ge=null;if(H)switch(F.name){case"Fajr":ge=H.fajr_time;break;case"Dhuhr":ge=H.dhuhr_time;break;case"Asr":ge=H.asr_time;break;case"Maghrib":ge=H.maghrib_time;break;case"Isha":ge=H.isha_time;break}return{...F,time:ge||F.time,completed:!!X,type:(X==null?void 0:X.prayer_type)||null}});a(re)}await L()}catch(N){console.error("Error loading prayer data:",N)}},se=(N,W)=>{o(N),c(W)},ee=async N=>{if(e)try{const ae={Fajr:"fajr_time",Dhuhr:"dhuhr_time",Asr:"asr_time",Maghrib:"maghrib_time",Isha:"isha_time"}[N];if(!ae){console.error("Invalid prayer name:",N);return}const{error:A}=await T.from("user_settings").upsert({user_id:e.id,[ae]:d},{onConflict:"user_id"});if(A){console.error("Error saving prayer time:",A);return}a(H=>H.map(re=>re.name===N?{...re,time:d}:re)),o(null),c(""),console.log("Prayer time saved successfully:",N,d)}catch(W){console.error("Error saving prayer time:",W)}},M=()=>{o(null),c("")},te=async()=>{if(!e)return null;const N=new Date().toISOString().split("T")[0];console.log("Loading today's prayers for date:",N);const{data:W,error:ae}=await T.from("prayer_records").select("*").eq("user_id",e.id).eq("date",N);console.log("Regular prayers loaded:",W,"Error:",ae);const{data:A,error:H}=await T.from("missed_prayers").select("*").eq("user_id",e.id).eq("missed_date",N);console.log("Kaza prayers loaded:",A,"Error:",H);const re=new Map;W&&W.forEach(X=>{re.set(X.prayer_name,{...X,prayer_type:X.prayer_type,date:X.date,time:X.time,completed:!0})}),A&&A.forEach(X=>{re.has(X.prayer_name)||re.set(X.prayer_name,{...X,prayer_type:"kaza",date:X.missed_date,time:X.completed_time||X.prayer_time,completed:X.is_completed})});const F=Array.from(re.values());return console.log("Combined prayers for today:",F),F},O=async()=>{if(!e)return;const N=new Date;N.setDate(N.getDate()-N.getDay());const W=N.toISOString().split("T")[0],ae=new Date(N);ae.setDate(ae.getDate()+6);const A=ae.toISOString().split("T")[0],{data:H,error:re}=await T.from("prayer_records").select("*").eq("user_id",e.id).gte("date",W).lte("date",A);if(H){const F=H.filter(ze=>ze.prayer_type!=="kaza"),X=F.length,ge=35,lt=F.filter(ze=>ze.prayer_type==="jamat").length,Pe=Math.round(X/ge*100);y({totalPrayers:X,totalPossible:ge,withJamat:lt,consistency:Pe,bestStreak:0,personalBest:0})}},z=async()=>{if(!e)return;const N=new Date;let W=0,ae=new Date(N);for(;;){const F=ae.toISOString().split("T")[0],{data:X}=await T.from("prayer_records").select("*").eq("user_id",e.id).eq("date",F);if(X&&X.length>=5)W++,ae.setDate(ae.getDate()-1);else break}h(W);const A=new Date;A.setDate(1);const H=A.toISOString().split("T")[0],{data:re}=await T.from("prayer_records").select("*").eq("user_id",e.id).gte("date",H);if(re){const X=new Date().getDate()*5,ge=Math.round(re.length/X*100);p(ge)}},J=async()=>{if(!e)return;const N=new Date;N.setDate(N.getDate()-30);const W=N.toISOString().split("T")[0],ae=new Date().toISOString().split("T")[0];console.log("Loading kaza prayers from:",W,"to:",ae);const{data:A,error:H}=await T.from("missed_prayers").select("*").eq("user_id",e.id).gte("missed_date",W).lte("missed_date",ae).order("missed_date",{ascending:!1});if(console.log("Missed prayers data:",A,"Error:",H),A){const re=A.map(F=>({id:F.id,prayer_name:F.prayer_name,date:F.missed_date,completed:F.is_completed,completed_date:F.completed_date,prayer_time:F.prayer_time}));console.log("Processed kaza prayers list:",re),g(re)}else g([])},k=async()=>{if(!e)return null;try{const{data:N,error:W}=await T.from("user_settings").select("fajr_time, dhuhr_time, asr_time, maghrib_time, isha_time").eq("user_id",e.id).single();return W?(console.error("Error loading prayer times:",W),null):N}catch(N){return console.error("Error loading prayer times:",N),null}},L=async()=>{},R=async(N,W)=>{var H;if(!e)return;const ae=new Date().toISOString().split("T")[0],A=new Date().toTimeString().slice(0,5);console.log("Logging prayer:",{prayerName:N,type:W,today:ae,now:A});try{if(W==="kaza"){const{data:re,error:F}=await T.from("missed_prayers").upsert({user_id:e.id,prayer_name:N,missed_date:ae,prayer_time:((H=r.find(X=>X.name===N))==null?void 0:H.time)||"00:00",is_completed:!1,completed_date:null,completed_time:null},{onConflict:"user_id,prayer_name,missed_date"}).select();if(console.log("Kaza prayer insert result:",{data:re,error:F}),F){console.error("Error adding kaza prayer:",F);return}a(X=>X.map(ge=>ge.name===N?{...ge,completed:!0,type:W}:ge)),x(null),await J()}else{const{data:re,error:F}=await T.from("prayer_records").upsert({user_id:e.id,prayer_name:N,prayer_type:W,date:ae,time:A},{onConflict:"user_id,prayer_name,date"}).select();if(console.log("Regular prayer insert result:",{data:re,error:F}),F){console.error("Error adding regular prayer:",F);return}await T.from("missed_prayers").delete().eq("user_id",e.id).eq("prayer_name",N).eq("missed_date",ae),a(X=>X.map(ge=>ge.name===N?{...ge,completed:!0,type:W}:ge)),x(null),await Promise.all([O(),z(),J()])}}catch(re){console.error("Unexpected error logging prayer:",re)}},U=async N=>{if(!e)return;const W=new Date().toISOString().split("T")[0],ae=r.find(A=>A.name===N);console.log("Removing prayer:",{prayerName:N,type:ae==null?void 0:ae.type,today:W});try{if((ae==null?void 0:ae.type)==="kaza"){const{data:A,error:H}=await T.from("missed_prayers").delete().eq("user_id",e.id).eq("prayer_name",N).eq("missed_date",W);if(console.log("Kaza prayer delete result:",{data:A,error:H}),H){console.error("Error deleting kaza prayer:",H);return}a(re=>re.map(F=>F.name===N?{...F,completed:!1,type:null}:F)),await J()}else{const{data:A,error:H}=await T.from("prayer_records").delete().eq("user_id",e.id).eq("prayer_name",N).eq("date",W);if(console.log("Regular prayer delete result:",{data:A,error:H}),H){console.error("Error deleting regular prayer:",H);return}a(re=>re.map(F=>F.name===N?{...F,completed:!1,type:null}:F)),await Promise.all([O(),z()])}}catch(A){console.error("Unexpected error removing prayer:",A)}},G=r.filter(N=>N.completed&&N.type!=="kaza").length,de=G/r.length*100,ue=N=>{switch(N){case"jamat":return s.jsx(oi,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"});case"individual":return s.jsx(Zt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"kaza":return s.jsx(Cs,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});default:return null}},ce=N=>{switch(N){case"jamat":return"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800";case"individual":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case"kaza":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";default:return"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}},j=async N=>{if(!e)return;const W=new Date().toISOString().split("T")[0],ae=new Date().toTimeString().slice(0,5),{data:A,error:H}=await T.from("missed_prayers").update({is_completed:!0,completed_date:W,completed_time:ae,updated_at:new Date().toISOString()}).eq("id",N.id).select();!H&&A&&(g(re=>re.map(F=>F.id===N.id?{...F,completed:!0,completed_date:W}:F)),await Promise.all([O(),z(),J()]))},Z=async N=>{if(!e)return;const{error:W}=await T.from("missed_prayers").update({is_completed:!1,completed_date:null,completed_time:null,updated_at:new Date().toISOString()}).eq("id",N.id);W||(g(ae=>ae.map(A=>A.id===N.id?{...A,completed:!1,completed_date:void 0}:A)),await Promise.all([O(),z(),J()]))};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Prayer Tracker"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:D,className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"Clear Today"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Yt,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-medium",children:[G,"/5"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Daily prayers completed"}),s.jsxs("span",{children:[Math.round(de),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${de}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:u}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[f,"%"]}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Monthly Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Prayers"}),s.jsx("div",{className:"space-y-4",children:r.map(N=>{const W=N.icon;return s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${N.completed?ce(N.type):"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N.completed?"bg-emerald-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:s.jsx(W,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:N.name}),N.type&&ue(N.type)]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Xt,{className:"w-4 h-4"}),l===N.name?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"time",value:d,onChange:ae=>c(ae.target.value),className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md px-2 py-1 text-sm"}),s.jsx("button",{onClick:()=>ee(N.name),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",children:s.jsx(li,{className:"w-4 h-4"})}),s.jsx("button",{onClick:M,className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:s.jsx(Re,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:N.time}),s.jsx("button",{onClick:()=>se(N.name,N.time),className:"w-4 h-4 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",children:s.jsx(op,{className:"w-3 h-3"})})]}),N.type&&s.jsxs("span",{className:"capitalize",children:[" ",N.type==="jamat"?"With Jamat":N.type==="individual"?"Individual":"Kaza/Missed"]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:N.completed?s.jsx("button",{onClick:()=>U(N.name),className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:""}):s.jsx("button",{onClick:()=>x(N.name),className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400 flex items-center justify-center transition-colors",children:s.jsx(bo,{className:"w-4 h-4 text-gray-400"})})})]},N.name)})})]}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:["Log ",w," Prayer"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>R(w,"jamat"),className:"w-full flex items-center space-x-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors",children:[s.jsx(oi,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"With Jamat"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed in congregation"})]})]}),s.jsxs("button",{onClick:()=>R(w,"individual"),className:"w-full flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:[s.jsx(Zt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Individual"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed alone"})]})]}),s.jsxs("button",{onClick:()=>R(w,"kaza"),className:"w-full flex items-center space-x-3 p-3 bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors",children:[s.jsx(Cs,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Mark as Missed"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add to kaza list for later completion"})]})]})]}),s.jsx("button",{onClick:()=>x(null),className:"w-full mt-4 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total prayers"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[E.totalPrayers,"/",E.totalPossible]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"With Jamat"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[E.withJamat,"/",E.totalPossible]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Consistency"}),s.jsxs("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:[E.consistency,"%"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Best Streak"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2",children:u}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Days of consistent prayers"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Current streak"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Kaza Prayers (Last 30 Days)"}),s.jsx("button",{onClick:()=>P(!v),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:v?"Hide Details":"Show Details"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("span",{children:"Missed prayers"}),s.jsxs("span",{children:[m.filter(N=>!N.completed).length," remaining"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${m.filter(N=>N.completed).length/Math.max(m.length,1)*100}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[m.filter(N=>N.completed).length," of ",m.length," completed"]})]}),v&&s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:m.length>0?m.map(N=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${N.completed?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${N.completed?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:s.jsx(Cs,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:N.prayer_name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Missed on ",new Date(N.date).toLocaleDateString(),N.completed&&s.jsxs("span",{className:"ml-2 text-green-600 dark:text-green-400",children:[" Completed on ",new Date(N.completed_date).toLocaleDateString()]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:N.completed?s.jsx("button",{onClick:()=>Z(N),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Mark as incomplete",children:""}):s.jsx("button",{onClick:()=>j(N),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",title:"Mark as completed",children:""})})]},N.id)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Cs,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No missed prayers in the last 30 days"}),s.jsx("p",{className:"text-sm mt-1",children:"Great job keeping up with your prayers!"})]})})]})]})})},Np=()=>{const{user:e}=Ge(),[t,r]=b.useState(2),[a,n]=b.useState(0),[i,l]=b.useState(""),[o,d]=b.useState(0),[c,u]=b.useState(0),[h,f]=b.useState(0),[p,w]=b.useState([]),[x,E]=b.useState([]),[y,m]=b.useState({totalPages:0,totalSessions:0,averagePerDay:0,consistency:0}),[g,v]=b.useState(!1),[P,S]=b.useState(!1),[D,B]=b.useState(!1),[se,ee]=b.useState(!1),[M,te]=b.useState({pages:1,surah:"",verses:"",notes:""}),[O,z]=b.useState({surah:"",verse:"",page:"",notes:""});So.useEffect(()=>{e&&(J(),k(),L(),ce())},[e]);const J=async()=>{if(!e)return;const j=new Date().toISOString().split("T")[0],{data:Z}=await T.from("quran_readings").select("pages").eq("user_id",e.id).eq("date",j);if(Z){const A=Z.reduce((H,re)=>H+re.pages,0);n(A)}const{data:N}=await T.from("quran_readings").select("*").eq("user_id",e.id).order("date",{ascending:!1});if(N&&(w(N),N.length>0)){l(N[0].surah);const A=N.reduce((H,re)=>H+re.pages,0);u(A)}const W=new Date;W.setDate(1);const{data:ae}=await T.from("quran_readings").select("pages, date").eq("user_id",e.id).gte("date",W.toISOString().split("T")[0]);if(ae){const A=ae.reduce((X,ge)=>X+ge.pages,0),H=ae.length,re=new Date().getDate(),F=A/re;m({totalPages:A,totalSessions:H,averagePerDay:Math.round(F*10)/10,consistency:Math.round(H/re*100)})}},k=async()=>{if(!e)return;const j=new Date;let Z=0,N=new Date(j);for(;;){const W=N.toISOString().split("T")[0],{data:ae}=await T.from("quran_readings").select("*").eq("user_id",e.id).eq("date",W);if(ae&&ae.length>0)Z++,N.setDate(N.getDate()-1);else break}f(Z)},L=async()=>{if(!e)return;const{data:j}=await T.from("quran_bookmarks").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});j&&E(j)},R=async()=>{if(!e||M.pages<=0)return;const j=new Date().toISOString().split("T")[0];new Date().toTimeString().slice(0,5);const{error:Z}=await T.from("quran_readings").insert({user_id:e.id,pages:M.pages,surah:M.surah,verses:M.verses,date:j,notes:M.notes});Z||(v(!1),te({pages:1,surah:"",verses:"",notes:""}),await J(),await k())},U=async()=>{if(!e||!O.surah)return;const{error:j}=await T.from("quran_bookmarks").upsert({user_id:e.id,surah:O.surah,verse:O.verse,page:O.page,notes:O.notes,created_at:new Date().toISOString()},{onConflict:"user_id,surah"});j||(S(!1),z({surah:"",verse:"",page:"",notes:""}),await L())},G=async j=>{if(!e)return;const{error:Z}=await T.from("quran_readings").delete().eq("id",j).eq("user_id",e.id);Z||(await J(),await k())},de=async j=>{if(!e)return;const{error:Z}=await T.from("quran_bookmarks").delete().eq("id",j).eq("user_id",e.id);Z||await L()},ue=async j=>{if(!e)return;const{error:Z}=await T.from("user_settings").upsert({user_id:e.id,quran_daily_goal:j},{onConflict:"user_id"});Z||(r(j),ee(!1))},ce=async()=>{if(!e)return;const{data:j}=await T.from("user_settings").select("quran_daily_goal").eq("user_id",e.id).single();j&&j.quran_daily_goal&&r(j.quran_daily_goal)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Quran Tracker"}),s.jsxs("button",{onClick:()=>v(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Ie,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Reading"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Reading"}),s.jsx("button",{onClick:()=>ee(!0),className:"text-sm bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg transition-colors",children:"Set Goal"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Daily goal progress"}),s.jsxs("span",{children:[Math.round(a/t*100),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${Math.min(a/t*100,100)}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:h}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold",children:i||"Not started"}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Current Surah"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:c}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Pages Read"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Reading Goal"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("input",{type:"number",value:t,onChange:j=>r(Number(j.target.value)),className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"pages per day"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complete Quran in"}),s.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[Math.ceil((604-y.totalPages*2)/t)," days"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"At current pace"})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(y.totalPages/604*100),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(y.totalPages/604*100,100)}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[y.totalPages," of 604 pages completed"]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>v(!0),className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors border border-emerald-200 dark:border-emerald-800",children:[s.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:"Log Reading Session"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Record pages read"})]}),s.jsxs("button",{onClick:()=>S(!0),className:"p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Set Bookmark"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Save current position"})]}),s.jsxs("button",{onClick:()=>B(!0),className:"p-4 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors border border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"View Progress"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Detailed analytics"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Readings"}),s.jsxs("div",{className:"space-y-3",children:[p.map((j,Z)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900/20 rounded-full flex items-center justify-center",children:s.jsx(rs,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:j.surah}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",j.verses]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[j.pages," pages"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:j.date})]}),s.jsx("button",{onClick:()=>G(j.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete reading",children:s.jsx(Re,{className:"w-3 h-3"})})]})]},Z)),p.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(rs,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No readings recorded yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Start your Quran reading journey today!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bookmarks"}),s.jsxs("div",{className:"space-y-3",children:[x.map((j,Z)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(Xc,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:j.surah}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",j.verse]}),s.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:j.page?`Page ${j.page}`:""})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:j.notes}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:j.created_at})]}),s.jsx("button",{onClick:()=>de(j.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete bookmark",children:s.jsx(Re,{className:"w-3 h-3"})})]})]},Z)),x.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Xc,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No bookmarks saved yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Bookmark your favorite verses!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Monthly Statistics"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Kr,{className:"w-4 h-4"}),s.jsx("span",{children:"This month"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:y.totalPages}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y.totalSessions}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Reading Sessions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:y.averagePerDay}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Pages/Day"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[y.consistency,"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]})]}),g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Reading Session"}),s.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pages Read"}),s.jsx("input",{type:"number",value:M.pages,onChange:j=>te({...M,pages:Number(j.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),s.jsx("input",{type:"text",value:M.surah,onChange:j=>te({...M,surah:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Fatiha"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verses"}),s.jsx("input",{type:"text",value:M.verses,onChange:j=>te({...M,verses:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 1-7"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:M.notes,onChange:j=>te({...M,notes:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any reflections or notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:R,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),s.jsx("button",{onClick:()=>v(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),P&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Bookmark"}),s.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),s.jsx("input",{type:"text",value:O.surah,onChange:j=>z({...O,surah:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Baqarah"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verse"}),s.jsx("input",{type:"text",value:O.verse,onChange:j=>z({...O,verse:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 255"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Page (Optional)"}),s.jsx("input",{type:"text",value:O.page,onChange:j=>z({...O,page:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 42"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:O.notes,onChange:j=>z({...O,notes:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Why this bookmark is important..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:U,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Set Bookmark"}),s.jsx("button",{onClick:()=>S(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),D&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Detailed Progress"}),s.jsx("button",{onClick:()=>B(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:y.totalPages}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y.totalSessions}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sessions"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:y.averagePerDay}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg/Day"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[y.consistency,"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Quran Completion Progress"}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:s.jsx("div",{className:"bg-emerald-500 h-4 rounded-full transition-all duration-300",style:{width:`${Math.min(y.totalPages/604*100,100)}%`}})}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[y.totalPages," of 604 pages completed (",Math.round(y.totalPages/604*100),"%)"]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>B(!1),className:"w-full bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Close"})})]})}),se&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Daily Goal"}),s.jsx("button",{onClick:()=>ee(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),s.jsx("input",{type:"number",value:t,onChange:j=>r(Number(j.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1",max:"50"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 1-5 pages per day for consistent progress"})]}),s.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:s.jsxs("div",{className:"text-sm text-emerald-800 dark:text-emerald-200",children:[s.jsx("strong",{children:"At this pace:"})," You'll complete the Quran in approximately"," ",s.jsxs("span",{className:"font-bold",children:[Math.ceil(604/t)," days"]})]})})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>ue(t),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Save Goal"}),s.jsx("button",{onClick:()=>ee(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},_p=()=>{const{user:e}=Ge(),[t,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState({name:"",type:"good",category:"health"});b.useEffect(()=>{e&&o()},[e]);const o=async()=>{if(!e)return;const{data:g,error:v}=await T.from("habits").select("*").eq("user_id",e.id);if(g){const P=g.map(S=>({...S,completedToday:d(S.last_completed),badHabitFreeFor:S.type==="bad"?c(S.last_completed):void 0,color:u(S.category)}));r(P)}},d=g=>{if(!g)return!1;const v=new Date().toISOString().split("T")[0];return g===v},c=g=>{if(!g)return 0;const v=new Date(g),S=new Date().getTime()-v.getTime(),D=Math.floor(S/(1e3*60*60*24));return Math.max(0,D)},u=g=>{switch(g){case"health":return"bg-blue-500";case"spiritual":return"bg-emerald-500";case"productivity":return"bg-purple-500";case"learning":return"bg-orange-500";default:return"bg-gray-500"}},h=async(g,v)=>{if(!e)return;const P=new Date().toISOString().split("T")[0],S=t.find(ee=>ee.id===g);if(!S)return;let D=S.streak,B=P;v==="good"?S.completedToday?(D=Math.max(0,S.streak-1),B=S.lastCompleted||""):D=S.streak+1:S.completedToday||(D=0);const{error:se}=await T.from("habits").update({streak:D,last_completed:B}).eq("id",g);se||r(ee=>ee.map(M=>M.id===g?{...M,completedToday:!M.completedToday,streak:D,lastCompleted:B,badHabitFreeFor:v==="bad"?c(B):M.badHabitFreeFor}:M))},f=async()=>{if(!e||!i.name.trim())return;const{data:g,error:v}=await T.from("habits").insert({user_id:e.id,name:i.name,type:i.type,category:i.category,streak:0,last_completed:null}).select().single();g&&!v&&(r(P=>[...P,{...g,completedToday:!1,color:u(g.category),badHabitFreeFor:i.type==="bad"?0:void 0}]),l({name:"",type:"good",category:"health"}),n(!1))},p=t.filter(g=>g.type==="good"),w=t.filter(g=>g.type==="bad"),x=p.filter(g=>g.completedToday).length,E=p.length,y=E>0?x/E*100:0,m={health:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",spiritual:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300",productivity:"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300",learning:"bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-300"};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Habit Tracker"}),s.jsxs("button",{onClick:()=>n(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[s.jsx(ss,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Habit"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(at,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-medium",children:[x,"/",E]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Good habits completed"}),s.jsxs("span",{children:[Math.round(y),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${y}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:p.length>0?Math.max(...p.map(g=>g.streak)):0}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Best Streak"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(g=>g.streak>0).length}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Active Habits"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:w.length}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Bad Habits"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Good Habits"}),s.jsx("div",{className:"space-y-3",children:p.map(g=>s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${g.completedToday?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${g.completedToday?"bg-emerald-500 text-white":`${g.color} text-white`}`,children:g.completedToday?s.jsx(bo,{className:"w-5 h-5"}):s.jsx(at,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:g.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m[g.category]}`,children:g.category})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(kd,{className:"w-4 h-4"}),s.jsxs("span",{children:[g.streak," day streak"]})]})]})]}),s.jsx("button",{onClick:()=>h(g.id,"good"),className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${g.completedToday?"bg-emerald-500 text-white":"border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400"}`,children:g.completedToday&&s.jsx(bo,{className:"w-4 h-4"})})]},g.id))})]}),w.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bad Habits to Overcome"}),s.jsx("div",{className:"space-y-3",children:w.map(g=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:s.jsx(vo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:g.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m[g.category]}`,children:g.category})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(ls,{className:"w-4 h-4"}),s.jsxs("span",{children:[g.badHabitFreeFor||0," days free from this habit"]})]})]})]}),s.jsx("button",{onClick:()=>h(g.id,"bad"),className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Did it today"})]},g.id))})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Habit"}),s.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Name"}),s.jsx("input",{type:"text",value:i.name,onChange:g=>l({...i,name:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Meditate for 10 minutes"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Type"}),s.jsxs("select",{value:i.type,onChange:g=>l({...i,type:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"good",children:"Good Habit (to build)"}),s.jsx("option",{value:"bad",children:"Bad Habit (to overcome)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),s.jsxs("select",{value:i.category,onChange:g=>l({...i,category:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"health",children:"Health"}),s.jsx("option",{value:"spiritual",children:"Spiritual"}),s.jsx("option",{value:"productivity",children:"Productivity"}),s.jsx("option",{value:"learning",children:"Learning"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:f,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Add Habit"})]})]})]})})]})},Sp=()=>{const{user:e}=Ge(),[t,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,d]=b.useState(!1),[c,u]=b.useState(null),[h,f]=b.useState(!1),[p,w]=b.useState(!1),[x,E]=b.useState({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),[y,m]=b.useState({hours:1,notes:""});So.useEffect(()=>{e&&g()},[e]);const g=async()=>{if(!e)return;const{data:k}=await T.from("exams").select("*").eq("user_id",e.id).order("date",{ascending:!0});k&&r(k)},v=async()=>{if(!e||!x.subject||!x.date||h){console.log("Validation failed or already adding:",{user:!!e,subject:x.subject,date:x.date,isAdding:h});return}f(!0);try{const k={user_id:e.id,subject:x.subject,date:x.date,time:x.time||null,location:x.location||null,type:x.type,target_hours:x.targetHours,study_hours:0};x.notes&&x.notes.trim()&&(k.notes=x.notes.trim()),console.log("Adding exam:",k);const{data:L,error:R}=await T.from("exams").insert(k).select();if(R){console.error("Error adding exam:",R),alert("Failed to add exam: "+R.message);return}console.log("Exam added successfully:",L),n(!1),E({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await g()}catch(k){console.error("Unexpected error:",k),alert("An unexpected error occurred while adding the exam.")}finally{f(!1)}},P=async()=>{if(!(!e||!c||!x.subject||!x.date||p)){w(!0);try{const k={subject:x.subject,date:x.date,time:x.time||null,location:x.location||null,type:x.type,target_hours:x.targetHours};x.notes&&x.notes.trim()&&(k.notes=x.notes.trim());const{error:L}=await T.from("exams").update(k).eq("id",c.id).eq("user_id",e.id);if(L){console.error("Error updating exam:",L),alert("Failed to update exam: "+L.message);return}l(!1),u(null),E({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await g()}catch(k){console.error("Unexpected error:",k),alert("An unexpected error occurred while updating the exam.")}finally{w(!1)}}},S=async k=>{if(!e)return;const{error:L}=await T.from("exams").delete().eq("id",k).eq("user_id",e.id);L||await g()},D=async()=>{if(!e||!c||y.hours<=0)return;const k=c.study_hours+y.hours,{error:L}=await T.from("exams").update({study_hours:k}).eq("id",c.id).eq("user_id",e.id);L||(d(!1),u(null),m({hours:1,notes:""}),await g())},B=k=>{u(k),E({subject:k.subject,date:k.date,time:k.time,location:k.location,type:k.type,targetHours:k.target_hours,notes:k.notes||""}),l(!0)},se=k=>{u(k),d(!0)},ee=k=>{const L=new Date(k),R=new Date,U=L.getTime()-R.getTime(),G=Math.ceil(U/(1e3*60*60*24));return Math.max(0,G)},M=k=>{switch(k){case"final":return"bg-red-100 text-red-800";case"class_test":return"bg-orange-100 text-orange-800";case"quiz":return"bg-blue-100 text-blue-800";case"assignment":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},te=k=>{switch(k){case"final":return"Final";case"class_test":return"Class Test";case"quiz":return"Quiz";case"assignment":return"Assignment";default:return k}},O=k=>k<=3?"text-red-600 dark:text-red-400":k<=7?"text-orange-600 dark:text-orange-400":k<=14?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",z=t.sort((k,L)=>new Date(k.date).getTime()-new Date(L.date).getTime())[0],J=z?ee(z.date):0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Exam Countdown"}),s.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(ss,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Exam"})]})]}),z&&s.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Next Exam"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ls,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:z.subject})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold",children:J}),s.jsx("div",{className:"text-red-100 text-sm",children:"Days Left"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold",children:[z.study_hours,"h"]}),s.jsx("div",{className:"text-red-100 text-sm",children:"Hours Studied"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold",children:[Math.round(z.study_hours/z.target_hours*100),"%"]}),s.jsx("div",{className:"text-red-100 text-sm",children:"Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upcoming Exams"}),s.jsxs("div",{className:"space-y-4",children:[t.map(k=>{const L=ee(k.date),R=k.study_hours/k.target_hours*100;return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(Ie,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:k.subject}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Xt,{className:"w-4 h-4"}),s.jsxs("span",{children:[k.time,"  ",k.location]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-2xl font-bold ${O(L)}`,children:L}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"days left"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${M(k.type)}`,children:te(k.type)}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[k.date,"  ",k.time]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-1",children:[s.jsx("span",{children:"Study Progress"}),s.jsxs("span",{children:[k.study_hours.toFixed(1),"h / ",k.target_hours,"h"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${R>=100?"bg-green-500":R>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(R,100)}%`}})})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[Math.round(R),"% complete"]}),s.jsxs("span",{children:[Math.max(0,k.target_hours-k.study_hours).toFixed(1),"h remaining"]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("button",{onClick:()=>se(k),className:"px-3 py-1 bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm hover:bg-emerald-200 dark:hover:bg-emerald-900/30 transition-colors",children:"Log Study"}),s.jsx("button",{onClick:()=>B(k),className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-sm hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:s.jsx(Es,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>S(k.id),className:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:s.jsx(ja,{className:"w-3 h-3"})})]})]},k.id)}),t.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Ie,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No exams scheduled yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add your first exam to get started!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recommended Study Schedule"}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,3).map(k=>{const L=ee(k.date),R=k.target_hours-k.study_hours,U=L>0?Math.ceil(R/L):0;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(at,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:k.subject}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:R>0?`${R}h remaining`:"Study complete!"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:U>0?`${U.toFixed(1)}h/day`:"Complete!"}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[L," days left"]})]})]},k.id)}),t.length===0&&s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:s.jsx("p",{className:"text-sm",children:"No study schedule available"})})]})]}),t.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Exam Statistics"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Exams"})]}),s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t.filter(k=>ee(k.date)<=7).length}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:Math.round(t.reduce((k,L)=>k+L.study_hours/L.target_hours*100,0)/t.length)}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Progress"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.reduce((k,L)=>k+L.study_hours,0).toFixed(1)}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Hours Studied"})]})]})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Exam"}),s.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:x.subject,onChange:k=>E({...x,subject:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:x.date,onChange:k=>E({...x,date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),s.jsx("input",{type:"time",value:x.time,onChange:k=>E({...x,time:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),s.jsx("input",{type:"text",value:x.location,onChange:k=>E({...x,location:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),s.jsxs("select",{value:x.type,onChange:k=>E({...x,type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"class_test",children:"Class Test"}),s.jsx("option",{value:"final",children:"Final"}),s.jsx("option",{value:"quiz",children:"Quiz"}),s.jsx("option",{value:"assignment",children:"Assignment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),s.jsx("input",{type:"number",value:x.targetHours,onChange:k=>E({...x,targetHours:Number(k.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:x.notes,onChange:k=>E({...x,notes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:v,disabled:h,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${h?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:h?"Adding...":"Add Exam"}),s.jsx("button",{onClick:()=>n(!1),disabled:h,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${h?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200"}`,children:"Cancel"})]})]})}),i&&c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Exam"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:x.subject,onChange:k=>E({...x,subject:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:x.date,onChange:k=>E({...x,date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),s.jsx("input",{type:"time",value:x.time,onChange:k=>E({...x,time:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),s.jsx("input",{type:"text",value:x.location,onChange:k=>E({...x,location:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),s.jsxs("select",{value:x.type,onChange:k=>E({...x,type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"class_test",children:"Class Test"}),s.jsx("option",{value:"final",children:"Final"}),s.jsx("option",{value:"quiz",children:"Quiz"}),s.jsx("option",{value:"assignment",children:"Assignment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),s.jsx("input",{type:"number",value:x.targetHours,onChange:k=>E({...x,targetHours:Number(k.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:x.notes,onChange:k=>E({...x,notes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:P,disabled:p,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:p?"Updating...":"Update Exam"}),s.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),o&&c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Study Session"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:c.subject}),s.jsx("br",{}),"Current progress: ",c.study_hours,"h / ",c.target_hours,"h"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours Studied"}),s.jsx("input",{type:"number",value:y.hours,onChange:k=>m({...y,hours:Number(k.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"0.5",step:"0.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:y.notes,onChange:k=>m({...y,notes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"What did you study today?"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:D,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),s.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},Cp=()=>{var te;const{user:e}=Ge(),[t,r]=b.useState([]),[a,n]=b.useState(8),[i,l]=b.useState(!1),[o,d]=b.useState(!1),[c,u]=b.useState(!1),[h,f]=b.useState(!1),[p,w]=b.useState(null),[x,E]=b.useState({date:"",bedtime:"",wakeTime:"",quality:3,notes:""});b.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(!e)return;const{data:O}=await T.from("sleep_records").select("*").eq("user_id",e.id).order("date",{ascending:!1}).limit(30);O&&r(O);const{data:z}=await T.from("profiles").select("sleep_goal").eq("user_id",e.id).maybeSingle();z!=null&&z.sleep_goal?n(z.sleep_goal):console.log("No profile found, using default sleep goal of 8 hours")},m=async()=>{if(!e||!x.date||!x.bedtime||!x.wakeTime)return;u(!0);const O=new Date(`2000-01-01T${x.bedtime}`);let J=(new Date(`2000-01-01T${x.wakeTime}`).getTime()-O.getTime())/(1e3*60*60);J<0&&(J+=24);const{error:k}=await T.from("sleep_records").insert({user_id:e.id,date:x.date,bedtime:x.bedtime,wake_time:x.wakeTime,duration:Math.round(J*10)/10,quality:x.quality,notes:x.notes||null});k||(l(!1),E({date:"",bedtime:"",wakeTime:"",quality:3,notes:""}),await y()),u(!1)},g=(O,z)=>{w({message:O,type:z}),setTimeout(()=>w(null),3e3)},v=async O=>{var z;if(e){console.log("Saving sleep goal:",O,"for user:",e.id),console.log("User object:",e),f(!0);try{const{data:J,error:k}=await T.from("profiles").select("id, sleep_goal").eq("user_id",e.id).maybeSingle();if(console.log("Profile check result:",{existingProfile:J,checkError:k}),k){console.error("Error checking profile:",k),g(`Error checking profile: ${k.message}`,"error");return}console.log("Existing profile:",J);let L;if(J){console.log("Updating existing profile with ID:",J.id);const R={sleep_goal:O,updated_at:new Date().toISOString()};console.log("Update data:",R);const{error:U}=await T.from("profiles").update(R).eq("user_id",e.id);L=U,console.log("Update result:",{error:U})}else{console.log("Creating new profile");const R={user_id:e.id,sleep_goal:O,full_name:((z=e.user_metadata)==null?void 0:z.full_name)||"",email:e.email||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Insert data:",R);const{error:U}=await T.from("profiles").insert(R);L=U,console.log("Insert result:",{error:U})}L?(console.error("Database error details:",{message:L.message,details:L.details,hint:L.hint,code:L.code}),g(`Error updating sleep goal: ${L.message}`,"error")):(console.log("Sleep goal saved successfully"),n(O),d(!1),g("Sleep goal updated successfully!","success"))}catch(J){console.error("Catch block error:",J),g("Error updating sleep goal. Please try again.","error")}finally{f(!1)}}},P=()=>{if(console.log("getAverageStats called with:",{sleepRecordsLength:t.length,sleepGoal:a,sleepRecords:t.map(ce=>({date:ce.date,duration:ce.duration,quality:ce.quality}))}),t.length===0)return{avgDuration:0,avgQuality:0,goalAchieved:0,totalNights:0,bestNight:null,worstNight:null};const O=t.reduce((ce,j)=>(ce[j.date]||(ce[j.date]={totalDuration:0,sessions:[],avgQuality:0}),ce[j.date].totalDuration+=j.duration,ce[j.date].sessions.push(j),ce),{});Object.keys(O).forEach(ce=>{const j=O[ce].sessions,Z=j.reduce((N,W)=>N+W.quality,0);O[ce].avgQuality=Z/j.length});const z=Object.values(O),J=z.reduce((ce,j)=>ce+j.totalDuration,0),k=Math.round(J/z.length*10)/10,L=z.reduce((ce,j)=>ce+j.avgQuality,0)/z.length,U=z.filter(ce=>{const j=ce.totalDuration>=a;return console.log(`Day total: ${ce.totalDuration}h >= ${a}h = ${j}`),j}).length,G=z.reduce((ce,j)=>j.avgQuality>ce.avgQuality?j:ce),de=z.reduce((ce,j)=>j.avgQuality<ce.avgQuality?j:ce),ue={avgDuration:k,avgQuality:Math.round(L*10)/10,goalAchieved:U,totalNights:z.length,bestNight:G,worstNight:de};return console.log("getAverageStats result:",ue),ue},S=O=>O>=4?"bg-green-100 dark:bg-green-900/20":O>=3?"bg-yellow-100 dark:bg-yellow-900/20":"bg-red-100 dark:bg-red-900/20",D=()=>{if(!t[0])return null;const J=new Date().getHours();return J>=22||J<=6?{status:"sleep",message:"Sleep time"}:{status:"awake",message:"Awake time"}},B=()=>{if(console.log("getSleepTrend called with sleepRecords length:",t.length),t.length<7)return console.log("Not enough records for trend analysis (need at least 7)"),"stable";const O=t.reduce((G,de)=>(G[de.date]||(G[de.date]={totalDuration:0}),G[de.date].totalDuration+=de.duration,G),{}),z=Object.entries(O).map(([G,de])=>({date:G,totalDuration:de.totalDuration})).sort((G,de)=>new Date(de.date).getTime()-new Date(G.date).getTime());if(console.log("Daily records sorted:",z),z.length<7)return console.log("Not enough days for trend analysis (need at least 7 days)"),"stable";const J=z.slice(0,7),k=z.slice(7,14);if(console.log("Recent 7 days:",J),console.log("Previous 7 days:",k),J.length===0||k.length===0)return console.log("Not enough data for comparison"),"stable";const L=J.reduce((G,de)=>G+de.totalDuration,0)/J.length,R=k.reduce((G,de)=>G+de.totalDuration,0)/k.length;console.log("Recent average:",L,"Previous average:",R);const U=L-R;return console.log("Difference:",U),U>.5?(console.log("Trend: Improving"),"improving"):U<-.5?(console.log("Trend: Declining"),"declining"):(console.log("Trend: Stable"),"stable")},se=P(),ee=D(),M=B();return b.useEffect(()=>{const O=new Date().toISOString().split("T")[0];E(z=>({...z,date:O}))},[]),b.useEffect(()=>{console.log("Stats updated:",{sleepGoal:a,stats:se,sleepRecordsCount:t.length})},[a,se,t.length]),s.jsxs("div",{className:"space-y-6",children:[p&&s.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${p.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-shrink-0",children:p.type==="success"?s.jsx(Mr,{className:"w-5 h-5"}):s.jsx(Re,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"font-medium",children:p.message})}),s.jsx("button",{onClick:()=>w(null),className:"flex-shrink-0 ml-2 hover:opacity-75",children:s.jsx(Re,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Sleep Tracker"}),s.jsxs("button",{onClick:()=>l(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(ss,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Sleep"})]})]}),ee&&s.jsxs("div",{className:`rounded-xl p-6 text-white ${ee.status==="sleep"?"bg-gradient-to-r from-indigo-500 to-purple-600":"bg-gradient-to-r from-orange-500 to-yellow-600"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Current Status"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[ee.status==="sleep"?s.jsx(yt,{className:"w-5 h-5"}):s.jsx(jd,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:ee.message})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[((te=t[0])==null?void 0:te.duration)||0,"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Last Night"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[a,"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Daily Goal"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[se.avgDuration.toFixed(1),"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"7-Day Average"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[se.avgQuality,"/5"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Avg Quality"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Goal & Trends"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Sleep Goal (hours)"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[a,"h"]}),s.jsxs("button",{onClick:()=>d(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsx("span",{children:"Set Goal"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Goal Achievement"}),s.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[se.totalNights>0?Math.round(se.goalAchieved/se.totalNights*100):0,"%"]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[se.goalAchieved," of ",se.totalNights," nights"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Trend"}),s.jsx("div",{className:`text-2xl font-bold ${M==="improving"?"text-green-600 dark:text-green-400":M==="declining"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:M.charAt(0).toUpperCase()+M.slice(1)}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.length>=14?"Last 7 days vs previous week":t.length>=7?"Need more data for trend":"Log more sleep to see trend"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Overview"}),s.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[(()=>{const O=t.reduce((J,k)=>(J[k.date]||(J[k.date]={totalDuration:0,sessions:[],avgQuality:0}),J[k.date].totalDuration+=k.duration,J[k.date].sessions.push(k),J),{});return Object.keys(O).forEach(J=>{const k=O[J].sessions,L=k.reduce((R,U)=>R+U.quality,0);O[J].avgQuality=L/k.length}),Object.entries(O).sort((J,k)=>new Date(k[0]).getTime()-new Date(J[0]).getTime()).slice(0,7).map(([J,k])=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:new Date(J).toLocaleDateString("en-US",{weekday:"short"})}),s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[k.totalDuration.toFixed(1),"h",k.sessions.length>1&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",k.sessions.length," sessions)"]})]}),s.jsx("div",{className:"flex justify-center mt-1",children:[...Array(5)].map((L,R)=>s.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${R<Math.round(k.avgQuality)?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},R))})]})]},J))})(),t.length===0&&s.jsxs("div",{className:"col-span-7 text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(yt,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No sleep records yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Average Duration"}),s.jsx(Xt,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-2",children:[se.avgDuration,"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last 7 days"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Sleep Quality"}),s.jsx(wo,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:[se.avgQuality,"/5"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average rating"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Consistency"}),s.jsx(at,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:[se.totalNights>0?Math.round(se.goalAchieved/se.totalNights*100):0,"%"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Goal achievement"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Sleep Records"}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(O=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${S(O.quality)}`,children:s.jsx(yt,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:O.date}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[O.bedtime," - ",O.wakeTime]}),O.notes&&s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:O.notes})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[O.duration.toFixed(1),"h"]}),s.jsx("div",{className:"flex justify-end",children:[...Array(5)].map((z,J)=>s.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${J<O.quality?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},J))})]})]},O.id)),t.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(yt,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No sleep records yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Tips"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900/20 rounded-full flex items-center justify-center",children:s.jsx(Kh,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Consistent Schedule"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Go to bed and wake up at the same time every day"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:s.jsx(yt,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Sleep Environment"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Keep your bedroom cool, dark, and quiet"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center",children:s.jsx(Qh,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Morning Light"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get sunlight exposure in the morning"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:s.jsx(Xt,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Pre-Sleep Routine"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Develop a relaxing bedtime routine"})]})]})]})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Sleep"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:x.date,onChange:O=>E({...x,date:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Bedtime ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"time",value:x.bedtime,onChange:O=>E({...x,bedtime:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Wake Time ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"time",value:x.wakeTime,onChange:O=>E({...x,wakeTime:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Quality"}),s.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(O=>s.jsx("button",{onClick:()=>E({...x,quality:O}),className:`p-2 rounded-lg transition-colors ${x.quality>=O?"text-yellow-500 bg-yellow-100 dark:bg-yellow-900/20":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:s.jsx(wo,{className:"w-5 h-5"})},O))}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[x.quality===1&&"Very Poor",x.quality===2&&"Poor",x.quality===3&&"Fair",x.quality===4&&"Good",x.quality===5&&"Excellent"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:x.notes,onChange:O=>E({...x,notes:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"How did you sleep? Any factors that affected your sleep?"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:m,disabled:c||!x.date||!x.bedtime||!x.wakeTime,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:c?"Logging...":"Log Sleep"}),s.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Sleep Goal"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Set your daily sleep goal to help maintain a healthy sleep schedule and track your progress."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Goal (hours per night):"}),s.jsx("input",{type:"number",value:a,onChange:O=>n(Number(O.target.value)),min:"6",max:"12",step:"0.5",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Enter sleep goal"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 7-9 hours for adults"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:()=>v(a),disabled:h||a<6||a>12,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":"Save Goal"})]})]})})]})},Ep=({preloadedData:e={}})=>{const{user:t}=Ge(),[r,a]=b.useState([]),[n,i]=b.useState({}),[l,o]=b.useState(!0),[d,c]=b.useState("all"),[u,h]=b.useState(!1),f=[{id:"all",label:"All",icon:xl},{id:"study",label:"Study",icon:Ie},{id:"prayer",label:"Prayer",icon:Yt},{id:"quran",label:"Quran",icon:rs},{id:"habits",label:"Habits",icon:at},{id:"attendance",label:"Classes",icon:hp},{id:"sleep",label:"Sleep",icon:yt},{id:"general",label:"General",icon:ts}],p=[{id:"first-study",title:"First Steps",description:"Complete your first study session",icon:Ie,category:"study",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"study-streak-7",title:"Week Warrior",description:"Study for 7 consecutive days",icon:kd,category:"study",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:50},{id:"study-100-hours",title:"Century Scholar",description:"Complete 100 hours of study",icon:Yy,category:"study",unlocked:!1,progress:0,maxProgress:100,rarity:"epic",points:200},{id:"first-prayer",title:"Spiritual Awakening",description:"Log your first prayer",icon:Yt,category:"prayer",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"prayer-streak-30",title:"Faithful Servant",description:"Pray consistently for 30 days",icon:wo,category:"prayer",unlocked:!1,progress:0,maxProgress:30,rarity:"epic",points:150},{id:"first-quran",title:"Divine Connection",description:"Read your first page of Quran",icon:rs,category:"quran",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:15},{id:"quran-100-pages",title:"Quran Explorer",description:"Read 100 pages of Quran",icon:np,category:"quran",unlocked:!1,progress:0,maxProgress:100,rarity:"rare",points:100},{id:"first-login",title:"Welcome Aboard",description:"Complete your first login",icon:Mr,category:"general",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:5},{id:"perfect-week",title:"Perfect Week",description:"Complete all daily goals for 7 days",icon:at,category:"general",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:75}],w=()=>{if(!e){i({totalStudyHours:0,totalPrayersCompleted:0,totalQuranPages:0,totalHabitsCompleted:0,totalSleepHours:0,attendanceRate:0,streakDays:0});return}const{studySessions:v=[],prayerRecords:P=[],quranSessions:S=[],habitRecords:D=[],attendanceRecords:B=[],sleepRecords:se=[]}=e,ee=v.reduce((U,G)=>U+(G.duration||0),0),M=P.length,te=S.reduce((U,G)=>U+(G.pages_read||0),0),O=D.length,z=se.reduce((U,G)=>U+(G.duration||0),0),J=B.filter(U=>U.status==="present").length,k=B.filter(U=>U.status!=="cancelled").length,L=k>0?Math.round(J/k*100):0,R=Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24)));i({totalStudyHours:ee,totalPrayersCompleted:M,totalQuranPages:te,totalHabitsCompleted:O,totalSleepHours:z,attendanceRate:L,streakDays:R})},x=()=>{const v=p.map(P=>{let S=0,D=!1;switch(P.id){case"first-study":S=n.totalStudyHours>0?1:0,D=n.totalStudyHours>0;break;case"study-streak-7":S=Math.min(n.streakDays,7),D=n.streakDays>=7;break;case"study-100-hours":S=Math.min(n.totalStudyHours,100),D=n.totalStudyHours>=100;break;case"first-prayer":S=n.totalPrayersCompleted>0?1:0,D=n.totalPrayersCompleted>0;break;case"prayer-streak-30":S=Math.min(n.streakDays,30),D=n.streakDays>=30;break;case"first-quran":S=n.totalQuranPages>0?1:0,D=n.totalQuranPages>0;break;case"quran-100-pages":S=Math.min(n.totalQuranPages,100),D=n.totalQuranPages>=100;break;case"first-login":S=1,D=!0;break;case"perfect-week":S=Math.min(n.streakDays,7),D=n.streakDays>=7;break;default:S=0,D=!1}return{...P,progress:S,unlocked:D,unlockedDate:D&&!P.unlockedDate?new Date().toISOString():P.unlockedDate}});a(v)};b.useEffect(()=>{w()},[e]),b.useEffect(()=>{x()},[n]),b.useEffect(()=>{o(!1)},[]);const E=v=>{switch(v){case"common":return"text-gray-600 dark:text-gray-400";case"rare":return"text-blue-600 dark:text-blue-400";case"epic":return"text-purple-600 dark:text-purple-400";case"legendary":return"text-yellow-600 dark:text-yellow-400";default:return"text-gray-600 dark:text-gray-400"}},y=r.filter(v=>d==="all"?!0:v.category===d),m=r.filter(v=>v.unlocked).length,g=r.filter(v=>v.unlocked).reduce((v,P)=>v+P.points,0);return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Achievements"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xl,{className:"w-5 h-5 text-yellow-500"}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[m,"/",r.length," Unlocked"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:m}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Achievements"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Points"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(m/r.length*100),"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completion"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:n.streakDays}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Day Streak"})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(v=>{const P=v.icon;return s.jsxs("button",{onClick:()=>c(v.id),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${d===v.id?"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(P,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:v.label})]},v.id)})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(v=>{const P=v.icon,S=v.progress/v.maxProgress*100;return s.jsxs("div",{className:`p-6 rounded-xl border-2 transition-all ${v.unlocked?"bg-white dark:bg-gray-800 border-emerald-200 dark:border-emerald-700 shadow-lg":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg ${v.unlocked?"bg-emerald-100 dark:bg-emerald-900/20":"bg-gray-100 dark:bg-gray-600"}`,children:s.jsx(P,{className:`w-6 h-6 ${v.unlocked?"text-emerald-600 dark:text-emerald-400":"text-gray-400 dark:text-gray-500"}`})}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-medium ${E(v.rarity)}`,children:v.rarity.toUpperCase()}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[v.points," pts"]})]})]}),s.jsx("h3",{className:`font-semibold mb-2 ${v.unlocked?"text-gray-800 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:v.title}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:v.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[v.progress,"/",v.maxProgress]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v.unlocked?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`,style:{width:`${Math.min(S,100)}%`}})})]}),v.unlocked&&v.unlockedDate&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Unlocked ",new Date(v.unlockedDate).toLocaleDateString()]})})]},v.id)})}),y.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx(xl,{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),s.jsx("p",{className:"text-lg font-medium",children:"No achievements found"}),s.jsx("p",{className:"text-sm mt-1",children:"Try selecting a different category"})]})]})},Tp=()=>{var ae;const{user:e,signOut:t}=Ge(),[r,a]=b.useState(!1),[n,i]=b.useState(!1),[l,o]=b.useState(!1),[d,c]=b.useState(""),[u,h]=b.useState(!1),[f,p]=b.useState(!1),[w,x]=b.useState({totalStudyHours:0,totalPrayersCompleted:0,totalQuranPages:0,streakDays:0,achievementsUnlocked:0,attendanceRate:0,totalSleepHours:0,averageSleepQuality:0,totalHabitsCompleted:0,totalExams:0,memberSince:"",lastActive:""}),[E,y]=b.useState([]),[m,g]=b.useState({name:((ae=e==null?void 0:e.user_metadata)==null?void 0:ae.full_name)||"",email:(e==null?void 0:e.email)||"",joinDate:"2024-01-01",university:"",major:"",year:"1st",location:"",timezone:"UTC+2",dailyStudyGoal:6,sleepGoal:8,weeklyQuranGoal:14,phone:"",website:"",bio:""}),[v,P]=b.useState(!1),[S,D]=b.useState("1w"),[B,se]=b.useState([]),[ee,M]=b.useState([]),[te,O]=b.useState([]),[z,J]=b.useState([]),[k,L]=b.useState(!1),U=(()=>{const A=new Date;let H=7;return S==="1m"&&(H=30),S==="3m"&&(H=90),S==="1y"&&(H=365),S==="prev"&&(H=365),Array.from({length:H},(re,F)=>{const X=new Date(A);return X.setDate(A.getDate()-(H-1-F)),{date:X.toISOString().split("T")[0],day:X.toLocaleDateString(void 0,{weekday:"short"}),label:X.toLocaleDateString(void 0,{month:"short",day:"numeric"})+" '"+X.getFullYear().toString().slice(-2)}})})();b.useEffect(()=>{if(!e||!v)return;L(!0),(async()=>{const H=U[0].date,re=U[U.length-1].date,{data:F}=await T.from("sleep_records").select("date, duration").eq("user_id",e.id).gte("date",H).lte("date",re);se(F||[]);const{data:X}=await T.from("study_sessions").select("date, duration").eq("user_id",e.id).gte("date",H).lte("date",re);M(X||[]);const{data:ge}=await T.from("prayer_records").select("date").eq("user_id",e.id).gte("date",H).lte("date",re);O(ge||[]);const{data:lt}=await T.from("class_schedules").select("date, time, end_time").eq("user_id",e.id).gte("date",H).lte("date",re);J(lt||[]),L(!1)})()},[e,S,v]),b.useEffect(()=>{e&&(G(),de(),ue())},[e]);const G=async()=>{var H;if(!e)return;const{data:A}=await T.from("profiles").select("*").eq("id",e.id).maybeSingle();A&&g({name:A.full_name||"",email:A.email||"",joinDate:((H=A.created_at)==null?void 0:H.split("T")[0])||"2024-01-01",university:A.institution||"",major:A.department||"",year:A.academic_year||"1st",location:A.address||"",timezone:"UTC+2",dailyStudyGoal:6,sleepGoal:8,weeklyQuranGoal:14,phone:A.phone||"",website:"",bio:""})},de=async()=>{if(e)try{const{data:A}=await T.from("study_sessions").select("*").eq("user_id",e.id),{data:H}=await T.from("prayer_records").select("*").eq("user_id",e.id),{data:re}=await T.from("quran_sessions").select("*").eq("user_id",e.id),{data:F}=await T.from("attendance_records").select("*").eq("user_id",e.id),{data:X}=await T.from("sleep_records").select("*").eq("user_id",e.id),{data:ge}=await T.from("habit_records").select("*").eq("user_id",e.id),{data:lt}=await T.from("exams").select("*").eq("user_id",e.id),Pe=Math.round(((A==null?void 0:A.reduce((At,Wt)=>At+(Wt.duration||0),0))||0)*10)/10,ze=(H==null?void 0:H.length)||0,qt=(re==null?void 0:re.reduce((At,Wt)=>At+(Wt.pages_read||0),0))||0,Qs=Math.round(((X==null?void 0:X.reduce((At,Wt)=>At+(Wt.duration||0),0))||0)*10)/10,Bt=X&&X.length>0?Math.round(X.reduce((At,Wt)=>At+(Wt.quality||0),0)/X.length*10)/10:0,jt=(ge==null?void 0:ge.length)||0,Nt=(lt==null?void 0:lt.length)||0,ft=(F==null?void 0:F.filter(At=>At.status==="present").length)||0,er=(F==null?void 0:F.length)||0,Ht=er>0?Math.round(ft/er*100):0,Oi=Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24))),Mi=Math.min(8,Math.floor(Pe/10)+Math.floor(ze/10));x({totalStudyHours:Pe,totalPrayersCompleted:ze,totalQuranPages:qt,streakDays:Oi,achievementsUnlocked:Mi,attendanceRate:Ht,totalSleepHours:Qs,averageSleepQuality:Bt,totalHabitsCompleted:jt,totalExams:Nt,memberSince:m.joinDate,lastActive:new Date().toISOString().split("T")[0]})}catch(A){console.error("Error loading user stats:",A)}},ue=async()=>{if(e)try{const A=[],{data:H}=await T.from("study_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);H==null||H.forEach(X=>{const ge=X.duration?X.duration<.1?X.duration.toFixed(4):X.duration.toFixed(2):"0";A.push({id:X.id,type:"study",description:`Studied ${X.subject} for ${ge}h`,time:new Date(X.created_at).toLocaleDateString(),value:`${ge}h`})});const{data:re}=await T.from("prayer_records").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);re==null||re.forEach(X=>{A.push({id:X.id,type:"prayer",description:`Completed ${X.prayer_name}`,time:new Date(X.created_at).toLocaleDateString(),value:X.prayer_name})});const{data:F}=await T.from("quran_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);F==null||F.forEach(X=>{A.push({id:X.id,type:"quran",description:`Read ${X.pages_read} pages of Quran`,time:new Date(X.created_at).toLocaleDateString(),value:`${X.pages_read} pages`})}),A.sort((X,ge)=>new Date(ge.time).getTime()-new Date(X.time).getTime()),y(A.slice(0,10))}catch(A){console.error("Error loading recent activities:",A)}},ce=async()=>{if(e){p(!0);try{const{error:A}=await T.from("profiles").upsert({id:e.id,full_name:m.name,email:m.email,institution:m.university,department:m.major,academic_year:m.year,address:m.location,phone:m.phone,updated_at:new Date().toISOString()});A?(console.error("Error saving profile:",A),alert("Error saving profile. Please try again.")):(o(!1),await G(),alert("Profile updated successfully!"))}catch(A){console.error("Error saving profile:",A),alert("Error saving profile. Please try again.")}finally{p(!1)}}},j=async()=>{if(!(!e||d!=="RESET")){h(!0);try{await Promise.all([T.from("study_sessions").delete().eq("user_id",e.id),T.from("prayer_records").delete().eq("user_id",e.id),T.from("quran_sessions").delete().eq("user_id",e.id),T.from("habit_records").delete().eq("user_id",e.id),T.from("class_schedules").delete().eq("user_id",e.id),T.from("attendance_records").delete().eq("user_id",e.id),T.from("sleep_records").delete().eq("user_id",e.id),T.from("exams").delete().eq("user_id",e.id)]),a(!1),c(""),await de(),await ue(),alert("All data has been reset successfully!")}catch(A){console.error("Error resetting data:",A),alert("Error resetting data. Please try again.")}finally{h(!1)}}},Z=async()=>{if(!(!e||d!=="DELETE FOREVER")){h(!0);try{await Promise.all([T.from("study_sessions").delete().eq("user_id",e.id),T.from("prayer_records").delete().eq("user_id",e.id),T.from("quran_sessions").delete().eq("user_id",e.id),T.from("habit_records").delete().eq("user_id",e.id),T.from("class_schedules").delete().eq("user_id",e.id),T.from("attendance_records").delete().eq("user_id",e.id),T.from("sleep_records").delete().eq("user_id",e.id),T.from("exams").delete().eq("user_id",e.id),T.from("profiles").delete().eq("user_id",e.id)]),await t()}catch(A){console.error("Error deleting account:",A),alert("Error deleting account. Please try again.")}finally{h(!1)}}},N=async()=>{if(e)try{const A={profile:m,stats:w,activities:E,exportDate:new Date().toISOString()},H=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),re=URL.createObjectURL(H),F=document.createElement("a");F.href=re,F.download=`user-data-${e.id}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(re)}catch(A){console.error("Error exporting data:",A),alert("Error exporting data. Please try again.")}},W=A=>{switch(A){case"study":return s.jsx(Ie,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"prayer":return s.jsx(Yt,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"quran":return s.jsx(Ie,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"});case"habit":return s.jsx(at,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});case"attendance":return s.jsx(Zt,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"});case"sleep":return s.jsx(yt,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"});case"achievement":return s.jsx(ts,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"});default:return s.jsx(at,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}};if(v){const A=H=>{const re=B.filter(Pe=>Pe.date===H).reduce((Pe,ze)=>Pe+(ze.duration||0),0),F=ee.filter(Pe=>Pe.date===H).reduce((Pe,ze)=>Pe+(ze.duration||0),0),X=te.filter(Pe=>Pe.date===H).length,ge=Math.round(X*.3*10)/10,lt=z.filter(Pe=>Pe.date===H).reduce((Pe,ze)=>{if(!ze.time||!ze.end_time)return Pe;const[qt,Qs]=ze.time.split(":"),[Bt,jt]=ze.end_time.split(":");let Nt=parseInt(qt)*60+parseInt(Qs),ft=parseInt(Bt)*60+parseInt(jt);return ft<Nt&&(ft+=24*60),Pe+(ft-Nt)/60},0);return{sleep:re,study:F,prayers:ge,class:lt}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("button",{onClick:()=>P(!1),className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg flex items-center space-x-2",children:[s.jsx(Re,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to Profile"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>D("1w"),className:`px-3 py-1 rounded-lg ${S==="1w"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"1 Week"}),s.jsx("button",{onClick:()=>D("1m"),className:`px-3 py-1 rounded-lg ${S==="1m"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"1 Month"}),s.jsx("button",{onClick:()=>D("3m"),className:`px-3 py-1 rounded-lg ${S==="3m"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"3 Months"}),s.jsx("button",{onClick:()=>D("1y"),className:`px-3 py-1 rounded-lg ${S==="1y"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"1 Year"}),s.jsx("button",{onClick:()=>D("prev"),className:`px-3 py-1 rounded-lg ${S==="prev"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"Previous Years"})]})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mt-2 sticky top-0 z-10 bg-white dark:bg-gray-800 py-2",children:[s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mr-2"}),"Sleep"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 mr-2"}),"Study"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-teal-500 mr-2"}),"Prayers"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-violet-100 dark:bg-violet-900 text-violet-700 dark:text-violet-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-violet-500 mr-2"}),"Class"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"flex flex-col gap-3 min-w-[350px]",children:U.map((H,re)=>{const F=A(H.date);return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"w-24 text-right text-xs text-gray-500 dark:text-gray-300 flex flex-col items-end",children:[s.jsx("span",{className:"font-semibold text-sm text-gray-700 dark:text-gray-100",children:H.day}),s.jsx("span",{children:H.label})]}),s.jsxs("div",{className:"w-full max-w-2xl flex h-7 rounded-full overflow-hidden border border-gray-200 dark:border-gray-700 shadow-md bg-gray-100 dark:bg-gray-900 group relative",children:[F.sleep>0&&s.jsx("div",{className:"bg-blue-500 dark:bg-blue-700 h-full flex items-center transition-all duration-700 first:rounded-l-full last:rounded-r-full",style:{width:`${F.sleep/24*100}%`,minWidth:F.sleep>0?"2%":0},title:`Sleep: ${F.sleep.toFixed(1)}h (${Math.round(F.sleep/24*100)}%)`,children:s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(F.sleep/24*100),"%"]})}),F.study>0&&s.jsx("div",{className:"bg-orange-500 dark:bg-orange-600 h-full flex items-center transition-all duration-700 relative",style:{width:`${F.study/24*100}%`,minWidth:F.study>0?"2%":0},title:`Study: ${F.study.toFixed(1)}h (${Math.round(F.study/24*100)}%)`,children:s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(F.study/24*100),"%"]})}),F.prayers>0&&s.jsx("div",{className:"bg-teal-500 dark:bg-teal-700 h-full flex items-center transition-all duration-700 relative",style:{width:`${F.prayers/24*100}%`,minWidth:F.prayers>0?"2%":0},title:`Prayers: ${F.prayers.toFixed(1)}h (${Math.round(F.prayers/24*100)}%)`,children:s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(F.prayers/24*100),"%"]})}),F.class>0&&s.jsx("div",{className:"bg-violet-500 dark:bg-violet-700 h-full flex items-center transition-all duration-700 relative",style:{width:`${F.class/24*100}%`,minWidth:F.class>0?"2%":0},title:`Class: ${F.class.toFixed(1)}h (${Math.round(F.class/24*100)}%)`,children:s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(F.class/24*100),"%"]})})]})]},H.date)})})})]})}return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Profile"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>P(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Vy,{className:"w-4 h-4"}),s.jsx("span",{children:"Summary"})]}),s.jsxs("button",{onClick:N,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Zy,{className:"w-4 h-4"}),s.jsx("span",{children:"Export Data"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit Profile"})]})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-xl p-6 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center shadow-inner",children:s.jsx(Zt,{className:"w-10 h-10"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-bold",children:m.name}),s.jsx("p",{className:"text-blue-100",children:m.email}),s.jsxs("p",{className:"text-blue-100",children:[m.major,"  ",m.year]}),s.jsx("p",{className:"text-blue-100",children:m.university}),m.bio&&s.jsxs("p",{className:"text-blue-100 mt-2 italic",children:['"',m.bio,'"']})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-blue-100",children:"Member since"}),s.jsx("div",{className:"font-medium",children:new Date(m.joinDate).toLocaleDateString()}),s.jsx("div",{className:"text-sm text-blue-100 mt-2",children:"Last active"}),s.jsx("div",{className:"font-medium",children:w.lastActive})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Study Progress"}),s.jsx(Kr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total hours"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.totalStudyHours.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Daily goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[m.dailyStudyGoal.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Current streak"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.streakDays," days"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Spiritual Progress"}),s.jsx(Yt,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Prayers completed"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:w.totalPrayersCompleted})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Quran pages read"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:w.totalQuranPages})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Weekly Quran goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[m.weeklyQuranGoal," pages"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Health & Habits"}),s.jsx(at,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep hours"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.totalSleepHours.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep quality"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.averageSleepQuality.toFixed(1),"/5"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[m.sleepGoal,"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Habits completed"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:w.totalHabitsCompleted})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Achievements"}),s.jsx(ts,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Unlocked"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.achievementsUnlocked,"/8"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Attendance rate"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.attendanceRate,"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total exams"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:w.totalExams})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Data Management"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(cp,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Reset All Data"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Clear all tracking data but keep your account"})]})]}),s.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors",children:"Reset Data"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ja,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Delete Account"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Permanently delete your account and all data"})]})]}),s.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete Account"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Activity"}),s.jsx("div",{className:"space-y-3",children:E.length>0?E.map((A,H)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white dark:bg-gray-600 rounded-full flex items-center justify-center shadow-sm",children:W(A.type)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:A.description}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.time})]})]}),A.value&&s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:A.value})]},A.id||H)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx("p",{children:"No recent activity"}),s.jsx("p",{className:"text-sm mt-1",children:"Start using the app to see your activity here"})]})})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Profile"}),s.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Full Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:m.name,onChange:A=>g({...m,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:m.email,onChange:A=>g({...m,email:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"University"}),s.jsx("input",{type:"text",value:m.university,onChange:A=>g({...m,university:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Major"}),s.jsx("input",{type:"text",value:m.major,onChange:A=>g({...m,major:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Academic Year"}),s.jsxs("select",{value:m.year,onChange:A=>g({...m,year:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"1st",children:"1st Year"}),s.jsx("option",{value:"2nd",children:"2nd Year"}),s.jsx("option",{value:"3rd",children:"3rd Year"}),s.jsx("option",{value:"4th",children:"4th Year"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:m.location,onChange:A=>g({...m,location:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:m.phone,onChange:A=>g({...m,phone:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:ce,disabled:f||!m.name||!m.email,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center space-x-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Saving..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(li,{className:"w-4 h-4"}),s.jsx("span",{children:"Save Changes"})]})}),s.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),r&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(vo,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Reset All Data"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete all your tracking data including study sessions, prayers, habits, and more. Your account will remain active."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "RESET" to confirm:'}),s.jsx("input",{type:"text",value:d,onChange:A=>c(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type RESET"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{a(!1),c("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:j,disabled:d!=="RESET"||u,className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Resetting...":"Reset Data"})]})]})}),n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(vo,{className:"w-6 h-6 text-red-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Delete Account"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete your account and all associated data. This action cannot be undone."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "DELETE FOREVER" to confirm:'}),s.jsx("input",{type:"text",value:d,onChange:A=>c(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type DELETE FOREVER"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{i(!1),c("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:Z,disabled:d!=="DELETE FOREVER"||u,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Deleting...":"Delete Account"})]})]})})]})},Pp=()=>{const{user:e}=Ge(),[t,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(!1),[o,d]=b.useState(null),[c,u]=b.useState({totalCredits:0,totalGradePoints:0,cgpa:0}),[h,f]=b.useState([]),[p,w]=b.useState(null),[x,E]=b.useState({subject:"",course_code:"",credit_hours:3,course_type:"theory"}),[y,m]=b.useState(!1),[g,v]=b.useState(""),[P,S]=b.useState(null),[D,B]=b.useState(""),[se,ee]=b.useState(null),[M,te]=b.useState(""),[O,z]=b.useState(null),[J,k]=b.useState(""),[L,R]=b.useState(null),[U,G]=b.useState(""),[de,ue]=b.useState(!1),[ce,j]=b.useState(!1),[Z,N]=b.useState(new Set),[W,ae]=b.useState({});b.useEffect(()=>{e&&A()},[e]),b.useEffect(()=>{p&&H(p.id)},[p,e]),b.useEffect(()=>{ge()},[W,h]),b.useEffect(()=>{h.length>0&&At()},[h,e]);const A=async()=>{n(!0);try{let{data:C,error:I}=await T.from("semesters").select("*").eq("user_id",e==null?void 0:e.id).order("semester_number",{ascending:!0});if(I)throw I;if(!C||C.length===0){const Y=Array.from({length:8},(q,ie)=>({user_id:e==null?void 0:e.id,semester_number:ie+1,status:ie===0?"active":"locked",started_at:ie===0?new Date().toISOString():null})),{data:$,error:K}=await T.from("semesters").insert(Y).select("*");if(K)throw K;C=$}f(C),w(C.find(Y=>Y.status==="active")||null)}catch(C){console.error("Error fetching semesters:",C)}finally{n(!1)}},H=async C=>{n(!0);try{const{data:I,error:Y}=await T.from("academic_marks").select("*").eq("user_id",e==null?void 0:e.id).eq("semester_id",C).order("course_code",{ascending:!0});if(Y)throw Y;r(I||[])}catch(I){console.error("Error fetching marks:",I)}finally{n(!1)}},re=async()=>{if(p){m(!1),v(""),n(!0);try{await T.from("semesters").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",p.id);const C=h.find(I=>I.semester_number===p.semester_number+1);C&&await T.from("semesters").update({status:"active",started_at:new Date().toISOString()}).eq("id",C.id),await A()}catch(C){console.error("Error completing semester:",C)}finally{n(!1)}}},F=C=>C>=80?4:C>=75&&C<80?3.75:C>=70&&C<75?3.5:C>=65&&C<70?3.25:C>=60&&C<65?3:C>=55&&C<60?2.75:C>=50&&C<55?2.5:C>=45&&C<50?2.25:C>=40&&C<45?2:(C>=0&&C<40,0),X=C=>C===4?"A+":C===3.75?"A":C===3.5?"A-":C===3.25?"B+":C===3?"B":C===2.75?"B-":C===2.5?"C+":C===2.25?"C":C===2?"D":"F",ge=()=>{let C=0,I=0;h.filter(q=>q.status==="completed").forEach(q=>{const ie=W[q.id]||[];let _=0,je=0;ie.forEach(Q=>{_+=Q.credit_hours,Q.grade_point&&(je+=Q.credit_hours*Q.grade_point)});const ye=_>0?je/_:0;C+=_,I+=ye*_});const $=C>0?I/C:0,K={totalCredits:C,totalGradePoints:I,cgpa:Math.round($*100)/100};u(K)},lt=async C=>{if(C.preventDefault(),!p)return;const I={user_id:e==null?void 0:e.id,subject:x.subject,course_code:x.course_code,credit_hours:x.credit_hours,course_type:x.course_type,semester:Bt(p.semester_number),academic_year:new Date().getFullYear().toString(),semester_id:p.id};try{if(o){const{error:Y}=await T.from("academic_marks").update(I).eq("id",o);if(Y)throw Y}else{const{error:Y}=await T.from("academic_marks").insert(I);if(Y)throw Y}await H(p.id),qt()}catch(Y){console.error("Error saving mark:",Y)}},Pe=async C=>{if(confirm("Are you sure you want to delete this record?"))try{const{error:I}=await T.from("academic_marks").delete().eq("id",C);if(I)throw I;await H((p==null?void 0:p.id)||"")}catch(I){console.error("Error deleting mark:",I)}},ze=C=>{d(C.id),E({subject:C.subject,course_code:C.course_code,credit_hours:C.credit_hours,course_type:C.course_type||"theory"}),ue(!0)},qt=()=>{E({subject:"",course_code:"",credit_hours:3,course_type:"theory"}),d(null),l(!1),ue(!1)},Qs=()=>{const C={};return t.forEach(I=>{const Y=`${I.academic_year} - ${I.semester}`;C[Y]||(C[Y]=[]),C[Y].push(I)}),C},Bt=C=>{const I=Math.ceil(C/2),Y=C%2===1;return`${I===1?"1st":I===2?"2nd":I===3?"3rd":`${I}th`} Semester ${Y?"Odd":"Even"}`},jt=async(C,I,Y)=>{S(null);try{const $=Y===""?null:parseFloat(Y),{data:K}=await T.from("academic_marks").select("*").eq("id",C).single();if(K){const q={...K,[I]:$},ie=[q.ct1,q.ct2,q.ct3,q.ct4].filter(ve=>typeof ve=="number"&&!isNaN(ve));let _=0;if(ie.length>0){const ke=ie.sort(($e,tt)=>tt-$e).slice(0,3);_=ke.reduce(($e,tt)=>($e??0)+tt,0)/(ke.length||1)}const je=K.attendance||0,ye=K.assignment_pres_viva||0,Q=K.term_marks||0,Ee=_+je+ye+Q,me=F(Ee),le=X(me),{error:we}=await T.from("academic_marks").update({[I]:$,total_marks:Ee,grade:le,grade_point:me}).eq("id",C);if(we)throw we;if(p){const{semesterCGPA:ve,semesterTotalCredits:ke}=Nt(p.id);await ft(p.id,ve,ke)}}p&&await H(p.id)}catch($){console.error("Error updating CT mark:",$)}},Nt=C=>{console.log("=== SEMESTER CGPA CALCULATION DEBUG ==="),console.log("Calculating CGPA for semester ID:",C);let I=0,Y=0;const $=t.filter(q=>q.semester_id===C);console.log("Semester Marks:",$),$.forEach((q,ie)=>{if(console.log(`Semester Course ${ie+1}:`,{subject:q.subject,course_type:q.course_type,credit_hours:q.credit_hours,grade_point:q.grade_point,grade:q.grade}),I+=q.credit_hours,console.log(`Added ${q.credit_hours} credits for ${q.subject}`),q.grade_point){const _=q.credit_hours*q.grade_point;Y+=_,console.log(` Added ${_} grade points for ${q.subject} (${q.grade_point}  ${q.credit_hours})`)}else console.log(` No grade point for ${q.subject}, skipping grade point contribution`)});const K=I>0?Y/I:0;return console.log("=== SEMESTER CGPA SUMMARY ==="),console.log("Semester Total Credits:",I),console.log("Semester Total Grade Points:",Y),console.log("Calculated Semester CGPA:",K),console.log("Rounded Semester CGPA:",Math.round(K*100)/100),console.log("=== END SEMESTER CGPA CALCULATION ==="),{semesterCGPA:K,semesterTotalCredits:I}},ft=async(C,I,Y)=>{try{const{error:$}=await T.from("semesters").update({cgpa:I,total_credits:Y}).eq("id",C);if($)throw $}catch($){console.error("Error updating semester CGPA:",$)}},er=async(C,I,Y)=>{ee(null);try{const $=Y===""?null:parseFloat(Y),{data:K}=await T.from("academic_marks").select("*").eq("id",C).single();if(K){const q=[K.ct1,K.ct2,K.ct3,K.ct4].filter(we=>typeof we=="number"&&!isNaN(we));let ie=0;if(q.length>0){const ve=q.sort((ke,$e)=>$e-ke).slice(0,3);ie=ve.reduce((ke,$e)=>(ke??0)+$e,0)/(ve.length||1)}const _=I==="attendance"?$||0:K.attendance||0,je=I==="assignment_pres_viva"?$||0:K.assignment_pres_viva||0,ye=I==="term_marks"?$||0:K.term_marks||0,Q=ie+_+je+ye,Ee=F(Q),me=X(Ee),{error:le}=await T.from("academic_marks").update({[I]:$,total_marks:Q,grade:me,grade_point:Ee}).eq("id",C);if(le)throw le;if(p){const{semesterCGPA:we,semesterTotalCredits:ve}=Nt(p.id);await ft(p.id,we,ve)}}p&&await H(p.id)}catch($){console.error("Error updating assessment mark:",$)}},Ht=async(C,I,Y)=>{z(null);try{let $=null,K=null;if(I==="grade"){const ie={"A+":4,A:3.75,"A-":3.5,"B+":3.25,B:3,"B-":2.75,"C+":2.5,C:2.25,D:2,F:0};K=Y.toUpperCase(),$=ie[K]||null}else{const ie=Y===""?null:parseFloat(Y);ie!==null&&!isNaN(ie)&&($=ie,K=X(ie))}const{error:q}=await T.from("academic_marks").update({grade:K,grade_point:$}).eq("id",C);if(q)throw q;if(p){const{semesterCGPA:ie,semesterTotalCredits:_}=Nt(p.id);await ft(p.id,ie,_)}p&&await H(p.id)}catch($){console.error("Error updating grade:",$)}},Oi=async C=>{try{p&&await T.from("semesters").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",p.id),await T.from("semesters").update({status:"active",started_at:new Date().toISOString(),completed_at:null}).eq("id",C),await A()}catch(I){console.error("Error reactivating semester:",I)}},Mi=async C=>{try{const{data:I,error:Y}=await T.from("academic_marks").select("*").eq("user_id",e==null?void 0:e.id).eq("semester_id",C).order("course_code",{ascending:!0});if(Y)throw Y;return I||[]}catch(I){return console.error("Error fetching completed semester marks:",I),[]}},At=async()=>{try{const C=h.filter(Y=>Y.status==="completed"),I={};for(const Y of C){const $=await Mi(Y.id);I[Y.id]=$}ae(I)}catch(C){console.error("Error loading completed semester marks:",C)}},Wt=async(C,I,Y)=>{try{const $=Y===""?null:parseFloat(Y),{data:K}=await T.from("academic_marks").select("*").eq("id",C).single();if(K){const q={...K,[I]:$},ie=[q.ct1,q.ct2,q.ct3,q.ct4].filter(ve=>typeof ve=="number"&&!isNaN(ve));let _=0;if(ie.length>0){const ke=ie.sort(($e,tt)=>tt-$e).slice(0,3);_=ke.reduce(($e,tt)=>($e??0)+tt,0)/(ke.length||1)}const je=K.attendance||0,ye=K.assignment_pres_viva||0,Q=K.term_marks||0,Ee=_+je+ye+Q,me=F(Ee),le=X(me),{error:we}=await T.from("academic_marks").update({[I]:$,total_marks:Ee,grade:le,grade_point:me}).eq("id",C);if(we)throw we;if(K.semester_id){const{semesterCGPA:ve,semesterTotalCredits:ke}=Nt(K.semester_id);await ft(K.semester_id,ve,ke)}}}catch($){console.error("Error updating completed semester CT mark:",$)}},Ri=async(C,I,Y)=>{try{const $=Y===""?null:parseFloat(Y),{data:K}=await T.from("academic_marks").select("*").eq("id",C).single();if(K){const q=[K.ct1,K.ct2,K.ct3,K.ct4].filter(we=>typeof we=="number"&&!isNaN(we));let ie=0;if(q.length>0){const ve=q.sort((ke,$e)=>$e-ke).slice(0,3);ie=ve.reduce((ke,$e)=>(ke??0)+$e,0)/(ve.length||1)}const _=I==="attendance"?$||0:K.attendance||0,je=I==="assignment_pres_viva"?$||0:K.assignment_pres_viva||0,ye=I==="term_marks"?$||0:K.term_marks||0,Q=ie+_+je+ye,Ee=F(Q),me=X(Ee),{error:le}=await T.from("academic_marks").update({[I]:$,total_marks:Q,grade:me,grade_point:Ee}).eq("id",C);if(le)throw le;if(K.semester_id){const{semesterCGPA:we,semesterTotalCredits:ve}=Nt(K.semester_id);await ft(K.semester_id,we,ve)}}}catch($){console.error("Error updating completed semester assessment mark:",$)}},gr=async(C,I,Y)=>{try{const $=Y===""?null:parseFloat(Y),{data:K}=await T.from("academic_marks").select("*").eq("id",C).single();if(K){const q=I==="quiz"?$||0:K.quiz||0,ie=I==="board_viva"?$||0:K.board_viva||0,_=I==="sessional_attendance"?$||0:K.sessional_attendance||0,je=I==="lab"?$||0:K.lab||0,ye=q+ie+_+je,Q=F(ye),Ee=X(Q),{error:me}=await T.from("academic_marks").update({[I]:$,total_marks:ye,grade:Ee,grade_point:Q}).eq("id",C);if(me)throw me;if(p){const{semesterCGPA:le,semesterTotalCredits:we}=Nt(p.id);await ft(p.id,le,we)}}p&&await H(p.id)}catch($){console.error("Error updating sessional mark:",$)}},Nd=async(C,I,Y)=>{try{let $=null,K=null;if(I==="grade"){const _={"A+":4,A:3.75,"A-":3.5,"B+":3.25,B:3,"B-":2.75,"C+":2.5,C:2.25,D:2,F:0};K=Y.toUpperCase(),$=_[K]||null}else{const _=Y===""?null:parseFloat(Y);_!==null&&!isNaN(_)&&($=_,K=X(_))}const{error:q}=await T.from("academic_marks").update({grade:K,grade_point:$}).eq("id",C);if(q)throw q;const{data:ie}=await T.from("academic_marks").select("semester_id").eq("id",C).single();if(ie!=null&&ie.semester_id){const{semesterCGPA:_,semesterTotalCredits:je}=Nt(ie.semester_id);await ft(ie.semester_id,_,je)}}catch($){console.error("Error updating completed semester grade:",$)}};return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading academic data..."})}):s.jsxs("div",{className:"space-y-6",children:[p&&s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:s.jsxs("h1",{className:"text-2xl sm:text-4xl font-extrabold text-emerald-700 dark:text-emerald-300 flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("span",{role:"img","aria-label":"graduation cap",children:""}),s.jsxs("span",{children:["Academic Progress: ",Bt(p.semester_number)]})]}),s.jsx("span",{className:"px-3 py-1 text-sm sm:text-base rounded-full bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300 font-semibold w-fit",children:"Active Semester"})]})}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:s.jsx(ni,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current CGPA"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:c.cgpa.toFixed(2)})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:s.jsx(Ie,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Earned Credits"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:h.reduce((C,I)=>C+(I.total_credits&&I.total_credits>0?I.total_credits:0),0)})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center",children:s.jsx(ts,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[h.filter(C=>C.status==="completed").length,"/",h.length]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center",children:s.jsx(Kr,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Academic Progress"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[(()=>{const Y=h.filter($=>$.status==="completed").length/8*100;return Math.round(Y)})(),"%"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[h.filter(C=>C.status==="completed").length," of 8 semesters"]})]})]})})]}),!i&&s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("button",{onClick:()=>j(!ce),className:`flex items-center px-3 py-2 rounded-md text-sm sm:text-base font-medium shadow transition-colors ${ce?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:[s.jsx(Kr,{className:"w-4 h-4 mr-2"}),ce?"Hide Analytics":"Show Analytics"]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-3 py-2 bg-emerald-600 text-white rounded-md text-sm sm:text-base font-medium shadow hover:bg-emerald-700 transition-colors",children:[s.jsx(ss,{className:"w-4 h-4 mr-2"})," Add Course"]})]}),ce&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(Kr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"}),"Academic Analytics & Insights"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"CGPA Trend"}),s.jsx("div",{className:"space-y-3",children:h.filter(C=>C.status==="completed").sort((C,I)=>C.semester_number-I.semester_number).map(C=>{const I=W[C.id]||[];let Y=0,$=0;I.forEach(ie=>{Y+=ie.credit_hours,ie.grade_point&&($+=ie.credit_hours*ie.grade_point)});const K=Y>0?$/Y:0,q=K/4*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:Bt(C.semester_number)}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[K.toFixed(2)," / 4.00"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${q}%`}})})]},C.id)})})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Grade Distribution"}),s.jsx("div",{className:"space-y-3",children:(()=>{const C=Object.values(W).flat(),I={},Y=["A+","A","A-","B+","B","B-","C+","C","D","F"];Y.forEach(q=>{I[q]=0}),C.forEach(q=>{q.grade&&I.hasOwnProperty(q.grade)&&I[q.grade]++});const $=C.length,K=Object.values(I).reduce((q,ie)=>q+ie,0);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Courses"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:$}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[K," with grades  ",$-K," pending"]})]}),s.jsx("div",{className:"space-y-2",children:Y.filter(q=>I[q]>0).map(q=>{const ie=I[q],_=$>0?ie/$*100:0,je=K>0?ie/K*100:0,ye=q==="A+"?"bg-emerald-600":q==="A"?"bg-green-500":q==="A-"?"bg-green-400":q==="B+"?"bg-blue-500":q==="B"?"bg-blue-400":q==="B-"?"bg-yellow-500":q==="C+"?"bg-yellow-400":q==="C"?"bg-orange-500":q==="D"?"bg-red-400":"bg-red-500",Q=q==="A+"?4:q==="A"?3.75:q==="A-"?3.5:q==="B+"?3.25:q==="B"?3:q==="B-"?2.75:q==="C+"?2.5:q==="C"?2.25:q==="D"?2:0;return s.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:q})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[ie," ",ie===1?"course":"courses"]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",Q.toFixed(2)," GPA)"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[_.toFixed(1),"%"]}),K>0&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[je.toFixed(1),"% of graded"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`${ye} h-2 rounded-full transition-all duration-300`,style:{width:`${_}%`}})})]})]},q)})}),K>0&&s.jsx("div",{className:"mt-4 p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Grade Distribution Summary"}),s.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:(()=>{const q=I["A+"]+I.A+I["A-"],ie=I["B+"]+I.B+I["B-"],_=I["C+"]+I.C+I.D;return q/K>=.5?"Excellent Performance":ie/K>=.5?"Good Performance":_/K>=.8?"Satisfactory Performance":"Needs Improvement"})()})]})})]})})()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Credit Analysis"}),s.jsx("div",{className:"space-y-4",children:(()=>{const C=h.reduce(($,K)=>$+(K.total_credits||0),0),I=8*22,Y=C/I*100;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:C}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Credits Earned"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Progress to Target"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[Y.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(Y,100)}%`}})}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Target: ",I," credits (8 semesters)"]})]})]})})()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Performance Insights"}),s.jsx("div",{className:"space-y-3",children:(()=>{const C=Object.values(W).flat(),I=C.filter(q=>q.course_type==="theory"),Y=C.filter(q=>q.course_type==="sessional"),$=I.length>0?I.reduce((q,ie)=>q+(ie.grade_point||0),0)/I.length:0,K=Y.length>0?Y.reduce((q,ie)=>q+(ie.grade_point||0),0)/Y.length:0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Theory Courses"}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[I.length," courses"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:$.toFixed(2)}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average GPA"})]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Sessional Courses"}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Y.length," courses"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:K.toFixed(2)}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average GPA"})]})]}),s.jsxs("div",{className:"text-center p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Performance"}),s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:$>K?"Better in Theory":$<K?"Better in Sessional":"Balanced"})]})]})})()})]})]})]}),i&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:o?"Edit Course":"Add New Course"}),s.jsx("button",{onClick:qt,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:lt,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:x.subject,onChange:C=>E({...x,subject:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Code"}),s.jsx("input",{type:"text",value:x.course_code,onChange:C=>E({...x,course_code:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Credit Hours"}),s.jsx("input",{type:"number",step:"0.5",min:"0.5",max:"6",value:x.credit_hours,onChange:C=>E({...x,credit_hours:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Type"}),s.jsxs("select",{value:x.course_type,onChange:C=>E({...x,course_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"theory",children:"Theory"}),s.jsx("option",{value:"sessional",children:"Sessional"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:qt,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[s.jsx(li,{className:"w-4 h-4"}),s.jsx("span",{children:o?"Update":"Save"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[Object.entries(Qs()).map(([C,I])=>{h.find(_=>`${new Date().getFullYear()} - ${Bt(_.semester_number)}`===C);let Y=0,$=0;I.forEach(_=>{Y+=_.credit_hours,_.grade_point&&($+=_.credit_hours*_.grade_point)});const K=Y>0?$/Y:0,q=I.filter(_=>_.course_type==="theory"),ie=I.filter(_=>_.course_type==="sessional");return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:C}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"text-center px-4 py-2 border-2 border-emerald-500 rounded-lg bg-emerald-50 dark:bg-emerald-900/20",children:[(()=>{const je=I.filter(ye=>ye.grade_point!==null&&ye.grade_point!==void 0&&!isNaN(ye.grade_point)&&ye.credit_hours).map(ye=>({subject:ye.subject,grade_point:ye.grade_point,credit_hours:ye.credit_hours,contribution:ye.grade_point*ye.credit_hours}));return console.log(`--- Semester CGPA Calculation for ${C} ---`),console.log("Contributing marks:",je),console.log("Semester CGPA:",K,"Total Credits:",Y),null})(),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Semester CGPA"}),s.jsx("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:K.toFixed(2)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Credits"}),s.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Y})]})]})]})}),q.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(Ie,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Theory Courses"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"Course"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Credits"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT1"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT2"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT3"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT4"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"CT Avg"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:s.jsxs("div",{className:"whitespace-normal",children:[s.jsx("div",{children:"Assig"}),s.jsx("div",{children:"Pres"}),s.jsx("div",{children:"Viva"})]})}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Attend"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Term"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Total"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Point"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Grade"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:q.map(_=>{const je=[_.ct1,_.ct2,_.ct3,_.ct4].filter(Q=>typeof Q=="number"&&!isNaN(Q));let ye="";if(je.length>0){const Ee=je.sort((le,we)=>we-le).slice(0,3);ye=(Ee.reduce((le,we)=>(le??0)+we,0)/(Ee.length||1)).toFixed(2)}return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:_.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:_.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;S({id:_.id,field:"ct1"}),B(((Q=_.ct1)==null?void 0:Q.toString())||"")},children:P&&P.id===_.id&&P.field==="ct1"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:D,onChange:Q=>B(Q.target.value),onBlur:()=>jt(_.id,"ct1",D),onKeyDown:Q=>{Q.key==="Enter"&&jt(_.id,"ct1",D)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.ct1??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;S({id:_.id,field:"ct2"}),B(((Q=_.ct2)==null?void 0:Q.toString())||"")},children:P&&P.id===_.id&&P.field==="ct2"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:D,onChange:Q=>B(Q.target.value),onBlur:()=>jt(_.id,"ct2",D),onKeyDown:Q=>{Q.key==="Enter"&&jt(_.id,"ct2",D)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.ct2??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;S({id:_.id,field:"ct3"}),B(((Q=_.ct3)==null?void 0:Q.toString())||"")},children:P&&P.id===_.id&&P.field==="ct3"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:D,onChange:Q=>B(Q.target.value),onBlur:()=>jt(_.id,"ct3",D),onKeyDown:Q=>{Q.key==="Enter"&&jt(_.id,"ct3",D)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.ct3??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;S({id:_.id,field:"ct4"}),B(((Q=_.ct4)==null?void 0:Q.toString())||"")},children:P&&P.id===_.id&&P.field==="ct4"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:D,onChange:Q=>B(Q.target.value),onBlur:()=>jt(_.id,"ct4",D),onKeyDown:Q=>{Q.key==="Enter"&&jt(_.id,"ct4",D)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.ct4??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-20 text-center",children:ye||"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var Q;ee({id:_.id,field:"assignment_pres_viva"}),te(((Q=_.assignment_pres_viva)==null?void 0:Q.toString())||"")},children:se&&se.id===_.id&&se.field==="assignment_pres_viva"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",autoFocus:!0,value:M,onChange:Q=>te(Q.target.value),onBlur:()=>er(_.id,"assignment_pres_viva",M),onKeyDown:Q=>{Q.key==="Enter"&&er(_.id,"assignment_pres_viva",M)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.assignment_pres_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var Q;ee({id:_.id,field:"attendance"}),te(((Q=_.attendance)==null?void 0:Q.toString())||"")},children:se&&se.id===_.id&&se.field==="attendance"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",autoFocus:!0,value:M,onChange:Q=>te(Q.target.value),onBlur:()=>er(_.id,"attendance",M),onKeyDown:Q=>{Q.key==="Enter"&&er(_.id,"attendance",M)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var Q;ee({id:_.id,field:"term_marks"}),te(((Q=_.term_marks)==null?void 0:Q.toString())||"")},children:se&&se.id===_.id&&se.field==="term_marks"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"60",autoFocus:!0,value:M,onChange:Q=>te(Q.target.value),onBlur:()=>er(_.id,"term_marks",M),onKeyDown:Q=>{Q.key==="Enter"&&er(_.id,"term_marks",M)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.term_marks??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:(()=>{const Q=[_.ct1,_.ct2,_.ct3,_.ct4].filter(ke=>typeof ke=="number"&&!isNaN(ke));let Ee=0;if(Q.length>0){const $e=Q.sort((tt,os)=>os-tt).slice(0,3);Ee=$e.reduce((tt,os)=>(tt??0)+os,0)/($e.length||1)}const me=_.attendance||0,le=_.assignment_pres_viva||0,we=_.term_marks||0,ve=Ee+me+le+we;return ve>0?ve.toFixed(2):"-"})()}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;z({id:_.id,field:"grade_point"}),k(((Q=_.grade_point)==null?void 0:Q.toString())||"")},children:O&&O.id===_.id&&O.field==="grade_point"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",autoFocus:!0,value:J,onChange:Q=>k(Q.target.value),onBlur:()=>Ht(_.id,"grade_point",J),onKeyDown:Q=>{Q.key==="Enter"&&Ht(_.id,"grade_point",J)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{z({id:_.id,field:"grade"}),k(_.grade||"")},children:O&&O.id===_.id&&O.field==="grade"?s.jsx("input",{type:"text",maxLength:"2",autoFocus:!0,value:J,onChange:Q=>k(Q.target.value),onBlur:()=>Ht(_.id,"grade",J),onKeyDown:Q=>{Q.key==="Enter"&&Ht(_.id,"grade",J)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):_.grade??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>ze(_),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Es,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Pe(_.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(ja,{className:"w-4 h-4"})})]})})]},_.id)})})]})})]}),ie.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(ni,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Sessional Courses"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"Course"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Credits"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Quiz (20)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"Board Viva (25)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"Attendance (10)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Lab (45)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Total"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Point"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Grade"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:ie.map(_=>{const je=_.quiz||0,ye=_.board_viva||0,Q=_.sessional_attendance||0,Ee=_.lab||0,me=je+ye+Q+Ee;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:_.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:_.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var le;R({id:_.id,field:"quiz"}),G(((le=_.quiz)==null?void 0:le.toString())||"")},children:L&&L.id===_.id&&L.field==="quiz"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"20",autoFocus:!0,value:U,onChange:le=>G(le.target.value),onBlur:()=>gr(_.id,"quiz",U),onKeyDown:le=>{le.key==="Enter"&&gr(_.id,"quiz",U)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.quiz??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-20 text-center",onClick:()=>{var le;R({id:_.id,field:"board_viva"}),G(((le=_.board_viva)==null?void 0:le.toString())||"")},children:L&&L.id===_.id&&L.field==="board_viva"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"25",autoFocus:!0,value:U,onChange:le=>G(le.target.value),onBlur:()=>gr(_.id,"board_viva",U),onKeyDown:le=>{le.key==="Enter"&&gr(_.id,"board_viva",U)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.board_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-20 text-center",onClick:()=>{var le;R({id:_.id,field:"sessional_attendance"}),G(((le=_.sessional_attendance)==null?void 0:le.toString())||"")},children:L&&L.id===_.id&&L.field==="sessional_attendance"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"10",autoFocus:!0,value:U,onChange:le=>G(le.target.value),onBlur:()=>gr(_.id,"sessional_attendance",U),onKeyDown:le=>{le.key==="Enter"&&gr(_.id,"sessional_attendance",U)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.sessional_attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var le;R({id:_.id,field:"lab"}),G(((le=_.lab)==null?void 0:le.toString())||"")},children:L&&L.id===_.id&&L.field==="lab"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"45",autoFocus:!0,value:U,onChange:le=>G(le.target.value),onBlur:()=>gr(_.id,"lab",U),onKeyDown:le=>{le.key==="Enter"&&gr(_.id,"lab",U)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.lab??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-16 text-center",children:me.toFixed(2)}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var le;z({id:_.id,field:"grade_point"}),k(((le=_.grade_point)==null?void 0:le.toString())||"")},children:O&&O.id===_.id&&O.field==="grade_point"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",autoFocus:!0,value:J,onChange:le=>k(le.target.value),onBlur:()=>Ht(_.id,"grade_point",J),onKeyDown:le=>{le.key==="Enter"&&Ht(_.id,"grade_point",J)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):_.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{z({id:_.id,field:"grade"}),k(_.grade||"")},children:O&&O.id===_.id&&O.field==="grade"?s.jsx("input",{type:"text",maxLength:"2",autoFocus:!0,value:J,onChange:le=>k(le.target.value),onBlur:()=>Ht(_.id,"grade",J),onKeyDown:le=>{le.key==="Enter"&&Ht(_.id,"grade",J)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):_.grade??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>ze(_),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Es,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Pe(_.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(ja,{className:"w-4 h-4"})})]})})]},_.id)})})]})})]})]},C)}),t.length===0&&!i&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ie,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No academic records"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by adding your first course."}),s.jsx("div",{className:"mt-6",children:s.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[s.jsx(ss,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Course"]})})]})]}),p&&s.jsx("div",{className:"flex justify-end mt-8",children:s.jsxs("button",{onClick:()=>m(!0),className:"flex items-center px-4 sm:px-6 py-2 sm:py-3 bg-emerald-600 text-white rounded-lg text-sm sm:text-lg font-semibold shadow hover:bg-emerald-700 transition-colors",children:[s.jsx(Mr,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"})," Complete Semester"]})}),h.filter(C=>C.status==="completed").length>0&&s.jsxs("div",{className:"mt-8 space-y-6",children:[s.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[s.jsx(ts,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600 dark:text-emerald-400"}),"Completed Semesters"]}),h.filter(C=>C.status==="completed").sort((C,I)=>I.semester_number-C.semester_number).map(C=>{const I=Z.has(C.id),Y=W[C.id]||[];return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:Bt(C.semester_number)}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"px-3 py-1 text-sm rounded-full bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 font-medium",children:"Completed"}),(()=>{let $=0,K=0;Y.forEach(ie=>{$+=ie.credit_hours,ie.grade_point&&(K+=ie.credit_hours*ie.grade_point)});const q=$>0?K/$:0;return console.log(`--- Completed Semester CGPA Calculation for ${Bt(C.semester_number)} ---`),console.log("Semester marks:",Y),console.log("Total credits:",$),console.log("Total grade points:",K),console.log("Calculated CGPA:",q),s.jsxs(s.Fragment,{children:[q>0&&s.jsxs("span",{className:"px-3 py-1 text-sm rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 font-medium",children:["CGPA: ",q.toFixed(2)]}),$>0&&s.jsxs("span",{className:"px-3 py-1 text-sm rounded-full bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 font-medium",children:["Credits: ",$]})]})})()]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>Oi(C.id),className:"flex items-center px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-md hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors text-sm",children:[s.jsx(Es,{className:"w-4 h-4 mr-1"}),"Reactivate Semester"]})})]}),Y.length>0?s.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:s.jsx("div",{className:"inline-block min-w-full align-middle",children:s.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Course"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Credits"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT1"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT2"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT3"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT4"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Best 3"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Assignment"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Attendance"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Term"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Grade Point"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Grade"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Y.map($=>{var ie,_,je,ye,Q,Ee;const K=[$.ct1,$.ct2,$.ct3,$.ct4].filter(me=>typeof me=="number"&&!isNaN(me));let q="";if(K.length>0){const le=K.sort((ve,ke)=>ke-ve).slice(0,3);q=(le.reduce((ve,ke)=>(ve??0)+ke,0)/(le.length||1)).toFixed(2)}return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:$.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:$.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:$.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:$.ct1??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:$.ct2??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:I?s.jsx("input",{type:"number",step:"0.01",min:"0",value:((ie=$.ct3)==null?void 0:ie.toString())||"",onChange:me=>Wt($.id,"ct3",me.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):$.ct3??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:I?s.jsx("input",{type:"number",step:"0.01",min:"0",value:((_=$.ct4)==null?void 0:_.toString())||"",onChange:me=>Wt($.id,"ct4",me.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):$.ct4??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-20 text-center",children:q||"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:I?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:((je=$.assignment_pres_viva)==null?void 0:je.toString())||"",onChange:me=>Ri($.id,"assignment_pres_viva",me.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):$.assignment_pres_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:I?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:((ye=$.attendance)==null?void 0:ye.toString())||"",onChange:me=>Ri($.id,"attendance",me.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):$.attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:I?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"60",value:((Q=$.term_marks)==null?void 0:Q.toString())||"",onChange:me=>Ri($.id,"term_marks",me.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):$.term_marks??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:(()=>{const me=[$.ct1,$.ct2,$.ct3,$.ct4].filter(tt=>typeof tt=="number"&&!isNaN(tt));let le=0;if(me.length>0){const os=me.sort(($i,Li)=>Li-$i).slice(0,3);le=os.reduce(($i,Li)=>($i??0)+Li,0)/(os.length||1)}const we=$.attendance||0,ve=$.assignment_pres_viva||0,ke=$.term_marks||0,$e=le+we+ve+ke;return $e>0?$e.toFixed(2):"-"})()}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:I?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",value:((Ee=$.grade_point)==null?void 0:Ee.toString())||"",onChange:me=>Nd($.id,"grade_point",me.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):$.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:I?s.jsx("input",{type:"text",maxLength:"2",value:$.grade||"",onChange:me=>Nd($.id,"grade",me.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):$.grade??"-"}),I&&s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>ze($),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Es,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Pe($.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(ja,{className:"w-4 h-4"})})]})})]},$.id)})})]})})})}):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Ie,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No courses found for this semester"})]})]},C.id)})]}),de&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:qt,children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Course"}),s.jsx("button",{onClick:qt,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:lt,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:x.subject,onChange:C=>E({...x,subject:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Code"}),s.jsx("input",{type:"text",value:x.course_code,onChange:C=>E({...x,course_code:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Credit Hours"}),s.jsx("input",{type:"number",step:"0.5",min:"0.5",max:"6",value:x.credit_hours,onChange:C=>E({...x,credit_hours:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Type"}),s.jsxs("select",{value:x.course_type,onChange:C=>E({...x,course_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"theory",children:"Theory"}),s.jsx("option",{value:"sessional",children:"Sessional"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:qt,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[s.jsx(li,{className:"w-4 h-4"}),s.jsx("span",{children:"Update Course"})]})]})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Semester Completion"}),s.jsxs("p",{className:"mb-4 text-gray-700 dark:text-gray-300",children:["To complete this semester, type ",s.jsx("span",{className:"font-bold text-emerald-600",children:"YES"})," below and click Confirm."]}),s.jsx("input",{type:"text",value:g,onChange:C=>v(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white mb-4",placeholder:"Type YES to confirm"}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:()=>{g.trim().toLowerCase()==="yes"&&re()},disabled:g.trim().toLowerCase()!=="yes",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Mr,{className:"w-4 h-4"}),s.jsx("span",{children:"Confirm"})]})]})]})})]})},Dp=()=>{const{user:e}=Ge(),{isAdmin:t,loading:r}=Ja(),[a,n]=b.useState([]),[i,l]=b.useState([]),[o,d]=b.useState(null),[c,u]=b.useState(!0),[h,f]=b.useState(null),[p,w]=b.useState("overview"),[x,E]=b.useState(""),[y,m]=b.useState("all"),[g,v]=b.useState("name");if(b.useEffect(()=>{t&&P()},[t]),r)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})})});if(!t)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gh,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You don't have permission to access the admin panel."}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Contact your administrator if you believe this is an error."})]})})})});const P=async()=>{u(!0);try{await Promise.all([S(),D(),B()])}catch(M){console.error("Error loading admin data:",M)}finally{u(!1)}},S=async()=>{try{const{data:M,error:te}=await T.from("profiles").select("*").order("created_at",{ascending:!1});if(te)throw te;n(M||[])}catch(M){console.error("Error loading users:",M)}},D=async()=>{try{const{data:M,error:te}=await T.from("profiles").select("id, email, full_name, created_at");if(te)throw te;const O=[];for(const z of M||[]){const{data:J}=await T.from("sleep_records").select("*").eq("user_id",z.id),{data:k}=await T.from("study_sessions").select("*").eq("user_id",z.id),{data:L}=await T.from("prayer_records").select("*").eq("user_id",z.id),{data:R}=await T.from("quran_records").select("*").eq("user_id",z.id),{data:U}=await T.from("habits").select("*").eq("user_id",z.id),{data:G}=await T.from("semesters").select("*").eq("user_id",z.id),{data:de}=await T.from("exams").select("*").eq("user_id",z.id),ue=(J==null?void 0:J.reduce((A,H)=>{const re=H.duration_hours||0;return A+re},0))||0,ce=(k==null?void 0:k.reduce((A,H)=>{const re=H.duration_hours||0;return A+re},0))||0,j=(L==null?void 0:L.filter(A=>A.completed).length)||0,Z=(L==null?void 0:L.length)||0,N=(U==null?void 0:U.filter(A=>A.completed).length)||0,W=(U==null?void 0:U.length)||0,ae=(G==null?void 0:G.filter(A=>A.status==="completed").length)||0;O.push({userId:z.id,email:z.email,fullName:z.full_name,joinDate:z.created_at,lastActive:z.created_at,totalSleepSessions:(J==null?void 0:J.length)||0,totalStudySessions:(k==null?void 0:k.length)||0,totalPrayers:Z,totalQuranPages:(R==null?void 0:R.reduce((A,H)=>A+(H.pages_read||0),0))||0,totalHabits:W,completedSemesters:ae,totalExams:(de==null?void 0:de.length)||0,averageSleepHours:J!=null&&J.length?ue/J.length:0,averageStudyHours:k!=null&&k.length?ce/k.length:0,prayerCompletionRate:Z?j/Z*100:0,habitCompletionRate:W?N/W*100:0})}l(O)}catch(M){console.error("Error loading user stats:",M)}},B=async()=>{const M={totalUsers:a.length,activeUsers:a.filter(te=>{const O=new Date(te.last_sign_in_at||te.created_at),z=new Date;return z.setDate(z.getDate()-30),O>z}).length,newUsersThisMonth:a.filter(te=>{const O=new Date(te.created_at),z=new Date;return z.setDate(1),z.setHours(0,0,0,0),O>=z}).length,averageSleepHours:0,averageStudyHours:0,averagePrayerCompletion:0,averageHabitCompletion:0,topPerformingUsers:[]};i.length>0&&(M.averageSleepHours=i.reduce((te,O)=>te+O.averageSleepHours,0)/i.length,M.averageStudyHours=i.reduce((te,O)=>te+O.averageStudyHours,0)/i.length,M.averagePrayerCompletion=i.reduce((te,O)=>te+O.prayerCompletionRate,0)/i.length,M.averageHabitCompletion=i.reduce((te,O)=>te+O.habitCompletionRate,0)/i.length,M.topPerformingUsers=i.sort((te,O)=>{const z=te.totalSleepSessions+te.totalStudySessions+te.totalPrayers+te.totalHabits;return O.totalSleepSessions+O.totalStudySessions+O.totalPrayers+O.totalHabits-z}).slice(0,5)),d(M)},ee=[...i.filter(M=>{const te=M.fullName.toLowerCase().includes(x.toLowerCase())||M.email.toLowerCase().includes(x.toLowerCase());if(y==="active"){const O=new Date(M.lastActive),z=new Date;return z.setDate(z.getDate()-30),te&&O>z}else if(y==="inactive"){const O=new Date(M.lastActive),z=new Date;return z.setDate(z.getDate()-30),te&&O<=z}return te})].sort((M,te)=>{switch(g){case"name":return M.fullName.localeCompare(te.fullName);case"joinDate":return new Date(te.joinDate).getTime()-new Date(M.joinDate).getTime();case"lastActive":return new Date(te.lastActive).getTime()-new Date(M.lastActive).getTime();case"activity":const O=M.totalSleepSessions+M.totalStudySessions+M.totalPrayers+M.totalHabits;return te.totalSleepSessions+te.totalStudySessions+te.totalPrayers+te.totalHabits-O;default:return 0}});return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ai,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Panel"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor and manage user data"})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("button",{onClick:P,className:"flex items-center px-3 py-2 bg-gray-600 text-white rounded-md text-sm font-medium hover:bg-gray-700 transition-colors",children:[s.jsx(ii,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsxs("button",{onClick:()=>w("overview"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${p==="overview"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(Qy,{className:"w-4 h-4 mr-2 inline"}),"Overview"]}),s.jsxs("button",{onClick:()=>w("users"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${p==="users"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(oi,{className:"w-4 h-4 mr-2 inline"}),"Users"]}),h&&s.jsxs("button",{onClick:()=>w("details"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${p==="details"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(Zt,{className:"w-4 h-4 mr-2 inline"}),"User Details"]})]})}),c?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):s.jsxs(s.Fragment,{children:[p==="overview"&&o&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(oi,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.totalUsers})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(qh,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.activeUsers})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ls,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"New This Month"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.newUsersThisMonth})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(at,{className:"w-8 h-8 text-orange-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg. Sleep Hours"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.averageSleepHours.toFixed(1)})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Average Performance"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Study Hours"}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[o.averageStudyHours.toFixed(1),"h"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(o.averageStudyHours/8*100,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Prayer Completion"}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[o.averagePrayerCompletion.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${o.averagePrayerCompletion}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Habit Completion"}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[o.averageHabitCompletion.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${o.averageHabitCompletion}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Performing Users"}),s.jsx("div",{className:"space-y-3",children:o.topPerformingUsers.map((M,te)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:te+1})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:M.fullName}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:M.email})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[M.totalSleepSessions+M.totalStudySessions+M.totalPrayers+M.totalHabits," activities"]}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[M.completedSemesters," semesters completed"]})]})]},M.userId))})]})]})]}),p==="users"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(up,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:x,onChange:M=>E(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:y,onChange:M=>m(M.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Users"}),s.jsx("option",{value:"active",children:"Active Users"}),s.jsx("option",{value:"inactive",children:"Inactive Users"})]}),s.jsxs("select",{value:g,onChange:M=>v(M.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"name",children:"Sort by Name"}),s.jsx("option",{value:"joinDate",children:"Sort by Join Date"}),s.jsx("option",{value:"lastActive",children:"Sort by Last Active"}),s.jsx("option",{value:"activity",children:"Sort by Activity"})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Join Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Sleep Sessions"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Study Sessions"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prayers"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Habits"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Semesters"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:ee.map(M=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:M.fullName.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.fullName}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:M.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(M.joinDate).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:M.totalSleepSessions}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:M.totalStudySessions}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:M.totalPrayers}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:M.totalHabits}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[M.completedSemesters,"/8"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("button",{onClick:()=>{f(M.userId),w("details")},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:s.jsx(Bh,{className:"w-4 h-4"})})})]},M.userId))})]})})})]}),p==="details"&&h&&s.jsx(Ap,{userId:h,onBack:()=>w("users")})]})]})})},Ap=({userId:e,onBack:t})=>{var c,u;const[r,a]=b.useState(null),[n,i]=b.useState(null),[l,o]=b.useState(!0);b.useEffect(()=>{d()},[e]);const d=async()=>{o(!0);try{const{data:h,error:f}=await T.from("profiles").select("*").eq("id",e).single();if(f)throw f;a(h);const[p,w,x,E,y,m,g]=await Promise.all([T.from("sleep_records").select("*").eq("user_id",e),T.from("study_sessions").select("*").eq("user_id",e),T.from("prayer_records").select("*").eq("user_id",e),T.from("quran_records").select("*").eq("user_id",e),T.from("habits").select("*").eq("user_id",e),T.from("semesters").select("*").eq("user_id",e),T.from("exams").select("*").eq("user_id",e)]);i({sleep:p.data||[],study:w.data||[],prayer:x.data||[],quran:E.data||[],habits:y.data||[],semesters:m.data||[],exams:g.data||[]})}catch(h){console.error("Error loading user details:",h)}finally{o(!1)}};return l?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):!r||!n?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"User not found"})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:t,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:" Back"}),s.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.full_name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.full_name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r.email})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Joined"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(r.created_at).toLocaleDateString()})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(yt,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sleep Sessions"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.sleep.length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ie,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Study Sessions"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.study.length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(qh,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Prayers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.prayer.length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(at,{className:"w-8 h-8 text-orange-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Habits"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.habits.length})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Institution:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.institution||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Department:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.department||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Student ID:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.student_id||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Phone:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.phone||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Mode:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:((c=r.unit_mode)==null?void 0:c.toUpperCase())||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Theme:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.theme_preference||"Not specified"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Academic Progress"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Completed Semesters:"}),s.jsxs("span",{className:"text-gray-900 dark:text-white",children:[n.semesters.filter(h=>h.status==="completed").length,"/8"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Active Semester:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:((u=n.semesters.find(h=>h.status==="active"))==null?void 0:u.semester_number)||"None"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Exams:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:n.exams.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Quran Pages Read:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:n.quran.reduce((h,f)=>h+(f.pages_read||0),0)})]})]})]})]})]})},Op=()=>{const{user:e}=Ge(),{isAdmin:t,loading:r}=Ja(),[a,n]=b.useState(!1),[i,l]=b.useState(""),o=async()=>{if(e){n(!0),l("");try{const{error:d}=await T.from("profiles").update({role:"admin"}).eq("id",e.id);if(d)throw d;l("Success! You are now an admin. Please refresh the page.")}catch(d){console.error("Error setting up admin:",d),l("Error setting up admin. Please try again.")}finally{n(!1)}}};return r?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})})}):t?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Mr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"You're Already an Admin!"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You have admin privileges. You can access the admin panel from the sidebar."})]})})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ai,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Admin Setup"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"This will make your current user account an administrator with access to the admin panel."}),i&&s.jsx("div",{className:`mb-6 p-4 rounded-lg ${i.includes("Success")?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200"}`,children:s.jsxs("div",{className:"flex items-center",children:[i.includes("Success")?s.jsx(Mr,{className:"w-5 h-5 mr-2"}):s.jsx(Cs,{className:"w-5 h-5 mr-2"}),i]})}),s.jsx("button",{onClick:o,disabled:a,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:a?"Setting up...":"Make Me Admin"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:" Only do this if you want to be an administrator. This action cannot be undone easily."})]})})})})},Mp=()=>{const{user:e}=Ge(),[t,r]=b.useState(!1),[a,n]=b.useState(""),[i,l]=b.useState(!1),[o,d]=b.useState(!1);b.useEffect(()=>{c()},[e]);const c=async()=>{if(e)try{const{data:f,error:p}=await T.from("profiles").select("*").eq("id",e.id).single();if(p&&p.code!=="PGRST116"){console.error("Error checking profile:",p);return}l(!!f),d((f==null?void 0:f.role)==="admin")}catch(f){console.error("Error checking profile status:",f)}},u=async()=>{var f;if(e){r(!0),n("");try{const{error:p}=await T.from("profiles").insert({id:e.id,email:e.email,full_name:((f=e.user_metadata)==null?void 0:f.full_name)||e.email,created_at:e.created_at,updated_at:e.updated_at,role:"user"});if(p)throw p;n("Profile created successfully!"),l(!0)}catch(p){console.error("Error creating profile:",p),n("Error creating profile. Please try again.")}finally{r(!1)}}},h=async()=>{if(e){r(!0),n("");try{const{error:f}=await T.from("profiles").update({role:"admin"}).eq("id",e.id);if(f)throw f;n("You are now an admin! Please refresh the page."),d(!0)}catch(f){console.error("Error making admin:",f),n("Error making admin. Please try again.")}finally{r(!1)}}};return e?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(gp,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Profile Sync"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Sync your auth user with the profiles table"}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6 text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Current User:"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Email: ",e.email]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",e.id]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Profile Exists: ",i?" Yes":" No"]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Admin Status: ",o?" Admin":" User"]})]}),s.jsxs("div",{className:"space-y-4",children:[!i&&s.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:t?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(ii,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Profile..."]}):"Create Profile"}),i&&!o&&s.jsx("button",{onClick:h,disabled:t,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:t?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(ii,{className:"w-4 h-4 mr-2 animate-spin"}),"Making Admin..."]}):"Make Me Admin"}),i&&s.jsx("button",{onClick:c,className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Refresh Status"})]}),a&&s.jsx("div",{className:`mt-6 p-4 rounded-lg ${a.includes("successfully")||a.includes("admin")?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200"}`,children:s.jsxs("div",{className:"flex items-center",children:[a.includes("successfully")||a.includes("admin")?s.jsx(Mr,{className:"w-5 h-5 mr-2"}):s.jsx(Cs,{className:"w-5 h-5 mr-2"}),a]})}),s.jsxs("div",{className:"mt-6 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx("p",{className:"mb-2",children:"Steps to become admin:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[s.jsx("li",{children:"Create your profile (if it doesn't exist)"}),s.jsx("li",{children:"Make yourself an admin"}),s.jsx("li",{children:"Refresh the page to see admin panel in sidebar"})]})]})]})})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please log in first."})})})})})},Rp=()=>{const{user:e}=Ge(),{isAdmin:t,loading:r,refresh:a}=Ja(),[n,i]=b.useState(null),[l,o]=b.useState(!1),d=async()=>{if(e){o(!0);try{const{data:u,error:h}=await T.from("profiles").select("*").eq("id",e.id).single(),{data:f,error:p}=await T.auth.getUser();i({user:{id:e.id,email:e.email,metadata:e.user_metadata},profile:{exists:!!u,data:u,error:h},auth:{data:f,error:p},adminStatus:{isAdmin:t,loading:r}})}catch(u){console.error("Error checking database status:",u),i({error:u instanceof Error?u.message:"Unknown error"})}finally{o(!1)}}},c=()=>{a(),setTimeout(d,1e3)};return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Xy,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Admin Debug"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Debug admin status and database connection"}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6 text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Current Status:"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["User ID: ",s.jsx("span",{className:"font-mono",children:(e==null?void 0:e.id)||"Not logged in"})]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Email: ",s.jsx("span",{className:"font-mono",children:(e==null?void 0:e.email)||"Not logged in"})]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Admin Status:",r?s.jsx("span",{className:"text-yellow-600",children:" Loading..."}):t?s.jsx("span",{className:"text-green-600",children:"  Admin"}):s.jsx("span",{className:"text-red-600",children:"  Not Admin"})]})]})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("button",{onClick:d,disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:l?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(ii,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking Database..."]}):"Check Database Status"}),s.jsx("button",{onClick:c,className:"w-full bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Force Refresh Admin Status"})]}),n&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Debug Information:"}),s.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 overflow-auto max-h-96",children:JSON.stringify(n,null,2)})]}),s.jsxs("div",{className:"mt-6 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx("p",{className:"mb-2",children:"If you made yourself admin in the database:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[s.jsx("li",{children:'Click "Force Refresh Admin Status"'}),s.jsx("li",{children:'Check if "Admin Status" shows  Admin'}),s.jsx("li",{children:"If not, try refreshing the page (Ctrl+F5)"}),s.jsx("li",{children:"Check the debug info for any errors"})]})]})]})})})})},$p=e=>{const t=Math.ceil(e/2),r=e%2===1;return`${t===1?"1st":t===2?"2nd":t===3?"3rd":`${t}th`} Semester ${r?"Odd":"Even"}`};function bn(e){const t=e.match(/(\d{1,2})[.:](\d{2})-(\d{1,2})[.:](\d{2})/);if(!t)return{time:"",end_time:""};const[,r,a,n,i]=t;return{time:`${r.padStart(2,"0")}:${a}:00`,end_time:`${n.padStart(2,"0")}:${i}:00`}}const Lp=()=>{const{user:e}=Ge(),[t,r]=b.useState([]),[a,n]=b.useState([]),[i,l]=b.useState("Saturday"),[o,d]=b.useState("routine"),[c,u]=b.useState(null),[h,f]=b.useState([]),[p,w]=b.useState(!1),[x,E]=b.useState(null),[y,m]=b.useState(!1),[g,v]=b.useState(null),[P,S]=b.useState(""),[D,B]=b.useState(""),[se,ee]=b.useState(""),M=["Saturday","Sunday","Monday","Tuesday","Wednesday"],te=[{label:"8.00-8.50",key:"8.00-8.50"},{label:"8.50-9.40",key:"8.50-9.40"},{label:"9.40-10.30",key:"9.40-10.30"},{label:"10.30-10.50",key:"break",special:"BREAK"},{label:"10.50-11.40",key:"10.50-11.40"},{label:"11.40-12.30",key:"11.40-12.30"},{label:"12.30-1.20",key:"12.30-1.20"},{label:"1.20",key:"class-test",special:"CLASS TEST"},{label:"2.30-5.00",key:"2.30-5.00"}];b.useEffect(()=>{e&&(O(),z(),J())},[e]);const O=async()=>{if(!e)return;const{data:j,error:Z}=await T.from("class_schedules").select("*").eq("user_id",e.id).order("time");j&&r(j)},z=async()=>{if(!e)return;const{data:j,error:Z}=await T.from("attendance_records").select("*").eq("user_id",e.id);j&&n(j)},J=async()=>{if(!e)return;const{data:j,error:Z}=await T.from("semesters").select("*").eq("user_id",e.id).eq("status","active").maybeSingle();if(j){u(j);const{data:N,error:W}=await T.from("academic_marks").select("*").eq("user_id",e.id).eq("semester_id",j.id);N&&f(N)}},k=j=>t.filter(Z=>Z.day===j).sort((Z,N)=>Z.time.localeCompare(N.time)),L=()=>{const j=new Date,Z=j.toLocaleDateString("en-US",{weekday:"long"}),N=j.toTimeString().slice(0,5);return M.includes(Z)?t.find(W=>W.day===Z&&W.time<=N&&W.endTime>=N):null},R=()=>{const j=new Date,Z=j.toLocaleDateString("en-US",{weekday:"long"}),N=j.toTimeString().slice(0,5);if(!M.includes(Z)){const W=M.find(A=>{const H=M.indexOf(A),re=M.indexOf(Z);return H>re});return W?k(W)[0]:k("Saturday")[0]}return t.find(W=>W.day===Z&&W.time>N)};L(),R(),b.useEffect(()=>{const j=new Date().toLocaleDateString("en-US",{weekday:"long"});M.includes(j)&&l(j)},[]),(()=>{const j=new Date,Z=j.toLocaleDateString("en-US",{weekday:"long"}),N=M.indexOf(i)-M.indexOf(Z),W=new Date(j);return W.setDate(j.getDate()+N),W.toISOString().split("T")[0]})();const U=j=>{const Z=a.filter(H=>H.subject===j),N=t.filter(H=>H.subject===j);N.length;let W=0,ae=0;N.forEach(H=>{const re=Z.find(F=>F.date===H.date);re?(re.status!=="cancelled"&&ae++,re.status==="present"&&W++):(W++,ae++)});const A=ae>0?Math.round(W/ae*100):0;return{totalClasses:ae,presentClasses:W,percentage:A}},G=async()=>{if(!e||!x||!g)return;const j=bn(x.time);await T.from("class_schedules").insert({user_id:e.id,subject:g.subject,course_code:g.course_code,time:j.time,end_time:P||j.end_time,location:D,instructor:se,day:x.day,color:""}),w(!1),E(null),v(null),S(""),B(""),ee(""),O()},de=["bg-blue-500","bg-emerald-500","bg-orange-500","bg-purple-500","bg-pink-500","bg-teal-500","bg-yellow-500","bg-red-500","bg-indigo-500","bg-cyan-500"];function ue(j){let Z=0;for(let N=0;N<j.length;N++)Z=j.charCodeAt(N)+((Z<<5)-Z);return de[Math.abs(Z)%de.length]}const ce=async(j,Z,N)=>{if(!e||!Z)return;const W=a.find(ae=>ae.subject===Z.subject&&ae.date===N);if(W){const{error:ae}=await T.from("attendance_records").update({status:j}).eq("id",W.id);ae&&console.error("Attendance update error:",ae)}else{const{error:ae}=await T.from("attendance_records").insert({user_id:e.id,subject:Z.subject,date:N,status:j});ae&&console.error("Attendance insert error:",ae)}z()};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:o==="routine"?"Class Routine":"Attendance"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="routine"?"bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("routine"),children:"Routine"}),s.jsx("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="attendance"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("attendance"),children:"Attendance"})]})]}),o==="routine"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Weekly Schedule"}),o==="routine"&&s.jsx("button",{className:`p-2 rounded-full border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ${y?"bg-emerald-600 text-white":"bg-transparent text-gray-500 dark:text-gray-400"}`,title:y?"Disable Edit Mode":"Enable Edit Mode",onClick:()=>m(j=>!j),children:s.jsx(dp,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:s.jsx("span",{children:new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:M.map(j=>{const Z=k(j).length>0;return s.jsx("button",{onClick:()=>l(j),className:`px-4 py-2 rounded-lg transition-colors ${i===j?"bg-emerald-600 text-white":Z?"border-2 border-emerald-500 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:j},j)})}),o==="routine"&&s.jsxs(s.Fragment,{children:[k(i).length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Ie,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsxs("p",{children:["No classes scheduled for ",i]}),s.jsx("p",{className:"text-sm mt-1",children:"Enjoy your free day!"})]}),s.jsx("div",{className:"space-y-3",children:te.map(j=>{if(j.special)return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("div",{className:"font-semibold text-yellow-700 dark:text-yellow-300",children:j.special}),s.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:j.label})]},j.key);const Z=bn(j.label).time,N=k(i).find(ge=>ge.time===Z),W=new Date,ae=W.toLocaleDateString("en-US",{weekday:"long"}),A=M.indexOf(i)-M.indexOf(ae),H=new Date(W);H.setDate(W.getDate()+A);const re=H.toISOString().split("T")[0],F=N&&a.find(ge=>ge.subject===N.subject&&ge.date===re),X=F?F.status:"present";return s.jsxs("div",{className:`flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg ${N?"hover:bg-gray-100 dark:hover:bg-gray-600":y?"hover:bg-emerald-50 dark:hover:bg-emerald-900/30 cursor-pointer border-2 border-dashed border-emerald-300 dark:border-emerald-700":""} transition-colors`,onClick:!N&&y?()=>{w(!0),E({day:i,time:j.label})}:void 0,children:[s.jsx("div",{children:N?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold text-white ${ue(N.course_code||"")}`,children:N.course_code}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white text-base",children:N.subject})]}),s.jsxs("div",{className:"flex items-center justify-end mt-1 space-x-4",children:[s.jsxs("span",{className:"flex items-center text-xs text-gray-600 dark:text-gray-300 font-medium",children:[s.jsx(Zt,{className:"w-3 h-3 mr-1"}),N.instructor]}),s.jsxs("span",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 font-medium",children:[s.jsx(ap,{className:"w-3 h-3 mr-1"}),N.location]})]})]}):y?s.jsxs("span",{className:"text-emerald-600 dark:text-emerald-300 font-semibold flex items-center",children:[s.jsx(ss,{className:"w-4 h-4 mr-1"})," Add"]}):s.jsx("div",{className:"text-gray-400 italic",children:"No class"})}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:j.label}),s.jsxs("div",{className:"flex space-x-2 mt-2",children:[s.jsxs("button",{className:`flex items-center px-2 py-1 rounded text-xs font-semibold transition-colors ${X==="present"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/30"}`,onClick:()=>ce("present",N,re),children:[s.jsx(Mr,{className:"w-4 h-4 mr-1"})," Present"]}),s.jsxs("button",{className:`flex items-center px-2 py-1 rounded text-xs font-semibold transition-colors ${X==="absent"?"bg-red-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-900/30"}`,onClick:()=>ce("absent",N,re),children:[s.jsx(xp,{className:"w-4 h-4 mr-1"})," Absent"]}),s.jsxs("button",{className:`flex items-center px-2 py-1 rounded text-xs font-semibold transition-colors ${X==="cancelled"?"bg-gray-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-800"}`,onClick:()=>ce("cancelled",N,re),children:[s.jsx(Gy,{className:"w-4 h-4 mr-1"})," Cancelled"]})]})]},j.key)})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t.length}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Classes"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:new Set(t.map(j=>j.subject)).size}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Subjects"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[t.length*1.5,"h"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Weekly Hours"})]})]})]}),s.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-4 border border-emerald-200 dark:border-emerald-800",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-emerald-700 dark:text-emerald-300",children:[s.jsx(ls,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Islamic Academic Week"})]}),s.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 mt-1",children:"Classes run from Saturday to Wednesday. Thursday and Friday are weekend days for rest and worship."})]})]}),o==="attendance"&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Attendance"}),s.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:c&&s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:$p(c.semester_number)})})]}),s.jsx("div",{className:"overflow-x-auto rounded-xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 mt-4",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800",children:[s.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Course Code"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Subject"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Time"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Attendance %"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Marks"})]})}),s.jsx("tbody",{children:h.map(j=>{const Z=U(j.subject);let N=0;return Z.percentage>=90?N=10:Z.percentage>=85?N=9:Z.percentage>=80&&(N=8),s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:j.course_code}),s.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-100",children:j.subject}),s.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:j.time||"-"}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsxs("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Z.percentage>=75?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":Z.percentage>=50?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-200":"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300"}`,children:[Z.percentage,"%"]})}),s.jsx("td",{className:"px-4 py-2 text-center text-sm text-gray-700 dark:text-gray-300",children:N})]},j.id)})})]})})]}),p&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-xl p-6 w-full max-w-md relative",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:["Add Class to ",x==null?void 0:x.day," ",x==null?void 0:x.time]}),s.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>{w(!1),E(null),v(null)},children:s.jsx(Re,{className:"w-5 h-5"})}),g?s.jsxs("form",{className:"space-y-4",onSubmit:j=>{j.preventDefault(),G()},children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Start Time"}),s.jsx("input",{type:"text",className:"mt-1 px-3 py-2 w-full rounded bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100",value:bn(x.time).time,readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"End Time"}),s.jsx("input",{type:"text",className:"mt-1 px-3 py-2 w-full rounded bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100",value:P||bn(x.time).end_time,onChange:j=>S(j.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location"}),s.jsx("input",{type:"text",className:"mt-1 px-3 py-2 w-full rounded bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100",value:D,onChange:j=>B(j.target.value),placeholder:"e.g. Room 101"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Instructor"}),s.jsx("input",{type:"text",className:"mt-1 px-3 py-2 w-full rounded bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100",value:se,onChange:j=>ee(j.target.value),placeholder:"e.g. Dr. Ahmed"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200",onClick:()=>{v(null)},children:"Back"}),s.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-emerald-600 text-white font-semibold hover:bg-emerald-700",children:"Add Class"})]})]}):s.jsx("div",{className:"space-y-2",children:h.length===0?s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No courses available for this semester."}):h.map(j=>s.jsxs("button",{className:"w-full text-left px-4 py-2 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-800/40 text-gray-800 dark:text-gray-100 font-medium",onClick:()=>v(j),children:[j.subject," ",s.jsx("span",{className:"text-xs text-gray-500 ml-2",children:j.course_code})]},j.id))})]})})]})},Ip=()=>{const{user:e,loading:t}=Ge(),{isRunning:r,elapsedTime:a,currentSubject:n}=zh(),[i,l]=b.useState("dashboard"),[o,d]=b.useState(!1);if(t)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Loading..."})});if(!e)return s.jsx(bp,{});const c=()=>{switch(i){case"dashboard":return s.jsx(Zc,{setActiveTab:l});case"study":return s.jsx(kp,{});case"prayer":return s.jsx(jp,{});case"quran":return s.jsx(Np,{});case"habits":return s.jsx(_p,{});case"exam":return s.jsx(Sp,{});case"routine":return s.jsx(Lp,{});case"sleep":return s.jsx(Cp,{});case"achievements":return s.jsx(Ep,{});case"academic":return s.jsx(Pp,{});case"profile":return s.jsx(Tp,{});case"admin":return s.jsx(Dp,{});case"admin-setup":return s.jsx(Op,{});case"profile-sync":return s.jsx(Mp,{});case"admin-debug":return s.jsx(Rp,{});default:return s.jsx(Zc,{setActiveTab:l})}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 dark:from-gray-900 dark:to-emerald-900 relative",children:[s.jsx(yp,{}),s.jsx(vp,{isRunning:r,elapsedTime:a,subject:n}),s.jsx(pp,{activeTab:i,setActiveTab:l,isOpen:o,setIsOpen:d}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"hidden lg:block",children:s.jsx(wp,{activeTab:i,setActiveTab:l})}),s.jsx("main",{className:"flex-1 lg:ml-64",children:s.jsx("div",{className:"p-4 lg:p-6 pt-20 lg:pt-6 pb-20 lg:pb-6",children:c()})})]})]})};function Up(){return s.jsx(qy,{children:s.jsx(Fy,{children:s.jsx(By,{children:s.jsx(Ip,{})})})})}yl.createRoot(document.getElementById("root")).render(s.jsx(So.StrictMode,{children:s.jsx(Up,{})}));

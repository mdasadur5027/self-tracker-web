(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var $t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),r}var tu={exports:{}},hi={},ru={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ga=Symbol.for("react.element"),Zh=Symbol.for("react.portal"),eg=Symbol.for("react.fragment"),tg=Symbol.for("react.strict_mode"),rg=Symbol.for("react.profiler"),sg=Symbol.for("react.provider"),ag=Symbol.for("react.context"),ng=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),lg=Symbol.for("react.memo"),og=Symbol.for("react.lazy"),_d=Symbol.iterator;function dg(e){return e===null||typeof e!="object"?null:(e=_d&&e[_d]||e["@@iterator"],typeof e=="function"?e:null)}var su={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},au=Object.assign,nu={};function Ws(e,t,r){this.props=e,this.context=t,this.refs=nu,this.updater=r||su}Ws.prototype.isReactComponent={};Ws.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ws.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function iu(){}iu.prototype=Ws.prototype;function ko(e,t,r){this.props=e,this.context=t,this.refs=nu,this.updater=r||su}var jo=ko.prototype=new iu;jo.constructor=ko;au(jo,Ws.prototype);jo.isPureReactComponent=!0;var Sd=Array.isArray,lu=Object.prototype.hasOwnProperty,No={current:null},ou={key:!0,ref:!0,__self:!0,__source:!0};function du(e,t,r){var a,n={},i=null,l=null;if(t!=null)for(a in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)lu.call(t,a)&&!ou.hasOwnProperty(a)&&(n[a]=t[a]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];n.children=d}if(e&&e.defaultProps)for(a in o=e.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:Ga,type:e,key:i,ref:l,props:n,_owner:No.current}}function cg(e,t){return{$$typeof:Ga,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _o(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ga}function ug(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Cd=/\/+/g;function Li(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ug(""+e.key):t.toString(36)}function Nn(e,t,r,a,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ga:case Zh:l=!0}}if(l)return l=e,n=n(l),e=a===""?"."+Li(l,0):a,Sd(n)?(r="",e!=null&&(r=e.replace(Cd,"$&/")+"/"),Nn(n,t,r,"",function(c){return c})):n!=null&&(_o(n)&&(n=cg(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Cd,"$&/")+"/")+e)),t.push(n)),1;if(l=0,a=a===""?".":a+":",Sd(e))for(var o=0;o<e.length;o++){i=e[o];var d=a+Li(i,o);l+=Nn(i,t,r,d,n)}else if(d=dg(e),typeof d=="function")for(e=d.call(e),o=0;!(i=e.next()).done;)i=i.value,d=a+Li(i,o++),l+=Nn(i,t,r,d,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function tn(e,t,r){if(e==null)return e;var a=[],n=0;return Nn(e,a,"","",function(i){return t.call(r,i,n++)}),a}function hg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},_n={transition:null},gg={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:_n,ReactCurrentOwner:No};function cu(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:tn,forEach:function(e,t,r){tn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return tn(e,function(){t++}),t},toArray:function(e){return tn(e,function(t){return t})||[]},only:function(e){if(!_o(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=Ws;ye.Fragment=eg;ye.Profiler=rg;ye.PureComponent=ko;ye.StrictMode=tg;ye.Suspense=ig;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gg;ye.act=cu;ye.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=au({},e.props),n=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=No.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)lu.call(t,d)&&!ou.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&o!==void 0?o[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];a.children=o}return{$$typeof:Ga,type:e.type,key:n,ref:i,props:a,_owner:l}};ye.createContext=function(e){return e={$$typeof:ag,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sg,_context:e},e.Consumer=e};ye.createElement=du;ye.createFactory=function(e){var t=du.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:ng,render:e}};ye.isValidElement=_o;ye.lazy=function(e){return{$$typeof:og,_payload:{_status:-1,_result:e},_init:hg}};ye.memo=function(e,t){return{$$typeof:lg,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=_n.transition;_n.transition={};try{e()}finally{_n.transition=t}};ye.unstable_act=cu;ye.useCallback=function(e,t){return mt.current.useCallback(e,t)};ye.useContext=function(e){return mt.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};ye.useEffect=function(e,t){return mt.current.useEffect(e,t)};ye.useId=function(){return mt.current.useId()};ye.useImperativeHandle=function(e,t,r){return mt.current.useImperativeHandle(e,t,r)};ye.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return mt.current.useMemo(e,t)};ye.useReducer=function(e,t,r){return mt.current.useReducer(e,t,r)};ye.useRef=function(e){return mt.current.useRef(e)};ye.useState=function(e){return mt.current.useState(e)};ye.useSyncExternalStore=function(e,t,r){return mt.current.useSyncExternalStore(e,t,r)};ye.useTransition=function(){return mt.current.useTransition()};ye.version="18.3.1";ru.exports=ye;var b=ru.exports;const So=Yh(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg=b,fg=Symbol.for("react.element"),xg=Symbol.for("react.fragment"),yg=Object.prototype.hasOwnProperty,pg=mg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vg={key:!0,ref:!0,__self:!0,__source:!0};function uu(e,t,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)yg.call(t,a)&&!vg.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:fg,type:e,key:i,ref:l,props:n,_owner:pg.current}}hi.Fragment=xg;hi.jsx=uu;hi.jsxs=uu;tu.exports=hi;var s=tu.exports,yl={},hu={exports:{}},Tt={},gu={exports:{}},mu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,I){var G=A.length;A.push(I);e:for(;0<G;){var ce=G-1>>>1,ge=A[ce];if(0<n(ge,I))A[ce]=I,A[G]=ge,G=ce;else break e}}function r(A){return A.length===0?null:A[0]}function a(A){if(A.length===0)return null;var I=A[0],G=A.pop();if(G!==I){A[0]=G;e:for(var ce=0,ge=A.length,he=ge>>>1;ce<he;){var q=2*(ce+1)-1,R=A[q],j=q+1,U=A[j];if(0>n(R,G))j<ge&&0>n(U,R)?(A[ce]=U,A[j]=G,ce=j):(A[ce]=R,A[q]=G,ce=q);else if(j<ge&&0>n(U,G))A[ce]=U,A[j]=G,ce=j;else break e}}return I}function n(A,I){var G=A.sortIndex-I.sortIndex;return G!==0?G:A.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],c=[],u=1,h=null,f=3,p=!1,w=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(A){for(var I=r(c);I!==null;){if(I.callback===null)a(c);else if(I.startTime<=A)a(c),I.sortIndex=I.expirationTime,t(d,I);else break;I=r(c)}}function v(A){if(x=!1,g(A),!w)if(r(d)!==null)w=!0,k(T);else{var I=r(c);I!==null&&z(v,I.startTime-A)}}function T(A,I){w=!1,x&&(x=!1,y(F),F=-1),p=!0;var G=f;try{for(g(I),h=r(d);h!==null&&(!(h.expirationTime>I)||A&&!O());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,f=h.priorityLevel;var ge=ce(h.expirationTime<=I);I=e.unstable_now(),typeof ge=="function"?h.callback=ge:h===r(d)&&a(d),g(I)}else a(d);h=r(d)}if(h!==null)var he=!0;else{var q=r(c);q!==null&&z(v,q.startTime-I),he=!1}return he}finally{h=null,f=G,p=!1}}var N=!1,P=null,F=-1,ae=5,Z=-1;function O(){return!(e.unstable_now()-Z<ae)}function se(){if(P!==null){var A=e.unstable_now();Z=A;var I=!0;try{I=P(!0,A)}finally{I?D():(N=!1,P=null)}}else N=!1}var D;if(typeof m=="function")D=function(){m(se)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,J=B.port2;B.port1.onmessage=se,D=function(){J.postMessage(null)}}else D=function(){_(se,0)};function k(A){P=A,N||(N=!0,D())}function z(A,I){F=_(function(){A(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,k(T))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var G=f;f=I;try{return A()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,I){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var G=f;f=A;try{return I()}finally{f=G}},e.unstable_scheduleCallback=function(A,I,G){var ce=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ce+G:ce):G=ce,A){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=G+ge,A={id:u++,callback:I,priorityLevel:A,startTime:G,expirationTime:ge,sortIndex:-1},G>ce?(A.sortIndex=G,t(c,A),r(d)===null&&A===r(c)&&(x?(y(F),F=-1):x=!0,z(v,G-ce))):(A.sortIndex=ge,t(d,A),w||p||(w=!0,k(T))),A},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(A){var I=f;return function(){var G=f;f=I;try{return A.apply(this,arguments)}finally{f=G}}}})(mu);gu.exports=mu;var bg=gu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg=b,Et=bg;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fu=new Set,Ea={};function ns(e,t){Is(e,t),Is(e+"Capture",t)}function Is(e,t){for(Ea[e]=t,e=0;e<t.length;e++)fu.add(t[e])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pl=Object.prototype.hasOwnProperty,kg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ed={},Td={};function jg(e){return pl.call(Td,e)?!0:pl.call(Ed,e)?!1:kg.test(e)?Td[e]=!0:(Ed[e]=!0,!1)}function Ng(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _g(e,t,r,a){if(t===null||typeof t>"u"||Ng(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,r,a,n,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tt[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tt[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tt[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tt[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tt[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tt[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tt[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tt[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tt[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Co=/[\-:]([a-z])/g;function Eo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Co,Eo);tt[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Co,Eo);tt[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Co,Eo);tt[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tt[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});tt.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tt[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function To(e,t,r,a){var n=tt.hasOwnProperty(t)?tt[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_g(t,r,n,a)&&(r=null),a||n===null?jg(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,a=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var gr=wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rn=Symbol.for("react.element"),ys=Symbol.for("react.portal"),ps=Symbol.for("react.fragment"),Po=Symbol.for("react.strict_mode"),vl=Symbol.for("react.profiler"),xu=Symbol.for("react.provider"),yu=Symbol.for("react.context"),Do=Symbol.for("react.forward_ref"),bl=Symbol.for("react.suspense"),wl=Symbol.for("react.suspense_list"),Ao=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),pu=Symbol.for("react.offscreen"),Pd=Symbol.iterator;function Xs(e){return e===null||typeof e!="object"?null:(e=Pd&&e[Pd]||e["@@iterator"],typeof e=="function"?e:null)}var $e=Object.assign,Ui;function da(e){if(Ui===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ui=t&&t[1]||""}return`
`+Ui+e}var zi=!1;function Fi(e,t){if(!e||zi)return"";zi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),i=a.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var d=`
`+n[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=o);break}}}finally{zi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?da(e):""}function Sg(e){switch(e.tag){case 5:return da(e.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return e=Fi(e.type,!1),e;case 11:return e=Fi(e.type.render,!1),e;case 1:return e=Fi(e.type,!0),e;default:return""}}function kl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ps:return"Fragment";case ys:return"Portal";case vl:return"Profiler";case Po:return"StrictMode";case bl:return"Suspense";case wl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yu:return(e.displayName||"Context")+".Consumer";case xu:return(e._context.displayName||"Context")+".Provider";case Do:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ao:return t=e.displayName||null,t!==null?t:kl(e.type)||"Memo";case xr:t=e._payload,e=e._init;try{return kl(e(t))}catch{}}return null}function Cg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kl(t);case 8:return t===Po?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Eg(e){var t=vu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sn(e){e._valueTracker||(e._valueTracker=Eg(e))}function bu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=vu(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function $n(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jl(e,t){var r=t.checked;return $e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Dd(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Ar(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wu(e,t){t=t.checked,t!=null&&To(e,"checked",t,!1)}function Nl(e,t){wu(e,t);var r=Ar(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_l(e,t.type,r):t.hasOwnProperty("defaultValue")&&_l(e,t.type,Ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ad(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _l(e,t,r){(t!=="number"||$n(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ca=Array.isArray;function Ds(e,t,r,a){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Ar(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Sl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return $e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Od(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(V(92));if(ca(r)){if(1<r.length)throw Error(V(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ar(r)}}function ku(e,t){var r=Ar(t.value),a=Ar(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Md(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ju(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ju(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var an,Nu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(an=an||document.createElement("div"),an.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=an.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ta(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tg=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(e){Tg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ma[t]=ma[e]})});function _u(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ma.hasOwnProperty(e)&&ma[e]?(""+t).trim():t+"px"}function Su(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=_u(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,n):e[r]=n}}var Pg=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function El(e,t){if(t){if(Pg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function Tl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pl=null;function Oo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dl=null,As=null,Os=null;function Rd(e){if(e=Ka(e)){if(typeof Dl!="function")throw Error(V(280));var t=e.stateNode;t&&(t=yi(t),Dl(e.stateNode,e.type,t))}}function Cu(e){As?Os?Os.push(e):Os=[e]:As=e}function Eu(){if(As){var e=As,t=Os;if(Os=As=null,Rd(e),t)for(e=0;e<t.length;e++)Rd(t[e])}}function Tu(e,t){return e(t)}function Pu(){}var qi=!1;function Du(e,t,r){if(qi)return e(t,r);qi=!0;try{return Tu(e,t,r)}finally{qi=!1,(As!==null||Os!==null)&&(Pu(),Eu())}}function Pa(e,t){var r=e.stateNode;if(r===null)return null;var a=yi(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(V(231,t,typeof r));return r}var Al=!1;if(dr)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Al=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Al=!1}function Dg(e,t,r,a,n,i,l,o,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var fa=!1,In=null,Ln=!1,Ol=null,Ag={onError:function(e){fa=!0,In=e}};function Og(e,t,r,a,n,i,l,o,d){fa=!1,In=null,Dg.apply(Ag,arguments)}function Mg(e,t,r,a,n,i,l,o,d){if(Og.apply(this,arguments),fa){if(fa){var c=In;fa=!1,In=null}else throw Error(V(198));Ln||(Ln=!0,Ol=c)}}function is(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Au(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $d(e){if(is(e)!==e)throw Error(V(188))}function Rg(e){var t=e.alternate;if(!t){if(t=is(e),t===null)throw Error(V(188));return t!==e?null:e}for(var r=e,a=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return $d(n),e;if(i===a)return $d(n),t;i=i.sibling}throw Error(V(188))}if(r.return!==a.return)r=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,a=i;break}if(o===a){l=!0,a=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=n;break}if(o===a){l=!0,a=i,r=n;break}o=o.sibling}if(!l)throw Error(V(189))}}if(r.alternate!==a)throw Error(V(190))}if(r.tag!==3)throw Error(V(188));return r.stateNode.current===r?e:t}function Ou(e){return e=Rg(e),e!==null?Mu(e):null}function Mu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mu(e);if(t!==null)return t;e=e.sibling}return null}var Ru=Et.unstable_scheduleCallback,Id=Et.unstable_cancelCallback,$g=Et.unstable_shouldYield,Ig=Et.unstable_requestPaint,Ue=Et.unstable_now,Lg=Et.unstable_getCurrentPriorityLevel,Mo=Et.unstable_ImmediatePriority,$u=Et.unstable_UserBlockingPriority,Un=Et.unstable_NormalPriority,Ug=Et.unstable_LowPriority,Iu=Et.unstable_IdlePriority,gi=null,Yt=null;function zg(e){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(gi,e,void 0,(e.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Bg,Fg=Math.log,qg=Math.LN2;function Bg(e){return e>>>=0,e===0?32:31-(Fg(e)/qg|0)|0}var nn=64,ln=4194304;function ua(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zn(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,n=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?a=ua(o):(i&=l,i!==0&&(a=ua(i)))}else l=r&~n,l!==0?a=ua(l):i!==0&&(a=ua(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Wt(t),n=1<<r,a|=e[r],t&=~n;return a}function Hg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wg(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Wt(i),o=1<<l,d=n[l];d===-1?(!(o&r)||o&a)&&(n[l]=Hg(o,t)):d<=t&&(e.expiredLanes|=o),i&=~o}}function Ml(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lu(){var e=nn;return nn<<=1,!(nn&4194240)&&(nn=64),e}function Bi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Va(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=r}function Gg(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Wt(r),i=1<<n;t[n]=0,a[n]=-1,e[n]=-1,r&=~i}}function Ro(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Wt(r),n=1<<a;n&t|e[a]&t&&(e[a]|=t),r&=~n}}var ke=0;function Uu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var zu,$o,Fu,qu,Bu,Rl=!1,on=[],Nr=null,_r=null,Sr=null,Da=new Map,Aa=new Map,vr=[],Vg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ld(e,t){switch(e){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(t.pointerId)}}function ea(e,t,r,a,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},t!==null&&(t=Ka(t),t!==null&&$o(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Qg(e,t,r,a,n){switch(t){case"focusin":return Nr=ea(Nr,e,t,r,a,n),!0;case"dragenter":return _r=ea(_r,e,t,r,a,n),!0;case"mouseover":return Sr=ea(Sr,e,t,r,a,n),!0;case"pointerover":var i=n.pointerId;return Da.set(i,ea(Da.get(i)||null,e,t,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Aa.set(i,ea(Aa.get(i)||null,e,t,r,a,n)),!0}return!1}function Hu(e){var t=Wr(e.target);if(t!==null){var r=is(t);if(r!==null){if(t=r.tag,t===13){if(t=Au(r),t!==null){e.blockedOn=t,Bu(e.priority,function(){Fu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=$l(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Pl=a,r.target.dispatchEvent(a),Pl=null}else return t=Ka(r),t!==null&&$o(t),e.blockedOn=r,!1;t.shift()}return!0}function Ud(e,t,r){Sn(e)&&r.delete(t)}function Kg(){Rl=!1,Nr!==null&&Sn(Nr)&&(Nr=null),_r!==null&&Sn(_r)&&(_r=null),Sr!==null&&Sn(Sr)&&(Sr=null),Da.forEach(Ud),Aa.forEach(Ud)}function ta(e,t){e.blockedOn===t&&(e.blockedOn=null,Rl||(Rl=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,Kg)))}function Oa(e){function t(n){return ta(n,e)}if(0<on.length){ta(on[0],e);for(var r=1;r<on.length;r++){var a=on[r];a.blockedOn===e&&(a.blockedOn=null)}}for(Nr!==null&&ta(Nr,e),_r!==null&&ta(_r,e),Sr!==null&&ta(Sr,e),Da.forEach(t),Aa.forEach(t),r=0;r<vr.length;r++)a=vr[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<vr.length&&(r=vr[0],r.blockedOn===null);)Hu(r),r.blockedOn===null&&vr.shift()}var Ms=gr.ReactCurrentBatchConfig,Fn=!0;function Jg(e,t,r,a){var n=ke,i=Ms.transition;Ms.transition=null;try{ke=1,Io(e,t,r,a)}finally{ke=n,Ms.transition=i}}function Yg(e,t,r,a){var n=ke,i=Ms.transition;Ms.transition=null;try{ke=4,Io(e,t,r,a)}finally{ke=n,Ms.transition=i}}function Io(e,t,r,a){if(Fn){var n=$l(e,t,r,a);if(n===null)Zi(e,t,a,qn,r),Ld(e,a);else if(Qg(n,e,t,r,a))a.stopPropagation();else if(Ld(e,a),t&4&&-1<Vg.indexOf(e)){for(;n!==null;){var i=Ka(n);if(i!==null&&zu(i),i=$l(e,t,r,a),i===null&&Zi(e,t,a,qn,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else Zi(e,t,a,null,r)}}var qn=null;function $l(e,t,r,a){if(qn=null,e=Oo(a),e=Wr(e),e!==null)if(t=is(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Au(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qn=e,null}function Wu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lg()){case Mo:return 1;case $u:return 4;case Un:case Ug:return 16;case Iu:return 536870912;default:return 16}default:return 16}}var kr=null,Lo=null,Cn=null;function Gu(){if(Cn)return Cn;var e,t=Lo,r=t.length,a,n="value"in kr?kr.value:kr.textContent,i=n.length;for(e=0;e<r&&t[e]===n[e];e++);var l=r-e;for(a=1;a<=l&&t[r-a]===n[i-a];a++);return Cn=n.slice(e,1<a?1-a:void 0)}function En(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dn(){return!0}function zd(){return!1}function Pt(e){function t(r,a,n,i,l){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dn:zd,this.isPropagationStopped=zd,this}return $e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=dn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=dn)},persist:function(){},isPersistent:dn}),t}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=Pt(Gs),Qa=$e({},Gs,{view:0,detail:0}),Xg=Pt(Qa),Hi,Wi,ra,mi=$e({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ra&&(ra&&e.type==="mousemove"?(Hi=e.screenX-ra.screenX,Wi=e.screenY-ra.screenY):Wi=Hi=0,ra=e),Hi)},movementY:function(e){return"movementY"in e?e.movementY:Wi}}),Fd=Pt(mi),Zg=$e({},mi,{dataTransfer:0}),em=Pt(Zg),tm=$e({},Qa,{relatedTarget:0}),Gi=Pt(tm),rm=$e({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),sm=Pt(rm),am=$e({},Gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nm=Pt(am),im=$e({},Gs,{data:0}),qd=Pt(im),lm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},om={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dm[e])?!!t[e]:!1}function zo(){return cm}var um=$e({},Qa,{key:function(e){if(e.key){var t=lm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=En(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?om[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zo,charCode:function(e){return e.type==="keypress"?En(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?En(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hm=Pt(um),gm=$e({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=Pt(gm),mm=$e({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zo}),fm=Pt(mm),xm=$e({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ym=Pt(xm),pm=$e({},mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vm=Pt(pm),bm=[9,13,27,32],Fo=dr&&"CompositionEvent"in window,xa=null;dr&&"documentMode"in document&&(xa=document.documentMode);var wm=dr&&"TextEvent"in window&&!xa,Vu=dr&&(!Fo||xa&&8<xa&&11>=xa),Hd=" ",Wd=!1;function Qu(e,t){switch(e){case"keyup":return bm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ku(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vs=!1;function km(e,t){switch(e){case"compositionend":return Ku(t);case"keypress":return t.which!==32?null:(Wd=!0,Hd);case"textInput":return e=t.data,e===Hd&&Wd?null:e;default:return null}}function jm(e,t){if(vs)return e==="compositionend"||!Fo&&Qu(e,t)?(e=Gu(),Cn=Lo=kr=null,vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vu&&t.locale!=="ko"?null:t.data;default:return null}}var Nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nm[e.type]:t==="textarea"}function Ju(e,t,r,a){Cu(a),t=Bn(t,"onChange"),0<t.length&&(r=new Uo("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var ya=null,Ma=null;function _m(e){l0(e,0)}function fi(e){var t=ks(e);if(bu(t))return e}function Sm(e,t){if(e==="change")return t}var Yu=!1;if(dr){var Vi;if(dr){var Qi="oninput"in document;if(!Qi){var Vd=document.createElement("div");Vd.setAttribute("oninput","return;"),Qi=typeof Vd.oninput=="function"}Vi=Qi}else Vi=!1;Yu=Vi&&(!document.documentMode||9<document.documentMode)}function Qd(){ya&&(ya.detachEvent("onpropertychange",Xu),Ma=ya=null)}function Xu(e){if(e.propertyName==="value"&&fi(Ma)){var t=[];Ju(t,Ma,e,Oo(e)),Du(_m,t)}}function Cm(e,t,r){e==="focusin"?(Qd(),ya=t,Ma=r,ya.attachEvent("onpropertychange",Xu)):e==="focusout"&&Qd()}function Em(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fi(Ma)}function Tm(e,t){if(e==="click")return fi(t)}function Pm(e,t){if(e==="input"||e==="change")return fi(t)}function Dm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:Dm;function Ra(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!pl.call(t,n)||!Vt(e[n],t[n]))return!1}return!0}function Kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jd(e,t){var r=Kd(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kd(r)}}function Zu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function e0(){for(var e=window,t=$n();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$n(e.document)}return t}function qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Am(e){var t=e0(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Zu(r.ownerDocument.documentElement,r)){if(a!==null&&qo(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!e.extend&&i>a&&(n=a,a=i,i=n),n=Jd(r,i);var l=Jd(r,a);n&&l&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Om=dr&&"documentMode"in document&&11>=document.documentMode,bs=null,Il=null,pa=null,Ll=!1;function Yd(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ll||bs==null||bs!==$n(a)||(a=bs,"selectionStart"in a&&qo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),pa&&Ra(pa,a)||(pa=a,a=Bn(Il,"onSelect"),0<a.length&&(t=new Uo("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=bs)))}function cn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ws={animationend:cn("Animation","AnimationEnd"),animationiteration:cn("Animation","AnimationIteration"),animationstart:cn("Animation","AnimationStart"),transitionend:cn("Transition","TransitionEnd")},Ki={},t0={};dr&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function xi(e){if(Ki[e])return Ki[e];if(!ws[e])return e;var t=ws[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in t0)return Ki[e]=t[r];return e}var r0=xi("animationend"),s0=xi("animationiteration"),a0=xi("animationstart"),n0=xi("transitionend"),i0=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){i0.set(e,t),ns(t,[e])}for(var Ji=0;Ji<Xd.length;Ji++){var Yi=Xd[Ji],Mm=Yi.toLowerCase(),Rm=Yi[0].toUpperCase()+Yi.slice(1);Rr(Mm,"on"+Rm)}Rr(r0,"onAnimationEnd");Rr(s0,"onAnimationIteration");Rr(a0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(n0,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$m=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function Zd(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,Mg(a,t,void 0,e),e.currentTarget=null}function l0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var l=a.length-1;0<=l;l--){var o=a[l],d=o.instance,c=o.currentTarget;if(o=o.listener,d!==i&&n.isPropagationStopped())break e;Zd(n,o,c),i=d}else for(l=0;l<a.length;l++){if(o=a[l],d=o.instance,c=o.currentTarget,o=o.listener,d!==i&&n.isPropagationStopped())break e;Zd(n,o,c),i=d}}}if(Ln)throw e=Ol,Ln=!1,Ol=null,e}function Ee(e,t){var r=t[Bl];r===void 0&&(r=t[Bl]=new Set);var a=e+"__bubble";r.has(a)||(o0(t,e,2,!1),r.add(a))}function Xi(e,t,r){var a=0;t&&(a|=4),o0(r,e,a,t)}var un="_reactListening"+Math.random().toString(36).slice(2);function $a(e){if(!e[un]){e[un]=!0,fu.forEach(function(r){r!=="selectionchange"&&($m.has(r)||Xi(r,!1,e),Xi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[un]||(t[un]=!0,Xi("selectionchange",!1,t))}}function o0(e,t,r,a){switch(Wu(t)){case 1:var n=Jg;break;case 4:n=Yg;break;default:n=Io}r=n.bind(null,t,r,e),n=void 0,!Al||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Zi(e,t,r,a,n){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=a.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===n||d.nodeType===8&&d.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Wr(o),l===null)return;if(d=l.tag,d===5||d===6){a=i=l;continue e}o=o.parentNode}}a=a.return}Du(function(){var c=i,u=Oo(r),h=[];e:{var f=i0.get(e);if(f!==void 0){var p=Uo,w=e;switch(e){case"keypress":if(En(r)===0)break e;case"keydown":case"keyup":p=hm;break;case"focusin":w="focus",p=Gi;break;case"focusout":w="blur",p=Gi;break;case"beforeblur":case"afterblur":p=Gi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=em;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=fm;break;case r0:case s0:case a0:p=sm;break;case n0:p=ym;break;case"scroll":p=Xg;break;case"wheel":p=vm;break;case"copy":case"cut":case"paste":p=nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Bd}var x=(t&4)!==0,_=!x&&e==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var m=c,g;m!==null;){g=m;var v=g.stateNode;if(g.tag===5&&v!==null&&(g=v,y!==null&&(v=Pa(m,y),v!=null&&x.push(Ia(m,v,g)))),_)break;m=m.return}0<x.length&&(f=new p(f,w,null,r,u),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==Pl&&(w=r.relatedTarget||r.fromElement)&&(Wr(w)||w[cr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=r.relatedTarget||r.toElement,p=c,w=w?Wr(w):null,w!==null&&(_=is(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(x=Fd,v="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=Bd,v="onPointerLeave",y="onPointerEnter",m="pointer"),_=p==null?f:ks(p),g=w==null?f:ks(w),f=new x(v,m+"leave",p,r,u),f.target=_,f.relatedTarget=g,v=null,Wr(u)===c&&(x=new x(y,m+"enter",w,r,u),x.target=g,x.relatedTarget=_,v=x),_=v,p&&w)t:{for(x=p,y=w,m=0,g=x;g;g=us(g))m++;for(g=0,v=y;v;v=us(v))g++;for(;0<m-g;)x=us(x),m--;for(;0<g-m;)y=us(y),g--;for(;m--;){if(x===y||y!==null&&x===y.alternate)break t;x=us(x),y=us(y)}x=null}else x=null;p!==null&&ec(h,f,p,x,!1),w!==null&&_!==null&&ec(h,_,w,x,!0)}}e:{if(f=c?ks(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=Sm;else if(Gd(f))if(Yu)T=Pm;else{T=Em;var N=Cm}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=Tm);if(T&&(T=T(e,c))){Ju(h,T,r,u);break e}N&&N(e,f,c),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&_l(f,"number",f.value)}switch(N=c?ks(c):window,e){case"focusin":(Gd(N)||N.contentEditable==="true")&&(bs=N,Il=c,pa=null);break;case"focusout":pa=Il=bs=null;break;case"mousedown":Ll=!0;break;case"contextmenu":case"mouseup":case"dragend":Ll=!1,Yd(h,r,u);break;case"selectionchange":if(Om)break;case"keydown":case"keyup":Yd(h,r,u)}var P;if(Fo)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else vs?Qu(e,r)&&(F="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(F="onCompositionStart");F&&(Vu&&r.locale!=="ko"&&(vs||F!=="onCompositionStart"?F==="onCompositionEnd"&&vs&&(P=Gu()):(kr=u,Lo="value"in kr?kr.value:kr.textContent,vs=!0)),N=Bn(c,F),0<N.length&&(F=new qd(F,e,null,r,u),h.push({event:F,listeners:N}),P?F.data=P:(P=Ku(r),P!==null&&(F.data=P)))),(P=wm?km(e,r):jm(e,r))&&(c=Bn(c,"onBeforeInput"),0<c.length&&(u=new qd("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=P))}l0(h,t)})}function Ia(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Bn(e,t){for(var r=t+"Capture",a=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Pa(e,r),i!=null&&a.unshift(Ia(e,i,n)),i=Pa(e,t),i!=null&&a.push(Ia(e,i,n))),e=e.return}return a}function us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ec(e,t,r,a,n){for(var i=t._reactName,l=[];r!==null&&r!==a;){var o=r,d=o.alternate,c=o.stateNode;if(d!==null&&d===a)break;o.tag===5&&c!==null&&(o=c,n?(d=Pa(r,i),d!=null&&l.unshift(Ia(r,d,o))):n||(d=Pa(r,i),d!=null&&l.push(Ia(r,d,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Im=/\r\n?/g,Lm=/\u0000|\uFFFD/g;function tc(e){return(typeof e=="string"?e:""+e).replace(Im,`
`).replace(Lm,"")}function hn(e,t,r){if(t=tc(t),tc(e)!==t&&r)throw Error(V(425))}function Hn(){}var Ul=null,zl=null;function Fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ql=typeof setTimeout=="function"?setTimeout:void 0,Um=typeof clearTimeout=="function"?clearTimeout:void 0,rc=typeof Promise=="function"?Promise:void 0,zm=typeof queueMicrotask=="function"?queueMicrotask:typeof rc<"u"?function(e){return rc.resolve(null).then(e).catch(Fm)}:ql;function Fm(e){setTimeout(function(){throw e})}function el(e,t){var r=t,a=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){e.removeChild(n),Oa(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Oa(t)}function Cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Vs,La="__reactProps$"+Vs,cr="__reactContainer$"+Vs,Bl="__reactEvents$"+Vs,qm="__reactListeners$"+Vs,Bm="__reactHandles$"+Vs;function Wr(e){var t=e[Jt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[cr]||r[Jt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=sc(e);e!==null;){if(r=e[Jt])return r;e=sc(e)}return t}e=r,r=e.parentNode}return null}function Ka(e){return e=e[Jt]||e[cr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ks(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function yi(e){return e[La]||null}var Hl=[],js=-1;function $r(e){return{current:e}}function Te(e){0>js||(e.current=Hl[js],Hl[js]=null,js--)}function Ce(e,t){js++,Hl[js]=e.current,e.current=t}var Or={},ot=$r(Or),wt=$r(!1),Yr=Or;function Ls(e,t){var r=e.type.contextTypes;if(!r)return Or;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function kt(e){return e=e.childContextTypes,e!=null}function Wn(){Te(wt),Te(ot)}function ac(e,t,r){if(ot.current!==Or)throw Error(V(168));Ce(ot,t),Ce(wt,r)}function d0(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(V(108,Cg(e)||"Unknown",n));return $e({},r,a)}function Gn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Or,Yr=ot.current,Ce(ot,e),Ce(wt,wt.current),!0}function nc(e,t,r){var a=e.stateNode;if(!a)throw Error(V(169));r?(e=d0(e,t,Yr),a.__reactInternalMemoizedMergedChildContext=e,Te(wt),Te(ot),Ce(ot,e)):Te(wt),Ce(wt,r)}var nr=null,pi=!1,tl=!1;function c0(e){nr===null?nr=[e]:nr.push(e)}function Hm(e){pi=!0,c0(e)}function Ir(){if(!tl&&nr!==null){tl=!0;var e=0,t=ke;try{var r=nr;for(ke=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}nr=null,pi=!1}catch(n){throw nr!==null&&(nr=nr.slice(e+1)),Ru(Mo,Ir),n}finally{ke=t,tl=!1}}return null}var Ns=[],_s=0,Vn=null,Qn=0,At=[],Ot=0,Xr=null,ir=1,lr="";function Fr(e,t){Ns[_s++]=Qn,Ns[_s++]=Vn,Vn=e,Qn=t}function u0(e,t,r){At[Ot++]=ir,At[Ot++]=lr,At[Ot++]=Xr,Xr=e;var a=ir;e=lr;var n=32-Wt(a)-1;a&=~(1<<n),r+=1;var i=32-Wt(t)+n;if(30<i){var l=n-n%5;i=(a&(1<<l)-1).toString(32),a>>=l,n-=l,ir=1<<32-Wt(t)+n|r<<n|a,lr=i+e}else ir=1<<i|r<<n|a,lr=e}function Bo(e){e.return!==null&&(Fr(e,1),u0(e,1,0))}function Ho(e){for(;e===Vn;)Vn=Ns[--_s],Ns[_s]=null,Qn=Ns[--_s],Ns[_s]=null;for(;e===Xr;)Xr=At[--Ot],At[Ot]=null,lr=At[--Ot],At[Ot]=null,ir=At[--Ot],At[Ot]=null}var Ct=null,St=null,De=!1,Ht=null;function h0(e,t){var r=Mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ic(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ct=e,St=Cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ct=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Xr!==null?{id:ir,overflow:lr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ct=e,St=null,!0):!1;default:return!1}}function Wl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gl(e){if(De){var t=St;if(t){var r=t;if(!ic(e,t)){if(Wl(e))throw Error(V(418));t=Cr(r.nextSibling);var a=Ct;t&&ic(e,t)?h0(a,r):(e.flags=e.flags&-4097|2,De=!1,Ct=e)}}else{if(Wl(e))throw Error(V(418));e.flags=e.flags&-4097|2,De=!1,Ct=e}}}function lc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function gn(e){if(e!==Ct)return!1;if(!De)return lc(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fl(e.type,e.memoizedProps)),t&&(t=St)){if(Wl(e))throw g0(),Error(V(418));for(;t;)h0(e,t),t=Cr(t.nextSibling)}if(lc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){St=Cr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}St=null}}else St=Ct?Cr(e.stateNode.nextSibling):null;return!0}function g0(){for(var e=St;e;)e=Cr(e.nextSibling)}function Us(){St=Ct=null,De=!1}function Wo(e){Ht===null?Ht=[e]:Ht.push(e)}var Wm=gr.ReactCurrentBatchConfig;function sa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(V(309));var a=r.stateNode}if(!a)throw Error(V(147,e));var n=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(V(284));if(!r._owner)throw Error(V(290,e))}return e}function mn(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oc(e){var t=e._init;return t(e._payload)}function m0(e){function t(y,m){if(e){var g=y.deletions;g===null?(y.deletions=[m],y.flags|=16):g.push(m)}}function r(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function a(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function n(y,m){return y=Dr(y,m),y.index=0,y.sibling=null,y}function i(y,m,g){return y.index=g,e?(g=y.alternate,g!==null?(g=g.index,g<m?(y.flags|=2,m):g):(y.flags|=2,m)):(y.flags|=1048576,m)}function l(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,m,g,v){return m===null||m.tag!==6?(m=ol(g,y.mode,v),m.return=y,m):(m=n(m,g),m.return=y,m)}function d(y,m,g,v){var T=g.type;return T===ps?u(y,m,g.props.children,v,g.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===xr&&oc(T)===m.type)?(v=n(m,g.props),v.ref=sa(y,m,g),v.return=y,v):(v=Rn(g.type,g.key,g.props,null,y.mode,v),v.ref=sa(y,m,g),v.return=y,v)}function c(y,m,g,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=dl(g,y.mode,v),m.return=y,m):(m=n(m,g.children||[]),m.return=y,m)}function u(y,m,g,v,T){return m===null||m.tag!==7?(m=Kr(g,y.mode,v,T),m.return=y,m):(m=n(m,g),m.return=y,m)}function h(y,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ol(""+m,y.mode,g),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case rn:return g=Rn(m.type,m.key,m.props,null,y.mode,g),g.ref=sa(y,null,m),g.return=y,g;case ys:return m=dl(m,y.mode,g),m.return=y,m;case xr:var v=m._init;return h(y,v(m._payload),g)}if(ca(m)||Xs(m))return m=Kr(m,y.mode,g,null),m.return=y,m;mn(y,m)}return null}function f(y,m,g,v){var T=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return T!==null?null:o(y,m,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case rn:return g.key===T?d(y,m,g,v):null;case ys:return g.key===T?c(y,m,g,v):null;case xr:return T=g._init,f(y,m,T(g._payload),v)}if(ca(g)||Xs(g))return T!==null?null:u(y,m,g,v,null);mn(y,g)}return null}function p(y,m,g,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(g)||null,o(m,y,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rn:return y=y.get(v.key===null?g:v.key)||null,d(m,y,v,T);case ys:return y=y.get(v.key===null?g:v.key)||null,c(m,y,v,T);case xr:var N=v._init;return p(y,m,g,N(v._payload),T)}if(ca(v)||Xs(v))return y=y.get(g)||null,u(m,y,v,T,null);mn(m,v)}return null}function w(y,m,g,v){for(var T=null,N=null,P=m,F=m=0,ae=null;P!==null&&F<g.length;F++){P.index>F?(ae=P,P=null):ae=P.sibling;var Z=f(y,P,g[F],v);if(Z===null){P===null&&(P=ae);break}e&&P&&Z.alternate===null&&t(y,P),m=i(Z,m,F),N===null?T=Z:N.sibling=Z,N=Z,P=ae}if(F===g.length)return r(y,P),De&&Fr(y,F),T;if(P===null){for(;F<g.length;F++)P=h(y,g[F],v),P!==null&&(m=i(P,m,F),N===null?T=P:N.sibling=P,N=P);return De&&Fr(y,F),T}for(P=a(y,P);F<g.length;F++)ae=p(P,y,F,g[F],v),ae!==null&&(e&&ae.alternate!==null&&P.delete(ae.key===null?F:ae.key),m=i(ae,m,F),N===null?T=ae:N.sibling=ae,N=ae);return e&&P.forEach(function(O){return t(y,O)}),De&&Fr(y,F),T}function x(y,m,g,v){var T=Xs(g);if(typeof T!="function")throw Error(V(150));if(g=T.call(g),g==null)throw Error(V(151));for(var N=T=null,P=m,F=m=0,ae=null,Z=g.next();P!==null&&!Z.done;F++,Z=g.next()){P.index>F?(ae=P,P=null):ae=P.sibling;var O=f(y,P,Z.value,v);if(O===null){P===null&&(P=ae);break}e&&P&&O.alternate===null&&t(y,P),m=i(O,m,F),N===null?T=O:N.sibling=O,N=O,P=ae}if(Z.done)return r(y,P),De&&Fr(y,F),T;if(P===null){for(;!Z.done;F++,Z=g.next())Z=h(y,Z.value,v),Z!==null&&(m=i(Z,m,F),N===null?T=Z:N.sibling=Z,N=Z);return De&&Fr(y,F),T}for(P=a(y,P);!Z.done;F++,Z=g.next())Z=p(P,y,F,Z.value,v),Z!==null&&(e&&Z.alternate!==null&&P.delete(Z.key===null?F:Z.key),m=i(Z,m,F),N===null?T=Z:N.sibling=Z,N=Z);return e&&P.forEach(function(se){return t(y,se)}),De&&Fr(y,F),T}function _(y,m,g,v){if(typeof g=="object"&&g!==null&&g.type===ps&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case rn:e:{for(var T=g.key,N=m;N!==null;){if(N.key===T){if(T=g.type,T===ps){if(N.tag===7){r(y,N.sibling),m=n(N,g.props.children),m.return=y,y=m;break e}}else if(N.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===xr&&oc(T)===N.type){r(y,N.sibling),m=n(N,g.props),m.ref=sa(y,N,g),m.return=y,y=m;break e}r(y,N);break}else t(y,N);N=N.sibling}g.type===ps?(m=Kr(g.props.children,y.mode,v,g.key),m.return=y,y=m):(v=Rn(g.type,g.key,g.props,null,y.mode,v),v.ref=sa(y,m,g),v.return=y,y=v)}return l(y);case ys:e:{for(N=g.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){r(y,m.sibling),m=n(m,g.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else t(y,m);m=m.sibling}m=dl(g,y.mode,v),m.return=y,y=m}return l(y);case xr:return N=g._init,_(y,m,N(g._payload),v)}if(ca(g))return w(y,m,g,v);if(Xs(g))return x(y,m,g,v);mn(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(r(y,m.sibling),m=n(m,g),m.return=y,y=m):(r(y,m),m=ol(g,y.mode,v),m.return=y,y=m),l(y)):r(y,m)}return _}var zs=m0(!0),f0=m0(!1),Kn=$r(null),Jn=null,Ss=null,Go=null;function Vo(){Go=Ss=Jn=null}function Qo(e){var t=Kn.current;Te(Kn),e._currentValue=t}function Vl(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Rs(e,t){Jn=e,Go=Ss=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function It(e){var t=e._currentValue;if(Go!==e)if(e={context:e,memoizedValue:t,next:null},Ss===null){if(Jn===null)throw Error(V(308));Ss=e,Jn.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Gr=null;function Ko(e){Gr===null?Gr=[e]:Gr.push(e)}function x0(e,t,r,a){var n=t.interleaved;return n===null?(r.next=r,Ko(t)):(r.next=n.next,n.next=r),t.interleaved=r,ur(e,a)}function ur(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var yr=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Er(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,ve&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,ur(e,r)}return n=a.interleaved,n===null?(t.next=t,Ko(a)):(t.next=n.next,n.next=t),a.interleaved=t,ur(e,r)}function Tn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Ro(e,r)}}function dc(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Yn(e,t,r,a){var n=e.updateQueue;yr=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var d=o,c=d.next;d.next=null,l===null?i=c:l.next=c,l=d;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=d))}if(i!==null){var h=n.baseState;l=0,u=c=d=null,o=i;do{var f=o.lane,p=o.eventTime;if((a&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=e,x=o;switch(f=t,p=r,x.tag){case 1:if(w=x.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=$e({},h,f);break e;case 2:yr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,d=h):u=u.next=p,l|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(u===null&&(d=h),n.baseState=d,n.firstBaseUpdate=c,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);es|=l,e.lanes=l,e.memoizedState=h}}function cc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(V(191,n));n.call(a)}}}var Ja={},Xt=$r(Ja),Ua=$r(Ja),za=$r(Ja);function Vr(e){if(e===Ja)throw Error(V(174));return e}function Yo(e,t){switch(Ce(za,t),Ce(Ua,e),Ce(Xt,Ja),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cl(t,e)}Te(Xt),Ce(Xt,t)}function Fs(){Te(Xt),Te(Ua),Te(za)}function p0(e){Vr(za.current);var t=Vr(Xt.current),r=Cl(t,e.type);t!==r&&(Ce(Ua,e),Ce(Xt,r))}function Xo(e){Ua.current===e&&(Te(Xt),Te(Ua))}var Oe=$r(0);function Xn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rl=[];function Zo(){for(var e=0;e<rl.length;e++)rl[e]._workInProgressVersionPrimary=null;rl.length=0}var Pn=gr.ReactCurrentDispatcher,sl=gr.ReactCurrentBatchConfig,Zr=0,Re=null,Be=null,Ve=null,Zn=!1,va=!1,Fa=0,Gm=0;function at(){throw Error(V(321))}function ed(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vt(e[r],t[r]))return!1;return!0}function td(e,t,r,a,n,i){if(Zr=i,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pn.current=e===null||e.memoizedState===null?Jm:Ym,e=r(a,n),va){i=0;do{if(va=!1,Fa=0,25<=i)throw Error(V(301));i+=1,Ve=Be=null,t.updateQueue=null,Pn.current=Xm,e=r(a,n)}while(va)}if(Pn.current=ei,t=Be!==null&&Be.next!==null,Zr=0,Ve=Be=Re=null,Zn=!1,t)throw Error(V(300));return e}function rd(){var e=Fa!==0;return Fa=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Re.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function Lt(){if(Be===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Ve===null?Re.memoizedState:Ve.next;if(t!==null)Ve=t,Be=e;else{if(e===null)throw Error(V(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ve===null?Re.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function qa(e,t){return typeof t=="function"?t(e):t}function al(e){var t=Lt(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var a=Be,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var o=l=null,d=null,c=i;do{var u=c.lane;if((Zr&u)===u)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),a=c.hasEagerState?c.eagerState:e(a,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(o=d=h,l=a):d=d.next=h,Re.lanes|=u,es|=u}c=c.next}while(c!==null&&c!==i);d===null?l=a:d.next=o,Vt(a,t.memoizedState)||(bt=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=d,r.lastRenderedState=a}if(e=r.interleaved,e!==null){n=e;do i=n.lane,Re.lanes|=i,es|=i,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nl(e){var t=Lt(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var a=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=e(i,l.action),l=l.next;while(l!==n);Vt(i,t.memoizedState)||(bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function v0(){}function b0(e,t){var r=Re,a=Lt(),n=t(),i=!Vt(a.memoizedState,n);if(i&&(a.memoizedState=n,bt=!0),a=a.queue,sd(j0.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||Ve!==null&&Ve.memoizedState.tag&1){if(r.flags|=2048,Ba(9,k0.bind(null,r,a,n,t),void 0,null),Qe===null)throw Error(V(349));Zr&30||w0(r,t,n)}return n}function w0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function k0(e,t,r,a){t.value=r,t.getSnapshot=a,N0(t)&&_0(e)}function j0(e,t,r){return r(function(){N0(t)&&_0(e)})}function N0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vt(e,r)}catch{return!0}}function _0(e){var t=ur(e,1);t!==null&&Gt(t,e,1,-1)}function uc(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:e},t.queue=e,e=e.dispatch=Km.bind(null,Re,e),[t.memoizedState,e]}function Ba(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function S0(){return Lt().memoizedState}function Dn(e,t,r,a){var n=Kt();Re.flags|=e,n.memoizedState=Ba(1|t,r,void 0,a===void 0?null:a)}function vi(e,t,r,a){var n=Lt();a=a===void 0?null:a;var i=void 0;if(Be!==null){var l=Be.memoizedState;if(i=l.destroy,a!==null&&ed(a,l.deps)){n.memoizedState=Ba(t,r,i,a);return}}Re.flags|=e,n.memoizedState=Ba(1|t,r,i,a)}function hc(e,t){return Dn(8390656,8,e,t)}function sd(e,t){return vi(2048,8,e,t)}function C0(e,t){return vi(4,2,e,t)}function E0(e,t){return vi(4,4,e,t)}function T0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function P0(e,t,r){return r=r!=null?r.concat([e]):null,vi(4,4,T0.bind(null,t,e),r)}function ad(){}function D0(e,t){var r=Lt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&ed(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function A0(e,t){var r=Lt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&ed(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function O0(e,t,r){return Zr&21?(Vt(r,t)||(r=Lu(),Re.lanes|=r,es|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=r)}function Vm(e,t){var r=ke;ke=r!==0&&4>r?r:4,e(!0);var a=sl.transition;sl.transition={};try{e(!1),t()}finally{ke=r,sl.transition=a}}function M0(){return Lt().memoizedState}function Qm(e,t,r){var a=Pr(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},R0(e))$0(t,r);else if(r=x0(e,t,r,a),r!==null){var n=ht();Gt(r,e,a,n),I0(r,t,a)}}function Km(e,t,r){var a=Pr(e),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(R0(e))$0(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,Vt(o,l)){var d=t.interleaved;d===null?(n.next=n,Ko(t)):(n.next=d.next,d.next=n),t.interleaved=n;return}}catch{}finally{}r=x0(e,t,n,a),r!==null&&(n=ht(),Gt(r,e,a,n),I0(r,t,a))}}function R0(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function $0(e,t){va=Zn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function I0(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Ro(e,r)}}var ei={readContext:It,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},Jm={readContext:It,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:It,useEffect:hc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Dn(4194308,4,T0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Dn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dn(4,2,e,t)},useMemo:function(e,t){var r=Kt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Kt();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Qm.bind(null,Re,e),[a.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:uc,useDebugValue:ad,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=uc(!1),t=e[0];return e=Vm.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Re,n=Kt();if(De){if(r===void 0)throw Error(V(407));r=r()}else{if(r=t(),Qe===null)throw Error(V(349));Zr&30||w0(a,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,hc(j0.bind(null,a,i,e),[e]),a.flags|=2048,Ba(9,k0.bind(null,a,i,r,t),void 0,null),r},useId:function(){var e=Kt(),t=Qe.identifierPrefix;if(De){var r=lr,a=ir;r=(a&~(1<<32-Wt(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Fa++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Gm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ym={readContext:It,useCallback:D0,useContext:It,useEffect:sd,useImperativeHandle:P0,useInsertionEffect:C0,useLayoutEffect:E0,useMemo:A0,useReducer:al,useRef:S0,useState:function(){return al(qa)},useDebugValue:ad,useDeferredValue:function(e){var t=Lt();return O0(t,Be.memoizedState,e)},useTransition:function(){var e=al(qa)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:v0,useSyncExternalStore:b0,useId:M0,unstable_isNewReconciler:!1},Xm={readContext:It,useCallback:D0,useContext:It,useEffect:sd,useImperativeHandle:P0,useInsertionEffect:C0,useLayoutEffect:E0,useMemo:A0,useReducer:nl,useRef:S0,useState:function(){return nl(qa)},useDebugValue:ad,useDeferredValue:function(e){var t=Lt();return Be===null?t.memoizedState=e:O0(t,Be.memoizedState,e)},useTransition:function(){var e=nl(qa)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:v0,useSyncExternalStore:b0,useId:M0,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=$e({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ql(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:$e({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var bi={isMounted:function(e){return(e=e._reactInternals)?is(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=ht(),n=Pr(e),i=or(a,n);i.payload=t,r!=null&&(i.callback=r),t=Er(e,i,n),t!==null&&(Gt(t,e,n,a),Tn(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=ht(),n=Pr(e),i=or(a,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Er(e,i,n),t!==null&&(Gt(t,e,n,a),Tn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ht(),a=Pr(e),n=or(r,a);n.tag=2,t!=null&&(n.callback=t),t=Er(e,n,a),t!==null&&(Gt(t,e,a,r),Tn(t,e,a))}};function gc(e,t,r,a,n,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,l):t.prototype&&t.prototype.isPureReactComponent?!Ra(r,a)||!Ra(n,i):!0}function L0(e,t,r){var a=!1,n=Or,i=t.contextType;return typeof i=="object"&&i!==null?i=It(i):(n=kt(t)?Yr:ot.current,a=t.contextTypes,i=(a=a!=null)?Ls(e,n):Or),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function mc(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&bi.enqueueReplaceState(t,t.state,null)}function Kl(e,t,r,a){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Jo(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=It(i):(i=kt(t)?Yr:ot.current,n.context=Ls(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ql(e,t,i,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&bi.enqueueReplaceState(n,n.state,null),Yn(e,r,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function qs(e,t){try{var r="",a=t;do r+=Sg(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function il(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Jl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Zm=typeof WeakMap=="function"?WeakMap:Map;function U0(e,t,r){r=or(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){ri||(ri=!0,io=a),Jl(e,t)},r}function z0(e,t,r){r=or(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;r.payload=function(){return a(n)},r.callback=function(){Jl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Jl(e,t),typeof a!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function fc(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new Zm;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(r)||(n.add(r),e=mf.bind(null,e,t,r),t.then(e,e))}function xc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yc(e,t,r,a,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=or(-1,1),t.tag=2,Er(r,t,1))),r.lanes|=1),e)}var ef=gr.ReactCurrentOwner,bt=!1;function ut(e,t,r,a){t.child=e===null?f0(t,null,r,a):zs(t,e.child,r,a)}function pc(e,t,r,a,n){r=r.render;var i=t.ref;return Rs(t,n),a=td(e,t,r,a,i,n),r=rd(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,hr(e,t,n)):(De&&r&&Bo(t),t.flags|=1,ut(e,t,a,n),t.child)}function vc(e,t,r,a,n){if(e===null){var i=r.type;return typeof i=="function"&&!hd(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,F0(e,t,i,a,n)):(e=Rn(r.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ra,r(l,a)&&e.ref===t.ref)return hr(e,t,n)}return t.flags|=1,e=Dr(i,a),e.ref=t.ref,e.return=t,t.child=e}function F0(e,t,r,a,n){if(e!==null){var i=e.memoizedProps;if(Ra(i,a)&&e.ref===t.ref)if(bt=!1,t.pendingProps=a=i,(e.lanes&n)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,hr(e,t,n)}return Yl(e,t,r,a,n)}function q0(e,t,r){var a=t.pendingProps,n=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Es,Nt),Nt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(Es,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Ce(Es,Nt),Nt|=a}else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,Ce(Es,Nt),Nt|=a;return ut(e,t,n,r),t.child}function B0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Yl(e,t,r,a,n){var i=kt(r)?Yr:ot.current;return i=Ls(t,i),Rs(t,n),r=td(e,t,r,a,i,n),a=rd(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,hr(e,t,n)):(De&&a&&Bo(t),t.flags|=1,ut(e,t,r,n),t.child)}function bc(e,t,r,a,n){if(kt(r)){var i=!0;Gn(t)}else i=!1;if(Rs(t,n),t.stateNode===null)An(e,t),L0(t,r,a),Kl(t,r,a,n),a=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var d=l.context,c=r.contextType;typeof c=="object"&&c!==null?c=It(c):(c=kt(r)?Yr:ot.current,c=Ls(t,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||d!==c)&&mc(t,l,a,c),yr=!1;var f=t.memoizedState;l.state=f,Yn(t,a,l,n),d=t.memoizedState,o!==a||f!==d||wt.current||yr?(typeof u=="function"&&(Ql(t,r,u,a),d=t.memoizedState),(o=yr||gc(t,r,o,a,f,d,c))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),l.props=a,l.state=d,l.context=c,a=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,y0(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Ft(t.type,o),l.props=c,h=t.pendingProps,f=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=It(d):(d=kt(r)?Yr:ot.current,d=Ls(t,d));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==d)&&mc(t,l,a,d),yr=!1,f=t.memoizedState,l.state=f,Yn(t,a,l,n);var w=t.memoizedState;o!==h||f!==w||wt.current||yr?(typeof p=="function"&&(Ql(t,r,p,a),w=t.memoizedState),(c=yr||gc(t,r,c,a,f,w,d)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,w,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,w,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=w),l.props=a,l.state=w,l.context=d,a=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),a=!1)}return Xl(e,t,r,a,i,n)}function Xl(e,t,r,a,n,i){B0(e,t);var l=(t.flags&128)!==0;if(!a&&!l)return n&&nc(t,r,!1),hr(e,t,i);a=t.stateNode,ef.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&l?(t.child=zs(t,e.child,null,i),t.child=zs(t,null,o,i)):ut(e,t,o,i),t.memoizedState=a.state,n&&nc(t,r,!0),t.child}function H0(e){var t=e.stateNode;t.pendingContext?ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ac(e,t.context,!1),Yo(e,t.containerInfo)}function wc(e,t,r,a,n){return Us(),Wo(n),t.flags|=256,ut(e,t,r,a),t.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function eo(e){return{baseLanes:e,cachePool:null,transitions:null}}function W0(e,t,r){var a=t.pendingProps,n=Oe.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Ce(Oe,n&1),e===null)return Gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=ji(l,a,0,null),e=Kr(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=eo(r),t.memoizedState=Zl,e):nd(t,l));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return tf(e,t,l,a,o,n,r);if(i){i=a.fallback,l=t.mode,n=e.child,o=n.sibling;var d={mode:"hidden",children:a.children};return!(l&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=Dr(n,d),a.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=Dr(o,i):(i=Kr(i,l,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=e.child.memoizedState,l=l===null?eo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Zl,a}return i=e.child,e=i.sibling,a=Dr(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function nd(e,t){return t=ji({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fn(e,t,r,a){return a!==null&&Wo(a),zs(t,e.child,null,r),e=nd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tf(e,t,r,a,n,i,l){if(r)return t.flags&256?(t.flags&=-257,a=il(Error(V(422))),fn(e,t,l,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=ji({mode:"visible",children:a.children},n,0,null),i=Kr(i,n,l,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&zs(t,e.child,null,l),t.child.memoizedState=eo(l),t.memoizedState=Zl,i);if(!(t.mode&1))return fn(e,t,l,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(V(419)),a=il(i,a,void 0),fn(e,t,l,a)}if(o=(l&e.childLanes)!==0,bt||o){if(a=Qe,a!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,ur(e,n),Gt(a,e,n,-1))}return ud(),a=il(Error(V(421))),fn(e,t,l,a)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=ff.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,St=Cr(n.nextSibling),Ct=t,De=!0,Ht=null,e!==null&&(At[Ot++]=ir,At[Ot++]=lr,At[Ot++]=Xr,ir=e.id,lr=e.overflow,Xr=t),t=nd(t,a.children),t.flags|=4096,t)}function kc(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Vl(e.return,t,r)}function ll(e,t,r,a,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function G0(e,t,r){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(ut(e,t,a.children,r),a=Oe.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kc(e,r,t);else if(e.tag===19)kc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ce(Oe,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Xn(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),ll(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Xn(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}ll(t,!0,r,null,i);break;case"together":ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function An(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),es|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,r=Dr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Dr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function rf(e,t,r){switch(t.tag){case 3:H0(t),Us();break;case 5:p0(t);break;case 1:kt(t.type)&&Gn(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;Ce(Kn,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Ce(Oe,Oe.current&1),t.flags|=128,null):r&t.child.childLanes?W0(e,t,r):(Ce(Oe,Oe.current&1),e=hr(e,t,r),e!==null?e.sibling:null);Ce(Oe,Oe.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return G0(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ce(Oe,Oe.current),a)break;return null;case 22:case 23:return t.lanes=0,q0(e,t,r)}return hr(e,t,r)}var V0,to,Q0,K0;V0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};to=function(){};Q0=function(e,t,r,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Vr(Xt.current);var i=null;switch(r){case"input":n=jl(e,n),a=jl(e,a),i=[];break;case"select":n=$e({},n,{value:void 0}),a=$e({},a,{value:void 0}),i=[];break;case"textarea":n=Sl(e,n),a=Sl(e,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Hn)}El(r,a);var l;r=null;for(c in n)if(!a.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var o=n[c];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ea.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in a){var d=a[c];if(o=n!=null?n[c]:void 0,a.hasOwnProperty(c)&&d!==o&&(d!=null||o!=null))if(c==="style")if(o){for(l in o)!o.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&o[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(i||(i=[]),i.push(c,r)),r=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ea.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&Ee("scroll",e),i||o===d||(i=[])):(i=i||[]).push(c,d))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};K0=function(e,t,r,a){r!==a&&(t.flags|=4)};function aa(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function sf(e,t,r){var a=t.pendingProps;switch(Ho(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return kt(t.type)&&Wn(),nt(t),null;case 3:return a=t.stateNode,Fs(),Te(wt),Te(ot),Zo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(gn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(co(Ht),Ht=null))),to(e,t),nt(t),null;case 5:Xo(t);var n=Vr(za.current);if(r=t.type,e!==null&&t.stateNode!=null)Q0(e,t,r,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(V(166));return nt(t),null}if(e=Vr(Xt.current),gn(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[Jt]=t,a[La]=i,e=(t.mode&1)!==0,r){case"dialog":Ee("cancel",a),Ee("close",a);break;case"iframe":case"object":case"embed":Ee("load",a);break;case"video":case"audio":for(n=0;n<ha.length;n++)Ee(ha[n],a);break;case"source":Ee("error",a);break;case"img":case"image":case"link":Ee("error",a),Ee("load",a);break;case"details":Ee("toggle",a);break;case"input":Dd(a,i),Ee("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",a);break;case"textarea":Od(a,i),Ee("invalid",a)}El(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&hn(a.textContent,o,e),n=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&hn(a.textContent,o,e),n=["children",""+o]):Ea.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ee("scroll",a)}switch(r){case"input":sn(a),Ad(a,i,!0);break;case"textarea":sn(a),Md(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Hn)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ju(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),r==="select"&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[Jt]=t,e[La]=a,V0(e,t,!1,!1),t.stateNode=e;e:{switch(l=Tl(r,a),r){case"dialog":Ee("cancel",e),Ee("close",e),n=a;break;case"iframe":case"object":case"embed":Ee("load",e),n=a;break;case"video":case"audio":for(n=0;n<ha.length;n++)Ee(ha[n],e);n=a;break;case"source":Ee("error",e),n=a;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),n=a;break;case"details":Ee("toggle",e),n=a;break;case"input":Dd(e,a),n=jl(e,a),Ee("invalid",e);break;case"option":n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=$e({},a,{value:void 0}),Ee("invalid",e);break;case"textarea":Od(e,a),n=Sl(e,a),Ee("invalid",e);break;default:n=a}El(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var d=o[i];i==="style"?Su(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Nu(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Ta(e,d):typeof d=="number"&&Ta(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ea.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Ee("scroll",e):d!=null&&To(e,i,d,l))}switch(r){case"input":sn(e),Ad(e,a,!1);break;case"textarea":sn(e),Md(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ar(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?Ds(e,!!a.multiple,i,!1):a.defaultValue!=null&&Ds(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Hn)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)K0(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(V(166));if(r=Vr(za.current),Vr(Xt.current),gn(t)){if(a=t.stateNode,r=t.memoizedProps,a[Jt]=t,(i=a.nodeValue!==r)&&(e=Ct,e!==null))switch(e.tag){case 3:hn(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hn(a.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Jt]=t,t.stateNode=a}return nt(t),null;case 13:if(Te(Oe),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&St!==null&&t.mode&1&&!(t.flags&128))g0(),Us(),t.flags|=98560,i=!1;else if(i=gn(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(V(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(V(317));i[Jt]=t}else Us(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nt(t),i=!1}else Ht!==null&&(co(Ht),Ht=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?He===0&&(He=3):ud())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return Fs(),to(e,t),e===null&&$a(t.stateNode.containerInfo),nt(t),null;case 10:return Qo(t.type._context),nt(t),null;case 17:return kt(t.type)&&Wn(),nt(t),null;case 19:if(Te(Oe),i=t.memoizedState,i===null)return nt(t),null;if(a=(t.flags&128)!==0,l=i.rendering,l===null)if(a)aa(i,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Xn(e),l!==null){for(t.flags|=128,aa(i,!1),a=l.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)i=r,e=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ce(Oe,Oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ue()>Bs&&(t.flags|=128,a=!0,aa(i,!1),t.lanes=4194304)}else{if(!a)if(e=Xn(l),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),aa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!De)return nt(t),null}else 2*Ue()-i.renderingStartTime>Bs&&r!==1073741824&&(t.flags|=128,a=!0,aa(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ue(),t.sibling=null,r=Oe.current,Ce(Oe,a?r&1|2:r&1),t):(nt(t),null);case 22:case 23:return cd(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Nt&1073741824&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function af(e,t){switch(Ho(t),t.tag){case 1:return kt(t.type)&&Wn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fs(),Te(wt),Te(ot),Zo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xo(t),null;case 13:if(Te(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(Oe),null;case 4:return Fs(),null;case 10:return Qo(t.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var xn=!1,lt=!1,nf=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Cs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Ie(e,t,a)}else r.current=null}function ro(e,t,r){try{r()}catch(a){Ie(e,t,a)}}var jc=!1;function lf(e,t){if(Ul=Fn,e=e0(),qo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,d=-1,c=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==r||n!==0&&h.nodeType!==3||(o=l+n),h!==i||a!==0&&h.nodeType!==3||(d=l+a),h.nodeType===3&&(l+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++c===n&&(o=l),f===i&&++u===a&&(d=l),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=o===-1||d===-1?null:{start:o,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(zl={focusedElem:e,selectionRange:r},Fn=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,_=w.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:Ft(t.type,x),_);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(v){Ie(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return w=jc,jc=!1,w}function ba(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&ro(t,r,i)}n=n.next}while(n!==a)}}function wi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function so(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function J0(e){var t=e.alternate;t!==null&&(e.alternate=null,J0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[La],delete t[Bl],delete t[qm],delete t[Bm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Y0(e){return e.tag===5||e.tag===3||e.tag===4}function Nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Y0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ao(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Hn));else if(a!==4&&(e=e.child,e!==null))for(ao(e,t,r),e=e.sibling;e!==null;)ao(e,t,r),e=e.sibling}function no(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(no(e,t,r),e=e.sibling;e!==null;)no(e,t,r),e=e.sibling}var Ze=null,qt=!1;function mr(e,t,r){for(r=r.child;r!==null;)X0(e,t,r),r=r.sibling}function X0(e,t,r){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(gi,r)}catch{}switch(r.tag){case 5:lt||Cs(r,t);case 6:var a=Ze,n=qt;Ze=null,mr(e,t,r),Ze=a,qt=n,Ze!==null&&(qt?(e=Ze,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ze.removeChild(r.stateNode));break;case 18:Ze!==null&&(qt?(e=Ze,r=r.stateNode,e.nodeType===8?el(e.parentNode,r):e.nodeType===1&&el(e,r),Oa(e)):el(Ze,r.stateNode));break;case 4:a=Ze,n=qt,Ze=r.stateNode.containerInfo,qt=!0,mr(e,t,r),Ze=a,qt=n;break;case 0:case 11:case 14:case 15:if(!lt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&ro(r,t,l),n=n.next}while(n!==a)}mr(e,t,r);break;case 1:if(!lt&&(Cs(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){Ie(r,t,o)}mr(e,t,r);break;case 21:mr(e,t,r);break;case 22:r.mode&1?(lt=(a=lt)||r.memoizedState!==null,mr(e,t,r),lt=a):mr(e,t,r);break;default:mr(e,t,r)}}function _c(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new nf),t.forEach(function(a){var n=xf.bind(null,e,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Ut(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ze=o.stateNode,qt=!1;break e;case 3:Ze=o.stateNode.containerInfo,qt=!0;break e;case 4:Ze=o.stateNode.containerInfo,qt=!0;break e}o=o.return}if(Ze===null)throw Error(V(160));X0(i,l,n),Ze=null,qt=!1;var d=n.alternate;d!==null&&(d.return=null),n.return=null}catch(c){Ie(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Z0(t,e),t=t.sibling}function Z0(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ut(t,e),Qt(e),a&4){try{ba(3,e,e.return),wi(3,e)}catch(x){Ie(e,e.return,x)}try{ba(5,e,e.return)}catch(x){Ie(e,e.return,x)}}break;case 1:Ut(t,e),Qt(e),a&512&&r!==null&&Cs(r,r.return);break;case 5:if(Ut(t,e),Qt(e),a&512&&r!==null&&Cs(r,r.return),e.flags&32){var n=e.stateNode;try{Ta(n,"")}catch(x){Ie(e,e.return,x)}}if(a&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&wu(n,i),Tl(o,l);var c=Tl(o,i);for(l=0;l<d.length;l+=2){var u=d[l],h=d[l+1];u==="style"?Su(n,h):u==="dangerouslySetInnerHTML"?Nu(n,h):u==="children"?Ta(n,h):To(n,u,h,c)}switch(o){case"input":Nl(n,i);break;case"textarea":ku(n,i);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ds(n,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ds(n,!!i.multiple,i.defaultValue,!0):Ds(n,!!i.multiple,i.multiple?[]:"",!1))}n[La]=i}catch(x){Ie(e,e.return,x)}}break;case 6:if(Ut(t,e),Qt(e),a&4){if(e.stateNode===null)throw Error(V(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(x){Ie(e,e.return,x)}}break;case 3:if(Ut(t,e),Qt(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Oa(t.containerInfo)}catch(x){Ie(e,e.return,x)}break;case 4:Ut(t,e),Qt(e);break;case 13:Ut(t,e),Qt(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(od=Ue())),a&4&&_c(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(lt=(c=lt)||u,Ut(t,e),lt=c):Ut(t,e),Qt(e),a&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(ie=e,u=e.child;u!==null;){for(h=ie=u;ie!==null;){switch(f=ie,p=f.child,f.tag){case 0:case 11:case 14:case 15:ba(4,f,f.return);break;case 1:Cs(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){a=f,r=f.return;try{t=a,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(x){Ie(a,r,x)}}break;case 5:Cs(f,f.return);break;case 22:if(f.memoizedState!==null){Cc(h);continue}}p!==null?(p.return=f,ie=p):Cc(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,c?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,d=h.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=_u("display",l))}catch(x){Ie(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Ie(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ut(t,e),Qt(e),a&4&&_c(e);break;case 21:break;default:Ut(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Y0(r)){var a=r;break e}r=r.return}throw Error(V(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Ta(n,""),a.flags&=-33);var i=Nc(e);no(e,i,n);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Nc(e);ao(e,o,l);break;default:throw Error(V(161))}}catch(d){Ie(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function of(e,t,r){ie=e,eh(e)}function eh(e,t,r){for(var a=(e.mode&1)!==0;ie!==null;){var n=ie,i=n.child;if(n.tag===22&&a){var l=n.memoizedState!==null||xn;if(!l){var o=n.alternate,d=o!==null&&o.memoizedState!==null||lt;o=xn;var c=lt;if(xn=l,(lt=d)&&!c)for(ie=n;ie!==null;)l=ie,d=l.child,l.tag===22&&l.memoizedState!==null?Ec(n):d!==null?(d.return=l,ie=d):Ec(n);for(;i!==null;)ie=i,eh(i),i=i.sibling;ie=n,xn=o,lt=c}Sc(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,ie=i):Sc(e)}}function Sc(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lt||wi(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!lt)if(r===null)a.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Ft(t.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cc(t,i,a);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}cc(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Oa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}lt||t.flags&512&&so(t)}catch(f){Ie(t,t.return,f)}}if(t===e){ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Cc(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Ec(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{wi(4,t)}catch(d){Ie(t,r,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(d){Ie(t,n,d)}}var i=t.return;try{so(t)}catch(d){Ie(t,i,d)}break;case 5:var l=t.return;try{so(t)}catch(d){Ie(t,l,d)}}}catch(d){Ie(t,t.return,d)}if(t===e){ie=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ie=o;break}ie=t.return}}var df=Math.ceil,ti=gr.ReactCurrentDispatcher,id=gr.ReactCurrentOwner,Rt=gr.ReactCurrentBatchConfig,ve=0,Qe=null,qe=null,et=0,Nt=0,Es=$r(0),He=0,Ha=null,es=0,ki=0,ld=0,wa=null,pt=null,od=0,Bs=1/0,sr=null,ri=!1,io=null,Tr=null,yn=!1,jr=null,si=0,ka=0,lo=null,On=-1,Mn=0;function ht(){return ve&6?Ue():On!==-1?On:On=Ue()}function Pr(e){return e.mode&1?ve&2&&et!==0?et&-et:Wm.transition!==null?(Mn===0&&(Mn=Lu()),Mn):(e=ke,e!==0||(e=window.event,e=e===void 0?16:Wu(e.type)),e):1}function Gt(e,t,r,a){if(50<ka)throw ka=0,lo=null,Error(V(185));Va(e,r,a),(!(ve&2)||e!==Qe)&&(e===Qe&&(!(ve&2)&&(ki|=r),He===4&&br(e,et)),jt(e,a),r===1&&ve===0&&!(t.mode&1)&&(Bs=Ue()+500,pi&&Ir()))}function jt(e,t){var r=e.callbackNode;Wg(e,t);var a=zn(e,e===Qe?et:0);if(a===0)r!==null&&Id(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&Id(r),t===1)e.tag===0?Hm(Tc.bind(null,e)):c0(Tc.bind(null,e)),zm(function(){!(ve&6)&&Ir()}),r=null;else{switch(Uu(a)){case 1:r=Mo;break;case 4:r=$u;break;case 16:r=Un;break;case 536870912:r=Iu;break;default:r=Un}r=oh(r,th.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function th(e,t){if(On=-1,Mn=0,ve&6)throw Error(V(327));var r=e.callbackNode;if($s()&&e.callbackNode!==r)return null;var a=zn(e,e===Qe?et:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=ai(e,a);else{t=a;var n=ve;ve|=2;var i=sh();(Qe!==e||et!==t)&&(sr=null,Bs=Ue()+500,Qr(e,t));do try{hf();break}catch(o){rh(e,o)}while(!0);Vo(),ti.current=i,ve=n,qe!==null?t=0:(Qe=null,et=0,t=He)}if(t!==0){if(t===2&&(n=Ml(e),n!==0&&(a=n,t=oo(e,n))),t===1)throw r=Ha,Qr(e,0),br(e,a),jt(e,Ue()),r;if(t===6)br(e,a);else{if(n=e.current.alternate,!(a&30)&&!cf(n)&&(t=ai(e,a),t===2&&(i=Ml(e),i!==0&&(a=i,t=oo(e,i))),t===1))throw r=Ha,Qr(e,0),br(e,a),jt(e,Ue()),r;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(V(345));case 2:qr(e,pt,sr);break;case 3:if(br(e,a),(a&130023424)===a&&(t=od+500-Ue(),10<t)){if(zn(e,0)!==0)break;if(n=e.suspendedLanes,(n&a)!==a){ht(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=ql(qr.bind(null,e,pt,sr),t);break}qr(e,pt,sr);break;case 4:if(br(e,a),(a&4194240)===a)break;for(t=e.eventTimes,n=-1;0<a;){var l=31-Wt(a);i=1<<l,l=t[l],l>n&&(n=l),a&=~i}if(a=n,a=Ue()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*df(a/1960))-a,10<a){e.timeoutHandle=ql(qr.bind(null,e,pt,sr),a);break}qr(e,pt,sr);break;case 5:qr(e,pt,sr);break;default:throw Error(V(329))}}}return jt(e,Ue()),e.callbackNode===r?th.bind(null,e):null}function oo(e,t){var r=wa;return e.current.memoizedState.isDehydrated&&(Qr(e,t).flags|=256),e=ai(e,t),e!==2&&(t=pt,pt=r,t!==null&&co(t)),e}function co(e){pt===null?pt=e:pt.push.apply(pt,e)}function cf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!Vt(i(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function br(e,t){for(t&=~ld,t&=~ki,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Wt(t),a=1<<r;e[r]=-1,t&=~a}}function Tc(e){if(ve&6)throw Error(V(327));$s();var t=zn(e,0);if(!(t&1))return jt(e,Ue()),null;var r=ai(e,t);if(e.tag!==0&&r===2){var a=Ml(e);a!==0&&(t=a,r=oo(e,a))}if(r===1)throw r=Ha,Qr(e,0),br(e,t),jt(e,Ue()),r;if(r===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qr(e,pt,sr),jt(e,Ue()),null}function dd(e,t){var r=ve;ve|=1;try{return e(t)}finally{ve=r,ve===0&&(Bs=Ue()+500,pi&&Ir())}}function ts(e){jr!==null&&jr.tag===0&&!(ve&6)&&$s();var t=ve;ve|=1;var r=Rt.transition,a=ke;try{if(Rt.transition=null,ke=1,e)return e()}finally{ke=a,Rt.transition=r,ve=t,!(ve&6)&&Ir()}}function cd(){Nt=Es.current,Te(Es)}function Qr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Um(r)),qe!==null)for(r=qe.return;r!==null;){var a=r;switch(Ho(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Wn();break;case 3:Fs(),Te(wt),Te(ot),Zo();break;case 5:Xo(a);break;case 4:Fs();break;case 13:Te(Oe);break;case 19:Te(Oe);break;case 10:Qo(a.type._context);break;case 22:case 23:cd()}r=r.return}if(Qe=e,qe=e=Dr(e.current,null),et=Nt=t,He=0,Ha=null,ld=ki=es=0,pt=wa=null,Gr!==null){for(t=0;t<Gr.length;t++)if(r=Gr[t],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,a.next=l}r.pending=a}Gr=null}return e}function rh(e,t){do{var r=qe;try{if(Vo(),Pn.current=ei,Zn){for(var a=Re.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Zn=!1}if(Zr=0,Ve=Be=Re=null,va=!1,Fa=0,id.current=null,r===null||r.return===null){He=1,Ha=t,qe=null;break}e:{var i=e,l=r.return,o=r,d=t;if(t=et,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xc(l);if(p!==null){p.flags&=-257,yc(p,l,o,i,t),p.mode&1&&fc(i,c,t),t=p,d=c;var w=t.updateQueue;if(w===null){var x=new Set;x.add(d),t.updateQueue=x}else w.add(d);break e}else{if(!(t&1)){fc(i,c,t),ud();break e}d=Error(V(426))}}else if(De&&o.mode&1){var _=xc(l);if(_!==null){!(_.flags&65536)&&(_.flags|=256),yc(_,l,o,i,t),Wo(qs(d,o));break e}}i=d=qs(d,o),He!==4&&(He=2),wa===null?wa=[i]:wa.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=U0(i,d,t);dc(i,y);break e;case 1:o=d;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Tr===null||!Tr.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=z0(i,o,t);dc(i,v);break e}}i=i.return}while(i!==null)}nh(r)}catch(T){t=T,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function sh(){var e=ti.current;return ti.current=ei,e===null?ei:e}function ud(){(He===0||He===3||He===2)&&(He=4),Qe===null||!(es&268435455)&&!(ki&268435455)||br(Qe,et)}function ai(e,t){var r=ve;ve|=2;var a=sh();(Qe!==e||et!==t)&&(sr=null,Qr(e,t));do try{uf();break}catch(n){rh(e,n)}while(!0);if(Vo(),ve=r,ti.current=a,qe!==null)throw Error(V(261));return Qe=null,et=0,He}function uf(){for(;qe!==null;)ah(qe)}function hf(){for(;qe!==null&&!$g();)ah(qe)}function ah(e){var t=lh(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?nh(e):qe=t,id.current=null}function nh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=af(r,t),r!==null){r.flags&=32767,qe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,qe=null;return}}else if(r=sf(r,t,Nt),r!==null){qe=r;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);He===0&&(He=5)}function qr(e,t,r){var a=ke,n=Rt.transition;try{Rt.transition=null,ke=1,gf(e,t,r,a)}finally{Rt.transition=n,ke=a}return null}function gf(e,t,r,a){do $s();while(jr!==null);if(ve&6)throw Error(V(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Gg(e,i),e===Qe&&(qe=Qe=null,et=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||yn||(yn=!0,oh(Un,function(){return $s(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Rt.transition,Rt.transition=null;var l=ke;ke=1;var o=ve;ve|=4,id.current=null,lf(e,r),Z0(r,e),Am(zl),Fn=!!Ul,zl=Ul=null,e.current=r,of(r),Ig(),ve=o,ke=l,Rt.transition=i}else e.current=r;if(yn&&(yn=!1,jr=e,si=n),i=e.pendingLanes,i===0&&(Tr=null),zg(r.stateNode),jt(e,Ue()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(ri)throw ri=!1,e=io,io=null,e;return si&1&&e.tag!==0&&$s(),i=e.pendingLanes,i&1?e===lo?ka++:(ka=0,lo=e):ka=0,Ir(),null}function $s(){if(jr!==null){var e=Uu(si),t=Rt.transition,r=ke;try{if(Rt.transition=null,ke=16>e?16:e,jr===null)var a=!1;else{if(e=jr,jr=null,si=0,ve&6)throw Error(V(331));var n=ve;for(ve|=4,ie=e.current;ie!==null;){var i=ie,l=i.child;if(ie.flags&16){var o=i.deletions;if(o!==null){for(var d=0;d<o.length;d++){var c=o[d];for(ie=c;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:ba(8,u,i)}var h=u.child;if(h!==null)h.return=u,ie=h;else for(;ie!==null;){u=ie;var f=u.sibling,p=u.return;if(J0(u),u===c){ie=null;break}if(f!==null){f.return=p,ie=f;break}ie=p}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}ie=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ie=l;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ba(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ie=y;break e}ie=i.return}}var m=e.current;for(ie=m;ie!==null;){l=ie;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,ie=g;else e:for(l=m;ie!==null;){if(o=ie,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:wi(9,o)}}catch(T){Ie(o,o.return,T)}if(o===l){ie=null;break e}var v=o.sibling;if(v!==null){v.return=o.return,ie=v;break e}ie=o.return}}if(ve=n,Ir(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(gi,e)}catch{}a=!0}return a}finally{ke=r,Rt.transition=t}}return!1}function Pc(e,t,r){t=qs(r,t),t=U0(e,t,1),e=Er(e,t,1),t=ht(),e!==null&&(Va(e,1,t),jt(e,t))}function Ie(e,t,r){if(e.tag===3)Pc(e,e,r);else for(;t!==null;){if(t.tag===3){Pc(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Tr===null||!Tr.has(a))){e=qs(r,e),e=z0(t,e,1),t=Er(t,e,1),e=ht(),t!==null&&(Va(t,1,e),jt(t,e));break}}t=t.return}}function mf(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&r,Qe===e&&(et&r)===r&&(He===4||He===3&&(et&130023424)===et&&500>Ue()-od?Qr(e,0):ld|=r),jt(e,t)}function ih(e,t){t===0&&(e.mode&1?(t=ln,ln<<=1,!(ln&130023424)&&(ln=4194304)):t=1);var r=ht();e=ur(e,t),e!==null&&(Va(e,t,r),jt(e,r))}function ff(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ih(e,r)}function xf(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(V(314))}a!==null&&a.delete(t),ih(e,r)}var lh;lh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)bt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bt=!1,rf(e,t,r);bt=!!(e.flags&131072)}else bt=!1,De&&t.flags&1048576&&u0(t,Qn,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;An(e,t),e=t.pendingProps;var n=Ls(t,ot.current);Rs(t,r),n=td(null,t,a,e,n,r);var i=rd();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(a)?(i=!0,Gn(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Jo(t),n.updater=bi,t.stateNode=n,n._reactInternals=t,Kl(t,a,e,r),t=Xl(null,t,a,!0,i,r)):(t.tag=0,De&&i&&Bo(t),ut(null,t,n,r),t=t.child),t;case 16:a=t.elementType;e:{switch(An(e,t),e=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=pf(a),e=Ft(a,e),n){case 0:t=Yl(null,t,a,e,r);break e;case 1:t=bc(null,t,a,e,r);break e;case 11:t=pc(null,t,a,e,r);break e;case 14:t=vc(null,t,a,Ft(a.type,e),r);break e}throw Error(V(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Ft(a,n),Yl(e,t,a,n,r);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Ft(a,n),bc(e,t,a,n,r);case 3:e:{if(H0(t),e===null)throw Error(V(387));a=t.pendingProps,i=t.memoizedState,n=i.element,y0(e,t),Yn(t,a,null,r);var l=t.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=qs(Error(V(423)),t),t=wc(e,t,a,r,n);break e}else if(a!==n){n=qs(Error(V(424)),t),t=wc(e,t,a,r,n);break e}else for(St=Cr(t.stateNode.containerInfo.firstChild),Ct=t,De=!0,Ht=null,r=f0(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Us(),a===n){t=hr(e,t,r);break e}ut(e,t,a,r)}t=t.child}return t;case 5:return p0(t),e===null&&Gl(t),a=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,l=n.children,Fl(a,n)?l=null:i!==null&&Fl(a,i)&&(t.flags|=32),B0(e,t),ut(e,t,l,r),t.child;case 6:return e===null&&Gl(t),null;case 13:return W0(e,t,r);case 4:return Yo(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=zs(t,null,a,r):ut(e,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Ft(a,n),pc(e,t,a,n,r);case 7:return ut(e,t,t.pendingProps,r),t.child;case 8:return ut(e,t,t.pendingProps.children,r),t.child;case 12:return ut(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,Ce(Kn,a._currentValue),a._currentValue=l,i!==null)if(Vt(i.value,l)){if(i.children===n.children&&!wt.current){t=hr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var d=o.firstContext;d!==null;){if(d.context===a){if(i.tag===1){d=or(-1,r&-r),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Vl(i.return,r,t),o.lanes|=r;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(V(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Vl(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}ut(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Rs(t,r),n=It(n),a=a(n),t.flags|=1,ut(e,t,a,r),t.child;case 14:return a=t.type,n=Ft(a,t.pendingProps),n=Ft(a.type,n),vc(e,t,a,n,r);case 15:return F0(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Ft(a,n),An(e,t),t.tag=1,kt(a)?(e=!0,Gn(t)):e=!1,Rs(t,r),L0(t,a,n),Kl(t,a,n,r),Xl(null,t,a,!0,e,r);case 19:return G0(e,t,r);case 22:return q0(e,t,r)}throw Error(V(156,t.tag))};function oh(e,t){return Ru(e,t)}function yf(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,r,a){return new yf(e,t,r,a)}function hd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pf(e){if(typeof e=="function")return hd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Do)return 11;if(e===Ao)return 14}return 2}function Dr(e,t){var r=e.alternate;return r===null?(r=Mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Rn(e,t,r,a,n,i){var l=2;if(a=e,typeof e=="function")hd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case ps:return Kr(r.children,n,i,t);case Po:l=8,n|=8;break;case vl:return e=Mt(12,r,t,n|2),e.elementType=vl,e.lanes=i,e;case bl:return e=Mt(13,r,t,n),e.elementType=bl,e.lanes=i,e;case wl:return e=Mt(19,r,t,n),e.elementType=wl,e.lanes=i,e;case pu:return ji(r,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xu:l=10;break e;case yu:l=9;break e;case Do:l=11;break e;case Ao:l=14;break e;case xr:l=16,a=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=Mt(l,r,t,n),t.elementType=e,t.type=a,t.lanes=i,t}function Kr(e,t,r,a){return e=Mt(7,e,a,t),e.lanes=r,e}function ji(e,t,r,a){return e=Mt(22,e,a,t),e.elementType=pu,e.lanes=r,e.stateNode={isHidden:!1},e}function ol(e,t,r){return e=Mt(6,e,null,t),e.lanes=r,e}function dl(e,t,r){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vf(e,t,r,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function gd(e,t,r,a,n,i,l,o,d){return e=new vf(e,t,r,o,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Mt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jo(i),e}function bf(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ys,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function dh(e){if(!e)return Or;e=e._reactInternals;e:{if(is(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var r=e.type;if(kt(r))return d0(e,r,t)}return t}function ch(e,t,r,a,n,i,l,o,d){return e=gd(r,a,!0,e,n,i,l,o,d),e.context=dh(null),r=e.current,a=ht(),n=Pr(r),i=or(a,n),i.callback=t??null,Er(r,i,n),e.current.lanes=n,Va(e,n,a),jt(e,a),e}function Ni(e,t,r,a){var n=t.current,i=ht(),l=Pr(n);return r=dh(r),t.context===null?t.context=r:t.pendingContext=r,t=or(i,l),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Er(n,t,l),e!==null&&(Gt(e,n,l,i),Tn(e,n,l)),l}function ni(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Dc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function md(e,t){Dc(e,t),(e=e.alternate)&&Dc(e,t)}function wf(){return null}var uh=typeof reportError=="function"?reportError:function(e){console.error(e)};function fd(e){this._internalRoot=e}_i.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));Ni(e,t,null,null)};_i.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ts(function(){Ni(null,e,null,null)}),t[cr]=null}};function _i(e){this._internalRoot=e}_i.prototype.unstable_scheduleHydration=function(e){if(e){var t=qu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vr.length&&t!==0&&t<vr[r].priority;r++);vr.splice(r,0,e),r===0&&Hu(e)}};function xd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Si(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ac(){}function kf(e,t,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var c=ni(l);i.call(c)}}var l=ch(t,a,e,0,null,!1,!1,"",Ac);return e._reactRootContainer=l,e[cr]=l.current,$a(e.nodeType===8?e.parentNode:e),ts(),l}for(;n=e.lastChild;)e.removeChild(n);if(typeof a=="function"){var o=a;a=function(){var c=ni(d);o.call(c)}}var d=gd(e,0,!1,null,null,!1,!1,"",Ac);return e._reactRootContainer=d,e[cr]=d.current,$a(e.nodeType===8?e.parentNode:e),ts(function(){Ni(t,d,r,a)}),d}function Ci(e,t,r,a,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var d=ni(l);o.call(d)}}Ni(t,l,e,n)}else l=kf(r,t,e,n,a);return ni(l)}zu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ua(t.pendingLanes);r!==0&&(Ro(t,r|1),jt(t,Ue()),!(ve&6)&&(Bs=Ue()+500,Ir()))}break;case 13:ts(function(){var a=ur(e,1);if(a!==null){var n=ht();Gt(a,e,1,n)}}),md(e,1)}};$o=function(e){if(e.tag===13){var t=ur(e,134217728);if(t!==null){var r=ht();Gt(t,e,134217728,r)}md(e,134217728)}};Fu=function(e){if(e.tag===13){var t=Pr(e),r=ur(e,t);if(r!==null){var a=ht();Gt(r,e,t,a)}md(e,t)}};qu=function(){return ke};Bu=function(e,t){var r=ke;try{return ke=e,t()}finally{ke=r}};Dl=function(e,t,r){switch(t){case"input":if(Nl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var n=yi(a);if(!n)throw Error(V(90));bu(a),Nl(a,n)}}}break;case"textarea":ku(e,r);break;case"select":t=r.value,t!=null&&Ds(e,!!r.multiple,t,!1)}};Tu=dd;Pu=ts;var jf={usingClientEntryPoint:!1,Events:[Ka,ks,yi,Cu,Eu,dd]},na={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nf={bundleType:na.bundleType,version:na.version,rendererPackageName:na.rendererPackageName,rendererConfig:na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ou(e),e===null?null:e.stateNode},findFiberByHostInstance:na.findFiberByHostInstance||wf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pn.isDisabled&&pn.supportsFiber)try{gi=pn.inject(Nf),Yt=pn}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jf;Tt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(t))throw Error(V(200));return bf(e,t,null,r)};Tt.createRoot=function(e,t){if(!xd(e))throw Error(V(299));var r=!1,a="",n=uh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=gd(e,1,!1,null,null,r,!1,a,n),e[cr]=t.current,$a(e.nodeType===8?e.parentNode:e),new fd(t)};Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=Ou(t),e=e===null?null:e.stateNode,e};Tt.flushSync=function(e){return ts(e)};Tt.hydrate=function(e,t,r){if(!Si(t))throw Error(V(200));return Ci(null,e,t,!0,r)};Tt.hydrateRoot=function(e,t,r){if(!xd(e))throw Error(V(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",l=uh;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=ch(t,null,e,1,r??null,n,!1,i,l),e[cr]=t.current,$a(e),a)for(e=0;e<a.length;e++)r=a[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new _i(t)};Tt.render=function(e,t,r){if(!Si(t))throw Error(V(200));return Ci(null,e,t,!1,r)};Tt.unmountComponentAtNode=function(e){if(!Si(e))throw Error(V(40));return e._reactRootContainer?(ts(function(){Ci(null,null,e,!1,function(){e._reactRootContainer=null,e[cr]=null})}),!0):!1};Tt.unstable_batchedUpdates=dd;Tt.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Si(r))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return Ci(e,t,r,!1,a)};Tt.version="18.3.1-next-f1338f8080-20240426";function hh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hh)}catch(e){console.error(e)}}hh(),hu.exports=Tt;var _f=hu.exports,Oc=_f;yl.createRoot=Oc.createRoot,yl.hydrateRoot=Oc.hydrateRoot;const Sf="modulepreload",Cf=function(e,t){return new URL(e,t).href},Mc={},Ya=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){const l=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),d=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=Cf(c,a),c in Mc)return;Mc[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!a)for(let w=l.length-1;w>=0;w--){const x=l[w];if(x.href===c&&(!u||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Sf,u||(p.as="script"),p.crossOrigin="",p.href=c,d&&p.setAttribute("nonce",d),document.head.appendChild(p),u)return new Promise((w,x)=>{p.addEventListener("load",w),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},Ef=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ya(async()=>{const{default:a}=await Promise.resolve().then(()=>Qs);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class yd extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class Tf extends yd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Rc extends yd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $c extends yd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var uo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(uo||(uo={}));var Pf=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};class Df{constructor(t,{headers:r={},customFetch:a,region:n=uo.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=Ef(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return Pf(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:l}=r;let o={},{region:d}=r;d||(d=this.region);const c=new URL(`${this.url}/${t}`);d&&d!=="any"&&(o["x-region"]=d,c.searchParams.set("forceFunctionRegion",d));let u;l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:u}).catch(x=>{throw new Tf(x)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Rc(h);if(!h.ok)throw new $c(h);let p=((a=h.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return p==="application/json"?w=yield h.json():p==="application/octet-stream"?w=yield h.blob():p==="text/event-stream"?w=h:p==="multipart/form-data"?w=yield h.formData():w=yield h.text(),{data:w,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof $c||n instanceof Rc?n.context:void 0}}})}}var vt={},pd={},Ei={},Xa={},Ti={},Pi={},Af=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hs=Af();const Of=Hs.fetch,gh=Hs.fetch.bind(Hs),mh=Hs.Headers,Mf=Hs.Request,Rf=Hs.Response,Qs=Object.freeze(Object.defineProperty({__proto__:null,Headers:mh,Request:Mf,Response:Rf,default:gh,fetch:Of},Symbol.toStringTag,{value:"Module"})),$f=Xh(Qs);var Di={};Object.defineProperty(Di,"__esModule",{value:!0});let If=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Di.default=If;var fh=$t&&$t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pi,"__esModule",{value:!0});const Lf=fh($f),Uf=fh(Di);let zf=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Lf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let n=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,d;let c=null,u=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const x=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),_=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");x&&_&&_.length>1&&(h=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(u=[],c=null,f=200,p="OK")}catch{i.status===404&&x===""?(f=204,p="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new Uf.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(n=n.catch(i=>{var l,o,d;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}};Pi.default=zf;var Ff=$t&&$t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ti,"__esModule",{value:!0});const qf=Ff(Pi);let Bf=class extends qf.default{select(t){let r=!1;const a=(t??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:a,foreignTable:n,referencedTable:i=n}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:a=r}={}){const n=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,r,{foreignTable:a,referencedTable:n=a}={}){const i=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:a=!1,buffers:n=!1,wal:i=!1,format:l="text"}={}){var o;const d=[t?"analyze":null,r?"verbose":null,a?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${c}"; options=${d};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ti.default=Bf;var Hf=$t&&$t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xa,"__esModule",{value:!0});const Wf=Hf(Ti);let Gf=class extends Wf.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const a=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:a,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const l=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${i}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,a])=>{this.url.searchParams.append(r,`eq.${a}`)}),this}not(t,r,a){return this.url.searchParams.append(t,`not.${r}.${a}`),this}or(t,{foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,r,a){return this.url.searchParams.append(t,`${r}.${a}`),this}};Xa.default=Gf;var Vf=$t&&$t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ei,"__esModule",{value:!0});const ia=Vf(Xa);let Qf=class{constructor(t,{headers:r={},schema:a,fetch:n}){this.url=t,this.headers=r,this.schema=a,this.fetch=n}select(t,{head:r=!1,count:a}={}){const n=r?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),a&&(this.headers.Prefer=`count=${a}`),new ia.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:a=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((o,d)=>o.concat(Object.keys(d)),[]);if(l.length>0){const o=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",o.join(","))}}return new ia.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:a=!1,count:n,defaultToNull:i=!0}={}){const l="POST",o=[`resolution=${a?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const d=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ia.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const a="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new ia.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",a=[];return t&&a.push(`count=${t}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new ia.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ei.default=Qf;var Ai={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.version=void 0;Oi.version="0.0.0-automated";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.DEFAULT_HEADERS=void 0;const Kf=Oi;Ai.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Kf.version}`};var xh=$t&&$t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});const Jf=xh(Ei),Yf=xh(Xa),Xf=Ai;let Zf=class yh{constructor(t,{headers:r={},schema:a,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},Xf.DEFAULT_HEADERS),r),this.schemaName=a,this.fetch=n}from(t){const r=new URL(`${this.url}/${t}`);return new Jf.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new yh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:a=!1,get:n=!1,count:i}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let d;a||n?(l=a?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{o.searchParams.append(u,h)})):(l="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Yf.default({method:l,url:o,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};pd.default=Zf;var Ks=$t&&$t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vt,"__esModule",{value:!0});vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const ph=Ks(pd);vt.PostgrestClient=ph.default;const vh=Ks(Ei);vt.PostgrestQueryBuilder=vh.default;const bh=Ks(Xa);vt.PostgrestFilterBuilder=bh.default;const wh=Ks(Ti);vt.PostgrestTransformBuilder=wh.default;const kh=Ks(Pi);vt.PostgrestBuilder=kh.default;const jh=Ks(Di);vt.PostgrestError=jh.default;var ex=vt.default={PostgrestClient:ph.default,PostgrestQueryBuilder:vh.default,PostgrestFilterBuilder:bh.default,PostgrestTransformBuilder:wh.default,PostgrestBuilder:kh.default,PostgrestError:jh.default};const{PostgrestClient:tx,PostgrestQueryBuilder:Vp,PostgrestFilterBuilder:Qp,PostgrestTransformBuilder:Kp,PostgrestBuilder:Jp,PostgrestError:Yp}=ex;function rx(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const sx=rx(),ax="2.11.15",nx=`realtime-js/${ax}`,ix="1.0.0",Nh=1e4,lx=1e3;var ja;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ja||(ja={}));var it;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(it||(it={}));var Bt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Bt||(Bt={}));var ho;(function(e){e.websocket="websocket"})(ho||(ho={}));var Hr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Hr||(Hr={}));class ox{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const n=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=a.decode(t.slice(l,l+n));l=l+n;const d=a.decode(t.slice(l,l+i));l=l+i;const c=JSON.parse(a.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:d,payload:c}}}class _h{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Se||(Se={}));const Ic=(e,t,r={})=>{var a;const n=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,l)=>(i[l]=dx(l,e,t,n),i),{})},dx=(e,t,r,a)=>{const n=t.find(o=>o.name===e),i=n==null?void 0:n.type,l=r[e];return i&&!a.includes(i)?Sh(i,l):go(l)},Sh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return gx(t,r)}switch(e){case Se.bool:return cx(t);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return ux(t);case Se.json:case Se.jsonb:return hx(t);case Se.timestamp:return mx(t);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return go(t);default:return go(t)}},go=e=>e,cx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ux=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},hx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},gx=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Sh(t,o))}return e},mx=e=>typeof e=="string"?e.replace(" ","T"):e,Ch=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class cl{constructor(t,r,a={},n=Nh){this.channel=t,this.event=r,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Lc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Lc||(Lc={}));class Na{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Na.syncState(this.state,n,i,l),this.pendingDiffs.forEach(d=>{this.state=Na.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Na.syncDiff(this.state,n,i,l),o())}),this.onJoin((n,i,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:l})}),this.onLeave((n,i,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,n){const i=this.cloneDeep(t),l=this.transformState(r),o={},d={};return this.map(i,(c,u)=>{l[c]||(d[c]=u)}),this.map(l,(c,u)=>{const h=i[c];if(h){const f=u.map(_=>_.presence_ref),p=h.map(_=>_.presence_ref),w=u.filter(_=>p.indexOf(_.presence_ref)<0),x=h.filter(_=>f.indexOf(_.presence_ref)<0);w.length>0&&(o[c]=w),x.length>0&&(d[c]=x)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:d},a,n)}static syncDiff(t,r,a,n){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(o,d)=>{var c;const u=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(d),u.length>0){const h=t[o].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[o].unshift(...f)}a(o,u,d)}),this.map(l,(o,d)=>{let c=t[o];if(!c)return;const u=d.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[o]=c,n(o,c,d),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const n=t[a];return"metas"in n?r[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Uc||(Uc={}));var zc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zc||(zc={}));var ar;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ar||(ar={}));class vd{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=it.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new cl(this,Bt.join,this.params,this.timeout),this.rejoinTimer=new _h(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=it.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=it.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bt.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Na(this),this.broadcastEndpointURL=Ch(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.state==it.closed){const{config:{broadcast:i,presence:l,private:o}}=this.params;this._onError(u=>t==null?void 0:t(ar.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(ar.CLOSED));const d={},c={broadcast:i,presence:l,postgres_changes:(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(u=>u.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(ar.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,w=[];for(let x=0;x<p;x++){const _=f[x],{filter:{event:y,schema:m,table:g,filter:v}}=_,T=u&&u[x];if(T&&T.event===y&&T.schema===m&&T.table===g&&T.filter===v)w.push(Object.assign(Object.assign({},_),{id:T.id}));else{this.unsubscribe(),this.state=it.errored,t==null||t(ar.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(ar.SUBSCRIBED);return}}).receive("error",u=>{this.state=it.errored,t==null||t(ar.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ar.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this._on(t,r,a)}async send(t,r={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=it.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bt.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new cl(this,Bt.leave,{},t),a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),l}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new cl(this,t,r,a);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var n,i;const l=t.toLocaleLowerCase(),{close:o,error:d,leave:c,join:u}=Bt;if(a&&[o,d,c,u].indexOf(l)>=0&&a!==this._joinRef())return;let f=this._onMessage(l,r,a);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var w,x,_;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((_=(x=p.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===l}).map(p=>p.callback(f,a)):(i=this.bindings[l])===null||i===void 0||i.filter(p=>{var w,x,_,y,m,g;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in p){const v=p.id,T=(w=p.filter)===null||w===void 0?void 0:w.event;return v&&((x=r.ids)===null||x===void 0?void 0:x.includes(v))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const v=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return v==="*"||v===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===l}).map(p=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:x,table:_,commit_timestamp:y,type:m,errors:g}=w;f=Object.assign(Object.assign({},{schema:x,table:_,commit_timestamp:y,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(w))}p.callback(f,a)})}_isClosed(){return this.state===it.closed}_isJoined(){return this.state===it.joined}_isJoining(){return this.state===it.joining}_isLeaving(){return this.state===it.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&vd.isEqual(n.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Bt.close,{},t)}_onError(t){this._on(Bt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=it.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ic(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ic(t.columns,t.old_record)),r}}const Fc=()=>{},fx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xx{constructor(t,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Nh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fc,this.ref=0,this.logger=Fc,this.conn=null,this.sendBuffer=[],this.serializer=new ox,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...o)=>Ya(async()=>{const{default:d}=await Promise.resolve().then(()=>Qs);return{default:d}},void 0,import.meta.url).then(({default:d})=>d(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${ho.websocket}`,this.httpEndpoint=Ch(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,l)=>l(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _h(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=sx),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ix}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case ja.connecting:return Hr.Connecting;case ja.open:return Hr.Open;case ja.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}channel(t,r={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new vd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:n,ref:i}=t,l=()=>{this.encode(t,o=>{var d;(d=this.conn)===null||d===void 0||d.send(o)})};this.log("push",`${r} ${a} (${i})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const n={access_token:r,version:nx};r&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(Bt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(lx,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:a,event:n,payload:i,ref:l}=r;a==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${n} ${l&&"("+l+")"||""}`,i),Array.from(this.channels).filter(o=>o._isMember(a)).forEach(o=>o._trigger(n,i,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Bt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${a}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([fx],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class bd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ge(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class yx extends bd{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class mo extends bd{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var px=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};const Eh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ya(async()=>{const{default:a}=await Promise.resolve().then(()=>Qs);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},vx=()=>px(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ya(()=>Promise.resolve().then(()=>Qs),void 0,import.meta.url)).Response:Response}),fo=e=>{if(Array.isArray(e))return e.map(r=>fo(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=fo(a)}),t};var ls=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};const ul=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bx=(e,t,r)=>ls(void 0,void 0,void 0,function*(){const a=yield vx();e instanceof a&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{t(new yx(ul(n),e.status||500))}).catch(n=>{t(new mo(ul(n),n))}):t(new mo(ul(e),e))}),wx=(e,t,r,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),r))};function Za(e,t,r,a,n,i){return ls(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,wx(t,a,n,i)).then(d=>{if(!d.ok)throw d;return a!=null&&a.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>bx(d,o,a))})})}function ii(e,t,r,a){return ls(this,void 0,void 0,function*(){return Za(e,"GET",t,r,a)})}function pr(e,t,r,a,n){return ls(this,void 0,void 0,function*(){return Za(e,"POST",t,a,n,r)})}function kx(e,t,r,a,n){return ls(this,void 0,void 0,function*(){return Za(e,"PUT",t,a,n,r)})}function jx(e,t,r,a){return ls(this,void 0,void 0,function*(){return Za(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Th(e,t,r,a,n){return ls(this,void 0,void 0,function*(){return Za(e,"DELETE",t,a,n,r)})}var yt=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};const Nx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _x{constructor(t,r={},a,n){this.url=t,this.headers=r,this.bucketId=a,this.fetch=Eh(n)}uploadOrUpdate(t,r,a,n){return yt(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},qc),n);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=a,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,d&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}upload(t,r,a){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,n){return yt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:qc.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.append("cacheControl",c.cacheControl)):(d=a,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:d,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(d){if(Ge(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return yt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield pr(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new bd("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}update(t,r,a){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return yt(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}copy(t,r,a){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,a){return yt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield pr(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const l=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,a){return yt(this,void 0,void 0,function*(){try{const n=yield pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}download(t,r){return yt(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield ii(this.fetch,`${this.url}/${n}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Ge(o))return{data:null,error:o};throw o}})}info(t){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield ii(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:fo(a),error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}exists(t){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield jx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(Ge(a)&&a instanceof mo){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&n.push(d);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${a}${c}`)}}}remove(t){return yt(this,void 0,void 0,function*(){try{return{data:yield Th(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}list(t,r,a){return yt(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Nx),r),{prefix:t||""});return{data:yield pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Sx="2.7.1",Cx={"X-Client-Info":`storage-js/${Sx}`};var hs=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};class Ex{constructor(t,r={},a){this.url=t,this.headers=Object.assign(Object.assign({},Cx),r),this.fetch=Eh(a)}listBuckets(){return hs(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ge(t))return{data:null,error:t};throw t}})}getBucket(t){return hs(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return hs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return hs(this,void 0,void 0,function*(){try{return{data:yield kx(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}emptyBucket(t){return hs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}deleteBucket(t){return hs(this,void 0,void 0,function*(){try{return{data:yield Th(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}}class Tx extends Ex{constructor(t,r={},a){super(t,r,a)}from(t){return new _x(this.url,this.headers,t,this.fetch)}}const Px="2.50.5";let ga="";typeof Deno<"u"?ga="deno":typeof document<"u"?ga="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ga="react-native":ga="node";const Dx={"X-Client-Info":`supabase-js-${ga}/${Px}`},Ax={headers:Dx},Ox={schema:"public"},Mx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Rx={};var $x=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};const Ix=e=>{let t;return e?t=e:typeof fetch>"u"?t=gh:t=fetch,(...r)=>t(...r)},Lx=()=>typeof Headers>"u"?mh:Headers,Ux=(e,t,r)=>{const a=Ix(r),n=Lx();return(i,l)=>$x(void 0,void 0,void 0,function*(){var o;const d=(o=yield t())!==null&&o!==void 0?o:e;let c=new n(l==null?void 0:l.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),a(i,Object.assign(Object.assign({},l),{headers:c}))})};var zx=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};function Fx(e){return e.endsWith("/")?e:e+"/"}function qx(e,t){var r,a;const{db:n,auth:i,realtime:l,global:o}=e,{db:d,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},d),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),l),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(a=o==null?void 0:o.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>zx(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Ph="2.70.0",xs=30*1e3,xo=3,hl=xo*xs,Bx="http://localhost:9999",Hx="supabase.auth.token",Wx={"X-Client-Info":`gotrue-js/${Ph}`},yo="X-Supabase-Api-Version",Dh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vx=6e5;class wd extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Qx extends wd{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function Kx(e){return me(e)&&e.name==="AuthApiError"}class Ah extends wd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Lr extends wd{constructor(t,r,a,n){super(t,a,n),this.name=r,this.status=a}}class fr extends Lr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jx(e){return me(e)&&e.name==="AuthSessionMissingError"}class vn extends Lr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bn extends Lr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class wn extends Lr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Yx(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bc extends Lr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class po extends Lr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function gl(e){return me(e)&&e.name==="AuthRetryableFetchError"}class Hc extends Lr{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class _a extends Lr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const li="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wc=` 	
\r=`.split(""),Xx=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Wc.length;t+=1)e[Wc[t].charCodeAt(0)]=-2;for(let t=0;t<li.length;t+=1)e[li[t].charCodeAt(0)]=t;return e})();function Gc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(li[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(li[a]),t.queuedBits-=6}}function Oh(e,t,r){const a=Xx[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Vc(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=l=>{ty(l,a,r)};for(let l=0;l<e.length;l+=1)Oh(e.charCodeAt(l),n,i);return t.join("")}function Zx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ey(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Zx(a,t)}}function ty(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ry(e){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Oh(e.charCodeAt(n),r,a);return new Uint8Array(t)}function sy(e){const t=[];return ey(e,r=>t.push(r)),new Uint8Array(t)}function ay(e){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};return e.forEach(n=>Gc(n,r,a)),Gc(null,r,a),t.join("")}function ny(e){return Math.round(Date.now()/1e3)+e}function iy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const zt=()=>typeof window<"u"&&typeof document<"u",zr={tested:!1,writable:!1},Sa=()=>{if(!zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zr.tested)return zr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zr.tested=!0,zr.writable=!0}catch{zr.tested=!0,zr.writable=!1}return zr.writable};function ly(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((a,n)=>{t[n]=a}),t}const Mh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ya(async()=>{const{default:a}=await Promise.resolve().then(()=>Qs);return{default:a}},void 0,import.meta.url).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},oy=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Rh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},kn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},jn=async(e,t)=>{await e.removeItem(t)};class Mi{constructor(){this.promise=new Mi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Mi.promiseConstructor=Promise;function ml(e){const t=e.split(".");if(t.length!==3)throw new _a("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!Gx.test(t[a]))throw new _a("JWT not in base64url format");return{header:JSON.parse(Vc(t[0])),payload:JSON.parse(Vc(t[1])),signature:ry(t[2]),raw:{header:t[0],payload:t[1]}}}async function dy(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function cy(e,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){a(l);return}}catch(l){if(!t(i,l)){n(l);return}}})()})}function uy(e){return("0"+e.toString(16)).substr(-2)}function hy(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,uy).join("")}async function gy(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function my(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await gy(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gs(e,t,r=!1){const a=hy();let n=a;r&&(n+="/PASSWORD_RECOVERY"),await Rh(e,`${t}-code-verifier`,n);const i=await my(a);return[i,a===i?"plain":"s256"]}const fy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xy(e){const t=e.headers.get(yo);if(!t||!t.match(fy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function yy(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function py(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ms(e){if(!vy.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var by=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};const Br=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wy=[502,503,504];async function Qc(e){var t;if(!oy(e))throw new po(Br(e),0);if(wy.includes(e.status))throw new po(Br(e),e.status);let r;try{r=await e.json()}catch(i){throw new Ah(Br(i),i)}let a;const n=xy(e);if(n&&n.getTime()>=Dh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new Hc(Br(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new fr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Hc(Br(r),e.status,r.weak_password.reasons);throw new Qx(Br(r),e.status||500,a)}const ky=(e,t,r,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),r))};async function xe(e,t,r,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[yo]||(i[yo]=Dh["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const l=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(l.redirect_to=a.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await jy(e,t,r+o,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(d):{data:Object.assign({},d),error:null}}async function jy(e,t,r,a,n,i){const l=ky(t,a,n,i);let o;try{o=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new po(Br(d),0)}if(o.ok||await Qc(o),a!=null&&a.noResolveJson)return o;try{return await o.json()}catch(d){await Qc(d)}}function rr(e){var t;let r=null;Cy(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=ny(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function Kc(e){const t=rr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function wr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ny(e){return{data:e,error:null}}function _y(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i}=e,l=by(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i},d=Object.assign({},l);return{data:{properties:o,user:d},error:null}}function Sy(e){return e}function Cy(e){return e.access_token&&e.refresh_token&&e.expires_in}const fl=["global","local","others"];var Ey=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};class Ty{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=Mh(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=fl[0]){if(fl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fl.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:wr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=Ey(t,["options"]),n=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:_y,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:wr})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,n,i,l,o,d;try{const c={nextPage:null,lastPage:0,total:0},u=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Sy});if(u.error)throw u.error;const h=await u.json(),f=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,p=(d=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&d!==void 0?d:[];return p.length>0&&(p.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(w.split(";")[1].split("=")[1]);c[`${_}Page`]=x}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(me(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){ms(t);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:wr})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ms(t);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:wr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){ms(t);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:wr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){ms(t.userId);try{const{data:r,error:a}=await xe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:a}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ms(t.userId),ms(t.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}}const Py={getItem:e=>Sa()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Sa()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Sa()&&globalThis.localStorage.removeItem(e)}};function Jc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Dy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const fs={debug:!!(globalThis&&Sa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $h extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ay extends $h{}async function Oy(e,t,r){fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),fs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ay(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(fs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Dy();const My={url:Bx,storageKey:Hx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Wx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yc(e,t,r){return await r()}class Wa{constructor(t){var r,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wa.nextInstanceID,Wa.nextInstanceID+=1,this.instanceID>0&&zt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},My),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Ty({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Mh(n.fetch),this.lock=n.lock||Yc,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:zt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Oy:this.lock=Yc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Sa()?this.storage=Py:(this.memoryStorage={},this.storage=Jc(this.memoryStorage)):(this.memoryStorage={},this.storage=Jc(this.memoryStorage)),zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ph}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=ly(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),zt()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Yx(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?{error:r}:{error:new Ah("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,n;try{const i=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:rr}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,a,n;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await gs(this.storage,this.storageKey)),i=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:w},xform:rr})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:rr})}else throw new bn("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,c=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kc})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kc})}else throw new bn("You must provide either an email or phone number and a password");const{data:a,error:n}=r;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new vn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,n,i,l,o,d,c,u,h,f,p;let w,x;if("message"in t)w=t.message,x=t.signature;else{const{chain:_,wallet:y,statement:m,options:g}=t;let v;if(zt())if(typeof y=="object")v=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))v=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const T=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const N=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),m?{statement:m}:null));let P;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")P=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)P=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)w=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),x=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${T.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(n=(a=g==null?void 0:g.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((d=g==null?void 0:g.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(u=g==null?void 0:g.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const N=await v.signMessage(new TextEncoder().encode(w),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:_,error:y}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:ay(x)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:rr});if(y)throw y;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new vn}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:y})}catch(_){if(me(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const r=await kn(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(r??"").split("/");try{const{data:i,error:l}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:rr});if(await jn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new vn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:l})}catch(i){if(me(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:n,access_token:i,nonce:l}=t,o=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rr}),{data:d,error:c}=o;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new vn}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,n,i,l;try{if("email"in t){const{email:o,options:d}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await gs(this.storage,this.storageKey));const{error:h}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:d}=t,{data:c,error:u}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new bn("You must provide either an email or phone number.")}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,a;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:l,error:o}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:rr});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,c=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(n){if(me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,a,n;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await gs(this.storage,this.storageKey)),await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Ny})}catch(i){if(me(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new fr;const{error:n}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:l}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:l,error:o}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new bn("You must provide either an email or phone number and a type")}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await kn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<hl:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,c,u)=>(!l&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:wr}):await this._useSession(async r=>{var a,n,i;const{data:l,error:o}=r;if(o)throw o;return!(!((a=l.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fr}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:wr})})}catch(r){if(me(r))return Jx(r)&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new fr;const l=n.session;let o=null,d=null;this.flowType==="pkce"&&t.email!=null&&([o,d]=await gs(this.storage,this.storageKey));const{data:c,error:u}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:d}),jwt:l.access_token,xform:wr});if(u)throw u;return l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new fr;const r=Date.now()/1e3;let a=r,n=!0,i=null;const{payload:l}=ml(t.access_token);if(l.exp&&(a=l.exp,n=a<=r),n){const{session:o,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(me(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(a=l.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new fr;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!zt())throw new wn("No browser detected.");if(t.error||t.error_description||t.error_code)throw new wn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bc("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:l,expires_in:o,expires_at:d,token_type:c}=t;if(!i||!o||!l||!c)throw new wn("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let f=u+h;d&&(f=parseInt(d));const p=f-u;p*1e3<=xs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const w=f-h;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,u);const{data:x,error:_}=await this._getUser(i);if(_)throw _;const y={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:l,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(a){if(me(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await kn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{error:i};const l=(a=n.session)===null||a===void 0?void 0:a.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(Kx(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=iy(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,n;try{const{data:{session:i},error:l}=r;if(l)throw l;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await gs(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(me(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:n}=await this._useSession(async i=>{var l,o,d,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return zt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(me(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:l}=r;if(l)throw l;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await cy(async n=>(n>0&&await dy(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:rr})),(n,i)=>{const l=200*Math.pow(2,n);return i&&gl(i)&&Date.now()+l-a<xs})}catch(a){if(this._debug(r,"error",a),me(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),zt()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await kn(this.storage,this.storageKey);if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const n=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<hl;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${hl}s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),gl(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Mi;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new fr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),me(i)){const l={session:null,error:i};return gl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Rh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await jn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),xs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/xs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${xs}ms, refresh threshold is ${xo} ticks`),n<=xo&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof $h)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const n=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,l]=await gs(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await xe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:c}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((n=d==null?void 0:d.totp)===null||n===void 0)&&n.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:l,error:o}=await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],n=a.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=a.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ml(n.access_token);let o=null;l.aal&&(o=l.aal);let d=o;((a=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(l=>l.kid===t);if(a||(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+Vx>Date.now()))return a;const{data:n,error:i}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new _a("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),a=n.keys.find(l=>l.kid===t),!a)throw new _a("No matching signing key found in JWKS");return a}async getClaims(t,r={keys:[]}){try{let a=t;if(!a){const{data:p,error:w}=await this.getSession();if(w||!p.session)return{data:null,error:w};a=p.session.access_token}const{header:n,payload:i,signature:l,raw:{header:o,payload:d}}=ml(a);if(yy(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(a);if(p)throw p;return{data:{claims:i,header:n,signature:l},error:null}}const c=py(n.alg),u=await this.fetchJwk(n.kid,r),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,l,sy(`${o}.${d}`)))throw new _a("Invalid JWT signature");return{data:{claims:i,header:n,signature:l},error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}}Wa.nextInstanceID=0;const Ry=Wa;class $y extends Ry{constructor(t){super(t)}}var Iy=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{c(a.next(u))}catch(h){l(h)}}function d(u){try{c(a.throw(u))}catch(h){l(h)}}function c(u){u.done?i(u.value):n(u.value).then(o,d)}c((a=a.apply(e,t||[])).next())})};class Ly{constructor(t,r,a){var n,i,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=Fx(t),d=new URL(o);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Ox,realtime:Rx,auth:Object.assign(Object.assign({},Mx),{storageKey:c}),global:Ax},h=qx(a??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=Ux(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new tx(new URL("rest/v1",d).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Df(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tx(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Iy(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,storageKey:i,flowType:l,lock:o,debug:d},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $y({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,flowType:l,lock:o,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new xx(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Uy=(e,t,r)=>new Ly(e,t,r),zy="https://gfxphdzbawtuincogots.supabase.co",Fy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdmeHBoZHpiYXd0dWluY29nb3RzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxNTY5MTYsImV4cCI6MjA2NzczMjkxNn0.UO0Z-zPjyf0wzXW7XEjVHFygXVfg7o15-1RJaBhIJV4",E=Uy(zy,Fy),Ih=b.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),Ke=()=>{const e=b.useContext(Ih);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},qy=({children:e})=>{const[t,r]=b.useState(null),[a,n]=b.useState(null),[i,l]=b.useState(!0);b.useEffect(()=>{E.auth.getSession().then(({data:{session:c}})=>{n(c),r((c==null?void 0:c.user)??null),l(!1)});const{data:{subscription:d}}=E.auth.onAuthStateChange(async(c,u)=>{n(u),r((u==null?void 0:u.user)??null),l(!1)});return()=>d.unsubscribe()},[]);const o=async()=>{await E.auth.signOut()};return s.jsx(Ih.Provider,{value:{user:t,session:a,loading:i,signOut:o},children:e})},Lh=b.createContext({isDark:!0,toggleTheme:()=>{}}),Uh=()=>{const e=b.useContext(Lh);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},By=({children:e})=>{const[t,r]=b.useState(!0);b.useEffect(()=>{const n=localStorage.getItem("theme");r(n?n==="dark":!0)},[]),b.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const a=()=>{r(!t)};return s.jsx(Lh.Provider,{value:{isDark:t,toggleTheme:a},children:e})},zh=b.createContext(void 0),la="study_timer_state",Hy=({children:e})=>{const[t,r]=b.useState(!1),[a,n]=b.useState(0),[i,l]=b.useState(""),[o,d]=b.useState(!1),[c,u]=b.useState(null),[h,f]=b.useState(null),[p,w]=b.useState(0),x=b.useRef(null);b.useEffect(()=>{const T=localStorage.getItem(la);if(T)try{const N=JSON.parse(T);if(N.isActive){const P=Date.now(),F=Math.floor((P-N.startTime)/1e3),ae=N.totalElapsed+F;r(!0),n(ae),l(N.subject),d(!0),u(N.timerId),f(N.startTime),w(N.totalElapsed)}}catch(N){console.error("Error loading timer state:",N),localStorage.removeItem(la)}},[]);const _=b.useCallback(()=>{if(o&&h){const T={timerId:c||"",startTime:h,totalElapsed:p,isActive:t,subject:i,userId:""};localStorage.setItem(la,JSON.stringify(T))}else localStorage.removeItem(la)},[o,h,c,p,t,i]);b.useEffect(()=>(t&&h?x.current=setInterval(()=>{const T=Date.now(),N=Math.floor((T-h)/1e3),P=p+N;n(P)},1e3):x.current&&(clearInterval(x.current),x.current=null),()=>{x.current&&clearInterval(x.current)}),[t,h,p]),b.useEffect(()=>{if(t){const T=setInterval(_,5e3),N=()=>{_()};return window.addEventListener("beforeunload",N),()=>{clearInterval(T),window.removeEventListener("beforeunload",N)}}},[t,_]);const y=b.useCallback((T,N)=>{const P=Date.now(),F=`timer_${P}`;r(!0),l(T),d(!0),u(F),f(P),w(0),n(0),console.log("Timer started for:",T)},[]),m=b.useCallback(()=>{if(t&&h){const T=Date.now(),N=Math.floor((T-h)/1e3),P=p+N;r(!1),w(P),n(P),f(null),console.log("Timer paused at:",P,"seconds")}},[t,h,p]),g=b.useCallback(()=>{r(!1),n(0),l(""),d(!1),u(null),f(null),w(0),localStorage.removeItem(la),console.log("Timer stopped")},[]),v={isRunning:t,elapsedTime:a,startTimer:y,pauseTimer:m,stopTimer:g,currentSubject:i,hasActiveTimer:o};return s.jsx(zh.Provider,{value:v,children:e})},Fh=()=>{const e=b.useContext(zh);if(e===void 0)throw new Error("useTimer must be used within a TimerProvider");return e},qh=()=>{const[e,t]=b.useState(navigator.onLine),[r,a]=b.useState([]);return b.useEffect(()=>{const c=()=>t(!0),u=()=>t(!1);return window.addEventListener("online",c),window.addEventListener("offline",u),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",u)}},[]),{isOnline:e,saveOfflineData:(c,u)=>{try{const h=localStorage.getItem("offline_data"),f=h?JSON.parse(h):{};f[c]=u,localStorage.setItem("offline_data",JSON.stringify(f))}catch(h){console.error("Error saving offline data:",h)}},getOfflineData:c=>{try{const u=localStorage.getItem("offline_data");return(u?JSON.parse(u):{})[c]||null}catch(u){return console.error("Error getting offline data:",u),null}},addToPendingSync:c=>{const u=JSON.parse(localStorage.getItem("pending_sync")||"[]");u.push({...c,timestamp:Date.now()}),localStorage.setItem("pending_sync",JSON.stringify(u)),a(u)},clearPendingSync:()=>{localStorage.removeItem("pending_sync"),a([])},getPendingSync:()=>JSON.parse(localStorage.getItem("pending_sync")||"[]"),pendingSync:r}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),de=(e,t)=>{const r=b.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:d,...c},u)=>b.createElement("svg",{ref:u,...Wy,width:n,height:n,stroke:a,strokeWidth:l?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Gy(e)}`,o].join(" "),...c},[...t.map(([h,f])=>b.createElement(h,f)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=de("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=de("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=de("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=de("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=de("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=de("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=de("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=de("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=de("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=de("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=de("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=de("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=de("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=de("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=de("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=de("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=de("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=de("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=de("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=de("FolderSync",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=de("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=de("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=de("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=de("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=de("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=de("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=de("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=de("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=de("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=de("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=de("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=de("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=de("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=de("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=de("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=de("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=de("Sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=de("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=de("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=de("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=de("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=de("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=de("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yp=()=>{const{isOnline:e,pendingSync:t}=qh();return e&&t.length===0?null:s.jsx("div",{className:`fixed top-4 left-4 lg:top-4 lg:left-80 z-40 px-3 py-2 rounded-lg shadow-lg transition-all duration-300 ${e?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400 border border-green-200 dark:border-green-800":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:s.jsx("div",{className:"flex items-center space-x-2",children:e?s.jsxs(s.Fragment,{children:[s.jsx(fp,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Online"}),t.length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(rp,{className:"w-3 h-3 animate-spin"}),s.jsxs("span",{className:"text-xs",children:["(",t.length,")"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(mp,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Offline"}),t.length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Jy,{className:"w-3 h-3"}),s.jsxs("span",{className:"text-xs",children:["(",t.length,")"]})]})]})})})},en=()=>{const{user:e}=Ke(),[t,r]=b.useState(!1),[a,n]=b.useState(!0),[i,l]=b.useState(null),o=b.useCallback(async()=>{if(!e){r(!1),n(!1),l(null);return}try{n(!0),l(null);const{data:d,error:c}=await E.from("profiles").select("role").eq("id",e.id).single();if(c){console.error("Database error:",c),l(c.message),r(!1);return}r((d==null?void 0:d.role)==="admin")}catch(d){console.error("Error checking admin status:",d),l(d instanceof Error?d.message:"Unknown error"),r(!1)}finally{n(!1)}},[e]);return b.useEffect(()=>{o()},[o]),{isAdmin:t,loading:a,error:i,refresh:o}},pp=({activeTab:e,setActiveTab:t,isOpen:r,setIsOpen:a})=>{const{isAdmin:n}=en(),i=o=>{t(o),a(!1)},l=[{id:"dashboard",label:"Dashboard",icon:Gh},{id:"study",label:"Study",icon:ze},{id:"prayer",label:"Prayer",icon:Zt},{id:"quran",label:"Quran",icon:ss},{id:"habits",label:"Habits",icon:gt},{id:"exam",label:"Exams",icon:os},{id:"routine",label:"Classes",icon:er},{id:"sleep",label:"Sleep",icon:_t},{id:"academic",label:"Analysis",icon:oi},{id:"achievements",label:"Awards",icon:rs},...n?[{id:"admin",label:"Admin",icon:Ri}]:[],{id:"profile",label:"Profile",icon:tr}];return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 z-40 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:s.jsx(ze,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),s.jsx("button",{onClick:()=>a(!r),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r?s.jsx(Me,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"}):s.jsx(lp,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})})]})}),r&&s.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>a(!1)}),s.jsx("div",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-40 transform transition-transform duration-300 ${r?"translate-x-0":"-translate-x-full"}`,children:s.jsx("div",{className:"p-6 pt-20",children:s.jsx("nav",{className:"space-y-2",children:l.map(o=>{const d=o.icon;return s.jsxs("button",{onClick:()=>i(o.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===o.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(d,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:o.label})]},o.id)})})})}),s.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:s.jsx("div",{className:"grid grid-cols-5 gap-1 p-2",children:l.slice(0,5).map(o=>{const d=o.icon;return s.jsxs("button",{onClick:()=>i(o.id),className:`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-colors ${e===o.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-300"}`,children:[s.jsx(d,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-medium truncate",children:o.label})]},o.id)})})})]})},vp=({isRunning:e,elapsedTime:t,subject:r})=>{if(!e)return null;const a=n=>{const i=Math.floor(n/3600),l=Math.floor(n%3600/60),o=Math.floor(n%60);return`${i.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-pulse",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qh,{className:"w-4 h-4"}),s.jsx(er,{className:"w-4 h-4"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:r}),s.jsx("div",{className:"text-xs opacity-90",children:a(Math.floor(t))})]})]}),s.jsx("div",{className:"text-xs mt-1 opacity-75",children:"Timer running in background"})]})},bp=()=>{const[e,t]=b.useState(!1),[r,a]=b.useState(""),[n,i]=b.useState(""),[l,o]=b.useState(""),[d,c]=b.useState(!1),[u,h]=b.useState(!1),[f,p]=b.useState(""),w=async x=>{x.preventDefault(),c(!0),p("");try{if(e){const{data:_,error:y}=await E.auth.signUp({email:r,password:n,options:{data:{full_name:l}}});if(y)throw y;if(_.user&&!_.session)try{const{error:m}=await E.from("profiles").insert({user_id:_.user.id,email:_.user.email,full_name:l});m&&console.warn("Profile creation failed:",m)}catch(m){console.warn("Profile creation error:",m)}p("Check your email for the confirmation link!")}else{const{error:_}=await E.auth.signInWithPassword({email:r,password:n});if(_)throw _}}catch(_){console.error("Auth error:",_),p(_.message)}finally{c(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center p-4",children:[s.jsx("div",{className:`absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.05"%3E%3Cpath d="M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-20`}),s.jsx("div",{className:"relative w-full max-w-md",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(Wh,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Life Tracker"}),s.jsx("p",{className:"text-emerald-100 text-sm",children:e?"Create your account":"Welcome back"})]}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:"text",value:l,onChange:x=>o(x.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your full name",required:e})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(ap,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:"email",value:r,onChange:x=>a(x.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your email",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-emerald-100 text-sm font-medium mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-emerald-300"}),s.jsx("input",{type:u?"text":"password",value:n,onChange:x=>i(x.target.value),className:"w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-emerald-200 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your password",required:!0}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-emerald-300 hover:text-emerald-200",children:u?s.jsx(tp,{className:"w-5 h-5"}):s.jsx(Hh,{className:"w-5 h-5"})})]})]}),f&&s.jsx("div",{className:`p-3 rounded-lg text-sm ${f.includes("Check your email")?"bg-emerald-500/20 text-emerald-100 border border-emerald-400/30":"bg-red-500/20 text-red-100 border border-red-400/30"}`,children:f}),s.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Loading...":e?"Create Account":"Sign In"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>t(!e),className:"text-emerald-200 hover:text-emerald-100 text-sm transition-colors",children:e?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})]})},eu=({setActiveTab:e})=>{var x;const{user:t}=Ke(),{isDark:r}=Uh(),[a,n]=b.useState({studyHoursToday:0,prayersCompleted:0,totalPrayers:5,habitStreak:0,nextExamDays:0,quranReadToday:0,quranDailyGoal:2,sleepHoursToday:0,sleepGoal:8,prayersMinutesToday:0}),[i,l]=b.useState([]),[o,d]=b.useState(null),c=new Date().toLocaleDateString("en-US",{weekday:"long"}),u=["Saturday","Sunday","Monday","Tuesday","Wednesday"].includes(c);b.useEffect(()=>{t&&h()},[t]);const h=async()=>{if(!t)return;const _=new Date().toISOString().split("T")[0],y=new Date().toLocaleDateString("en-US",{weekday:"long"});try{const{data:m}=await E.from("study_sessions").select("duration").eq("user_id",t.id).eq("date",_),g=(m==null?void 0:m.reduce((A,I)=>A+I.duration,0))||0,{data:v}=await E.from("prayer_records").select("*").eq("user_id",t.id).eq("date",_),T=(v==null?void 0:v.length)||0,{data:N}=await E.from("habits").select("streak").eq("user_id",t.id).eq("type","good"),P=N&&N.length>0?Math.max(...N.map(A=>A.streak)):0,{data:F}=await E.from("exams").select("date").eq("user_id",t.id).gte("date",_).order("date",{ascending:!0}).limit(1);let ae=0;if(F&&F.length>0){const A=new Date(F[0].date),I=new Date,G=A.getTime()-I.getTime();ae=Math.ceil(G/(1e3*60*60*24))}const{data:Z}=await E.from("class_schedules").select("*").eq("user_id",t.id).eq("day",y).order("time"),{data:O}=await E.from("quran_readings").select("pages").eq("user_id",t.id).eq("date",_),se=(O==null?void 0:O.reduce((A,I)=>A+I.pages,0))||0,{data:D}=await E.from("sleep_records").select("duration").eq("user_id",t.id).eq("date",_),B=(D==null?void 0:D.reduce((A,I)=>A+(I.duration||0),0))||0;let J=8;const{data:k}=await E.from("profiles").select("sleep_goal").eq("user_id",t.id).maybeSingle();k!=null&&k.sleep_goal&&(J=k.sleep_goal);const z=[20,30,20,15,30];n({studyHoursToday:Math.round(g*10)/10,prayersCompleted:T,totalPrayers:5,habitStreak:P,nextExamDays:ae,quranReadToday:se,quranDailyGoal:2,sleepHoursToday:Math.round(B*10)/10,sleepGoal:J,prayersMinutesToday:z.slice(0,T).reduce((A,I)=>A+I,0)}),l(Z||[])}catch(m){console.error("Error loading dashboard data:",m)}},[f,p]=b.useState([]);b.useEffect(()=>{t&&E.from("attendance_records").select("*").eq("user_id",t.id).eq("date",new Date().toISOString().split("T")[0]).then(({data:_})=>p(_||[]))},[t]);const w=i.reduce((_,y)=>{if(!f.some(se=>se.subject===y.subject&&se.status==="present")||!y.time||!(y.endTime||y.end_time))return _;const g=y.endTime||y.end_time,[v,T]=y.time.split(":"),[N,P]=g.split(":");let F=parseInt(v)*60+parseInt(T),ae=parseInt(N),Z=parseInt(P);parseInt(v)===12&&ae===1&&(ae=13);let O=ae*60+Z;return O<F&&(O+=24*60),_+(O-F)/60},0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:["Welcome back, ",((x=t==null?void 0:t.user_metadata)==null?void 0:x.full_name)||"User"]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Let's make today productive and meaningful"})]}),s.jsx("div",{className:"hidden sm:block text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s.jsxs("div",{className:"w-full flex flex-col items-center my-2",children:[s.jsxs("div",{className:"w-full max-w-2xl flex h-7 rounded-full overflow-hidden border border-gray-200 dark:border-gray-700 shadow-md transition-transform duration-200 hover:-translate-y-1 bg-gray-100 dark:bg-gray-900 group relative",children:[s.jsx("div",{className:`bg-blue-500 dark:bg-blue-700 h-full flex items-center transition-all duration-700 first:rounded-l-full last:rounded-r-full relative cursor-pointer ${o==="sleep"?"scale-105 z-10 shadow-lg ring-2 ring-blue-300 dark:ring-blue-700":""}`,style:{width:`${Math.min(a.sleepHoursToday/24*100,100)}%`,minWidth:a.sleepHoursToday>0?"2%":0},title:`Sleep: ${a.sleepHoursToday}h (${Math.round(a.sleepHoursToday/24*100)}%)`,onMouseEnter:()=>d("sleep"),onMouseLeave:()=>d(null),onTouchStart:()=>d("sleep"),onTouchEnd:()=>d(null),children:a.sleepHoursToday/24*100>7&&s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(a.sleepHoursToday/24*100),"%"]})}),s.jsx("div",{className:`bg-orange-500 dark:bg-orange-600 h-full flex items-center transition-all duration-700 relative cursor-pointer ${o==="study"?"scale-105 z-10 shadow-lg ring-2 ring-orange-300 dark:ring-orange-700":""}`,style:{width:`${Math.min(a.studyHoursToday/24*100,100)}%`,minWidth:a.studyHoursToday>0?"2%":0},title:`Study: ${a.studyHoursToday}h (${Math.round(a.studyHoursToday/24*100)}%)`,onMouseEnter:()=>d("study"),onMouseLeave:()=>d(null),onTouchStart:()=>d("study"),onTouchEnd:()=>d(null),children:a.studyHoursToday/24*100>7&&s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(a.studyHoursToday/24*100),"%"]})}),s.jsx("div",{className:`bg-violet-500 dark:bg-violet-600 h-full flex items-center transition-all duration-700 relative cursor-pointer ${o==="class"?"scale-105 z-10 shadow-lg ring-2 ring-violet-300 dark:ring-violet-700":""}`,style:{width:`${Math.min(w/24*100,100)}%`,minWidth:w>0?"2%":0},title:`Class: ${w.toFixed(1)}h (${Math.round(w/24*100)}%)`,onMouseEnter:()=>d("class"),onMouseLeave:()=>d(null),onTouchStart:()=>d("class"),onTouchEnd:()=>d(null),children:w/24*100>7&&s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(w/24*100),"%"]})}),s.jsx("div",{className:`bg-teal-500 dark:bg-teal-700 h-full flex items-center transition-all duration-700 relative cursor-pointer ${o==="prayers"?"scale-105 z-10 shadow-lg ring-2 ring-teal-300 dark:ring-teal-700":""}`,style:{width:`${Math.min((a.prayersMinutesToday||0)/60/24*100,100)}%`,minWidth:a.prayersMinutesToday>0?"2%":0},title:`Prayers: ${((a.prayersMinutesToday||0)/60).toFixed(2)}h (${Math.round((a.prayersMinutesToday||0)/60/24*100)}%)`,onMouseEnter:()=>d("prayers"),onMouseLeave:()=>d(null),onTouchStart:()=>d("prayers"),onTouchEnd:()=>d(null),children:(a.prayersMinutesToday||0)/60/24*100>7&&s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round((a.prayersMinutesToday||0)/60/24*100),"%"]})})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mt-2",children:[s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mr-2"}),"Sleep"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 mr-2"}),"Study"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-violet-100 dark:bg-violet-900 text-violet-700 dark:text-violet-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-violet-500 mr-2"}),"Class"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-teal-500 mr-2"}),"Prayers"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100",children:"Study Hours Today"}),s.jsxs("p",{className:"text-2xl font-bold",children:[a.studyHoursToday.toFixed(1),"h"]})]}),s.jsx(ze,{className:"w-8 h-8 text-emerald-200"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${Math.min(a.studyHoursToday/6*100,100)}%`}})}),s.jsxs("p",{className:"text-xs text-emerald-100 mt-1",children:[Math.round(a.studyHoursToday/6*100),"% of daily goal"]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-teal-100",children:"Prayers Completed"}),s.jsxs("p",{className:"text-2xl font-bold",children:[a.prayersCompleted,"/",a.totalPrayers]})]}),s.jsx(Zt,{className:"w-8 h-8 text-teal-200"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"bg-teal-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${a.prayersCompleted/a.totalPrayers*100}%`}})}),s.jsx("p",{className:"text-xs text-teal-100 mt-1",children:a.prayersCompleted===5?"All completed!":"Keep going!"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-amber-100",children:"Habit Streak"}),s.jsx("p",{className:"text-2xl font-bold",children:a.habitStreak})]}),s.jsx(kd,{className:"w-8 h-8 text-amber-200"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-xs text-amber-100",children:"Days consistent"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-rose-500 to-pink-500 p-6 rounded-xl text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-rose-100",children:"Exam in"}),s.jsx("p",{className:"text-2xl font-bold",children:a.nextExamDays||"None"})]}),s.jsx(os,{className:"w-8 h-8 text-rose-200"})]}),s.jsx("div",{className:"mt-4",children:s.jsx("p",{className:"text-xs text-rose-100",children:a.nextExamDays>0?"Days remaining":"No upcoming exams"})})]})]}),u&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Today's Classes"}),s.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(er,{className:"w-4 h-4"}),s.jsx("span",{children:c})]})]}),s.jsx("div",{className:"space-y-3",children:i.length>0?i.map((_,y)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:_.subject}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[_.instructor,"  ",_.location]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:_.time})})]},y)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(er,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No classes scheduled for today"}),s.jsx("p",{className:"text-sm mt-1",children:"Add your class schedule to see it here"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Today's Progress"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx(ze,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Study Session"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${Math.min(a.studyHoursToday/6*100,100)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(a.studyHoursToday/6*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center",children:s.jsx(Zt,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Daily Prayers"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-teal-600 h-2 rounded-full",style:{width:`${a.prayersCompleted/a.totalPrayers*100}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(a.prayersCompleted/a.totalPrayers*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-amber-100 dark:bg-amber-900 rounded-full flex items-center justify-center",children:s.jsx(ss,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Quran Reading"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:`${Math.min(a.quranReadToday/a.quranDailyGoal*100,100)}%`}})}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(a.quranReadToday/a.quranDailyGoal*100),"%"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center",children:s.jsx(_t,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Sleep Goal"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full w-0"})}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"0%"})]})]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>e("study"),className:"w-full bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx(ze,{className:"w-4 h-4"}),s.jsx("span",{children:"Start Study Session"})]}),s.jsxs("button",{onClick:()=>e("prayer"),className:"w-full bg-teal-50 dark:bg-teal-900/20 hover:bg-teal-100 dark:hover:bg-teal-900/30 text-teal-700 dark:text-teal-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx(Zt,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Prayer"})]}),s.jsxs("button",{onClick:()=>e("habits"),className:"w-full bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-700 dark:text-amber-400 py-3 px-4 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:shadow-sm",children:[s.jsx(gt,{className:"w-4 h-4"}),s.jsx("span",{children:"Update Habits"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Achievements"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[s.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center",children:s.jsx(Jr,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"Getting Started"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Welcome to Life Tracker!"})]})]}),s.jsxs("button",{onClick:()=>e("achievements"),className:"w-full flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx(ze,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"First Steps"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Start tracking to unlock achievements"})]})]})]})]})]})]})]})},wp=({activeTab:e,setActiveTab:t})=>{var u;const{signOut:r,user:a}=Ke(),{isDark:n,toggleTheme:i}=Uh(),{isAdmin:l,error:o}=en(),d=async()=>{await r()},c=[{id:"dashboard",label:"Dashboard",icon:Gh},{id:"routine",label:"Classes",icon:er},{id:"study",label:"Study Tracker",icon:ze},{id:"prayer",label:"Prayer Tracker",icon:Zt},{id:"quran",label:"Quran Tracker",icon:ss},{id:"habits",label:"Habit Tracker",icon:gt},{id:"exam",label:"Exam Countdown",icon:os},{id:"sleep",label:"Sleep Tracker",icon:_t},{id:"academic",label:"Academic",icon:oi},{id:"achievements",label:"Achievements",icon:rs},...l?[{id:"admin",label:"Admin Panel",icon:Ri}]:[],{id:"profile",label:"Profile",icon:tr}];return s.jsxs("div",{className:"fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-900 shadow-lg z-10 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[s.jsxs("div",{className:"flex-1 flex flex-col p-6 min-h-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-8",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:s.jsx(Wh,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Life Tracker"})]}),s.jsx("nav",{className:`space-y-2 overflow-y-auto flex-1 min-h-0 sidebar-scrollbar${n?" dark":""}`,children:c.map(h=>{const f=h.icon;return s.jsxs("button",{onClick:()=>t(h.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${e===h.id?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-r-2 border-emerald-600 dark:border-emerald-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[s.jsx(f,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:h.label})]},h.id)})})]}),s.jsx("div",{className:"px-6 pb-6 space-y-4",children:s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:s.jsx(tr,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white truncate",children:((u=a==null?void 0:a.user_metadata)==null?void 0:u.full_name)||"User"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:a==null?void 0:a.email}),o&&s.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 truncate",children:["Admin Error: ",o]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[n?s.jsx(jd,{className:"w-4 h-4"}):s.jsx(_t,{className:"w-4 h-4"}),s.jsx("span",{children:n?"Light":"Dark"})]}),s.jsxs("button",{onClick:d,className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[s.jsx(sp,{className:"w-4 h-4"}),s.jsx("span",{children:"Sign Out"})]})]})]})})]})},kp=()=>{const{user:e}=Ke(),{isOnline:t,saveOfflineData:r,getOfflineData:a,addToPendingSync:n}=qh(),{isRunning:i,elapsedTime:l,startTimer:o,pauseTimer:d,stopTimer:c,currentSubject:u,hasActiveTimer:h}=Fh(),[f,p]=b.useState(""),[w,x]=b.useState(6),[_,y]=b.useState(0),[m,g]=b.useState([]),[v,T]=b.useState([]),[N,P]=b.useState(!1),[F,ae]=b.useState("");b.useEffect(()=>{e&&Z()},[e]),b.useEffect(()=>{h&&u&&p(u)},[h,u]);const Z=async()=>{if(!e)return;const z=new Date().toISOString().split("T")[0],{data:A}=await E.from("study_sessions").select("duration").eq("user_id",e.id).eq("date",z);if(A){const ge=A.reduce((he,q)=>he+q.duration,0);y(Math.round(ge*10)/10)}const I=new Date;I.setDate(I.getDate()-I.getDay());const{data:G}=await E.from("study_sessions").select("date, duration").eq("user_id",e.id).gte("date",I.toISOString().split("T")[0]);if(G){const ge=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],he=ge.map(q=>({day:q,hours:Math.round(G.filter(R=>new Date(R.date).getDay()===ge.indexOf(q)).reduce((R,j)=>R+j.duration,0)*10)/10}));T(he)}const{data:ce}=await E.from("study_sessions").select("subject, duration").eq("user_id",e.id).gte("date",I.toISOString().split("T")[0]);if(ce){const ge=new Map;ce.forEach(R=>{const j=ge.get(R.subject)||0;ge.set(R.subject,j+R.duration)});const he=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"],q=Array.from(ge.entries()).map(([R,j],U)=>({name:R,hours:Math.round(Number(j)*10)/10,color:he[U%he.length]}));g(q)}},O=()=>{if(!f.trim()){alert("Please select or enter a subject first");return}e&&o(f,e.id)},se=()=>{d()},D=async()=>{if(!e||l===0)return;const z=new Date().toISOString().split("T")[0],A=l/3600,I={user_id:e.id,subject:f,duration:A,date:z,notes:`${Math.floor(l/3600)}h ${Math.floor(l%3600/60)}m session`};if(t){const{error:G}=await E.from("study_sessions").insert(I);G||(c(),p(""),Z())}else{n({table:"study_sessions",operation:"insert",data:I}),c(),p("");const G=a("study_sessions")||[];G.push({...I,id:Date.now().toString()}),r("study_sessions",G),Z()}},B=()=>{F.trim()&&!m.find(z=>z.name===F)&&(g(z=>[...z,{name:F,hours:0,color:["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-red-500"][z.length%5]}]),ae(""),P(!1))},J=()=>l,k=z=>{const A=Math.floor(z/3600),I=Math.floor(z%3600/60),G=Math.floor(z%60);return`${A.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Study Tracker"}),s.jsxs("button",{onClick:()=>P(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(as,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Subject"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Current Session"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(er,{className:"w-4 h-4"}),s.jsx("span",{children:i?"Active":"Paused"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),s.jsxs("select",{value:f,onChange:z=>p(z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",disabled:i,children:[s.jsx("option",{value:"",children:"Select a subject"}),m.map(z=>s.jsx("option",{value:z.name,children:z.name},z.name))]})]}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-6xl font-bold text-gray-800 dark:text-white mb-2",children:k(Math.floor(J()))}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:f||"Select a subject to start"}),i&&s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"Session in progress..."})]}),s.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[i?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:se,className:"px-8 py-3 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[s.jsx(op,{className:"w-5 h-5"}),s.jsx("span",{children:"Pause"})]}),s.jsx("button",{onClick:D,className:"px-8 py-3 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg font-medium transition-colors",children:"End Session"})]}):s.jsxs("button",{onClick:O,disabled:!f,className:"px-8 py-3 bg-green-100 text-green-700 hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[s.jsx(Qh,{className:"w-5 h-5"}),s.jsx("span",{children:"Start"})]}),s.jsx("button",{onClick:()=>{c(),p("")},className:"px-8 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Reset"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[_.toFixed(1),"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today's Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[w,"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily Goal"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(_/w*100),"%"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Progress"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("span",{children:"Progress towards daily goal"}),s.jsxs("span",{children:[_.toFixed(1),"/",w.toFixed(1)," hours"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(_/w*100,100)}%`}})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Subject Breakdown"}),s.jsx("div",{className:"space-y-4",children:m.length>0?m.map(z=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${z.color}`}),s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:z.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[z.hours.toFixed(1),"h"]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"this week"})]})]},z.name)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ze,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No subjects added yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add subjects to track your study progress"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Weekly Overview"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Jr,{className:"w-4 h-4"}),s.jsxs("span",{children:[v.reduce((z,A)=>z+A.hours,0).toFixed(1),"h total"]})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:v.map(z=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:z.day}),s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[z.hours.toFixed(1),"h"]})})]},z.day))})]}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add Subject"}),s.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:F,onChange:z=>ae(z.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics, Physics, etc."})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:B,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Subject"})]})]})]})})]})},jp=()=>{const{user:e}=Ke(),t=[{name:"Fajr",time:"05:00",completed:!1,type:null,icon:Kh},{name:"Dhuhr",time:"12:00",completed:!1,type:null,icon:jd},{name:"Asr",time:"16:00",completed:!1,type:null,icon:Yy},{name:"Maghrib",time:"18:00",completed:!1,type:null,icon:Jh},{name:"Isha",time:"20:00",completed:!1,type:null,icon:_t}],[r,a]=b.useState(t),[n,i]=b.useState(!1),[l,o]=b.useState(null),[d,c]=b.useState(""),[u,h]=b.useState(0),[f,p]=b.useState(0),[w,x]=b.useState(null),[_,y]=b.useState({totalPrayers:0,totalPossible:35,withJamat:0,consistency:0,bestStreak:0,personalBest:0}),[m,g]=b.useState([]),[v,T]=b.useState(!1);b.useEffect(()=>{e&&(a(t),F(),N())},[e]);const N=async()=>{if(!e)return;console.log("Testing database connection...");const{data:j,error:U}=await E.from("missed_prayers").select("count").eq("user_id",e.id).limit(1);console.log("Database connection test:",{data:j,error:U})},P=async()=>{if(!e)return;const j=new Date().toISOString().split("T")[0];console.log("Clearing all prayers for today:",j);try{const{error:U}=await E.from("prayer_records").delete().eq("user_id",e.id).eq("date",j);console.log("Clear regular prayers result:",{error:U});const{error:re}=await E.from("missed_prayers").delete().eq("user_id",e.id).eq("missed_date",j);console.log("Clear kaza prayers result:",{error:re}),await F()}catch(U){console.error("Error clearing prayers:",U)}},F=async()=>{if(e)try{const[j,U,re,te,ne]=await Promise.all([se(),D(),B(),J(),k()]);if(j){const $=t.map(W=>{const ee=j.find(ue=>ue.prayer_name===W.name);let X=null;if(ne)switch(W.name){case"Fajr":X=ne.fajr_time;break;case"Dhuhr":X=ne.dhuhr_time;break;case"Asr":X=ne.asr_time;break;case"Maghrib":X=ne.maghrib_time;break;case"Isha":X=ne.isha_time;break}return{...W,time:X||W.time,completed:!!ee,type:(ee==null?void 0:ee.prayer_type)||null}});a($)}await z()}catch(j){console.error("Error loading prayer data:",j)}},ae=(j,U)=>{o(j),c(U)},Z=async j=>{if(e)try{const re={Fajr:"fajr_time",Dhuhr:"dhuhr_time",Asr:"asr_time",Maghrib:"maghrib_time",Isha:"isha_time"}[j];if(!re){console.error("Invalid prayer name:",j);return}const{error:te}=await E.from("user_settings").upsert({user_id:e.id,[re]:d},{onConflict:"user_id"});if(te){console.error("Error saving prayer time:",te);return}a(ne=>ne.map($=>$.name===j?{...$,time:d}:$)),o(null),c(""),console.log("Prayer time saved successfully:",j,d)}catch(U){console.error("Error saving prayer time:",U)}},O=()=>{o(null),c("")},se=async()=>{if(!e)return null;const j=new Date().toISOString().split("T")[0];console.log("Loading today's prayers for date:",j);const{data:U,error:re}=await E.from("prayer_records").select("*").eq("user_id",e.id).eq("date",j);console.log("Regular prayers loaded:",U,"Error:",re);const{data:te,error:ne}=await E.from("missed_prayers").select("*").eq("user_id",e.id).eq("missed_date",j);console.log("Kaza prayers loaded:",te,"Error:",ne);const $=new Map;U&&U.forEach(ee=>{$.set(ee.prayer_name,{...ee,prayer_type:ee.prayer_type,date:ee.date,time:ee.time,completed:!0})}),te&&te.forEach(ee=>{$.has(ee.prayer_name)||$.set(ee.prayer_name,{...ee,prayer_type:"kaza",date:ee.missed_date,time:ee.completed_time||ee.prayer_time,completed:ee.is_completed})});const W=Array.from($.values());return console.log("Combined prayers for today:",W),W},D=async()=>{if(!e)return;const j=new Date;j.setDate(j.getDate()-j.getDay());const U=j.toISOString().split("T")[0],re=new Date(j);re.setDate(re.getDate()+6);const te=re.toISOString().split("T")[0],{data:ne,error:$}=await E.from("prayer_records").select("*").eq("user_id",e.id).gte("date",U).lte("date",te);if(ne){const W=ne.filter(Fe=>Fe.prayer_type!=="kaza"),ee=W.length,X=35,ue=W.filter(Fe=>Fe.prayer_type==="jamat").length,Ae=Math.round(ee/X*100);y({totalPrayers:ee,totalPossible:X,withJamat:ue,consistency:Ae,bestStreak:0,personalBest:0})}},B=async()=>{if(!e)return;const j=new Date;let U=0,re=new Date(j);for(;;){const W=re.toISOString().split("T")[0],{data:ee}=await E.from("prayer_records").select("*").eq("user_id",e.id).eq("date",W);if(ee&&ee.length>=5)U++,re.setDate(re.getDate()-1);else break}h(U);const te=new Date;te.setDate(1);const ne=te.toISOString().split("T")[0],{data:$}=await E.from("prayer_records").select("*").eq("user_id",e.id).gte("date",ne);if($){const ee=new Date().getDate()*5,X=Math.round($.length/ee*100);p(X)}},J=async()=>{if(!e)return;const j=new Date;j.setDate(j.getDate()-30);const U=j.toISOString().split("T")[0],re=new Date().toISOString().split("T")[0];console.log("Loading kaza prayers from:",U,"to:",re);const{data:te,error:ne}=await E.from("missed_prayers").select("*").eq("user_id",e.id).gte("missed_date",U).lte("missed_date",re).order("missed_date",{ascending:!1});if(console.log("Missed prayers data:",te,"Error:",ne),te){const $=te.map(W=>({id:W.id,prayer_name:W.prayer_name,date:W.missed_date,completed:W.is_completed,completed_date:W.completed_date,prayer_time:W.prayer_time}));console.log("Processed kaza prayers list:",$),g($)}else g([])},k=async()=>{if(!e)return null;try{const{data:j,error:U}=await E.from("user_settings").select("fajr_time, dhuhr_time, asr_time, maghrib_time, isha_time").eq("user_id",e.id).single();return U?(console.error("Error loading prayer times:",U),null):j}catch(j){return console.error("Error loading prayer times:",j),null}},z=async()=>{},A=async(j,U)=>{var ne;if(!e)return;const re=new Date().toISOString().split("T")[0],te=new Date().toTimeString().slice(0,5);console.log("Logging prayer:",{prayerName:j,type:U,today:re,now:te});try{if(U==="kaza"){const{data:$,error:W}=await E.from("missed_prayers").upsert({user_id:e.id,prayer_name:j,missed_date:re,prayer_time:((ne=r.find(ee=>ee.name===j))==null?void 0:ne.time)||"00:00",is_completed:!1,completed_date:null,completed_time:null},{onConflict:"user_id,prayer_name,missed_date"}).select();if(console.log("Kaza prayer insert result:",{data:$,error:W}),W){console.error("Error adding kaza prayer:",W);return}a(ee=>ee.map(X=>X.name===j?{...X,completed:!0,type:U}:X)),x(null),await J()}else{const{data:$,error:W}=await E.from("prayer_records").upsert({user_id:e.id,prayer_name:j,prayer_type:U,date:re,time:te},{onConflict:"user_id,prayer_name,date"}).select();if(console.log("Regular prayer insert result:",{data:$,error:W}),W){console.error("Error adding regular prayer:",W);return}await E.from("missed_prayers").delete().eq("user_id",e.id).eq("prayer_name",j).eq("missed_date",re),a(ee=>ee.map(X=>X.name===j?{...X,completed:!0,type:U}:X)),x(null),await Promise.all([D(),B(),J()])}}catch($){console.error("Unexpected error logging prayer:",$)}},I=async j=>{if(!e)return;const U=new Date().toISOString().split("T")[0],re=r.find(te=>te.name===j);console.log("Removing prayer:",{prayerName:j,type:re==null?void 0:re.type,today:U});try{if((re==null?void 0:re.type)==="kaza"){const{data:te,error:ne}=await E.from("missed_prayers").delete().eq("user_id",e.id).eq("prayer_name",j).eq("missed_date",U);if(console.log("Kaza prayer delete result:",{data:te,error:ne}),ne){console.error("Error deleting kaza prayer:",ne);return}a($=>$.map(W=>W.name===j?{...W,completed:!1,type:null}:W)),await J()}else{const{data:te,error:ne}=await E.from("prayer_records").delete().eq("user_id",e.id).eq("prayer_name",j).eq("date",U);if(console.log("Regular prayer delete result:",{data:te,error:ne}),ne){console.error("Error deleting regular prayer:",ne);return}a($=>$.map(W=>W.name===j?{...W,completed:!1,type:null}:W)),await Promise.all([D(),B()])}}catch(te){console.error("Unexpected error removing prayer:",te)}},G=r.filter(j=>j.completed&&j.type!=="kaza").length,ce=G/r.length*100,ge=j=>{switch(j){case"jamat":return s.jsx(ui,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"});case"individual":return s.jsx(tr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"kaza":return s.jsx(Ts,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});default:return null}},he=j=>{switch(j){case"jamat":return"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800";case"individual":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case"kaza":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";default:return"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}},q=async j=>{if(!e)return;const U=new Date().toISOString().split("T")[0],re=new Date().toTimeString().slice(0,5),{data:te,error:ne}=await E.from("missed_prayers").update({is_completed:!0,completed_date:U,completed_time:re,updated_at:new Date().toISOString()}).eq("id",j.id).select();!ne&&te&&(g($=>$.map(W=>W.id===j.id?{...W,completed:!0,completed_date:U}:W)),await Promise.all([D(),B(),J()]))},R=async j=>{if(!e)return;const{error:U}=await E.from("missed_prayers").update({is_completed:!1,completed_date:null,completed_time:null,updated_at:new Date().toISOString()}).eq("id",j.id);U||(g(re=>re.map(te=>te.id===j.id?{...te,completed:!1,completed_date:void 0}:te)),await Promise.all([D(),B(),J()]))};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Prayer Tracker"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:P,className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"Clear Today"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zt,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-medium",children:[G,"/5"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Daily prayers completed"}),s.jsxs("span",{children:[Math.round(ce),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${ce}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:u}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[f,"%"]}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Monthly Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Daily Prayers"}),s.jsx("div",{className:"space-y-4",children:r.map(j=>{const U=j.icon;return s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${j.completed?he(j.type):"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${j.completed?"bg-emerald-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:s.jsx(U,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:j.name}),j.type&&ge(j.type)]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(er,{className:"w-4 h-4"}),l===j.name?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"time",value:d,onChange:re=>c(re.target.value),className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white rounded-md px-2 py-1 text-sm"}),s.jsx("button",{onClick:()=>Z(j.name),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",children:s.jsx(ci,{className:"w-4 h-4"})}),s.jsx("button",{onClick:O,className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:s.jsx(Me,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:j.time}),s.jsx("button",{onClick:()=>ae(j.name,j.time),className:"w-4 h-4 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",children:s.jsx(dp,{className:"w-3 h-3"})})]}),j.type&&s.jsxs("span",{className:"capitalize",children:[" ",j.type==="jamat"?"With Jamat":j.type==="individual"?"Individual":"Kaza/Missed"]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:j.completed?s.jsx("button",{onClick:()=>I(j.name),className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",children:""}):s.jsx("button",{onClick:()=>x(j.name),className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400 flex items-center justify-center transition-colors",children:s.jsx(bo,{className:"w-4 h-4 text-gray-400"})})})]},j.name)})})]}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:["Log ",w," Prayer"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>A(w,"jamat"),className:"w-full flex items-center space-x-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors",children:[s.jsx(ui,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"With Jamat"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed in congregation"})]})]}),s.jsxs("button",{onClick:()=>A(w,"individual"),className:"w-full flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:[s.jsx(tr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Individual"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prayed alone"})]})]}),s.jsxs("button",{onClick:()=>A(w,"kaza"),className:"w-full flex items-center space-x-3 p-3 bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 rounded-lg transition-colors",children:[s.jsx(Ts,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Mark as Missed"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add to kaza list for later completion"})]})]})]}),s.jsx("button",{onClick:()=>x(null),className:"w-full mt-4 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total prayers"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[_.totalPrayers,"/",_.totalPossible]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"With Jamat"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[_.withJamat,"/",_.totalPossible]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Consistency"}),s.jsxs("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:[_.consistency,"%"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Best Streak"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2",children:u}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Days of consistent prayers"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Current streak"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Kaza Prayers (Last 30 Days)"}),s.jsx("button",{onClick:()=>T(!v),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:v?"Hide Details":"Show Details"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("span",{children:"Missed prayers"}),s.jsxs("span",{children:[m.filter(j=>!j.completed).length," remaining"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${m.filter(j=>j.completed).length/Math.max(m.length,1)*100}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[m.filter(j=>j.completed).length," of ",m.length," completed"]})]}),v&&s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:m.length>0?m.map(j=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${j.completed?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${j.completed?"bg-green-500 text-white":"bg-orange-500 text-white"}`,children:s.jsx(Ts,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:j.prayer_name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Missed on ",new Date(j.date).toLocaleDateString(),j.completed&&s.jsxs("span",{className:"ml-2 text-green-600 dark:text-green-400",children:[" Completed on ",new Date(j.completed_date).toLocaleDateString()]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:j.completed?s.jsx("button",{onClick:()=>R(j),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Mark as incomplete",children:""}):s.jsx("button",{onClick:()=>q(j),className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/30 flex items-center justify-center transition-colors",title:"Mark as completed",children:""})})]},j.id)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Ts,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No missed prayers in the last 30 days"}),s.jsx("p",{className:"text-sm mt-1",children:"Great job keeping up with your prayers!"})]})})]})]})})},Np=()=>{const{user:e}=Ke(),[t,r]=b.useState(2),[a,n]=b.useState(0),[i,l]=b.useState(""),[o,d]=b.useState(0),[c,u]=b.useState(0),[h,f]=b.useState(0),[p,w]=b.useState([]),[x,_]=b.useState([]),[y,m]=b.useState({totalPages:0,totalSessions:0,averagePerDay:0,consistency:0}),[g,v]=b.useState(!1),[T,N]=b.useState(!1),[P,F]=b.useState(!1),[ae,Z]=b.useState(!1),[O,se]=b.useState({pages:1,surah:"",verses:"",notes:""}),[D,B]=b.useState({surah:"",verse:"",page:"",notes:""});So.useEffect(()=>{e&&(J(),k(),z(),he())},[e]);const J=async()=>{if(!e)return;const q=new Date().toISOString().split("T")[0],{data:R}=await E.from("quran_readings").select("pages").eq("user_id",e.id).eq("date",q);if(R){const te=R.reduce((ne,$)=>ne+$.pages,0);n(te)}const{data:j}=await E.from("quran_readings").select("*").eq("user_id",e.id).order("date",{ascending:!1});if(j&&(w(j),j.length>0)){l(j[0].surah);const te=j.reduce((ne,$)=>ne+$.pages,0);u(te)}const U=new Date;U.setDate(1);const{data:re}=await E.from("quran_readings").select("pages, date").eq("user_id",e.id).gte("date",U.toISOString().split("T")[0]);if(re){const te=re.reduce((ee,X)=>ee+X.pages,0),ne=re.length,$=new Date().getDate(),W=te/$;m({totalPages:te,totalSessions:ne,averagePerDay:Math.round(W*10)/10,consistency:Math.round(ne/$*100)})}},k=async()=>{if(!e)return;const q=new Date;let R=0,j=new Date(q);for(;;){const U=j.toISOString().split("T")[0],{data:re}=await E.from("quran_readings").select("*").eq("user_id",e.id).eq("date",U);if(re&&re.length>0)R++,j.setDate(j.getDate()-1);else break}f(R)},z=async()=>{if(!e)return;const{data:q}=await E.from("quran_bookmarks").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});q&&_(q)},A=async()=>{if(!e||O.pages<=0)return;const q=new Date().toISOString().split("T")[0];new Date().toTimeString().slice(0,5);const{error:R}=await E.from("quran_readings").insert({user_id:e.id,pages:O.pages,surah:O.surah,verses:O.verses,date:q,notes:O.notes});R||(v(!1),se({pages:1,surah:"",verses:"",notes:""}),await J(),await k())},I=async()=>{if(!e||!D.surah)return;const{error:q}=await E.from("quran_bookmarks").upsert({user_id:e.id,surah:D.surah,verse:D.verse,page:D.page,notes:D.notes,created_at:new Date().toISOString()},{onConflict:"user_id,surah"});q||(N(!1),B({surah:"",verse:"",page:"",notes:""}),await z())},G=async q=>{if(!e)return;const{error:R}=await E.from("quran_readings").delete().eq("id",q).eq("user_id",e.id);R||(await J(),await k())},ce=async q=>{if(!e)return;const{error:R}=await E.from("quran_bookmarks").delete().eq("id",q).eq("user_id",e.id);R||await z()},ge=async q=>{if(!e)return;const{error:R}=await E.from("user_settings").upsert({user_id:e.id,quran_daily_goal:q},{onConflict:"user_id"});R||(r(q),Z(!1))},he=async()=>{if(!e)return;const{data:q}=await E.from("user_settings").select("quran_daily_goal").eq("user_id",e.id).single();q&&q.quran_daily_goal&&r(q.quran_daily_goal)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Quran Tracker"}),s.jsxs("button",{onClick:()=>v(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(ze,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Reading"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Reading"}),s.jsx("button",{onClick:()=>Z(!0),className:"text-sm bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg transition-colors",children:"Set Goal"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Daily goal progress"}),s.jsxs("span",{children:[Math.round(a/t*100),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${Math.min(a/t*100,100)}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:h}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Day Streak"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold",children:i||"Not started"}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Current Surah"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:c}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Pages Read"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Reading Goal"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("input",{type:"number",value:t,onChange:q=>r(Number(q.target.value)),className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"pages per day"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complete Quran in"}),s.jsxs("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:[Math.ceil((604-y.totalPages*2)/t)," days"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"At current pace"})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Overall Progress"}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(y.totalPages/604*100),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(y.totalPages/604*100,100)}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[y.totalPages," of 604 pages completed"]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>v(!0),className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 rounded-lg transition-colors border border-emerald-200 dark:border-emerald-800",children:[s.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:"Log Reading Session"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Record pages read"})]}),s.jsxs("button",{onClick:()=>N(!0),className:"p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Set Bookmark"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Save current position"})]}),s.jsxs("button",{onClick:()=>F(!0),className:"p-4 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-colors border border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"View Progress"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Detailed analytics"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Readings"}),s.jsxs("div",{className:"space-y-3",children:[p.map((q,R)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-100 dark:bg-emerald-900/20 rounded-full flex items-center justify-center",children:s.jsx(ss,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:q.surah}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",q.verses]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[q.pages," pages"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.date})]}),s.jsx("button",{onClick:()=>G(q.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete reading",children:s.jsx(Me,{className:"w-3 h-3"})})]})]},R)),p.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ss,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No readings recorded yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Start your Quran reading journey today!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bookmarks"}),s.jsxs("div",{className:"space-y-3",children:[x.map((q,R)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(Xc,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:q.surah}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verses ",q.verse]}),s.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:q.page?`Page ${q.page}`:""})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:q.notes}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.created_at})]}),s.jsx("button",{onClick:()=>ce(q.id),className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30 flex items-center justify-center transition-colors",title:"Delete bookmark",children:s.jsx(Me,{className:"w-3 h-3"})})]})]},R)),x.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(Xc,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No bookmarks saved yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Bookmark your favorite verses!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Monthly Statistics"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Jr,{className:"w-4 h-4"}),s.jsx("span",{children:"This month"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:y.totalPages}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y.totalSessions}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Reading Sessions"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:y.averagePerDay}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Pages/Day"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[y.consistency,"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]})]}),g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Reading Session"}),s.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pages Read"}),s.jsx("input",{type:"number",value:O.pages,onChange:q=>se({...O,pages:Number(q.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),s.jsx("input",{type:"text",value:O.surah,onChange:q=>se({...O,surah:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Fatiha"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verses"}),s.jsx("input",{type:"text",value:O.verses,onChange:q=>se({...O,verses:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 1-7"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:O.notes,onChange:q=>se({...O,notes:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any reflections or notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:A,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),s.jsx("button",{onClick:()=>v(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),T&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Bookmark"}),s.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Surah"}),s.jsx("input",{type:"text",value:D.surah,onChange:q=>B({...D,surah:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Al-Baqarah"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verse"}),s.jsx("input",{type:"text",value:D.verse,onChange:q=>B({...D,verse:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 255"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Page (Optional)"}),s.jsx("input",{type:"text",value:D.page,onChange:q=>B({...D,page:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., 42"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:D.notes,onChange:q=>B({...D,notes:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Why this bookmark is important..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:I,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Set Bookmark"}),s.jsx("button",{onClick:()=>N(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),P&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Detailed Progress"}),s.jsx("button",{onClick:()=>F(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:y.totalPages}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Pages"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y.totalSessions}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sessions"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:y.averagePerDay}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg/Day"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[y.consistency,"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Consistency"})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Quran Completion Progress"}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:s.jsx("div",{className:"bg-emerald-500 h-4 rounded-full transition-all duration-300",style:{width:`${Math.min(y.totalPages/604*100,100)}%`}})}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[y.totalPages," of 604 pages completed (",Math.round(y.totalPages/604*100),"%)"]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>F(!1),className:"w-full bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Close"})})]})}),ae&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Daily Goal"}),s.jsx("button",{onClick:()=>Z(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Pages Goal"}),s.jsx("input",{type:"number",value:t,onChange:q=>r(Number(q.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1",max:"50"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 1-5 pages per day for consistent progress"})]}),s.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:s.jsxs("div",{className:"text-sm text-emerald-800 dark:text-emerald-200",children:[s.jsx("strong",{children:"At this pace:"})," You'll complete the Quran in approximately"," ",s.jsxs("span",{className:"font-bold",children:[Math.ceil(604/t)," days"]})]})})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>ge(t),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Save Goal"}),s.jsx("button",{onClick:()=>Z(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},_p=()=>{const{user:e}=Ke(),[t,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState({name:"",type:"good",category:"health"});b.useEffect(()=>{e&&o()},[e]);const o=async()=>{if(!e)return;const{data:g,error:v}=await E.from("habits").select("*").eq("user_id",e.id);if(g){const T=g.map(N=>({...N,completedToday:d(N.last_completed),badHabitFreeFor:N.type==="bad"?c(N.last_completed):void 0,color:u(N.category)}));r(T)}},d=g=>{if(!g)return!1;const v=new Date().toISOString().split("T")[0];return g===v},c=g=>{if(!g)return 0;const v=new Date(g),N=new Date().getTime()-v.getTime(),P=Math.floor(N/(1e3*60*60*24));return Math.max(0,P)},u=g=>{switch(g){case"health":return"bg-blue-500";case"spiritual":return"bg-emerald-500";case"productivity":return"bg-purple-500";case"learning":return"bg-orange-500";default:return"bg-gray-500"}},h=async(g,v)=>{if(!e)return;const T=new Date().toISOString().split("T")[0],N=t.find(Z=>Z.id===g);if(!N)return;let P=N.streak,F=T;v==="good"?N.completedToday?(P=Math.max(0,N.streak-1),F=N.lastCompleted||""):P=N.streak+1:N.completedToday||(P=0);const{error:ae}=await E.from("habits").update({streak:P,last_completed:F}).eq("id",g);ae||r(Z=>Z.map(O=>O.id===g?{...O,completedToday:!O.completedToday,streak:P,lastCompleted:F,badHabitFreeFor:v==="bad"?c(F):O.badHabitFreeFor}:O))},f=async()=>{if(!e||!i.name.trim())return;const{data:g,error:v}=await E.from("habits").insert({user_id:e.id,name:i.name,type:i.type,category:i.category,streak:0,last_completed:null}).select().single();g&&!v&&(r(T=>[...T,{...g,completedToday:!1,color:u(g.category),badHabitFreeFor:i.type==="bad"?0:void 0}]),l({name:"",type:"good",category:"health"}),n(!1))},p=t.filter(g=>g.type==="good"),w=t.filter(g=>g.type==="bad"),x=p.filter(g=>g.completedToday).length,_=p.length,y=_>0?x/_*100:0,m={health:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",spiritual:"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300",productivity:"bg-purple-100 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300",learning:"bg-orange-100 dark:bg-orange-900/20 text-orange-800 dark:text-orange-300"};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Habit Tracker"}),s.jsxs("button",{onClick:()=>n(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[s.jsx(as,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Habit"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Today's Progress"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gt,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-medium",children:[x,"/",_]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-emerald-100 text-sm mb-2",children:[s.jsx("span",{children:"Good habits completed"}),s.jsxs("span",{children:[Math.round(y),"%"]})]}),s.jsx("div",{className:"w-full bg-emerald-400 rounded-full h-2",children:s.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${y}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:p.length>0?Math.max(...p.map(g=>g.streak)):0}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Best Streak"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.filter(g=>g.streak>0).length}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Active Habits"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:w.length}),s.jsx("div",{className:"text-emerald-100 text-sm",children:"Bad Habits"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Good Habits"}),s.jsx("div",{className:"space-y-3",children:p.map(g=>s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${g.completedToday?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${g.completedToday?"bg-emerald-500 text-white":`${g.color} text-white`}`,children:g.completedToday?s.jsx(bo,{className:"w-5 h-5"}):s.jsx(gt,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:g.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m[g.category]}`,children:g.category})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(kd,{className:"w-4 h-4"}),s.jsxs("span",{children:[g.streak," day streak"]})]})]})]}),s.jsx("button",{onClick:()=>h(g.id,"good"),className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${g.completedToday?"bg-emerald-500 text-white":"border-2 border-gray-300 dark:border-gray-600 hover:border-emerald-500 dark:hover:border-emerald-400"}`,children:g.completedToday&&s.jsx(bo,{className:"w-4 h-4"})})]},g.id))})]}),w.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Bad Habits to Overcome"}),s.jsx("div",{className:"space-y-3",children:w.map(g=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:s.jsx(vo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:g.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${m[g.category]}`,children:g.category})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(os,{className:"w-4 h-4"}),s.jsxs("span",{children:[g.badHabitFreeFor||0," days free from this habit"]})]})]})]}),s.jsx("button",{onClick:()=>h(g.id,"bad"),className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Did it today"})]},g.id))})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Habit"}),s.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Name"}),s.jsx("input",{type:"text",value:i.name,onChange:g=>l({...i,name:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Meditate for 10 minutes"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Habit Type"}),s.jsxs("select",{value:i.type,onChange:g=>l({...i,type:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"good",children:"Good Habit (to build)"}),s.jsx("option",{value:"bad",children:"Bad Habit (to overcome)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),s.jsxs("select",{value:i.category,onChange:g=>l({...i,category:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"health",children:"Health"}),s.jsx("option",{value:"spiritual",children:"Spiritual"}),s.jsx("option",{value:"productivity",children:"Productivity"}),s.jsx("option",{value:"learning",children:"Learning"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:f,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:"Add Habit"})]})]})]})})]})},Sp=()=>{const{user:e}=Ke(),[t,r]=b.useState([]),[a,n]=b.useState(!1),[i,l]=b.useState(!1),[o,d]=b.useState(!1),[c,u]=b.useState(null),[h,f]=b.useState(!1),[p,w]=b.useState(!1),[x,_]=b.useState({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),[y,m]=b.useState({hours:1,notes:""});So.useEffect(()=>{e&&g()},[e]);const g=async()=>{if(!e)return;const{data:k}=await E.from("exams").select("*").eq("user_id",e.id).order("date",{ascending:!0});k&&r(k)},v=async()=>{if(!e||!x.subject||!x.date||h){console.log("Validation failed or already adding:",{user:!!e,subject:x.subject,date:x.date,isAdding:h});return}f(!0);try{const k={user_id:e.id,subject:x.subject,date:x.date,time:x.time||null,location:x.location||null,type:x.type,target_hours:x.targetHours,study_hours:0};x.notes&&x.notes.trim()&&(k.notes=x.notes.trim()),console.log("Adding exam:",k);const{data:z,error:A}=await E.from("exams").insert(k).select();if(A){console.error("Error adding exam:",A),alert("Failed to add exam: "+A.message);return}console.log("Exam added successfully:",z),n(!1),_({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await g()}catch(k){console.error("Unexpected error:",k),alert("An unexpected error occurred while adding the exam.")}finally{f(!1)}},T=async()=>{if(!(!e||!c||!x.subject||!x.date||p)){w(!0);try{const k={subject:x.subject,date:x.date,time:x.time||null,location:x.location||null,type:x.type,target_hours:x.targetHours};x.notes&&x.notes.trim()&&(k.notes=x.notes.trim());const{error:z}=await E.from("exams").update(k).eq("id",c.id).eq("user_id",e.id);if(z){console.error("Error updating exam:",z),alert("Failed to update exam: "+z.message);return}l(!1),u(null),_({subject:"",date:"",time:"",location:"",type:"class_test",targetHours:10,notes:""}),await g()}catch(k){console.error("Unexpected error:",k),alert("An unexpected error occurred while updating the exam.")}finally{w(!1)}}},N=async k=>{if(!e)return;const{error:z}=await E.from("exams").delete().eq("id",k).eq("user_id",e.id);z||await g()},P=async()=>{if(!e||!c||y.hours<=0)return;const k=c.study_hours+y.hours,{error:z}=await E.from("exams").update({study_hours:k}).eq("id",c.id).eq("user_id",e.id);z||(d(!1),u(null),m({hours:1,notes:""}),await g())},F=k=>{u(k),_({subject:k.subject,date:k.date,time:k.time,location:k.location,type:k.type,targetHours:k.target_hours,notes:k.notes||""}),l(!0)},ae=k=>{u(k),d(!0)},Z=k=>{const z=new Date(k),A=new Date,I=z.getTime()-A.getTime(),G=Math.ceil(I/(1e3*60*60*24));return Math.max(0,G)},O=k=>{switch(k){case"final":return"bg-red-100 text-red-800";case"class_test":return"bg-orange-100 text-orange-800";case"quiz":return"bg-blue-100 text-blue-800";case"assignment":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},se=k=>{switch(k){case"final":return"Final";case"class_test":return"Class Test";case"quiz":return"Quiz";case"assignment":return"Assignment";default:return k}},D=k=>k<=3?"text-red-600 dark:text-red-400":k<=7?"text-orange-600 dark:text-orange-400":k<=14?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",B=t.sort((k,z)=>new Date(k.date).getTime()-new Date(z.date).getTime())[0],J=B?Z(B.date):0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Exam Countdown"}),s.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(as,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Exam"})]})]}),B&&s.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-600 rounded-xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Next Exam"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(os,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:B.subject})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold",children:J}),s.jsx("div",{className:"text-red-100 text-sm",children:"Days Left"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold",children:[B.study_hours,"h"]}),s.jsx("div",{className:"text-red-100 text-sm",children:"Hours Studied"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold",children:[Math.round(B.study_hours/B.target_hours*100),"%"]}),s.jsx("div",{className:"text-red-100 text-sm",children:"Progress"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upcoming Exams"}),s.jsxs("div",{className:"space-y-4",children:[t.map(k=>{const z=Z(k.date),A=k.study_hours/k.target_hours*100;return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(ze,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:k.subject}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(er,{className:"w-4 h-4"}),s.jsxs("span",{children:[k.time,"  ",k.location]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-2xl font-bold ${D(z)}`,children:z}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"days left"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${O(k.type)}`,children:se(k.type)}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[k.date,"  ",k.time]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-1",children:[s.jsx("span",{children:"Study Progress"}),s.jsxs("span",{children:[k.study_hours.toFixed(1),"h / ",k.target_hours,"h"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${A>=100?"bg-green-500":A>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(A,100)}%`}})})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[Math.round(A),"% complete"]}),s.jsxs("span",{children:[Math.max(0,k.target_hours-k.study_hours).toFixed(1),"h remaining"]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("button",{onClick:()=>ae(k),className:"px-3 py-1 bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm hover:bg-emerald-200 dark:hover:bg-emerald-900/30 transition-colors",children:"Log Study"}),s.jsx("button",{onClick:()=>F(k),className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-sm hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:s.jsx(Ps,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>N(k.id),className:"px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:s.jsx(Ca,{className:"w-3 h-3"})})]})]},k.id)}),t.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ze,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No exams scheduled yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add your first exam to get started!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recommended Study Schedule"}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,3).map(k=>{const z=Z(k.date),A=k.target_hours-k.study_hours,I=z>0?Math.ceil(A/z):0;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:s.jsx(gt,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:k.subject}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A>0?`${A}h remaining`:"Study complete!"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:I>0?`${I.toFixed(1)}h/day`:"Complete!"}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[z," days left"]})]})]},k.id)}),t.length===0&&s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:s.jsx("p",{className:"text-sm",children:"No study schedule available"})})]})]}),t.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Exam Statistics"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Exams"})]}),s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t.filter(k=>Z(k.date)<=7).length}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:Math.round(t.reduce((k,z)=>k+z.study_hours/z.target_hours*100,0)/t.length)}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Progress"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.reduce((k,z)=>k+z.study_hours,0).toFixed(1)}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Hours Studied"})]})]})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Add New Exam"}),s.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:x.subject,onChange:k=>_({...x,subject:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:x.date,onChange:k=>_({...x,date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),s.jsx("input",{type:"time",value:x.time,onChange:k=>_({...x,time:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),s.jsx("input",{type:"text",value:x.location,onChange:k=>_({...x,location:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),s.jsxs("select",{value:x.type,onChange:k=>_({...x,type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"class_test",children:"Class Test"}),s.jsx("option",{value:"final",children:"Final"}),s.jsx("option",{value:"quiz",children:"Quiz"}),s.jsx("option",{value:"assignment",children:"Assignment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),s.jsx("input",{type:"number",value:x.targetHours,onChange:k=>_({...x,targetHours:Number(k.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:x.notes,onChange:k=>_({...x,notes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:v,disabled:h,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${h?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:h?"Adding...":"Add Exam"}),s.jsx("button",{onClick:()=>n(!1),disabled:h,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${h?"bg-gray-300 cursor-not-allowed text-gray-500":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200"}`,children:"Cancel"})]})]})}),i&&c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Exam"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Subject ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:x.subject,onChange:k=>_({...x,subject:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Mathematics"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:x.date,onChange:k=>_({...x,date:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time (Optional)"}),s.jsx("input",{type:"time",value:x.time,onChange:k=>_({...x,time:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location (Optional)"}),s.jsx("input",{type:"text",value:x.location,onChange:k=>_({...x,location:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"e.g., Room 101"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),s.jsxs("select",{value:x.type,onChange:k=>_({...x,type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"class_test",children:"Class Test"}),s.jsx("option",{value:"final",children:"Final"}),s.jsx("option",{value:"quiz",children:"Quiz"}),s.jsx("option",{value:"assignment",children:"Assignment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Hours"}),s.jsx("input",{type:"number",value:x.targetHours,onChange:k=>_({...x,targetHours:Number(k.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"1"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:x.notes,onChange:k=>_({...x,notes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"Any additional notes..."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:T,disabled:p,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:p?"Updating...":"Update Exam"}),s.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),o&&c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Study Session"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:c.subject}),s.jsx("br",{}),"Current progress: ",c.study_hours,"h / ",c.target_hours,"h"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hours Studied"}),s.jsx("input",{type:"number",value:y.hours,onChange:k=>m({...y,hours:Number(k.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",min:"0.5",step:"0.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:y.notes,onChange:k=>m({...y,notes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"What did you study today?"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:P,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Log Session"}),s.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})})]})},Cp=()=>{var se;const{user:e}=Ke(),[t,r]=b.useState([]),[a,n]=b.useState(8),[i,l]=b.useState(!1),[o,d]=b.useState(!1),[c,u]=b.useState(!1),[h,f]=b.useState(!1),[p,w]=b.useState(null),[x,_]=b.useState({date:"",bedtime:"",wakeTime:"",quality:3,notes:""});b.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(!e)return;const{data:D}=await E.from("sleep_records").select("*").eq("user_id",e.id).order("date",{ascending:!1}).limit(30);D&&r(D);const{data:B}=await E.from("profiles").select("sleep_goal").eq("user_id",e.id).maybeSingle();B!=null&&B.sleep_goal?n(B.sleep_goal):console.log("No profile found, using default sleep goal of 8 hours")},m=async()=>{if(!e||!x.date||!x.bedtime||!x.wakeTime)return;u(!0);const D=new Date(`2000-01-01T${x.bedtime}`);let J=(new Date(`2000-01-01T${x.wakeTime}`).getTime()-D.getTime())/(1e3*60*60);J<0&&(J+=24);const{error:k}=await E.from("sleep_records").insert({user_id:e.id,date:x.date,bedtime:x.bedtime,wake_time:x.wakeTime,duration:Math.round(J*10)/10,quality:x.quality,notes:x.notes||null});k||(l(!1),_({date:"",bedtime:"",wakeTime:"",quality:3,notes:""}),await y()),u(!1)},g=(D,B)=>{w({message:D,type:B}),setTimeout(()=>w(null),3e3)},v=async D=>{var B;if(e){console.log("Saving sleep goal:",D,"for user:",e.id),console.log("User object:",e),f(!0);try{const{data:J,error:k}=await E.from("profiles").select("id, sleep_goal").eq("user_id",e.id).maybeSingle();if(console.log("Profile check result:",{existingProfile:J,checkError:k}),k){console.error("Error checking profile:",k),g(`Error checking profile: ${k.message}`,"error");return}console.log("Existing profile:",J);let z;if(J){console.log("Updating existing profile with ID:",J.id);const A={sleep_goal:D,updated_at:new Date().toISOString()};console.log("Update data:",A);const{error:I}=await E.from("profiles").update(A).eq("user_id",e.id);z=I,console.log("Update result:",{error:I})}else{console.log("Creating new profile");const A={user_id:e.id,sleep_goal:D,full_name:((B=e.user_metadata)==null?void 0:B.full_name)||"",email:e.email||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Insert data:",A);const{error:I}=await E.from("profiles").insert(A);z=I,console.log("Insert result:",{error:I})}z?(console.error("Database error details:",{message:z.message,details:z.details,hint:z.hint,code:z.code}),g(`Error updating sleep goal: ${z.message}`,"error")):(console.log("Sleep goal saved successfully"),n(D),d(!1),g("Sleep goal updated successfully!","success"))}catch(J){console.error("Catch block error:",J),g("Error updating sleep goal. Please try again.","error")}finally{f(!1)}}},T=()=>{if(console.log("getAverageStats called with:",{sleepRecordsLength:t.length,sleepGoal:a,sleepRecords:t.map(he=>({date:he.date,duration:he.duration,quality:he.quality}))}),t.length===0)return{avgDuration:0,avgQuality:0,goalAchieved:0,totalNights:0,bestNight:null,worstNight:null};const D=t.reduce((he,q)=>(he[q.date]||(he[q.date]={totalDuration:0,sessions:[],avgQuality:0}),he[q.date].totalDuration+=q.duration,he[q.date].sessions.push(q),he),{});Object.keys(D).forEach(he=>{const q=D[he].sessions,R=q.reduce((j,U)=>j+U.quality,0);D[he].avgQuality=R/q.length});const B=Object.values(D),J=B.reduce((he,q)=>he+q.totalDuration,0),k=Math.round(J/B.length*10)/10,z=B.reduce((he,q)=>he+q.avgQuality,0)/B.length,I=B.filter(he=>{const q=he.totalDuration>=a;return console.log(`Day total: ${he.totalDuration}h >= ${a}h = ${q}`),q}).length,G=B.reduce((he,q)=>q.avgQuality>he.avgQuality?q:he),ce=B.reduce((he,q)=>q.avgQuality<he.avgQuality?q:he),ge={avgDuration:k,avgQuality:Math.round(z*10)/10,goalAchieved:I,totalNights:B.length,bestNight:G,worstNight:ce};return console.log("getAverageStats result:",ge),ge},N=D=>D>=4?"bg-green-100 dark:bg-green-900/20":D>=3?"bg-yellow-100 dark:bg-yellow-900/20":"bg-red-100 dark:bg-red-900/20",P=()=>{if(!t[0])return null;const J=new Date().getHours();return J>=22||J<=6?{status:"sleep",message:"Sleep time"}:{status:"awake",message:"Awake time"}},F=()=>{if(console.log("getSleepTrend called with sleepRecords length:",t.length),t.length<7)return console.log("Not enough records for trend analysis (need at least 7)"),"stable";const D=t.reduce((G,ce)=>(G[ce.date]||(G[ce.date]={totalDuration:0}),G[ce.date].totalDuration+=ce.duration,G),{}),B=Object.entries(D).map(([G,ce])=>({date:G,totalDuration:ce.totalDuration})).sort((G,ce)=>new Date(ce.date).getTime()-new Date(G.date).getTime());if(console.log("Daily records sorted:",B),B.length<7)return console.log("Not enough days for trend analysis (need at least 7 days)"),"stable";const J=B.slice(0,7),k=B.slice(7,14);if(console.log("Recent 7 days:",J),console.log("Previous 7 days:",k),J.length===0||k.length===0)return console.log("Not enough data for comparison"),"stable";const z=J.reduce((G,ce)=>G+ce.totalDuration,0)/J.length,A=k.reduce((G,ce)=>G+ce.totalDuration,0)/k.length;console.log("Recent average:",z,"Previous average:",A);const I=z-A;return console.log("Difference:",I),I>.5?(console.log("Trend: Improving"),"improving"):I<-.5?(console.log("Trend: Declining"),"declining"):(console.log("Trend: Stable"),"stable")},ae=T(),Z=P(),O=F();return b.useEffect(()=>{const D=new Date().toISOString().split("T")[0];_(B=>({...B,date:D}))},[]),b.useEffect(()=>{console.log("Stats updated:",{sleepGoal:a,stats:ae,sleepRecordsCount:t.length})},[a,ae,t.length]),s.jsxs("div",{className:"space-y-6",children:[p&&s.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${p.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-shrink-0",children:p.type==="success"?s.jsx(Mr,{className:"w-5 h-5"}):s.jsx(Me,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"font-medium",children:p.message})}),s.jsx("button",{onClick:()=>w(null),className:"flex-shrink-0 ml-2 hover:opacity-75",children:s.jsx(Me,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Sleep Tracker"}),s.jsxs("button",{onClick:()=>l(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(as,{className:"w-4 h-4"}),s.jsx("span",{children:"Log Sleep"})]})]}),Z&&s.jsxs("div",{className:`rounded-xl p-6 text-white ${Z.status==="sleep"?"bg-gradient-to-r from-indigo-500 to-purple-600":"bg-gradient-to-r from-orange-500 to-yellow-600"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Current Status"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[Z.status==="sleep"?s.jsx(_t,{className:"w-5 h-5"}):s.jsx(jd,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:Z.message})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[((se=t[0])==null?void 0:se.duration)||0,"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Last Night"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[a,"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Daily Goal"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[ae.avgDuration.toFixed(1),"h"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"7-Day Average"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[ae.avgQuality,"/5"]}),s.jsx("div",{className:"text-indigo-100 text-sm",children:"Avg Quality"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Goal & Trends"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Sleep Goal (hours)"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[a,"h"]}),s.jsxs("button",{onClick:()=>d(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(gt,{className:"w-4 h-4"}),s.jsx("span",{children:"Set Goal"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Goal Achievement"}),s.jsxs("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:[ae.totalNights>0?Math.round(ae.goalAchieved/ae.totalNights*100):0,"%"]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ae.goalAchieved," of ",ae.totalNights," nights"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Trend"}),s.jsx("div",{className:`text-2xl font-bold ${O==="improving"?"text-green-600 dark:text-green-400":O==="declining"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:O.charAt(0).toUpperCase()+O.slice(1)}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.length>=14?"Last 7 days vs previous week":t.length>=7?"Need more data for trend":"Log more sleep to see trend"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Overview"}),s.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[(()=>{const D=t.reduce((J,k)=>(J[k.date]||(J[k.date]={totalDuration:0,sessions:[],avgQuality:0}),J[k.date].totalDuration+=k.duration,J[k.date].sessions.push(k),J),{});return Object.keys(D).forEach(J=>{const k=D[J].sessions,z=k.reduce((A,I)=>A+I.quality,0);D[J].avgQuality=z/k.length}),Object.entries(D).sort((J,k)=>new Date(k[0]).getTime()-new Date(J[0]).getTime()).slice(0,7).map(([J,k])=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:new Date(J).toLocaleDateString("en-US",{weekday:"short"})}),s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white",children:[k.totalDuration.toFixed(1),"h",k.sessions.length>1&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",k.sessions.length," sessions)"]})]}),s.jsx("div",{className:"flex justify-center mt-1",children:[...Array(5)].map((z,A)=>s.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${A<Math.round(k.avgQuality)?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},A))})]})]},J))})(),t.length===0&&s.jsxs("div",{className:"col-span-7 text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(_t,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No sleep records yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Average Duration"}),s.jsx(er,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-2",children:[ae.avgDuration,"h"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last 7 days"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Sleep Quality"}),s.jsx(wo,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:[ae.avgQuality,"/5"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average rating"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Consistency"}),s.jsx(gt,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})]}),s.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:[ae.totalNights>0?Math.round(ae.goalAchieved/ae.totalNights*100):0,"%"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Goal achievement"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Sleep Records"}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(D=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N(D.quality)}`,children:s.jsx(_t,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:D.date}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[D.bedtime," - ",D.wakeTime]}),D.notes&&s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D.notes})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:[D.duration.toFixed(1),"h"]}),s.jsx("div",{className:"flex justify-end",children:[...Array(5)].map((B,J)=>s.jsx("div",{className:`w-2 h-2 rounded-full mx-0.5 ${J<D.quality?"bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},J))})]})]},D.id)),t.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(_t,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No sleep records yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Log your first sleep to get started!"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sleep Tips"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900/20 rounded-full flex items-center justify-center",children:s.jsx(Jh,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Consistent Schedule"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Go to bed and wake up at the same time every day"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:s.jsx(_t,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Sleep Environment"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Keep your bedroom cool, dark, and quiet"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/20 rounded-full flex items-center justify-center",children:s.jsx(Kh,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Morning Light"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get sunlight exposure in the morning"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:s.jsx(er,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Pre-Sleep Routine"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Develop a relaxing bedtime routine"})]})]})]})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Log Sleep"}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:x.date,onChange:D=>_({...x,date:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Bedtime ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"time",value:x.bedtime,onChange:D=>_({...x,bedtime:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Wake Time ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"time",value:x.wakeTime,onChange:D=>_({...x,wakeTime:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Quality"}),s.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(D=>s.jsx("button",{onClick:()=>_({...x,quality:D}),className:`p-2 rounded-lg transition-colors ${x.quality>=D?"text-yellow-500 bg-yellow-100 dark:bg-yellow-900/20":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:s.jsx(wo,{className:"w-5 h-5"})},D))}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[x.quality===1&&"Very Poor",x.quality===2&&"Poor",x.quality===3&&"Fair",x.quality===4&&"Good",x.quality===5&&"Excellent"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:x.notes,onChange:D=>_({...x,notes:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",rows:3,placeholder:"How did you sleep? Any factors that affected your sleep?"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:m,disabled:c||!x.date||!x.bedtime||!x.wakeTime,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:c?"Logging...":"Log Sleep"}),s.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Set Sleep Goal"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Set your daily sleep goal to help maintain a healthy sleep schedule and track your progress."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sleep Goal (hours per night):"}),s.jsx("input",{type:"number",value:a,onChange:D=>n(Number(D.target.value)),min:"6",max:"12",step:"0.5",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Enter sleep goal"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Recommended: 7-9 hours for adults"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:()=>v(a),disabled:h||a<6||a>12,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":"Save Goal"})]})]})})]})},Ep=({preloadedData:e={}})=>{const{user:t}=Ke(),[r,a]=b.useState([]),[n,i]=b.useState({}),[l,o]=b.useState(!0),[d,c]=b.useState("all"),[u,h]=b.useState(!1),f=[{id:"all",label:"All",icon:xl},{id:"study",label:"Study",icon:ze},{id:"prayer",label:"Prayer",icon:Zt},{id:"quran",label:"Quran",icon:ss},{id:"habits",label:"Habits",icon:gt},{id:"attendance",label:"Classes",icon:hp},{id:"sleep",label:"Sleep",icon:_t},{id:"general",label:"General",icon:rs}],p=[{id:"first-study",title:"First Steps",description:"Complete your first study session",icon:ze,category:"study",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"study-streak-7",title:"Week Warrior",description:"Study for 7 consecutive days",icon:kd,category:"study",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:50},{id:"study-100-hours",title:"Century Scholar",description:"Complete 100 hours of study",icon:Xy,category:"study",unlocked:!1,progress:0,maxProgress:100,rarity:"epic",points:200},{id:"first-prayer",title:"Spiritual Awakening",description:"Log your first prayer",icon:Zt,category:"prayer",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:10},{id:"prayer-streak-30",title:"Faithful Servant",description:"Pray consistently for 30 days",icon:wo,category:"prayer",unlocked:!1,progress:0,maxProgress:30,rarity:"epic",points:150},{id:"first-quran",title:"Divine Connection",description:"Read your first page of Quran",icon:ss,category:"quran",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:15},{id:"quran-100-pages",title:"Quran Explorer",description:"Read 100 pages of Quran",icon:ip,category:"quran",unlocked:!1,progress:0,maxProgress:100,rarity:"rare",points:100},{id:"first-login",title:"Welcome Aboard",description:"Complete your first login",icon:Mr,category:"general",unlocked:!1,progress:0,maxProgress:1,rarity:"common",points:5},{id:"perfect-week",title:"Perfect Week",description:"Complete all daily goals for 7 days",icon:gt,category:"general",unlocked:!1,progress:0,maxProgress:7,rarity:"rare",points:75}],w=()=>{if(!e){i({totalStudyHours:0,totalPrayersCompleted:0,totalQuranPages:0,totalHabitsCompleted:0,totalSleepHours:0,attendanceRate:0,streakDays:0});return}const{studySessions:v=[],prayerRecords:T=[],quranSessions:N=[],habitRecords:P=[],attendanceRecords:F=[],sleepRecords:ae=[]}=e,Z=v.reduce((I,G)=>I+(G.duration||0),0),O=T.length,se=N.reduce((I,G)=>I+(G.pages_read||0),0),D=P.length,B=ae.reduce((I,G)=>I+(G.duration||0),0),J=F.filter(I=>I.status==="present").length,k=F.filter(I=>I.status!=="cancelled").length,z=k>0?Math.round(J/k*100):0,A=Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24)));i({totalStudyHours:Z,totalPrayersCompleted:O,totalQuranPages:se,totalHabitsCompleted:D,totalSleepHours:B,attendanceRate:z,streakDays:A})},x=()=>{const v=p.map(T=>{let N=0,P=!1;switch(T.id){case"first-study":N=n.totalStudyHours>0?1:0,P=n.totalStudyHours>0;break;case"study-streak-7":N=Math.min(n.streakDays,7),P=n.streakDays>=7;break;case"study-100-hours":N=Math.min(n.totalStudyHours,100),P=n.totalStudyHours>=100;break;case"first-prayer":N=n.totalPrayersCompleted>0?1:0,P=n.totalPrayersCompleted>0;break;case"prayer-streak-30":N=Math.min(n.streakDays,30),P=n.streakDays>=30;break;case"first-quran":N=n.totalQuranPages>0?1:0,P=n.totalQuranPages>0;break;case"quran-100-pages":N=Math.min(n.totalQuranPages,100),P=n.totalQuranPages>=100;break;case"first-login":N=1,P=!0;break;case"perfect-week":N=Math.min(n.streakDays,7),P=n.streakDays>=7;break;default:N=0,P=!1}return{...T,progress:N,unlocked:P,unlockedDate:P&&!T.unlockedDate?new Date().toISOString():T.unlockedDate}});a(v)};b.useEffect(()=>{w()},[e]),b.useEffect(()=>{x()},[n]),b.useEffect(()=>{o(!1)},[]);const _=v=>{switch(v){case"common":return"text-gray-600 dark:text-gray-400";case"rare":return"text-blue-600 dark:text-blue-400";case"epic":return"text-purple-600 dark:text-purple-400";case"legendary":return"text-yellow-600 dark:text-yellow-400";default:return"text-gray-600 dark:text-gray-400"}},y=r.filter(v=>d==="all"?!0:v.category===d),m=r.filter(v=>v.unlocked).length,g=r.filter(v=>v.unlocked).reduce((v,T)=>v+T.points,0);return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Achievements"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xl,{className:"w-5 h-5 text-yellow-500"}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[m,"/",r.length," Unlocked"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:m}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Achievements"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Points"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Math.round(m/r.length*100),"%"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completion"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:n.streakDays}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Day Streak"})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(v=>{const T=v.icon;return s.jsxs("button",{onClick:()=>c(v.id),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${d===v.id?"bg-emerald-100 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(T,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:v.label})]},v.id)})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(v=>{const T=v.icon,N=v.progress/v.maxProgress*100;return s.jsxs("div",{className:`p-6 rounded-xl border-2 transition-all ${v.unlocked?"bg-white dark:bg-gray-800 border-emerald-200 dark:border-emerald-700 shadow-lg":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg ${v.unlocked?"bg-emerald-100 dark:bg-emerald-900/20":"bg-gray-100 dark:bg-gray-600"}`,children:s.jsx(T,{className:`w-6 h-6 ${v.unlocked?"text-emerald-600 dark:text-emerald-400":"text-gray-400 dark:text-gray-500"}`})}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-medium ${_(v.rarity)}`,children:v.rarity.toUpperCase()}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[v.points," pts"]})]})]}),s.jsx("h3",{className:`font-semibold mb-2 ${v.unlocked?"text-gray-800 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:v.title}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:v.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[v.progress,"/",v.maxProgress]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v.unlocked?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`,style:{width:`${Math.min(N,100)}%`}})})]}),v.unlocked&&v.unlockedDate&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Unlocked ",new Date(v.unlockedDate).toLocaleDateString()]})})]},v.id)})}),y.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx(xl,{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),s.jsx("p",{className:"text-lg font-medium",children:"No achievements found"}),s.jsx("p",{className:"text-sm mt-1",children:"Try selecting a different category"})]})]})},Tp=()=>{var ne;const{user:e,signOut:t}=Ke(),[r,a]=b.useState(!1),[n,i]=b.useState(!1),[l,o]=b.useState(!1),[d,c]=b.useState(""),[u,h]=b.useState(!1),[f,p]=b.useState(!1),[w,x]=b.useState({totalStudyHours:0,totalPrayersCompleted:0,totalQuranPages:0,streakDays:0,achievementsUnlocked:0,attendanceRate:0,totalSleepHours:0,averageSleepQuality:0,totalHabitsCompleted:0,totalExams:0,memberSince:"",lastActive:""}),[_,y]=b.useState([]),[m,g]=b.useState({name:((ne=e==null?void 0:e.user_metadata)==null?void 0:ne.full_name)||"",email:(e==null?void 0:e.email)||"",joinDate:"2024-01-01",university:"",major:"",year:"1st",location:"",timezone:"UTC+2",dailyStudyGoal:6,sleepGoal:8,weeklyQuranGoal:14,phone:"",website:"",bio:""}),[v,T]=b.useState(!1),[N,P]=b.useState("1w"),[F,ae]=b.useState([]),[Z,O]=b.useState([]),[se,D]=b.useState([]),[B,J]=b.useState([]),[k,z]=b.useState([]),[A,I]=b.useState(!1),ce=(()=>{const $=new Date;let W=7;return N==="1m"&&(W=30),N==="3m"&&(W=90),N==="1y"&&(W=365),N==="prev"&&(W=365),Array.from({length:W},(ee,X)=>{const ue=new Date($);return ue.setDate($.getDate()-(W-1-X)),{date:ue.toISOString().split("T")[0],day:ue.toLocaleDateString(void 0,{weekday:"short"}),label:ue.toLocaleDateString(void 0,{month:"short",day:"numeric"})+" '"+ue.getFullYear().toString().slice(-2)}})})();b.useEffect(()=>{if(!e||!v)return;I(!0),(async()=>{const W=ce[0].date,ee=ce[ce.length-1].date,{data:X}=await E.from("sleep_records").select("date, duration").eq("user_id",e.id).gte("date",W).lte("date",ee);ae(X||[]);const{data:ue}=await E.from("study_sessions").select("date, duration").eq("user_id",e.id).gte("date",W).lte("date",ee);O(ue||[]);const{data:Ae}=await E.from("prayer_records").select("date").eq("user_id",e.id).gte("date",W).lte("date",ee);D(Ae||[]);const{data:Fe}=await E.from("class_schedules").select("time, end_time, subject, day").eq("user_id",e.id);J(Fe||[]);const{data:Je}=await E.from("attendance_records").select("date, subject, status").eq("user_id",e.id).gte("date",W).lte("date",ee);z(Je||[]),I(!1)})()},[e,N,v]),b.useEffect(()=>{e&&(ge(),he(),q())},[e]);const ge=async()=>{var W;if(!e)return;const{data:$}=await E.from("profiles").select("*").eq("id",e.id).maybeSingle();$&&g({name:$.full_name||"",email:$.email||"",joinDate:((W=$.created_at)==null?void 0:W.split("T")[0])||"2024-01-01",university:$.institution||"",major:$.department||"",year:$.academic_year||"1st",location:$.address||"",timezone:"UTC+2",dailyStudyGoal:6,sleepGoal:8,weeklyQuranGoal:14,phone:$.phone||"",website:"",bio:""})},he=async()=>{if(e)try{const{data:$}=await E.from("study_sessions").select("*").eq("user_id",e.id),{data:W}=await E.from("prayer_records").select("*").eq("user_id",e.id),{data:ee}=await E.from("quran_sessions").select("*").eq("user_id",e.id),{data:X}=await E.from("attendance_records").select("*").eq("user_id",e.id),{data:ue}=await E.from("sleep_records").select("*").eq("user_id",e.id),{data:Ae}=await E.from("habit_records").select("*").eq("user_id",e.id),{data:Fe}=await E.from("exams").select("*").eq("user_id",e.id),Je=Math.round((($==null?void 0:$.reduce((Xe,st)=>Xe+(st.duration||0),0))||0)*10)/10,xt=(W==null?void 0:W.length)||0,We=(ee==null?void 0:ee.reduce((Xe,st)=>Xe+(st.pages_read||0),0))||0,dt=Math.round(((ue==null?void 0:ue.reduce((Xe,st)=>Xe+(st.duration||0),0))||0)*10)/10,be=ue&&ue.length>0?Math.round(ue.reduce((Xe,st)=>Xe+(st.quality||0),0)/ue.length*10)/10:0,Ye=(Ae==null?void 0:Ae.length)||0,rt=(Fe==null?void 0:Fe.length)||0,Dt=(X==null?void 0:X.filter(Xe=>Xe.status==="present").length)||0,ds=(X==null?void 0:X.length)||0,Js=ds>0?Math.round(Dt/ds*100):0,Ys=Math.min(30,Math.floor((Date.now()-new Date("2024-01-01").getTime())/(1e3*60*60*24))),Ur=Math.min(8,Math.floor(Je/10)+Math.floor(xt/10));x({totalStudyHours:Je,totalPrayersCompleted:xt,totalQuranPages:We,streakDays:Ys,achievementsUnlocked:Ur,attendanceRate:Js,totalSleepHours:dt,averageSleepQuality:be,totalHabitsCompleted:Ye,totalExams:rt,memberSince:m.joinDate,lastActive:new Date().toISOString().split("T")[0]})}catch($){console.error("Error loading user stats:",$)}},q=async()=>{if(e)try{const $=[],{data:W}=await E.from("study_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);W==null||W.forEach(ue=>{const Ae=ue.duration?ue.duration<.1?ue.duration.toFixed(4):ue.duration.toFixed(2):"0";$.push({id:ue.id,type:"study",description:`Studied ${ue.subject} for ${Ae}h`,time:new Date(ue.created_at).toLocaleDateString(),value:`${Ae}h`})});const{data:ee}=await E.from("prayer_records").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);ee==null||ee.forEach(ue=>{$.push({id:ue.id,type:"prayer",description:`Completed ${ue.prayer_name}`,time:new Date(ue.created_at).toLocaleDateString(),value:ue.prayer_name})});const{data:X}=await E.from("quran_sessions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);X==null||X.forEach(ue=>{$.push({id:ue.id,type:"quran",description:`Read ${ue.pages_read} pages of Quran`,time:new Date(ue.created_at).toLocaleDateString(),value:`${ue.pages_read} pages`})}),$.sort((ue,Ae)=>new Date(Ae.time).getTime()-new Date(ue.time).getTime()),y($.slice(0,10))}catch($){console.error("Error loading recent activities:",$)}},R=async()=>{if(e){p(!0);try{const{error:$}=await E.from("profiles").upsert({id:e.id,full_name:m.name,email:m.email,institution:m.university,department:m.major,academic_year:m.year,address:m.location,phone:m.phone,updated_at:new Date().toISOString()});$?(console.error("Error saving profile:",$),alert("Error saving profile. Please try again.")):(o(!1),await ge(),alert("Profile updated successfully!"))}catch($){console.error("Error saving profile:",$),alert("Error saving profile. Please try again.")}finally{p(!1)}}},j=async()=>{if(!(!e||d!=="RESET")){h(!0);try{await Promise.all([E.from("study_sessions").delete().eq("user_id",e.id),E.from("prayer_records").delete().eq("user_id",e.id),E.from("quran_sessions").delete().eq("user_id",e.id),E.from("habit_records").delete().eq("user_id",e.id),E.from("class_schedules").delete().eq("user_id",e.id),E.from("attendance_records").delete().eq("user_id",e.id),E.from("sleep_records").delete().eq("user_id",e.id),E.from("exams").delete().eq("user_id",e.id)]),a(!1),c(""),await he(),await q(),alert("All data has been reset successfully!")}catch($){console.error("Error resetting data:",$),alert("Error resetting data. Please try again.")}finally{h(!1)}}},U=async()=>{if(!(!e||d!=="DELETE FOREVER")){h(!0);try{await Promise.all([E.from("study_sessions").delete().eq("user_id",e.id),E.from("prayer_records").delete().eq("user_id",e.id),E.from("quran_sessions").delete().eq("user_id",e.id),E.from("habit_records").delete().eq("user_id",e.id),E.from("class_schedules").delete().eq("user_id",e.id),E.from("attendance_records").delete().eq("user_id",e.id),E.from("sleep_records").delete().eq("user_id",e.id),E.from("exams").delete().eq("user_id",e.id),E.from("profiles").delete().eq("user_id",e.id)]),await t()}catch($){console.error("Error deleting account:",$),alert("Error deleting account. Please try again.")}finally{h(!1)}}},re=async()=>{if(e)try{const $={profile:m,stats:w,activities:_,exportDate:new Date().toISOString()},W=new Blob([JSON.stringify($,null,2)],{type:"application/json"}),ee=URL.createObjectURL(W),X=document.createElement("a");X.href=ee,X.download=`user-data-${e.id}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(ee)}catch($){console.error("Error exporting data:",$),alert("Error exporting data. Please try again.")}},te=$=>{switch($){case"study":return s.jsx(ze,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"prayer":return s.jsx(Zt,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"quran":return s.jsx(ze,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"});case"habit":return s.jsx(gt,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"});case"attendance":return s.jsx(tr,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"});case"sleep":return s.jsx(_t,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"});case"achievement":return s.jsx(rs,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"});default:return s.jsx(gt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}};if(v){const $=W=>{const ee=F.filter(be=>be.date===W).reduce((be,Ye)=>be+(Ye.duration||0),0),X=Z.filter(be=>be.date===W).reduce((be,Ye)=>be+(Ye.duration||0),0),ue=se.filter(be=>be.date===W).length,Ae=Math.round(ue*.3*10)/10,Fe=new Date(W).toLocaleDateString("en-US",{weekday:"long"}),Je=B.filter(be=>be.day===Fe),xt=k.filter(be=>be.date===W&&be.status==="present");let We=[...Je],dt=0;return xt.forEach(be=>{const Ye=We.findIndex(rt=>rt.subject&&be.subject&&rt.subject.toLowerCase()===be.subject.toLowerCase());if(Ye!==-1){const rt=We[Ye];if(rt.time&&rt.end_time){const[Dt,ds]=rt.time.split(":"),[Js,Ys]=rt.end_time.split(":");let Ur=parseInt(Dt)*60+parseInt(ds),Xe=parseInt(Js)*60+parseInt(Ys);Xe<Ur&&(Xe+=1440),dt+=(Xe-Ur)/60}We.splice(Ye,1)}}),{sleep:ee,study:X,prayers:Ae,class:dt}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("button",{onClick:()=>T(!1),className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg flex items-center space-x-2",children:[s.jsx(Me,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to Profile"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>P("1w"),className:`px-3 py-1 rounded-lg ${N==="1w"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"1 Week"}),s.jsx("button",{onClick:()=>P("1m"),className:`px-3 py-1 rounded-lg ${N==="1m"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"1 Month"}),s.jsx("button",{onClick:()=>P("3m"),className:`px-3 py-1 rounded-lg ${N==="3m"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"3 Months"}),s.jsx("button",{onClick:()=>P("1y"),className:`px-3 py-1 rounded-lg ${N==="1y"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"1 Year"}),s.jsx("button",{onClick:()=>P("prev"),className:`px-3 py-1 rounded-lg ${N==="prev"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:"Previous Years"})]})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mt-2 sticky top-0 z-10 bg-white dark:bg-gray-800 py-2",children:[s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mr-2"}),"Sleep"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 mr-2"}),"Study"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-teal-500 mr-2"}),"Prayers"]}),s.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full bg-violet-100 dark:bg-violet-900 text-violet-700 dark:text-violet-200 text-xs font-medium shadow-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-violet-500 mr-2"}),"Class"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"flex flex-col gap-3 min-w-[350px]",children:ce.map((W,ee)=>{const X=$(W.date);return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"w-24 text-right text-xs text-gray-500 dark:text-gray-300 flex flex-col items-end",children:[s.jsx("span",{className:"font-semibold text-sm text-gray-700 dark:text-gray-100",children:W.day}),s.jsx("span",{children:W.label})]}),s.jsxs("div",{className:"w-full max-w-2xl flex h-7 rounded-full overflow-hidden border border-gray-200 dark:border-gray-700 shadow-md bg-gray-100 dark:bg-gray-900 group relative",children:[X.sleep>0&&s.jsx("div",{className:"bg-blue-500 dark:bg-blue-700 h-full flex items-center transition-all duration-700 first:rounded-l-full last:rounded-r-full",style:{width:`${X.sleep/24*100}%`,minWidth:X.sleep>0?"2%":0},title:`Sleep: ${X.sleep.toFixed(1)}h (${Math.round(X.sleep/24*100)}%)`,children:s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(X.sleep/24*100),"%"]})}),X.study>0&&s.jsx("div",{className:"bg-orange-500 dark:bg-orange-600 h-full flex items-center transition-all duration-700 relative",style:{width:`${X.study/24*100}%`,minWidth:X.study>0?"2%":0},title:`Study: ${X.study.toFixed(1)}h (${Math.round(X.study/24*100)}%)`,children:s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(X.study/24*100),"%"]})}),X.prayers>0&&s.jsx("div",{className:"bg-teal-500 dark:bg-teal-700 h-full flex items-center transition-all duration-700 relative",style:{width:`${X.prayers/24*100}%`,minWidth:X.prayers>0?"2%":0},title:`Prayers: ${X.prayers.toFixed(1)}h (${Math.round(X.prayers/24*100)}%)`,children:s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(X.prayers/24*100),"%"]})}),X.class>0&&s.jsx("div",{className:"bg-violet-500 dark:bg-violet-700 h-full flex items-center transition-all duration-700 relative",style:{width:`${X.class/24*100}%`,minWidth:X.class>0?"2%":0},title:`Class: ${X.class.toFixed(1)}h (${Math.round(X.class/24*100)}%)`,children:s.jsxs("span",{className:"text-xs text-white font-semibold ml-2 drop-shadow-sm select-none",children:[Math.round(X.class/24*100),"%"]})})]})]},W.date)})})})]})}return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Profile"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>T(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Qy,{className:"w-4 h-4"}),s.jsx("span",{children:"Summary"})]}),s.jsxs("button",{onClick:re,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(ep,{className:"w-4 h-4"}),s.jsx("span",{children:"Export Data"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(Ps,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit Profile"})]})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 rounded-xl p-6 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center shadow-inner",children:s.jsx(tr,{className:"w-10 h-10"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-bold",children:m.name}),s.jsx("p",{className:"text-blue-100",children:m.email}),s.jsxs("p",{className:"text-blue-100",children:[m.major,"  ",m.year]}),s.jsx("p",{className:"text-blue-100",children:m.university}),m.bio&&s.jsxs("p",{className:"text-blue-100 mt-2 italic",children:['"',m.bio,'"']})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-blue-100",children:"Member since"}),s.jsx("div",{className:"font-medium",children:new Date(m.joinDate).toLocaleDateString()}),s.jsx("div",{className:"text-sm text-blue-100 mt-2",children:"Last active"}),s.jsx("div",{className:"font-medium",children:w.lastActive})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Study Progress"}),s.jsx(Jr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total hours"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.totalStudyHours.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Daily goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[m.dailyStudyGoal.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Current streak"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.streakDays," days"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Spiritual Progress"}),s.jsx(Zt,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Prayers completed"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:w.totalPrayersCompleted})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Quran pages read"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:w.totalQuranPages})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Weekly Quran goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[m.weeklyQuranGoal," pages"]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Health & Habits"}),s.jsx(gt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep hours"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.totalSleepHours.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep quality"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.averageSleepQuality.toFixed(1),"/5"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Sleep goal"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[m.sleepGoal,"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Habits completed"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:w.totalHabitsCompleted})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Achievements"}),s.jsx(rs,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Unlocked"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.achievementsUnlocked,"/8"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Attendance rate"}),s.jsxs("span",{className:"font-medium text-gray-800 dark:text-white",children:[w.attendanceRate,"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total exams"}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:w.totalExams})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Data Management"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(cp,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Reset All Data"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Clear all tracking data but keep your account"})]})]}),s.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors",children:"Reset Data"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ca,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Delete Account"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Permanently delete your account and all data"})]})]}),s.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete Account"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Activity"}),s.jsx("div",{className:"space-y-3",children:_.length>0?_.map(($,W)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white dark:bg-gray-600 rounded-full flex items-center justify-center shadow-sm",children:te($.type)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:$.description}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:$.time})]})]}),$.value&&s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:$.value})]},$.id||W)):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx("p",{children:"No recent activity"}),s.jsx("p",{className:"text-sm mt-1",children:"Start using the app to see your activity here"})]})})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Profile"}),s.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Full Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:m.name,onChange:$=>g({...m,name:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:m.email,onChange:$=>g({...m,email:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"University"}),s.jsx("input",{type:"text",value:m.university,onChange:$=>g({...m,university:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Major"}),s.jsx("input",{type:"text",value:m.major,onChange:$=>g({...m,major:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Academic Year"}),s.jsxs("select",{value:m.year,onChange:$=>g({...m,year:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:[s.jsx("option",{value:"1st",children:"1st Year"}),s.jsx("option",{value:"2nd",children:"2nd Year"}),s.jsx("option",{value:"3rd",children:"3rd Year"}),s.jsx("option",{value:"4th",children:"4th Year"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:m.location,onChange:$=>g({...m,location:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:m.phone,onChange:$=>g({...m,phone:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:R,disabled:f||!m.name||!m.email,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center space-x-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Saving..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ci,{className:"w-4 h-4"}),s.jsx("span",{children:"Save Changes"})]})}),s.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),r&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(vo,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Reset All Data"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete all your tracking data including study sessions, prayers, habits, and more. Your account will remain active."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "RESET" to confirm:'}),s.jsx("input",{type:"text",value:d,onChange:$=>c($.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type RESET"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{a(!1),c("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:j,disabled:d!=="RESET"||u,className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Resetting...":"Reset Data"})]})]})}),n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(vo,{className:"w-6 h-6 text-red-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Delete Account"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"This will permanently delete your account and all associated data. This action cannot be undone."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'Type "DELETE FOREVER" to confirm:'}),s.jsx("input",{type:"text",value:d,onChange:$=>c($.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white",placeholder:"Type DELETE FOREVER"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{i(!1),c("")},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:U,disabled:d!=="DELETE FOREVER"||u,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Deleting...":"Delete Account"})]})]})})]})},Pp=()=>{const{user:e}=Ke(),[t,r]=b.useState([]),[a,n]=b.useState(!0),[i,l]=b.useState(!1),[o,d]=b.useState(null),[c,u]=b.useState({totalCredits:0,totalGradePoints:0,cgpa:0}),[h,f]=b.useState([]),[p,w]=b.useState(null),[x,_]=b.useState({subject:"",course_code:"",credit_hours:3,course_type:"theory"}),[y,m]=b.useState(!1),[g,v]=b.useState(""),[T,N]=b.useState(null),[P,F]=b.useState(""),[ae,Z]=b.useState(null),[O,se]=b.useState(""),[D,B]=b.useState(null),[J,k]=b.useState(""),[z,A]=b.useState(null),[I,G]=b.useState(""),[ce,ge]=b.useState(!1),[he,q]=b.useState(!1),[R,j]=b.useState(new Set),[U,re]=b.useState({});b.useEffect(()=>{e&&te()},[e]),b.useEffect(()=>{p&&ne(p.id)},[p,e]),b.useEffect(()=>{X()},[U,h]),b.useEffect(()=>{h.length>0&&Ys()},[h,e]);const te=async()=>{n(!0);try{let{data:C,error:L}=await E.from("semesters").select("*").eq("user_id",e==null?void 0:e.id).order("semester_number",{ascending:!0});if(L)throw L;if(!C||C.length===0){const Y=Array.from({length:8},(H,le)=>({user_id:e==null?void 0:e.id,semester_number:le+1,status:le===0?"active":"locked",started_at:le===0?new Date().toISOString():null})),{data:M,error:K}=await E.from("semesters").insert(Y).select("*");if(K)throw K;C=M}f(C),w(C.find(Y=>Y.status==="active")||null)}catch(C){console.error("Error fetching semesters:",C)}finally{n(!1)}},ne=async C=>{n(!0);try{const{data:L,error:Y}=await E.from("academic_marks").select("*").eq("user_id",e==null?void 0:e.id).eq("semester_id",C).order("course_code",{ascending:!0});if(Y)throw Y;r(L||[])}catch(L){console.error("Error fetching marks:",L)}finally{n(!1)}},$=async()=>{if(p){m(!1),v(""),n(!0);try{await E.from("semesters").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",p.id);const C=h.find(L=>L.semester_number===p.semester_number+1);C&&await E.from("semesters").update({status:"active",started_at:new Date().toISOString()}).eq("id",C.id),await te()}catch(C){console.error("Error completing semester:",C)}finally{n(!1)}}},W=C=>C>=80?4:C>=75&&C<80?3.75:C>=70&&C<75?3.5:C>=65&&C<70?3.25:C>=60&&C<65?3:C>=55&&C<60?2.75:C>=50&&C<55?2.5:C>=45&&C<50?2.25:C>=40&&C<45?2:(C>=0&&C<40,0),ee=C=>C===4?"A+":C===3.75?"A":C===3.5?"A-":C===3.25?"B+":C===3?"B":C===2.75?"B-":C===2.5?"C+":C===2.25?"C":C===2?"D":"F",X=()=>{let C=0,L=0;h.filter(H=>H.status==="completed").forEach(H=>{const le=U[H.id]||[];let S=0,_e=0;le.forEach(Q=>{S+=Q.credit_hours,Q.grade_point&&(_e+=Q.credit_hours*Q.grade_point)});const pe=S>0?_e/S:0;C+=S,L+=pe*S});const M=C>0?L/C:0,K={totalCredits:C,totalGradePoints:L,cgpa:Math.round(M*100)/100};u(K)},ue=async C=>{if(C.preventDefault(),!p)return;const L={user_id:e==null?void 0:e.id,subject:x.subject,course_code:x.course_code,credit_hours:x.credit_hours,course_type:x.course_type,semester:We(p.semester_number),academic_year:new Date().getFullYear().toString(),semester_id:p.id};try{if(o){const{error:Y}=await E.from("academic_marks").update(L).eq("id",o);if(Y)throw Y}else{const{error:Y}=await E.from("academic_marks").insert(L);if(Y)throw Y}await ne(p.id),Je()}catch(Y){console.error("Error saving mark:",Y)}},Ae=async C=>{if(confirm("Are you sure you want to delete this record?"))try{const{error:L}=await E.from("academic_marks").delete().eq("id",C);if(L)throw L;await ne((p==null?void 0:p.id)||"")}catch(L){console.error("Error deleting mark:",L)}},Fe=C=>{d(C.id),_({subject:C.subject,course_code:C.course_code,credit_hours:C.credit_hours,course_type:C.course_type||"theory"}),ge(!0)},Je=()=>{_({subject:"",course_code:"",credit_hours:3,course_type:"theory"}),d(null),l(!1),ge(!1)},xt=()=>{const C={};return t.forEach(L=>{const Y=`${L.academic_year} - ${L.semester}`;C[Y]||(C[Y]=[]),C[Y].push(L)}),C},We=C=>{const L=Math.ceil(C/2),Y=C%2===1;return`${L===1?"1st":L===2?"2nd":L===3?"3rd":`${L}th`} Semester ${Y?"Odd":"Even"}`},dt=async(C,L,Y)=>{N(null);try{const M=Y===""?null:parseFloat(Y),{data:K}=await E.from("academic_marks").select("*").eq("id",C).single();if(K){const H={...K,[L]:M},le=[H.ct1,H.ct2,H.ct3,H.ct4].filter(we=>typeof we=="number"&&!isNaN(we));let S=0;if(le.length>0){const Ne=le.sort((Le,ct)=>ct-Le).slice(0,3);S=Ne.reduce((Le,ct)=>(Le??0)+ct,0)/(Ne.length||1)}const _e=K.attendance||0,pe=K.assignment_pres_viva||0,Q=K.term_marks||0,Pe=S+_e+pe+Q,fe=W(Pe),oe=ee(fe),{error:je}=await E.from("academic_marks").update({[L]:M,total_marks:Pe,grade:oe,grade_point:fe}).eq("id",C);if(je)throw je;if(p){const{semesterCGPA:we,semesterTotalCredits:Ne}=be(p.id);await Ye(p.id,we,Ne)}}p&&await ne(p.id)}catch(M){console.error("Error updating CT mark:",M)}},be=C=>{console.log("=== SEMESTER CGPA CALCULATION DEBUG ==="),console.log("Calculating CGPA for semester ID:",C);let L=0,Y=0;const M=t.filter(H=>H.semester_id===C);console.log("Semester Marks:",M),M.forEach((H,le)=>{if(console.log(`Semester Course ${le+1}:`,{subject:H.subject,course_type:H.course_type,credit_hours:H.credit_hours,grade_point:H.grade_point,grade:H.grade}),L+=H.credit_hours,console.log(`Added ${H.credit_hours} credits for ${H.subject}`),H.grade_point){const S=H.credit_hours*H.grade_point;Y+=S,console.log(` Added ${S} grade points for ${H.subject} (${H.grade_point}  ${H.credit_hours})`)}else console.log(` No grade point for ${H.subject}, skipping grade point contribution`)});const K=L>0?Y/L:0;return console.log("=== SEMESTER CGPA SUMMARY ==="),console.log("Semester Total Credits:",L),console.log("Semester Total Grade Points:",Y),console.log("Calculated Semester CGPA:",K),console.log("Rounded Semester CGPA:",Math.round(K*100)/100),console.log("=== END SEMESTER CGPA CALCULATION ==="),{semesterCGPA:K,semesterTotalCredits:L}},Ye=async(C,L,Y)=>{try{const{error:M}=await E.from("semesters").update({cgpa:L,total_credits:Y}).eq("id",C);if(M)throw M}catch(M){console.error("Error updating semester CGPA:",M)}},rt=async(C,L,Y)=>{Z(null);try{const M=Y===""?null:parseFloat(Y),{data:K}=await E.from("academic_marks").select("*").eq("id",C).single();if(K){const H=[K.ct1,K.ct2,K.ct3,K.ct4].filter(je=>typeof je=="number"&&!isNaN(je));let le=0;if(H.length>0){const we=H.sort((Ne,Le)=>Le-Ne).slice(0,3);le=we.reduce((Ne,Le)=>(Ne??0)+Le,0)/(we.length||1)}const S=L==="attendance"?M||0:K.attendance||0,_e=L==="assignment_pres_viva"?M||0:K.assignment_pres_viva||0,pe=L==="term_marks"?M||0:K.term_marks||0,Q=le+S+_e+pe,Pe=W(Q),fe=ee(Pe),{error:oe}=await E.from("academic_marks").update({[L]:M,total_marks:Q,grade:fe,grade_point:Pe}).eq("id",C);if(oe)throw oe;if(p){const{semesterCGPA:je,semesterTotalCredits:we}=be(p.id);await Ye(p.id,je,we)}}p&&await ne(p.id)}catch(M){console.error("Error updating assessment mark:",M)}},Dt=async(C,L,Y)=>{B(null);try{let M=null,K=null;if(L==="grade"){const le={"A+":4,A:3.75,"A-":3.5,"B+":3.25,B:3,"B-":2.75,"C+":2.5,C:2.25,D:2,F:0};K=Y.toUpperCase(),M=le[K]||null}else{const le=Y===""?null:parseFloat(Y);le!==null&&!isNaN(le)&&(M=le,K=ee(le))}const{error:H}=await E.from("academic_marks").update({grade:K,grade_point:M}).eq("id",C);if(H)throw H;if(p){const{semesterCGPA:le,semesterTotalCredits:S}=be(p.id);await Ye(p.id,le,S)}p&&await ne(p.id)}catch(M){console.error("Error updating grade:",M)}},ds=async C=>{try{p&&await E.from("semesters").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",p.id),await E.from("semesters").update({status:"active",started_at:new Date().toISOString(),completed_at:null}).eq("id",C),await te()}catch(L){console.error("Error reactivating semester:",L)}},Js=async C=>{try{const{data:L,error:Y}=await E.from("academic_marks").select("*").eq("user_id",e==null?void 0:e.id).eq("semester_id",C).order("course_code",{ascending:!0});if(Y)throw Y;return L||[]}catch(L){return console.error("Error fetching completed semester marks:",L),[]}},Ys=async()=>{try{const C=h.filter(Y=>Y.status==="completed"),L={};for(const Y of C){const M=await Js(Y.id);L[Y.id]=M}re(L)}catch(C){console.error("Error loading completed semester marks:",C)}},Ur=async(C,L,Y)=>{try{const M=Y===""?null:parseFloat(Y),{data:K}=await E.from("academic_marks").select("*").eq("id",C).single();if(K){const H={...K,[L]:M},le=[H.ct1,H.ct2,H.ct3,H.ct4].filter(we=>typeof we=="number"&&!isNaN(we));let S=0;if(le.length>0){const Ne=le.sort((Le,ct)=>ct-Le).slice(0,3);S=Ne.reduce((Le,ct)=>(Le??0)+ct,0)/(Ne.length||1)}const _e=K.attendance||0,pe=K.assignment_pres_viva||0,Q=K.term_marks||0,Pe=S+_e+pe+Q,fe=W(Pe),oe=ee(fe),{error:je}=await E.from("academic_marks").update({[L]:M,total_marks:Pe,grade:oe,grade_point:fe}).eq("id",C);if(je)throw je;if(K.semester_id){const{semesterCGPA:we,semesterTotalCredits:Ne}=be(K.semester_id);await Ye(K.semester_id,we,Ne)}}}catch(M){console.error("Error updating completed semester CT mark:",M)}},Xe=async(C,L,Y)=>{try{const M=Y===""?null:parseFloat(Y),{data:K}=await E.from("academic_marks").select("*").eq("id",C).single();if(K){const H=[K.ct1,K.ct2,K.ct3,K.ct4].filter(je=>typeof je=="number"&&!isNaN(je));let le=0;if(H.length>0){const we=H.sort((Ne,Le)=>Le-Ne).slice(0,3);le=we.reduce((Ne,Le)=>(Ne??0)+Le,0)/(we.length||1)}const S=L==="attendance"?M||0:K.attendance||0,_e=L==="assignment_pres_viva"?M||0:K.assignment_pres_viva||0,pe=L==="term_marks"?M||0:K.term_marks||0,Q=le+S+_e+pe,Pe=W(Q),fe=ee(Pe),{error:oe}=await E.from("academic_marks").update({[L]:M,total_marks:Q,grade:fe,grade_point:Pe}).eq("id",C);if(oe)throw oe;if(K.semester_id){const{semesterCGPA:je,semesterTotalCredits:we}=be(K.semester_id);await Ye(K.semester_id,je,we)}}}catch(M){console.error("Error updating completed semester assessment mark:",M)}},st=async(C,L,Y)=>{try{const M=Y===""?null:parseFloat(Y),{data:K}=await E.from("academic_marks").select("*").eq("id",C).single();if(K){const H=L==="quiz"?M||0:K.quiz||0,le=L==="board_viva"?M||0:K.board_viva||0,S=L==="sessional_attendance"?M||0:K.sessional_attendance||0,_e=L==="lab"?M||0:K.lab||0,pe=H+le+S+_e,Q=W(pe),Pe=ee(Q),{error:fe}=await E.from("academic_marks").update({[L]:M,total_marks:pe,grade:Pe,grade_point:Q}).eq("id",C);if(fe)throw fe;if(p){const{semesterCGPA:oe,semesterTotalCredits:je}=be(p.id);await Ye(p.id,oe,je)}}p&&await ne(p.id)}catch(M){console.error("Error updating sessional mark:",M)}},Nd=async(C,L,Y)=>{try{let M=null,K=null;if(L==="grade"){const S={"A+":4,A:3.75,"A-":3.5,"B+":3.25,B:3,"B-":2.75,"C+":2.5,C:2.25,D:2,F:0};K=Y.toUpperCase(),M=S[K]||null}else{const S=Y===""?null:parseFloat(Y);S!==null&&!isNaN(S)&&(M=S,K=ee(S))}const{error:H}=await E.from("academic_marks").update({grade:K,grade_point:M}).eq("id",C);if(H)throw H;const{data:le}=await E.from("academic_marks").select("semester_id").eq("id",C).single();if(le!=null&&le.semester_id){const{semesterCGPA:S,semesterTotalCredits:_e}=be(le.semester_id);await Ye(le.semester_id,S,_e)}}catch(M){console.error("Error updating completed semester grade:",M)}};return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading academic data..."})}):s.jsxs("div",{className:"space-y-6",children:[p&&s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:s.jsxs("h1",{className:"text-2xl sm:text-4xl font-extrabold text-emerald-700 dark:text-emerald-300 flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("span",{role:"img","aria-label":"graduation cap",children:""}),s.jsxs("span",{children:["Academic Progress: ",We(p.semester_number)]})]}),s.jsx("span",{className:"px-3 py-1 text-sm sm:text-base rounded-full bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300 font-semibold w-fit",children:"Active Semester"})]})}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:s.jsx(oi,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current CGPA"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:c.cgpa.toFixed(2)})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:s.jsx(ze,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Earned Credits"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:h.reduce((C,L)=>C+(L.total_credits&&L.total_credits>0?L.total_credits:0),0)})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center",children:s.jsx(rs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[h.filter(C=>C.status==="completed").length,"/",h.length]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center",children:s.jsx(Jr,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Academic Progress"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[(()=>{const Y=h.filter(M=>M.status==="completed").length/8*100;return Math.round(Y)})(),"%"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[h.filter(C=>C.status==="completed").length," of 8 semesters"]})]})]})})]}),!i&&s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("button",{onClick:()=>q(!he),className:`flex items-center px-3 py-2 rounded-md text-sm sm:text-base font-medium shadow transition-colors ${he?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:[s.jsx(Jr,{className:"w-4 h-4 mr-2"}),he?"Hide Analytics":"Show Analytics"]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-3 py-2 bg-emerald-600 text-white rounded-md text-sm sm:text-base font-medium shadow hover:bg-emerald-700 transition-colors",children:[s.jsx(as,{className:"w-4 h-4 mr-2"})," Add Course"]})]}),he&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(Jr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"}),"Academic Analytics & Insights"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"CGPA Trend"}),s.jsx("div",{className:"space-y-3",children:h.filter(C=>C.status==="completed").sort((C,L)=>C.semester_number-L.semester_number).map(C=>{const L=U[C.id]||[];let Y=0,M=0;L.forEach(le=>{Y+=le.credit_hours,le.grade_point&&(M+=le.credit_hours*le.grade_point)});const K=Y>0?M/Y:0,H=K/4*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:We(C.semester_number)}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[K.toFixed(2)," / 4.00"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${H}%`}})})]},C.id)})})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Grade Distribution"}),s.jsx("div",{className:"space-y-3",children:(()=>{const C=Object.values(U).flat(),L={},Y=["A+","A","A-","B+","B","B-","C+","C","D","F"];Y.forEach(H=>{L[H]=0}),C.forEach(H=>{H.grade&&L.hasOwnProperty(H.grade)&&L[H.grade]++});const M=C.length,K=Object.values(L).reduce((H,le)=>H+le,0);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Courses"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:M}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[K," with grades  ",M-K," pending"]})]}),s.jsx("div",{className:"space-y-2",children:Y.filter(H=>L[H]>0).map(H=>{const le=L[H],S=M>0?le/M*100:0,_e=K>0?le/K*100:0,pe=H==="A+"?"bg-emerald-600":H==="A"?"bg-green-500":H==="A-"?"bg-green-400":H==="B+"?"bg-blue-500":H==="B"?"bg-blue-400":H==="B-"?"bg-yellow-500":H==="C+"?"bg-yellow-400":H==="C"?"bg-orange-500":H==="D"?"bg-red-400":"bg-red-500",Q=H==="A+"?4:H==="A"?3.75:H==="A-"?3.5:H==="B+"?3.25:H==="B"?3:H==="B-"?2.75:H==="C+"?2.5:H==="C"?2.25:H==="D"?2:0;return s.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:H})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[le," ",le===1?"course":"courses"]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",Q.toFixed(2)," GPA)"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[S.toFixed(1),"%"]}),K>0&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[_e.toFixed(1),"% of graded"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`${pe} h-2 rounded-full transition-all duration-300`,style:{width:`${S}%`}})})]})]},H)})}),K>0&&s.jsx("div",{className:"mt-4 p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Grade Distribution Summary"}),s.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:(()=>{const H=L["A+"]+L.A+L["A-"],le=L["B+"]+L.B+L["B-"],S=L["C+"]+L.C+L.D;return H/K>=.5?"Excellent Performance":le/K>=.5?"Good Performance":S/K>=.8?"Satisfactory Performance":"Needs Improvement"})()})]})})]})})()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Credit Analysis"}),s.jsx("div",{className:"space-y-4",children:(()=>{const C=h.reduce((M,K)=>M+(K.total_credits||0),0),L=8*22,Y=C/L*100;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:C}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Credits Earned"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Progress to Target"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[Y.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(Y,100)}%`}})}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Target: ",L," credits (8 semesters)"]})]})]})})()})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Performance Insights"}),s.jsx("div",{className:"space-y-3",children:(()=>{const C=Object.values(U).flat(),L=C.filter(H=>H.course_type==="theory"),Y=C.filter(H=>H.course_type==="sessional"),M=L.length>0?L.reduce((H,le)=>H+(le.grade_point||0),0)/L.length:0,K=Y.length>0?Y.reduce((H,le)=>H+(le.grade_point||0),0)/Y.length:0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Theory Courses"}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[L.length," courses"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:M.toFixed(2)}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average GPA"})]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Sessional Courses"}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Y.length," courses"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:K.toFixed(2)}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average GPA"})]})]}),s.jsxs("div",{className:"text-center p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Performance"}),s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:M>K?"Better in Theory":M<K?"Better in Sessional":"Balanced"})]})]})})()})]})]})]}),i&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:o?"Edit Course":"Add New Course"}),s.jsx("button",{onClick:Je,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:x.subject,onChange:C=>_({...x,subject:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Code"}),s.jsx("input",{type:"text",value:x.course_code,onChange:C=>_({...x,course_code:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Credit Hours"}),s.jsx("input",{type:"number",step:"0.5",min:"0.5",max:"6",value:x.credit_hours,onChange:C=>_({...x,credit_hours:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Type"}),s.jsxs("select",{value:x.course_type,onChange:C=>_({...x,course_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"theory",children:"Theory"}),s.jsx("option",{value:"sessional",children:"Sessional"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:Je,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[s.jsx(ci,{className:"w-4 h-4"}),s.jsx("span",{children:o?"Update":"Save"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[Object.entries(xt()).map(([C,L])=>{h.find(S=>`${new Date().getFullYear()} - ${We(S.semester_number)}`===C);let Y=0,M=0;L.forEach(S=>{Y+=S.credit_hours,S.grade_point&&(M+=S.credit_hours*S.grade_point)});const K=Y>0?M/Y:0,H=L.filter(S=>S.course_type==="theory"),le=L.filter(S=>S.course_type==="sessional");return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:C}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"text-center px-4 py-2 border-2 border-emerald-500 rounded-lg bg-emerald-50 dark:bg-emerald-900/20",children:[(()=>{const _e=L.filter(pe=>pe.grade_point!==null&&pe.grade_point!==void 0&&!isNaN(pe.grade_point)&&pe.credit_hours).map(pe=>({subject:pe.subject,grade_point:pe.grade_point,credit_hours:pe.credit_hours,contribution:pe.grade_point*pe.credit_hours}));return console.log(`--- Semester CGPA Calculation for ${C} ---`),console.log("Contributing marks:",_e),console.log("Semester CGPA:",K,"Total Credits:",Y),null})(),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Semester CGPA"}),s.jsx("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:K.toFixed(2)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Credits"}),s.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Y})]})]})]})}),H.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(ze,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Theory Courses"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"Course"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Credits"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT1"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT2"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT3"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"CT4"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"CT Avg"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:s.jsxs("div",{className:"whitespace-normal",children:[s.jsx("div",{children:"Assig"}),s.jsx("div",{children:"Pres"}),s.jsx("div",{children:"Viva"})]})}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Attend"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Term"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Total"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Point"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Grade"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:H.map(S=>{const _e=[S.ct1,S.ct2,S.ct3,S.ct4].filter(Q=>typeof Q=="number"&&!isNaN(Q));let pe="";if(_e.length>0){const Pe=_e.sort((oe,je)=>je-oe).slice(0,3);pe=(Pe.reduce((oe,je)=>(oe??0)+je,0)/(Pe.length||1)).toFixed(2)}return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:S.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;N({id:S.id,field:"ct1"}),F(((Q=S.ct1)==null?void 0:Q.toString())||"")},children:T&&T.id===S.id&&T.field==="ct1"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:P,onChange:Q=>F(Q.target.value),onBlur:()=>dt(S.id,"ct1",P),onKeyDown:Q=>{Q.key==="Enter"&&dt(S.id,"ct1",P)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.ct1??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;N({id:S.id,field:"ct2"}),F(((Q=S.ct2)==null?void 0:Q.toString())||"")},children:T&&T.id===S.id&&T.field==="ct2"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:P,onChange:Q=>F(Q.target.value),onBlur:()=>dt(S.id,"ct2",P),onKeyDown:Q=>{Q.key==="Enter"&&dt(S.id,"ct2",P)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.ct2??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;N({id:S.id,field:"ct3"}),F(((Q=S.ct3)==null?void 0:Q.toString())||"")},children:T&&T.id===S.id&&T.field==="ct3"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:P,onChange:Q=>F(Q.target.value),onBlur:()=>dt(S.id,"ct3",P),onKeyDown:Q=>{Q.key==="Enter"&&dt(S.id,"ct3",P)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.ct3??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;N({id:S.id,field:"ct4"}),F(((Q=S.ct4)==null?void 0:Q.toString())||"")},children:T&&T.id===S.id&&T.field==="ct4"?s.jsx("input",{type:"number",step:"0.01",min:"0",autoFocus:!0,value:P,onChange:Q=>F(Q.target.value),onBlur:()=>dt(S.id,"ct4",P),onKeyDown:Q=>{Q.key==="Enter"&&dt(S.id,"ct4",P)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.ct4??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-20 text-center",children:pe||"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var Q;Z({id:S.id,field:"assignment_pres_viva"}),se(((Q=S.assignment_pres_viva)==null?void 0:Q.toString())||"")},children:ae&&ae.id===S.id&&ae.field==="assignment_pres_viva"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",autoFocus:!0,value:O,onChange:Q=>se(Q.target.value),onBlur:()=>rt(S.id,"assignment_pres_viva",O),onKeyDown:Q=>{Q.key==="Enter"&&rt(S.id,"assignment_pres_viva",O)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.assignment_pres_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var Q;Z({id:S.id,field:"attendance"}),se(((Q=S.attendance)==null?void 0:Q.toString())||"")},children:ae&&ae.id===S.id&&ae.field==="attendance"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",autoFocus:!0,value:O,onChange:Q=>se(Q.target.value),onBlur:()=>rt(S.id,"attendance",O),onKeyDown:Q=>{Q.key==="Enter"&&rt(S.id,"attendance",O)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var Q;Z({id:S.id,field:"term_marks"}),se(((Q=S.term_marks)==null?void 0:Q.toString())||"")},children:ae&&ae.id===S.id&&ae.field==="term_marks"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"60",autoFocus:!0,value:O,onChange:Q=>se(Q.target.value),onBlur:()=>rt(S.id,"term_marks",O),onKeyDown:Q=>{Q.key==="Enter"&&rt(S.id,"term_marks",O)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.term_marks??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:(()=>{const Q=[S.ct1,S.ct2,S.ct3,S.ct4].filter(Ne=>typeof Ne=="number"&&!isNaN(Ne));let Pe=0;if(Q.length>0){const Le=Q.sort((ct,cs)=>cs-ct).slice(0,3);Pe=Le.reduce((ct,cs)=>(ct??0)+cs,0)/(Le.length||1)}const fe=S.attendance||0,oe=S.assignment_pres_viva||0,je=S.term_marks||0,we=Pe+fe+oe+je;return we>0?we.toFixed(2):"-"})()}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var Q;B({id:S.id,field:"grade_point"}),k(((Q=S.grade_point)==null?void 0:Q.toString())||"")},children:D&&D.id===S.id&&D.field==="grade_point"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",autoFocus:!0,value:J,onChange:Q=>k(Q.target.value),onBlur:()=>Dt(S.id,"grade_point",J),onKeyDown:Q=>{Q.key==="Enter"&&Dt(S.id,"grade_point",J)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{B({id:S.id,field:"grade"}),k(S.grade||"")},children:D&&D.id===S.id&&D.field==="grade"?s.jsx("input",{type:"text",maxLength:"2",autoFocus:!0,value:J,onChange:Q=>k(Q.target.value),onBlur:()=>Dt(S.id,"grade",J),onKeyDown:Q=>{Q.key==="Enter"&&Dt(S.id,"grade",J)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):S.grade??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>Fe(S),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Ps,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ae(S.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(Ca,{className:"w-4 h-4"})})]})})]},S.id)})})]})})]}),le.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(oi,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Sessional Courses"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"Course"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Credits"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Quiz (20)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"Board Viva (25)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20",children:"Attendance (10)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Lab (45)"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Total"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Point"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12",children:"Grade"}),s.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:le.map(S=>{const _e=S.quiz||0,pe=S.board_viva||0,Q=S.sessional_attendance||0,Pe=S.lab||0,fe=_e+pe+Q+Pe;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:S.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var oe;A({id:S.id,field:"quiz"}),G(((oe=S.quiz)==null?void 0:oe.toString())||"")},children:z&&z.id===S.id&&z.field==="quiz"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"20",autoFocus:!0,value:I,onChange:oe=>G(oe.target.value),onBlur:()=>st(S.id,"quiz",I),onKeyDown:oe=>{oe.key==="Enter"&&st(S.id,"quiz",I)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.quiz??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-20 text-center",onClick:()=>{var oe;A({id:S.id,field:"board_viva"}),G(((oe=S.board_viva)==null?void 0:oe.toString())||"")},children:z&&z.id===S.id&&z.field==="board_viva"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"25",autoFocus:!0,value:I,onChange:oe=>G(oe.target.value),onBlur:()=>st(S.id,"board_viva",I),onKeyDown:oe=>{oe.key==="Enter"&&st(S.id,"board_viva",I)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.board_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-20 text-center",onClick:()=>{var oe;A({id:S.id,field:"sessional_attendance"}),G(((oe=S.sessional_attendance)==null?void 0:oe.toString())||"")},children:z&&z.id===S.id&&z.field==="sessional_attendance"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"10",autoFocus:!0,value:I,onChange:oe=>G(oe.target.value),onBlur:()=>st(S.id,"sessional_attendance",I),onKeyDown:oe=>{oe.key==="Enter"&&st(S.id,"sessional_attendance",I)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.sessional_attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-16 text-center",onClick:()=>{var oe;A({id:S.id,field:"lab"}),G(((oe=S.lab)==null?void 0:oe.toString())||"")},children:z&&z.id===S.id&&z.field==="lab"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"45",autoFocus:!0,value:I,onChange:oe=>G(oe.target.value),onBlur:()=>st(S.id,"lab",I),onKeyDown:oe=>{oe.key==="Enter"&&st(S.id,"lab",I)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.lab??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-16 text-center",children:fe.toFixed(2)}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{var oe;B({id:S.id,field:"grade_point"}),k(((oe=S.grade_point)==null?void 0:oe.toString())||"")},children:D&&D.id===S.id&&D.field==="grade_point"?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",autoFocus:!0,value:J,onChange:oe=>k(oe.target.value),onBlur:()=>Dt(S.id,"grade_point",J),onKeyDown:oe=>{oe.key==="Enter"&&Dt(S.id,"grade_point",J)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):S.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white cursor-pointer w-12 text-center",onClick:()=>{B({id:S.id,field:"grade"}),k(S.grade||"")},children:D&&D.id===S.id&&D.field==="grade"?s.jsx("input",{type:"text",maxLength:"2",autoFocus:!0,value:J,onChange:oe=>k(oe.target.value),onBlur:()=>Dt(S.id,"grade",J),onKeyDown:oe=>{oe.key==="Enter"&&Dt(S.id,"grade",J)},className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):S.grade??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>Fe(S),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Ps,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ae(S.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(Ca,{className:"w-4 h-4"})})]})})]},S.id)})})]})})]})]},C)}),t.length===0&&!i&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ze,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No academic records"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by adding your first course."}),s.jsx("div",{className:"mt-6",children:s.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[s.jsx(as,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Course"]})})]})]}),p&&s.jsx("div",{className:"flex justify-end mt-8",children:s.jsxs("button",{onClick:()=>m(!0),className:"flex items-center px-4 sm:px-6 py-2 sm:py-3 bg-emerald-600 text-white rounded-lg text-sm sm:text-lg font-semibold shadow hover:bg-emerald-700 transition-colors",children:[s.jsx(Mr,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"})," Complete Semester"]})}),h.filter(C=>C.status==="completed").length>0&&s.jsxs("div",{className:"mt-8 space-y-6",children:[s.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[s.jsx(rs,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600 dark:text-emerald-400"}),"Completed Semesters"]}),h.filter(C=>C.status==="completed").sort((C,L)=>L.semester_number-C.semester_number).map(C=>{const L=R.has(C.id),Y=U[C.id]||[];return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-white",children:We(C.semester_number)}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"px-3 py-1 text-sm rounded-full bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 font-medium",children:"Completed"}),(()=>{let M=0,K=0;Y.forEach(le=>{M+=le.credit_hours,le.grade_point&&(K+=le.credit_hours*le.grade_point)});const H=M>0?K/M:0;return console.log(`--- Completed Semester CGPA Calculation for ${We(C.semester_number)} ---`),console.log("Semester marks:",Y),console.log("Total credits:",M),console.log("Total grade points:",K),console.log("Calculated CGPA:",H),s.jsxs(s.Fragment,{children:[H>0&&s.jsxs("span",{className:"px-3 py-1 text-sm rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 font-medium",children:["CGPA: ",H.toFixed(2)]}),M>0&&s.jsxs("span",{className:"px-3 py-1 text-sm rounded-full bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 font-medium",children:["Credits: ",M]})]})})()]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>ds(C.id),className:"flex items-center px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-md hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors text-sm",children:[s.jsx(Ps,{className:"w-4 h-4 mr-1"}),"Reactivate Semester"]})})]}),Y.length>0?s.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:s.jsx("div",{className:"inline-block min-w-full align-middle",children:s.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Course"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Credits"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT1"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT2"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT3"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"CT4"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Best 3"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Assignment"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Attendance"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Term"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Grade Point"}),s.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Grade"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Y.map(M=>{var le,S,_e,pe,Q,Pe;const K=[M.ct1,M.ct2,M.ct3,M.ct4].filter(fe=>typeof fe=="number"&&!isNaN(fe));let H="";if(K.length>0){const oe=K.sort((we,Ne)=>Ne-we).slice(0,3);H=(oe.reduce((we,Ne)=>(we??0)+Ne,0)/(oe.length||1)).toFixed(2)}return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap w-32",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.course_code}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.subject})]})}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:M.credit_hours}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:M.ct1??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:M.ct2??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:L?s.jsx("input",{type:"number",step:"0.01",min:"0",value:((le=M.ct3)==null?void 0:le.toString())||"",onChange:fe=>Ur(M.id,"ct3",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):M.ct3??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:L?s.jsx("input",{type:"number",step:"0.01",min:"0",value:((S=M.ct4)==null?void 0:S.toString())||"",onChange:fe=>Ur(M.id,"ct4",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):M.ct4??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-emerald-700 dark:text-emerald-300 font-semibold w-20 text-center",children:H||"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:L?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:((_e=M.assignment_pres_viva)==null?void 0:_e.toString())||"",onChange:fe=>Xe(M.id,"assignment_pres_viva",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):M.assignment_pres_viva??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:L?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:((pe=M.attendance)==null?void 0:pe.toString())||"",onChange:fe=>Xe(M.id,"attendance",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):M.attendance??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:L?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"60",value:((Q=M.term_marks)==null?void 0:Q.toString())||"",onChange:fe=>Xe(M.id,"term_marks",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):M.term_marks??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-16 text-center",children:(()=>{const fe=[M.ct1,M.ct2,M.ct3,M.ct4].filter(ct=>typeof ct=="number"&&!isNaN(ct));let oe=0;if(fe.length>0){const cs=fe.sort(($i,Ii)=>Ii-$i).slice(0,3);oe=cs.reduce(($i,Ii)=>($i??0)+Ii,0)/(cs.length||1)}const je=M.attendance||0,we=M.assignment_pres_viva||0,Ne=M.term_marks||0,Le=oe+je+we+Ne;return Le>0?Le.toFixed(2):"-"})()}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:L?s.jsx("input",{type:"number",step:"0.01",min:"0",max:"4",value:((Pe=M.grade_point)==null?void 0:Pe.toString())||"",onChange:fe=>Nd(M.id,"grade_point",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs"}):M.grade_point??"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white w-12 text-center",children:L?s.jsx("input",{type:"text",maxLength:"2",value:M.grade||"",onChange:fe=>Nd(M.id,"grade",fe.target.value),className:"w-12 px-1 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-xs text-center"}):M.grade??"-"}),L&&s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium w-16 text-center",children:s.jsxs("div",{className:"flex space-x-2 justify-center",children:[s.jsx("button",{onClick:()=>Fe(M),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300",children:s.jsx(Ps,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ae(M.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:s.jsx(Ca,{className:"w-4 h-4"})})]})})]},M.id)})})]})})})}):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ze,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsx("p",{children:"No courses found for this semester"})]})]},C.id)})]}),ce&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:Je,children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Edit Course"}),s.jsx("button",{onClick:Je,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Me,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject Name"}),s.jsx("input",{type:"text",value:x.subject,onChange:C=>_({...x,subject:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Code"}),s.jsx("input",{type:"text",value:x.course_code,onChange:C=>_({...x,course_code:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Credit Hours"}),s.jsx("input",{type:"number",step:"0.5",min:"0.5",max:"6",value:x.credit_hours,onChange:C=>_({...x,credit_hours:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Type"}),s.jsxs("select",{value:x.course_type,onChange:C=>_({...x,course_type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"theory",children:"Theory"}),s.jsx("option",{value:"sessional",children:"Sessional"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:Je,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[s.jsx(ci,{className:"w-4 h-4"}),s.jsx("span",{children:"Update Course"})]})]})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Semester Completion"}),s.jsxs("p",{className:"mb-4 text-gray-700 dark:text-gray-300",children:["To complete this semester, type ",s.jsx("span",{className:"font-bold text-emerald-600",children:"YES"})," below and click Confirm."]}),s.jsx("input",{type:"text",value:g,onChange:C=>v(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white mb-4",placeholder:"Type YES to confirm"}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:()=>{g.trim().toLowerCase()==="yes"&&$()},disabled:g.trim().toLowerCase()!=="yes",className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Mr,{className:"w-4 h-4"}),s.jsx("span",{children:"Confirm"})]})]})]})})]})},Dp=()=>{const{user:e}=Ke(),{isAdmin:t,loading:r}=en(),[a,n]=b.useState([]),[i,l]=b.useState([]),[o,d]=b.useState(null),[c,u]=b.useState(!0),[h,f]=b.useState(null),[p,w]=b.useState("overview"),[x,_]=b.useState(""),[y,m]=b.useState("all"),[g,v]=b.useState("name");if(b.useEffect(()=>{t&&T()},[t]),r)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})})});if(!t)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vh,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You don't have permission to access the admin panel."}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Contact your administrator if you believe this is an error."})]})})})});const T=async()=>{u(!0);try{await Promise.all([N(),P(),F()])}catch(O){console.error("Error loading admin data:",O)}finally{u(!1)}},N=async()=>{try{const{data:O,error:se}=await E.from("profiles").select("*").order("created_at",{ascending:!1});if(se)throw se;n(O||[])}catch(O){console.error("Error loading users:",O)}},P=async()=>{try{const{data:O,error:se}=await E.from("profiles").select("id, email, full_name, created_at");if(se)throw se;const D=[];for(const B of O||[]){const{data:J}=await E.from("sleep_records").select("*").eq("user_id",B.id),{data:k}=await E.from("study_sessions").select("*").eq("user_id",B.id),{data:z}=await E.from("prayer_records").select("*").eq("user_id",B.id),{data:A}=await E.from("quran_records").select("*").eq("user_id",B.id),{data:I}=await E.from("habits").select("*").eq("user_id",B.id),{data:G}=await E.from("semesters").select("*").eq("user_id",B.id),{data:ce}=await E.from("exams").select("*").eq("user_id",B.id),ge=(J==null?void 0:J.reduce((te,ne)=>{const $=ne.duration_hours||0;return te+$},0))||0,he=(k==null?void 0:k.reduce((te,ne)=>{const $=ne.duration_hours||0;return te+$},0))||0,q=(z==null?void 0:z.filter(te=>te.completed).length)||0,R=(z==null?void 0:z.length)||0,j=(I==null?void 0:I.filter(te=>te.completed).length)||0,U=(I==null?void 0:I.length)||0,re=(G==null?void 0:G.filter(te=>te.status==="completed").length)||0;D.push({userId:B.id,email:B.email,fullName:B.full_name,joinDate:B.created_at,lastActive:B.created_at,totalSleepSessions:(J==null?void 0:J.length)||0,totalStudySessions:(k==null?void 0:k.length)||0,totalPrayers:R,totalQuranPages:(A==null?void 0:A.reduce((te,ne)=>te+(ne.pages_read||0),0))||0,totalHabits:U,completedSemesters:re,totalExams:(ce==null?void 0:ce.length)||0,averageSleepHours:J!=null&&J.length?ge/J.length:0,averageStudyHours:k!=null&&k.length?he/k.length:0,prayerCompletionRate:R?q/R*100:0,habitCompletionRate:U?j/U*100:0})}l(D)}catch(O){console.error("Error loading user stats:",O)}},F=async()=>{const O={totalUsers:a.length,activeUsers:a.filter(se=>{const D=new Date(se.last_sign_in_at||se.created_at),B=new Date;return B.setDate(B.getDate()-30),D>B}).length,newUsersThisMonth:a.filter(se=>{const D=new Date(se.created_at),B=new Date;return B.setDate(1),B.setHours(0,0,0,0),D>=B}).length,averageSleepHours:0,averageStudyHours:0,averagePrayerCompletion:0,averageHabitCompletion:0,topPerformingUsers:[]};i.length>0&&(O.averageSleepHours=i.reduce((se,D)=>se+D.averageSleepHours,0)/i.length,O.averageStudyHours=i.reduce((se,D)=>se+D.averageStudyHours,0)/i.length,O.averagePrayerCompletion=i.reduce((se,D)=>se+D.prayerCompletionRate,0)/i.length,O.averageHabitCompletion=i.reduce((se,D)=>se+D.habitCompletionRate,0)/i.length,O.topPerformingUsers=i.sort((se,D)=>{const B=se.totalSleepSessions+se.totalStudySessions+se.totalPrayers+se.totalHabits;return D.totalSleepSessions+D.totalStudySessions+D.totalPrayers+D.totalHabits-B}).slice(0,5)),d(O)},Z=[...i.filter(O=>{const se=O.fullName.toLowerCase().includes(x.toLowerCase())||O.email.toLowerCase().includes(x.toLowerCase());if(y==="active"){const D=new Date(O.lastActive),B=new Date;return B.setDate(B.getDate()-30),se&&D>B}else if(y==="inactive"){const D=new Date(O.lastActive),B=new Date;return B.setDate(B.getDate()-30),se&&D<=B}return se})].sort((O,se)=>{switch(g){case"name":return O.fullName.localeCompare(se.fullName);case"joinDate":return new Date(se.joinDate).getTime()-new Date(O.joinDate).getTime();case"lastActive":return new Date(se.lastActive).getTime()-new Date(O.lastActive).getTime();case"activity":const D=O.totalSleepSessions+O.totalStudySessions+O.totalPrayers+O.totalHabits;return se.totalSleepSessions+se.totalStudySessions+se.totalPrayers+se.totalHabits-D;default:return 0}});return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ri,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Panel"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor and manage user data"})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("button",{onClick:T,className:"flex items-center px-3 py-2 bg-gray-600 text-white rounded-md text-sm font-medium hover:bg-gray-700 transition-colors",children:[s.jsx(di,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsxs("button",{onClick:()=>w("overview"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${p==="overview"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(Ky,{className:"w-4 h-4 mr-2 inline"}),"Overview"]}),s.jsxs("button",{onClick:()=>w("users"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${p==="users"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(ui,{className:"w-4 h-4 mr-2 inline"}),"Users"]}),h&&s.jsxs("button",{onClick:()=>w("details"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${p==="details"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx(tr,{className:"w-4 h-4 mr-2 inline"}),"User Details"]})]})}),c?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):s.jsxs(s.Fragment,{children:[p==="overview"&&o&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ui,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.totalUsers})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Bh,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.activeUsers})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(os,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"New This Month"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.newUsersThisMonth})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(gt,{className:"w-8 h-8 text-orange-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg. Sleep Hours"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.averageSleepHours.toFixed(1)})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Average Performance"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Study Hours"}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[o.averageStudyHours.toFixed(1),"h"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(o.averageStudyHours/8*100,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Prayer Completion"}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[o.averagePrayerCompletion.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${o.averagePrayerCompletion}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Habit Completion"}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[o.averageHabitCompletion.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${o.averageHabitCompletion}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Performing Users"}),s.jsx("div",{className:"space-y-3",children:o.topPerformingUsers.map((O,se)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:se+1})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:O.fullName}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:O.email})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[O.totalSleepSessions+O.totalStudySessions+O.totalPrayers+O.totalHabits," activities"]}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[O.completedSemesters," semesters completed"]})]})]},O.userId))})]})]})]}),p==="users"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(up,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:x,onChange:O=>_(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:y,onChange:O=>m(O.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Users"}),s.jsx("option",{value:"active",children:"Active Users"}),s.jsx("option",{value:"inactive",children:"Inactive Users"})]}),s.jsxs("select",{value:g,onChange:O=>v(O.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"name",children:"Sort by Name"}),s.jsx("option",{value:"joinDate",children:"Sort by Join Date"}),s.jsx("option",{value:"lastActive",children:"Sort by Last Active"}),s.jsx("option",{value:"activity",children:"Sort by Activity"})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Join Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Sleep Sessions"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Study Sessions"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prayers"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Habits"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Semesters"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Z.map(O=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:O.fullName.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:O.fullName}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:O.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(O.joinDate).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:O.totalSleepSessions}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:O.totalStudySessions}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:O.totalPrayers}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:O.totalHabits}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[O.completedSemesters,"/8"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("button",{onClick:()=>{f(O.userId),w("details")},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:s.jsx(Hh,{className:"w-4 h-4"})})})]},O.userId))})]})})})]}),p==="details"&&h&&s.jsx(Ap,{userId:h,onBack:()=>w("users")})]})]})})},Ap=({userId:e,onBack:t})=>{var c,u;const[r,a]=b.useState(null),[n,i]=b.useState(null),[l,o]=b.useState(!0);b.useEffect(()=>{d()},[e]);const d=async()=>{o(!0);try{const{data:h,error:f}=await E.from("profiles").select("*").eq("id",e).single();if(f)throw f;a(h);const[p,w,x,_,y,m,g]=await Promise.all([E.from("sleep_records").select("*").eq("user_id",e),E.from("study_sessions").select("*").eq("user_id",e),E.from("prayer_records").select("*").eq("user_id",e),E.from("quran_records").select("*").eq("user_id",e),E.from("habits").select("*").eq("user_id",e),E.from("semesters").select("*").eq("user_id",e),E.from("exams").select("*").eq("user_id",e)]);i({sleep:p.data||[],study:w.data||[],prayer:x.data||[],quran:_.data||[],habits:y.data||[],semesters:m.data||[],exams:g.data||[]})}catch(h){console.error("Error loading user details:",h)}finally{o(!1)}};return l?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):!r||!n?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"User not found"})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:t,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:" Back"}),s.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.full_name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.full_name}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r.email})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Joined"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(r.created_at).toLocaleDateString()})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(_t,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sleep Sessions"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.sleep.length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ze,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Study Sessions"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.study.length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Bh,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Prayers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.prayer.length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(gt,{className:"w-8 h-8 text-orange-600"}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Habits"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.habits.length})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Institution:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.institution||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Department:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.department||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Student ID:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.student_id||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Phone:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.phone||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Mode:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:((c=r.unit_mode)==null?void 0:c.toUpperCase())||"Not specified"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Theme:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:r.theme_preference||"Not specified"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Academic Progress"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Completed Semesters:"}),s.jsxs("span",{className:"text-gray-900 dark:text-white",children:[n.semesters.filter(h=>h.status==="completed").length,"/8"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Active Semester:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:((u=n.semesters.find(h=>h.status==="active"))==null?void 0:u.semester_number)||"None"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Exams:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:n.exams.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Quran Pages Read:"}),s.jsx("span",{className:"text-gray-900 dark:text-white",children:n.quran.reduce((h,f)=>h+(f.pages_read||0),0)})]})]})]})]})]})},Op=()=>{const{user:e}=Ke(),{isAdmin:t,loading:r}=en(),[a,n]=b.useState(!1),[i,l]=b.useState(""),o=async()=>{if(e){n(!0),l("");try{const{error:d}=await E.from("profiles").update({role:"admin"}).eq("id",e.id);if(d)throw d;l("Success! You are now an admin. Please refresh the page.")}catch(d){console.error("Error setting up admin:",d),l("Error setting up admin. Please try again.")}finally{n(!1)}}};return r?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})})}):t?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Mr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"You're Already an Admin!"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You have admin privileges. You can access the admin panel from the sidebar."})]})})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ri,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Admin Setup"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"This will make your current user account an administrator with access to the admin panel."}),i&&s.jsx("div",{className:`mb-6 p-4 rounded-lg ${i.includes("Success")?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200"}`,children:s.jsxs("div",{className:"flex items-center",children:[i.includes("Success")?s.jsx(Mr,{className:"w-5 h-5 mr-2"}):s.jsx(Ts,{className:"w-5 h-5 mr-2"}),i]})}),s.jsx("button",{onClick:o,disabled:a,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:a?"Setting up...":"Make Me Admin"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:" Only do this if you want to be an administrator. This action cannot be undone easily."})]})})})})},Mp=()=>{const{user:e}=Ke(),[t,r]=b.useState(!1),[a,n]=b.useState(""),[i,l]=b.useState(!1),[o,d]=b.useState(!1);b.useEffect(()=>{c()},[e]);const c=async()=>{if(e)try{const{data:f,error:p}=await E.from("profiles").select("*").eq("id",e.id).single();if(p&&p.code!=="PGRST116"){console.error("Error checking profile:",p);return}l(!!f),d((f==null?void 0:f.role)==="admin")}catch(f){console.error("Error checking profile status:",f)}},u=async()=>{var f;if(e){r(!0),n("");try{const{error:p}=await E.from("profiles").insert({id:e.id,email:e.email,full_name:((f=e.user_metadata)==null?void 0:f.full_name)||e.email,created_at:e.created_at,updated_at:e.updated_at,role:"user"});if(p)throw p;n("Profile created successfully!"),l(!0)}catch(p){console.error("Error creating profile:",p),n("Error creating profile. Please try again.")}finally{r(!1)}}},h=async()=>{if(e){r(!0),n("");try{const{error:f}=await E.from("profiles").update({role:"admin"}).eq("id",e.id);if(f)throw f;n("You are now an admin! Please refresh the page."),d(!0)}catch(f){console.error("Error making admin:",f),n("Error making admin. Please try again.")}finally{r(!1)}}};return e?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(gp,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Profile Sync"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Sync your auth user with the profiles table"}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6 text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Current User:"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Email: ",e.email]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",e.id]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Profile Exists: ",i?" Yes":" No"]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Admin Status: ",o?" Admin":" User"]})]}),s.jsxs("div",{className:"space-y-4",children:[!i&&s.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:t?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(di,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Profile..."]}):"Create Profile"}),i&&!o&&s.jsx("button",{onClick:h,disabled:t,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:t?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(di,{className:"w-4 h-4 mr-2 animate-spin"}),"Making Admin..."]}):"Make Me Admin"}),i&&s.jsx("button",{onClick:c,className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Refresh Status"})]}),a&&s.jsx("div",{className:`mt-6 p-4 rounded-lg ${a.includes("successfully")||a.includes("admin")?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200"}`,children:s.jsxs("div",{className:"flex items-center",children:[a.includes("successfully")||a.includes("admin")?s.jsx(Mr,{className:"w-5 h-5 mr-2"}):s.jsx(Ts,{className:"w-5 h-5 mr-2"}),a]})}),s.jsxs("div",{className:"mt-6 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx("p",{className:"mb-2",children:"Steps to become admin:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[s.jsx("li",{children:"Create your profile (if it doesn't exist)"}),s.jsx("li",{children:"Make yourself an admin"}),s.jsx("li",{children:"Refresh the page to see admin panel in sidebar"})]})]})]})})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please log in first."})})})})})},Rp=()=>{const{user:e}=Ke(),{isAdmin:t,loading:r,refresh:a}=en(),[n,i]=b.useState(null),[l,o]=b.useState(!1),d=async()=>{if(e){o(!0);try{const{data:u,error:h}=await E.from("profiles").select("*").eq("id",e.id).single(),{data:f,error:p}=await E.auth.getUser();i({user:{id:e.id,email:e.email,metadata:e.user_metadata},profile:{exists:!!u,data:u,error:h},auth:{data:f,error:p},adminStatus:{isAdmin:t,loading:r}})}catch(u){console.error("Error checking database status:",u),i({error:u instanceof Error?u.message:"Unknown error"})}finally{o(!1)}}},c=()=>{a(),setTimeout(d,1e3)};return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Zy,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Admin Debug"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Debug admin status and database connection"}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6 text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Current Status:"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["User ID: ",s.jsx("span",{className:"font-mono",children:(e==null?void 0:e.id)||"Not logged in"})]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Email: ",s.jsx("span",{className:"font-mono",children:(e==null?void 0:e.email)||"Not logged in"})]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Admin Status:",r?s.jsx("span",{className:"text-yellow-600",children:" Loading..."}):t?s.jsx("span",{className:"text-green-600",children:"  Admin"}):s.jsx("span",{className:"text-red-600",children:"  Not Admin"})]})]})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsx("button",{onClick:d,disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:l?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(di,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking Database..."]}):"Check Database Status"}),s.jsx("button",{onClick:c,className:"w-full bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Force Refresh Admin Status"})]}),n&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Debug Information:"}),s.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 overflow-auto max-h-96",children:JSON.stringify(n,null,2)})]}),s.jsxs("div",{className:"mt-6 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx("p",{className:"mb-2",children:"If you made yourself admin in the database:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[s.jsx("li",{children:'Click "Force Refresh Admin Status"'}),s.jsx("li",{children:'Check if "Admin Status" shows  Admin'}),s.jsx("li",{children:"If not, try refreshing the page (Ctrl+F5)"}),s.jsx("li",{children:"Check the debug info for any errors"})]})]})]})})})})},$p=e=>{const t=Math.ceil(e/2),r=e%2===1;return`${t===1?"1st":t===2?"2nd":t===3?"3rd":`${t}th`} Semester ${r?"Odd":"Even"}`};function oa(e){const t=e.match(/(\d{1,2})[.:](\d{2})-(\d{1,2})[.:](\d{2})/);if(!t)return{time:"",end_time:""};const[,r,a,n,i]=t;return{time:`${r.padStart(2,"0")}:${a}:00`,end_time:`${n.padStart(2,"0")}:${i}:00`}}function Ip(){return new Date().toISOString().split("T")[0]}async function Lp(e,t,r){const a=Ip(),n=[];for(const i of e)i.date&&i.date<a&&(t.some(o=>o.subject===i.subject&&o.date===i.date)||n.push({subject:i.subject,date:i.date}));n.length>0&&r&&await Promise.all(n.map(async({subject:i,date:l})=>{await E.from("attendance_records").upsert({user_id:r.id,subject:i,date:l,status:"present"},{onConflict:"user_id,subject,date"})}))}const Up=()=>{const{user:e}=Ke(),[t,r]=b.useState([]),[a,n]=b.useState([]),[i,l]=b.useState("Saturday"),[o,d]=b.useState("routine"),[c,u]=b.useState(null),[h,f]=b.useState([]),[p,w]=b.useState(!1),[x,_]=b.useState(null),[y,m]=b.useState(!1),[g,v]=b.useState(null),[T,N]=b.useState(""),[P,F]=b.useState(""),[ae,Z]=b.useState(""),O=["Saturday","Sunday","Monday","Tuesday","Wednesday"],se=[{label:"8.00-8.50",key:"8.00-8.50"},{label:"8.50-9.40",key:"8.50-9.40"},{label:"9.40-10.30",key:"9.40-10.30"},{label:"10.30-10.50",key:"break",special:"BREAK"},{label:"10.50-11.40",key:"10.50-11.40"},{label:"11.40-12.30",key:"11.40-12.30"},{label:"12.30-1.20",key:"12.30-1.20"},{label:"1.20",key:"class-test",special:"CLASS TEST"},{label:"2.30-5.00",key:"2.30-5.00"}];b.useEffect(()=>{e&&(D(),B(),J())},[e]),b.useEffect(()=>{e&&t.length&&a.length>=0&&Lp(t,a,e).then(()=>B())},[e,t,o]);const D=async()=>{if(!e)return;const{data:R,error:j}=await E.from("class_schedules").select("*").eq("user_id",e.id).order("time");R&&r(R)},B=async()=>{if(!e)return;const{data:R,error:j}=await E.from("attendance_records").select("*").eq("user_id",e.id);R&&n(R)},J=async()=>{if(!e)return;const{data:R,error:j}=await E.from("semesters").select("*").eq("user_id",e.id).eq("status","active").maybeSingle();if(R){u(R);const{data:U,error:re}=await E.from("academic_marks").select("*").eq("user_id",e.id).eq("semester_id",R.id);U&&f(U)}},k=R=>t.filter(j=>j.day===R).sort((j,U)=>j.time.localeCompare(U.time)),z=()=>{const R=new Date,j=R.toLocaleDateString("en-US",{weekday:"long"}),U=R.toTimeString().slice(0,5);return O.includes(j)?t.find(re=>re.day===j&&re.time<=U&&re.endTime>=U):null},A=()=>{const R=new Date,j=R.toLocaleDateString("en-US",{weekday:"long"}),U=R.toTimeString().slice(0,5);if(!O.includes(j)){const re=O.find(ne=>{const $=O.indexOf(ne),W=O.indexOf(j);return $>W});return re?k(re)[0]:k("Saturday")[0]}return t.find(re=>re.day===j&&re.time>U)};z(),A(),b.useEffect(()=>{const R=new Date().toLocaleDateString("en-US",{weekday:"long"});O.includes(R)&&l(R)},[]),(()=>{const R=new Date,j=R.toLocaleDateString("en-US",{weekday:"long"}),U=O.indexOf(i)-O.indexOf(j),re=new Date(R);return re.setDate(R.getDate()+U),re.toISOString().split("T")[0]})();const I=R=>{const j=a.filter(ue=>ue.subject===R),U=t.filter(ue=>ue.subject===R);let re=0,te=0,ne=0,$=0;const W=new Date,ee=new Date(W);ee.setDate(W.getDate()-ee.getDay()),U.forEach(ue=>{const Ae=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(ue.day);if(Ae===-1)return;const Fe=new Date(ee);Fe.setDate(ee.getDate()+Ae);const Je=Fe.toISOString().split("T")[0];re++;const xt=j.find(We=>We.date===Je);xt&&(xt.status==="present"?te++:xt.status==="absent"?ne++:xt.status==="cancelled"&&$++)});const X=re>0?Math.round(te/re*100):0;return{totalClasses:re,presentClasses:te,absentClasses:ne,cancelledClasses:$,percentage:X}},G=async()=>{if(!e||!x||!g)return;const R=oa(x.time);await E.from("class_schedules").insert({user_id:e.id,subject:g.subject,course_code:g.course_code,time:R.time,end_time:T||R.end_time,location:P,instructor:ae,day:x.day,color:""}),w(!1),_(null),v(null),N(""),F(""),Z(""),D()},ce=["bg-blue-500","bg-emerald-500","bg-orange-500","bg-purple-500","bg-pink-500","bg-teal-500","bg-yellow-500","bg-red-500","bg-indigo-500","bg-cyan-500"];function ge(R){let j=0;for(let U=0;U<R.length;U++)j=R.charCodeAt(U)+((j<<5)-j);return ce[Math.abs(j)%ce.length]}const he=["present","absent","cancelled"],q=async(R,j,U)=>{if(!e||!j)return;if(!he.includes(R)){console.error("Invalid attendance status:",R);return}const re=a.find(te=>te.subject===j.subject&&te.date===U);if(re){const{error:te}=await E.from("attendance_records").update({status:R}).eq("id",re.id);te&&console.error("Attendance update error:",te)}else{const{error:te}=await E.from("attendance_records").insert({user_id:e.id,subject:j.subject,date:U,status:R});te&&console.error("Attendance insert error:",te)}B()};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:o==="routine"?"Class Routine":"Attendance"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="routine"?"bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("routine"),children:"Routine"}),s.jsx("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="attendance"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("attendance"),children:"Attendance"})]})]}),o==="routine"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Weekly Schedule"}),o==="routine"&&s.jsx("button",{className:`p-2 rounded-full border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ${y?"bg-emerald-600 text-white":"bg-transparent text-gray-500 dark:text-gray-400"}`,title:y?"Disable Edit Mode":"Enable Edit Mode",onClick:()=>m(R=>!R),children:s.jsx(Zc,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:s.jsx("span",{children:new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:O.map(R=>{const j=k(R).length>0;return s.jsx("button",{onClick:()=>l(R),className:`px-4 py-2 rounded-lg transition-colors ${i===R?"bg-emerald-600 text-white":j?"border-2 border-emerald-500 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:R},R)})}),o==="routine"&&s.jsxs(s.Fragment,{children:[k(i).length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ze,{className:"w-12 h-12 mx-auto mb-2 text-gray-300 dark:text-gray-600"}),s.jsxs("p",{children:["No classes scheduled for ",i]}),s.jsx("p",{className:"text-sm mt-1",children:"Enjoy your free day!"})]}),s.jsx("div",{className:"space-y-3",children:se.map(R=>{if(R.special)return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("div",{className:"font-semibold text-yellow-700 dark:text-yellow-300",children:R.special}),s.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:R.label})]},R.key);const j=oa(R.label).time,U=k(i).find(ue=>ue.time===j),re=new Date,te=re.toLocaleDateString("en-US",{weekday:"long"}),ne=O.indexOf(i)-O.indexOf(te),$=new Date(re);$.setDate(re.getDate()+ne);const W=$.toISOString().split("T")[0],ee=U&&a.find(ue=>ue.subject===U.subject&&ue.date===W),X=ee?ee.status:void 0;return s.jsxs("div",{className:`flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg ${U?"hover:bg-gray-100 dark:hover:bg-gray-600":y?"hover:bg-emerald-50 dark:hover:bg-emerald-900/30 cursor-pointer border-2 border-dashed border-emerald-300 dark:border-emerald-700":""} transition-colors`,onClick:!U&&y?()=>{w(!0),_({day:i,time:R.label})}:void 0,children:[s.jsx("div",{children:U?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold text-white ${ge(U.course_code||"")}`,children:U.course_code}),s.jsx("span",{className:"font-medium text-gray-800 dark:text-white text-base",children:U.subject})]}),s.jsxs("div",{className:"flex items-center justify-end mt-1 space-x-4",children:[s.jsxs("span",{className:"flex items-center text-xs text-gray-600 dark:text-gray-300 font-medium",children:[s.jsx(tr,{className:"w-3 h-3 mr-1"}),U.instructor]}),s.jsxs("span",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 font-medium",children:[s.jsx(np,{className:"w-3 h-3 mr-1"}),U.location]})]})]}):y?s.jsxs("span",{className:"text-emerald-600 dark:text-emerald-300 font-semibold flex items-center",children:[s.jsx(as,{className:"w-4 h-4 mr-1"})," Add"]}):s.jsx("div",{className:"text-gray-400 italic",children:"No class"})}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:R.label}),s.jsxs("div",{className:"flex space-x-2 mt-2",children:[s.jsxs("button",{className:`flex items-center px-2 py-1 rounded text-xs font-semibold transition-colors ${X==="present"?"bg-emerald-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/30"}`,onClick:()=>q("present",U,W),children:[s.jsx(Mr,{className:"w-4 h-4 mr-1"})," Present"]}),s.jsxs("button",{className:`flex items-center px-2 py-1 rounded text-xs font-semibold transition-colors ${X==="absent"?"bg-red-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-900/30"}`,onClick:()=>q("absent",U,W),children:[s.jsx(xp,{className:"w-4 h-4 mr-1"})," Absent"]}),s.jsxs("button",{className:`flex items-center px-2 py-1 rounded text-xs font-semibold transition-colors ${X==="cancelled"?"bg-gray-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-800"}`,onClick:()=>q("cancelled",U,W),children:[s.jsx(Vy,{className:"w-4 h-4 mr-1"})," Cancelled"]})]}),y&&U&&s.jsxs("div",{className:"flex space-x-2 ml-2",children:[s.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:()=>{w(!0),_({day:i,time:R.label}),v(U),N(U.endTime),F(U.location),Z(U.instructor)},title:"Edit class",children:s.jsx(Zc,{className:"w-4 h-4"})}),s.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:async()=>{window.confirm("Delete this class?")&&(await E.from("class_schedules").delete().eq("id",U.id),D())},title:"Delete class",children:s.jsx(Me,{className:"w-4 h-4"})})]})]},R.key)})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Weekly Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t.length}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Classes"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:new Set(t.map(R=>R.subject)).size}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Subjects"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[t.length*1.5,"h"]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Weekly Hours"})]})]})]}),s.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-4 border border-emerald-200 dark:border-emerald-800",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-emerald-700 dark:text-emerald-300",children:[s.jsx(os,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Islamic Academic Week"})]}),s.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 mt-1",children:"Classes run from Saturday to Wednesday. Thursday and Friday are weekend days for rest and worship."})]})]}),o==="attendance"&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Attendance"}),s.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:c&&s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:$p(c.semester_number)})})]}),s.jsx("div",{className:"overflow-x-auto rounded-xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 mt-4",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800",children:[s.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Course Code"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Subject"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Time"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Present/Total"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Attendance %"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Marks"})]})}),s.jsx("tbody",{children:h.map(R=>{const j=I(R.subject);let U=0;j.percentage>=90?U=10:j.percentage>=85?U=9:j.percentage>=80&&(U=8);const re=a.filter(ne=>ne.subject===R.subject&&ne.status==="present");let te=0;return re.forEach(ne=>{const $=new Date(ne.date).toLocaleDateString("en-US",{weekday:"long"});t.filter(ee=>ee.subject===R.subject&&ee.day===$).forEach(ee=>{const X=ee.endTime||ee.end_time;if(!ee.time||!X)return;console.log("Class:",ee.subject,ee.time,X);const[ue,Ae]=ee.time.split(":"),[Fe,Je]=X.split(":");let xt=parseInt(ue)*60+parseInt(Ae),We=parseInt(Fe),dt=parseInt(Je);parseInt(ue)===12&&We===1&&(We=13);let be=We*60+dt;be<xt&&(be+=24*60),te+=(be-xt)/60})}),s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:R.course_code}),s.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-100",children:R.subject}),s.jsx("td",{className:"px-4 py-2 text-gray-700 dark:text-gray-300",children:te>0?`${te.toFixed(1)}h`:"0h"}),s.jsxs("td",{className:"px-4 py-2 text-center text-sm text-gray-700 dark:text-gray-300",children:[j.presentClasses,"/",j.totalClasses]}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsxs("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${j.percentage>=75?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":j.percentage>=50?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-200":"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300"}`,children:[j.percentage,"%"]})}),s.jsx("td",{className:"px-4 py-2 text-center text-sm text-gray-700 dark:text-gray-300",children:U})]},R.id)})})]})})]}),p&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-xl p-6 w-full max-w-md relative",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:["Add Class to ",x==null?void 0:x.day," ",x==null?void 0:x.time]}),s.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>{w(!1),_(null),v(null)},children:s.jsx(Me,{className:"w-5 h-5"})}),g?s.jsxs("form",{className:"space-y-4",onSubmit:async R=>{R.preventDefault(),g?await E.from("class_schedules").update({end_time:T||oa(x.time).end_time,location:P,instructor:ae}).eq("id",g.id):await G(),w(!1),_(null),v(null),N(""),F(""),Z(""),D()},children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Start Time"}),s.jsx("input",{type:"text",className:"mt-1 px-3 py-2 w-full rounded bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100",value:oa(x.time).time,readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"End Time"}),s.jsx("input",{type:"text",className:"mt-1 px-3 py-2 w-full rounded bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100",value:T||oa(x.time).end_time,onChange:R=>N(R.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location"}),s.jsx("input",{type:"text",className:"mt-1 px-3 py-2 w-full rounded bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100",value:P,onChange:R=>F(R.target.value),placeholder:"e.g. Room 101"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Instructor"}),s.jsx("input",{type:"text",className:"mt-1 px-3 py-2 w-full rounded bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100",value:ae,onChange:R=>Z(R.target.value),placeholder:"e.g. Dr. Ahmed"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200",onClick:()=>{v(null)},children:"Back"}),s.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-emerald-600 text-white font-semibold hover:bg-emerald-700",children:"Add Class"})]})]}):s.jsx("div",{className:"space-y-2",children:h.length===0?s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No courses available for this semester."}):h.map(R=>s.jsxs("button",{className:"w-full text-left px-4 py-2 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-800/40 text-gray-800 dark:text-gray-100 font-medium",onClick:()=>v(R),children:[R.subject," ",s.jsx("span",{className:"text-xs text-gray-500 ml-2",children:R.course_code})]},R.id))})]})})]})},zp=()=>{const{user:e,loading:t}=Ke(),{isRunning:r,elapsedTime:a,currentSubject:n}=Fh(),[i,l]=b.useState("dashboard"),[o,d]=b.useState(!1);if(t)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Loading..."})});if(!e)return s.jsx(bp,{});const c=()=>{switch(i){case"dashboard":return s.jsx(eu,{setActiveTab:l});case"study":return s.jsx(kp,{});case"prayer":return s.jsx(jp,{});case"quran":return s.jsx(Np,{});case"habits":return s.jsx(_p,{});case"exam":return s.jsx(Sp,{});case"routine":return s.jsx(Up,{});case"sleep":return s.jsx(Cp,{});case"achievements":return s.jsx(Ep,{});case"academic":return s.jsx(Pp,{});case"profile":return s.jsx(Tp,{});case"admin":return s.jsx(Dp,{});case"admin-setup":return s.jsx(Op,{});case"profile-sync":return s.jsx(Mp,{});case"admin-debug":return s.jsx(Rp,{});default:return s.jsx(eu,{setActiveTab:l})}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 dark:from-gray-900 dark:to-emerald-900 relative",children:[s.jsx(yp,{}),s.jsx(vp,{isRunning:r,elapsedTime:a,subject:n}),s.jsx(pp,{activeTab:i,setActiveTab:l,isOpen:o,setIsOpen:d}),s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"hidden lg:block",children:s.jsx(wp,{activeTab:i,setActiveTab:l})}),s.jsx("main",{className:"flex-1 lg:ml-64",children:s.jsx("div",{className:"p-4 lg:p-6 pt-20 lg:pt-6 pb-20 lg:pb-6",children:c()})})]})]})};function Fp(){return s.jsx(By,{children:s.jsx(qy,{children:s.jsx(Hy,{children:s.jsx(zp,{})})})})}yl.createRoot(document.getElementById("root")).render(s.jsx(So.StrictMode,{children:s.jsx(Fp,{})}));
